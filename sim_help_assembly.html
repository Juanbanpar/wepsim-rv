<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang=es xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
	<meta charset="UTF-8">
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <style type="text/css">
/*<![CDATA[*/
    :link { color: #0563C1 }
    :visited { color: #954F72 }
    b.cleanuphtml-3 {font-style: italic}
    p.cleanuphtml-2 {text-align: center}
    a.cleanuphtml-1 {font-weight: bold}
    /*]]>*/
    </style>
  <!-- Clean HTML generated by http://www.cleanuphtml.com/ -->
	<meta name="Generator" content="Cleanup HTML"></head>
  <body>
    <div class="WordSection1">
      <h2>
        <a name="_Toc438322851">Ensamblador en WepSIM</a>
      </h2>
      <p>
         
      </p>
      <p>
        El código en ensamblador se describe en un fichero de texto con una primera sección de datos (.data) y una segunda sección para el código (.text)<br />
        <br />
        En la sección de datos es posible definir las variables y constantes que se alojarán en el segmento de datos de la memoria principal. Dicha sección comienza con la directiva <i>.data</i>. Las
        directivas que permiten especificar los distintos tipos de datos que pueden definirse son:
      </p>
      <p>
        ·       <b>.ascii:</b> va seguida de la cadena de caracteres, instruyendo al ensamblador para crear una zona de memoria con datos, y almacenar en ella la cadena que se indique.
      </p>
      <p>
        ·       <b>.asciiz:</b> va seguida de la cadena de caracteres, instruyendo al ensamblador para crear una zona de memoria con datos, y almacenar en ella la cadena que se muestra terminado por
        un byte con valor cero.
      </p>
      <p>
        ·       <b>.byte:</b> va seguida de uno o más valores que formarán parte del valor de la variable. En caso de varios valores, dichos valores se separarán por coma. Para los valores se puede
        usar: <b>carácter, octal, hexadecimal y decimal</b>.
      </p>
      <p>
        ·       <b>.half:</b> va seguida de uno o más valores que formarán parte del valor de la variable. En caso de varios valores, dichos valores se separarán por coma.<br />
        Para los valores se puede usar: <b>octal, hexadecimal y decimal.</b>
      </p>
      <p>
        ·       <b>.word:</b> va seguida de uno o más valores que formarán parte del valor de la variable. En caso de varios valores, dichos valores se separarán por coma.<br />
        Para los valores se puede usar: <b>octal, hexadecimal y decimal.</b>
      </p>
      <p>
        ·       <b>.space:</b> va seguida del número de bytes, en formato decimal, que el usuario desea reservar en memoria.
      </p>
      <p>
        El formato de un valor de los tipos de datos comentados es:
      </p>
      <p>
        ·       <b>Cadena de caracteres:</b> secuencia de caracteres entre comillas dobles.<br />
        Por ejemplo: "hola 123\n"
      </p>
      <p>
        ·       <b>Carácter:</b> carácter entre comillas simples.<br />
        Por ejemplo: 'c'.
      </p>
      <p>
        ·       <b>Octal:</b> un número que comienza por cero y sus dígitos son menores que ocho. Por ejemplo: 012.
      </p>
      <p>
        ·       <b>Hexadecimal:</b> un número que comienza por el prefijo 0x y sus dígitos son del cero al nueve y las letras a, b, c, d, e y f.<br />
        Por ejemplo: 0x12.
      </p>
      <p>
        ·       <b>Decimal:</b> un número que no está en formato octal o hexadecimal con dígitos comprendidos entre el cero y el nueve (ambos incluidos).<br />
        Por ejemplo: 12.
      </p>
      <p>
        En la sección de código es posible definir las subrutinas que se alojarán en el segmento de código de la memoria principal. Dicha sección comienza con la directiva <i>.text</i>.
      </p>
      <p>
         
      </p>
      <p>
        Es posible usar comentarios de línea usando el carácter #<br />
        Todo lo que hay a continuación de este carácter hasta el final de línea será ignorado por el ensamblador.
      </p>
      <p>
        Un ejemplo programa sería:
      </p>
      <p>
        .data
      </p>
      <p>
                  age1:    .word   0x12345678, 20     
      </p>
      <p>
                  age2:    .word   20 , 10
      </p>
      <p>
                  resultado: .word 0
      </p>
      <p>
                  # 32-bit word initialized with decimal
      </p>
      <p>
                  texto: .ascii "Hola\t"
      </p>
      <p>
                  texto2: .asciiz "Hola\t"
      </p>
      <p>
                  hueco: .space 16
      </p>
      <p>
        .text
      </p>
      <p>
        .globl main
      </p>
      <p>
        main:  li $3 2
      </p>
      <p>
                   li $4 1
      </p>
      <p>
                   li $5 0<br />
        <br />
      </p>
      <p class="cleanuphtml-2">
        <a class="cleanuphtml-1" name="_Toc438322908">Figura</a> <b>19</b> <b>Ejemplo de secciones de dato y código en ensamblador para probar microcódigos</b><b><br />
        <br /></b>
      </p>
      <p>
        Un fichero de texto con las dos secciones antes comentadas (datos y código) se carga en la pantalla de Ensamblador. Para acceder a dicha pantalla se ha de ir al menú (parte superior derecha)
        e indicar la opción Assembly (véase la <b class="cleanuphtml-3">Figura 16</b>)<br />
        <br />
      </p>
      <p>
        <img src="sim_help_assembly_archivos/image001.png" height="50" width="92" alt="" /><img id="Imagen 3" src="sim_help_assembly_archivos/image002.jpg" height="467" width="893" alt="" name=
        "Imagen 3" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322909"></a><a class="cleanuphtml-1" name="_Toc434155501">Figura</a> <b>20</b> <b>Pantalla principal: opción de carga de código ensamblador</b>
      </p>
      <p>
        A continuación aparecerá una pantalla con un cuadro de texto que permite indicar el código en ensamblador. Es posible cargar un código existente usando el botón "Load" de la barra inferior,
        modificar un código anteriormente cargado o salvar el código actualmente en cargado con el botón "Save" de la barra inferior.
      </p>
      <p>
        Una vez se indique el código es preciso hacer clic en el botón "Compile" para pasar a binario y cargar en la memoria de principal el binario resultante, tal y como se muestra en la <b class=
        "cleanuphtml-3">Figura 21</b>. Si todo va bien preguntará si se desea reiniciar la CPU (véase la <b class="cleanuphtml-3">Figura 22</b>)
      </p>
      <p>
         
      </p>
      <p>
        <img id="Imagen 28" src="sim_help_assembly_archivos/image003.jpg" height="468" width="892" alt="" name="Imagen 28" /><img src="sim_help_assembly_archivos/image001.png" height="50" width="92" alt=
        "" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322910"></a><a class="cleanuphtml-1" name="_Ref434192102">Figura</a> <b>21</b> <b>Pantalla ensamblador: cuadro de texto con ensamblador a cargar</b><b><br />
        <br /></b>
      </p>
      <p>
        <img id="Imagen 29" src="sim_help_assembly_archivos/image004.jpg" height="465" width="893" alt="" name="Imagen 29" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322911"></a><a class="cleanuphtml-1" name="_Ref434192270">Figura</a> <b>22</b> <b>Pantalla ensamblador: opción de reiniciar la CPU</b>
      </p>
      <p>
        Una vez indicado que si se quiere resetear la CPU (salvo en algún extraño caso en el que se intente ejecutar un código modificado con el estado actual de la CPU definido por los valores en
        curso de los registros), se pasará a la pantalla indicada en la <b class="cleanuphtml-3">Figura 23</b>, donde se mostrará el contenido de la memoria principal en binario.
      </p>
      <p>
         
      </p>
      <p>
        <img id="Imagen 30" src="sim_help_assembly_archivos/image005.jpg" height="466" width="892" alt="" name="Imagen 30" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322912"></a><a class="cleanuphtml-1" name="_Ref434192450">Figura</a> <b>23</b> <b>Pantalla ensamblador: código finalmente compilado</b>
      </p>
      <p>
        <br />
        El siguiente paso es ir a la pantalla principal para ejecutar la combinación de <i>firmware</i> y ensamblador cargado, para lo que ha de pulsar el botón "Simulador" de la barra inferior.
      </p>
      <p>
         
      </p>
      <h2>
        <a name="_Toc438322852">Ejecución en WepSIM</a>
      </h2>
      <p>
         
      </p>
      <p>
        Estando en la pantalla principal es posible visualizar:
      </p>
      <p>
        ·       El contenido de la memoria de control (véase la <b>Figura <i>24</i></b>), con las señales que están asociadas a cada ciclo. Para ello ha de pulsar el botón "Control Memory" en la
        barra de botones situada en la parte superior derecha de la pantalla principal.<br />
        Se destaca las señales que en el presente ciclo de reloj están activadas en azul con letra algo más grande.<br />
        Se dispone de una barra de desplazamiento para poder inspeccionar todo el contenido de la memoria de control.
      </p>
      <p>
        ·       El contenido de la memoria principal (véase la <b class="cleanuphtml-3">Figura 25</b>), con las instrucciones en ensamblador a ejecutar. Para estas, es posible establecer un punto de
        ruptura haciendo clic en la columna <i>breakpoints</i>. Al establecer un punto de ruptura aparecerá un icono en dicha columna.
      </p>
      <p>
         
      </p>
      <p>
        <img id="Imagen 31" src="sim_help_assembly_archivos/image006.jpg" height="468" width="893" alt="" name="Imagen 31" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322913"></a><a class="cleanuphtml-1" name="_Ref434192973">Figura</a> <b>24</b> <b>Pantalla principal: visualización de la memoria de control</b>
      </p>
      <p>
         
      </p>
      <p>
         
      </p>
      <p>
        <img id="Imagen 33" src="sim_help_assembly_archivos/image007.jpg" height="467" width="892" alt="" name="Imagen 33" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322914"></a><a class="cleanuphtml-1" name="_Ref434193222">Figura</a> <b>25</b> <b>Pantalla principal: visualización del código en la memoria principal</b>
      </p>
      <p>
         
      </p>
      <p>
        Estando en la pantalla principal es posible ejecutar:
      </p>
      <p>
        ·       Microinstrucción a microinstrucción pulsando el botón "µInstrucción" (véase la <b class="cleanuphtml-3">Figura 26</b>), de forma que se pasará al siguiente ciclo de reloj y se
        generarán las señales de control asociadas.
      </p>
      <p>
        ·       Instrucción a instrucción pulsando el botón "Instrucción" (véase la <b class="cleanuphtml-3">Figura 26</b>) de forma que se generarán todos los ciclos de reloj asociados al
        microprograma de la instrucción, parando al principio del <i>fetch</i>.
      </p>
      <p>
         
      </p>
      <p>
        <img id="Imagen 35" src="sim_help_assembly_archivos/image008.jpg" height="468" width="894" alt="" name="Imagen 35" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322915"></a><a class="cleanuphtml-1" name="_Ref434193775">Figura</a> <b>26</b> <b>Pantalla principal: opciones para la ejecución</b>
      </p>
      <p>
        <br />
        Dando al botón "Registers" en la barra de botones situada en la parte superior derecha de la pantalla principal (véase la <b class="cleanuphtml-3">Figura 26</b>) es posible ver cómo los
        valores de los registros son modificados durante la ejecución.
      </p>
      <p>
        Es posible visualizar también la unidad de control como se muestra en la <b class="cleanuphtml-3">Figura 27</b>.
      </p>
      <p>
        <img id="Imagen 36" src="sim_help_assembly_archivos/image009.jpg" height="467" width="893" alt="" name="Imagen 36" />
      </p>
      <p class="cleanuphtml-2">
        <a name="_Toc438322916"></a><a class="cleanuphtml-1" name="_Ref434194139">Figura</a> <b>27</b> <b>Pantalla principal: visualización de la unidad de control</b>
      </p>
      <p>
        Así como también es posible reiniciar la ejecución haciendo clic al botón "Reset" situado en la barra de botones que aparece en la parte inferior de la pantalla.
      </p>
      <p>
         
      </p>
      <p>
         
      </p>
    </div>
  </body>
</html>

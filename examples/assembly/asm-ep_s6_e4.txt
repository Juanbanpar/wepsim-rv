
#
# WepSIM (https://wepsim.github.io/wepsim/)
#

.data
    msg:   .byte 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 1, 0, 1, 0, 1, 1, 1,  0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 0, 1, 0, 0, 0, 0,
                 0, 1, 0, 1, 0, 1, 0, 1,  0, 1, 0, 1, 0, 1, 0, 1,  0, 1, 0, 1, 0, 0, 0, 0,
                 0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 1, 1, 0, 0, 0, 0,
                 0, 1, 0, 1, 0, 1, 0, 1,  0, 1, 0, 0, 0, 1, 0, 0,  0, 0, 0, 1, 0, 0, 0, 0,
                 0, 1, 0, 1, 0, 1, 0, 1,  0, 1, 0, 0, 0, 1, 0, 0,  0, 1, 1, 1, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,

                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 1, 0, 0, 0, 0, 0,
                 0, 0, 0, 1, 0, 1, 0, 1,  0, 0, 0, 1, 0, 0, 0, 1,  0, 1, 1, 0, 0, 0, 0, 0,
                 0, 0, 1, 1, 0, 1, 0, 1,  0, 0, 1, 1, 0, 0, 1, 1,  0, 1, 1, 0, 0, 0, 0, 0,
                 0, 1, 0, 0, 0, 1, 0, 1,  0, 1, 0, 0, 0, 1, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 1, 1, 0, 1, 1, 1,  0, 1, 1, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,

                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0,

.text
    main:  la  $t8 msg
           # for (y=0; y<24; y++)
           li  $t7 1
           li  $t0 24
           li  $t1 0
   loop_y: beq $t1 $t0 end_y
           # for (x=0; x<24; x++)
           li  $t2 0
   loop_x: beq $t2 $t0 end_x
           lb   $t6 ($t8)
           addi $t8 $t8 1
           # m = <x|y|0|v>
           li   $t5 0
           or   $t5 $t5 $t2
           sll  $t5 $t5 8
           or   $t5 $t5 $t1
           sll  $t5 $t5 8
           or   $t5 $t5 $0
           sll  $t5 $t5 8
           or   $t5 $t5 $t6
           # out <x|y|0|v>
           out  $t5 0x3104
           # for (x...
           add  $t2 $t2 $t7
           b loop_x
    end_x: # for (y...
           add  $t1 $t1 $t7
           b loop_y
    end_y:
           # the end
           jr $ra


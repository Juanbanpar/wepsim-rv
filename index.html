<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>(ARCOS) WepSIM</title>

    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=yes, initial-scale=1, maximum-scale=2.2, minimum-scale=1, width=device-width">

    <script src="external/jquery.min.js"></script>
    <script src="external/jquery-ui.min.js"></script>
    <script>
        $(document).bind("mobileinit", function() {
            $.mobile.defaultPageTransition = "none";
            $.mobile.defaultDialogTransition = "none";
        });
    </script>
    <script src="external/jquery.mobile-1.4.5.min.js"></script>

    <link rel="stylesheet" href="external/jquery.mobile-1.4.5.min.css">
    <style>
    .ui-panel-inner {
        position: absolute;
        top: 1px;
        left: 0;
        right: 0;
        bottom: 0px;
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
    }

    textarea.ui-input-text { 
        height: inherit !important
    }

    @include media-breakpoint-only(sm) {
       .modal-lg { max-width: 95vw !important;  }
    }
    @include media-breakpoint-only(md) {
       .modal-lg { max-width: 90vw !important;  }
    }
    @include media-breakpoint-up(lg) {
       .modal-lg { max-width: 85vw !important;  }
    }
    @include media-breakpoint-up(xl) {
       .modal-lg { max-width: 80vw !important;  }
    }

    .modal-header {
	padding: 5 5 5 5 !important;
        background-color: #EEEEEE !important;
    }
    .modal-body {
	padding: 10 10 10 10 !important;
    }
    .modal-footer {
	padding: 8 8 8 8 !important;
        background-color: #EEEEEE !important;
    }

    .bootbox .modal-body {
        overflow: auto;
	-webkit-overflow-scrolling: touch;
    }
    .bootboxWidth {
        min-width: 85vw;
    }
    .bootboxShortHeight {
        max-height: 25vh;
    }
    .bootboxLargeHeight {
        max-height: 55vh;
    }

    div.ui-input-text, div.ui-slider { 
        margin: 0px 0px 0px 0px;
    }
    div.ui-slider-slider, input.ui-input-text, input.ui-slider-input {
        display: none !important;
    }
    div.ui-slider-slider, div.ui-slider-track {
        margin: 0 15px 0 15px !important;
    }

    .ui-icon-reset:after {
	background-image: url("images/reset.svg");
        background-repeat: no-repeat;
        background-size: 15px 15px;
    }

    /* http://stackoverflow.com/questions/10814178/css-performance-relative-to-translatez0 */
    .trick-hwacceleration {
        -webkit-transform: translatez(0);
        -moz-transform: translatez(0);
        -ms-transform: translatez(0);
        -o-transform: translatez(0);
        transform: translatez(0);
    }

    /* https://github.com/nathancahill/Split.js */
    .gutter.gutter-horizontal {
        background-color: #F5F5F5;
        cursor: ew-resize;
    }

    .tokenfield .token .token-label {
        max-width: none!important;
    }

    .no-text-shadow {
        -webkit-text-shadow: none !important;
        text-shadow: none !important;
    }

    .ui-helper-hidden-accessible {
        display: none;
    }
    
    // bootbox for bootstrap 4 trick
    .bootbox .modal-header h5 {
	 order: 0;
    }
    .bootbox .modal-header button {
	 order: 1;
    }
    </style>

    <link async href="min.external.css" rel="stylesheet">
    <script      src="min.external.js"></script>

    <script src="min.sim_all.js"></script>
    <script src="min.wepsim_web.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-80849772-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">

    <!-- PWA -->
    <link  rel="manifest" href="./docs/manifest.json">

    <meta name="apple-mobile-web-app-capable"          content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title"            content="WepSIM 1.9.0">
    <meta name="msapplication-TileImage"               content="images/arcos.svg">
    <meta name="msapplication-TileColor"               content="#2F3BA2">
    <link  rel="apple-touch-icon" href="images/arcos.svg">

    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="images/wepsim.png" 
          media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
</head>


<body>

<div data-role="page" id="main1">

	<div data-role="header" data-position="fixed" data-disable-page-zoom="false" data-theme="a">
                <span class="ui-title">WepSIM <span class="badge badge-pill badge-secondary"><div class="wsversion">X</div></span> / Simulator</span>
		<div id="action_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-left">
		    <a data-toggle="collapse" href="#collapseA1"><img alt="UC3M logo" src="images/uc3m.png" style="height:22pt; padding:8 0 0 0;"></a>
		</div>
                <div id="action_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
		    <a href="#" data-target="#about2" data-toggle="modal" data-position-to="window"><img alt="ARCOS logo" src="images/arcos.svg" height="40"></a>
                </div>
	</div><!-- /header -->


        <div role="main" class="ui-content container-fluid" style="padding:8px 8px 8px 8px">

            <div class="row collapse show" id="collapseA1" style="margin:1px">

                    <div class="col-sm-3 col-md-2" style="padding-right:0;">
			    <form id="slider2f" class="full-width-slider col my-1" style="margin:0px; padding:0px;">
				 <input aria-label="Show CPU/CU" type="range" name="slider2b" id="slider2b" 
					min="0" max="12" value="7" step="1"
				        data-show-value="false"
                                        onchange="set_ab_size('#eltos_cpu_a', '#eltos_cpu_b', this.value);
					          set_cfg('CPUCU_size', this.value); 
                                                  save_cfg();" 
                                        style="display:none;">
			    </form>
                    </div>

		    <div class="w-100 d-xs-block d-sm-none"></div>

                    <div class="col-sm">
                    <div class="row">
		        <button class="btn btn-light ui-shadow col my-1 mr-2" data-role="none"
		                style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
                                data-toggle="modal" data-target="#confighw"><b><span class="d-none d-sm-inline-flex"
				>Hw. cfg.</span><span class="d-sm-none">Hw.cfg.</span></b></button>
		        <button class="btn btn-light ui-shadow col my-1" data-role="none"
		                style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
                                data-toggle="modal" data-target="#config2"><b><span class="d-none d-sm-inline-flex"
				>Configuration</span><span class="d-sm-none">Cfg.</span></b></button>
		        <button class="btn btn-light ui-shadow col my-1" data-role="none"
			        onclick="$.mobile.pageContainer.pagecontainer('change','#main3');"
		                style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				><b><span class="d-none d-sm-inline-flex">MicroCode</span><span class="d-sm-none">&#181;code</span></b></button>
		        <button class="btn btn-light ui-shadow col my-1 mr-2" data-role="none"
			        onclick="$.mobile.pageContainer.pagecontainer('change','#main4');"
		                style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				><b><span class="d-none d-sm-inline-flex">Assembly</span><span class="d-sm-none">Asm.</span></b></button>

			<div class="w-100 d-block d-sm-none"></div>

		        <button class="btn btn-light ui-shadow col my-1" data-role="none"
		                style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
                                onclick="wepsim_open_examples_index(false);"><b>Examples</b></button>
		        <button class="btn btn-light ui-shadow col my-1" data-role="none"
		                style="border-width:1 1 1 1px; border-color:#CCCCCC; 
                                       background-color:#D4DB17;"
		                onclick="wepsim_open_help_index();
                                         wepsim_help_refresh();"><b>Help</b></button>
			<select name="select4" id="select4" class="form-control ui-shadow col my-1"
				aria-label="Execution mode" data-role="none"
				onchange="var opt = $(this).find('option:selected');
					  var optValue = opt.val();
					  set_cfg('ws_mode',optValue); 
					  save_cfg();
                                          wepsim_change_mode(optValue, '#select4') ;
					  return false;">
				<option value="intro"   >Welcome...</option>
				<option value="tutorial">Instructive</option>
				<option value="wepsim"  >WepSIM (EP)</option>
				<option value="wepmips" >WepMIPS</option>
			</select>
                    </div>
                    </div>

		    <div class="w-100 d-xs-block d-sm-none"></div>

                    <div class="col-sm-3 col-md-2" style="padding-left:0;">
			    <form id="slider2f" class="full-width-slider col my-1" style="margin:0px; padding:0px;">
				 <input aria-label="Show Main/Info" type="range" name="slider2a" id="slider2a" 
					min="0" max="12" value="7" step="1"
				        data-show-value="false"
                                        onchange="set_ab_size('#col1', '#col2', this.value);
					          set_cfg('C1C2_size', this.value);
                                                  save_cfg();"
                                        style="display:none;">
			    </form>
                    </div>

            </div>

            <div class="row">

                <div id="col1" class="" style="padding:12px 0px 0px 16px !important;">

                      <!-- Nav tabs -->
		      <ul class="nav nav-tabs nav-justified nav-tabs">
		          <li class="nav-item">
                              <a id="tab26" href="#eltos_cpu" 
                                 class="nav-link active" data-toggle="tab" role="tab"
                                 style="border-top-width:2px; border-right-width:2px; border-left-width:2px;"
				 aria-controls="processor"
                                 onclick="wepsim_reset_max_turbo() ;
                                          start_drawing(); 
                                          refresh();"><i class="fas fa-microchip"></i>&nbsp;Processor</a>
                          </li>
		          <li class="nav-item">
                              <a id="tab24" href="#eltos_dbg"  
                                 class="nav-link" data-toggle="tab" role="tab"
                                 style="border-top-width:2px; border-right-width:2px; border-left-width:2px;"
				 aria-controls="assembly debugger"
                                 onclick="stop_drawing(); 
					  wepsim_reset_max_turbo() ;
                                          var o1 = fullshow_asmdbg_pc();
                                          var obj_byid = $('#asm_debugger_container');
                                          if (typeof o1[0] == 'undefined') 
                                              return;
                                          obj_byid[0].scrollTop = o1[0].offsetTop;"><i class="fas fa-bug"></i>&nbsp;<span class="d-sm-none">Assembly</span><span class="d-none d-sm-inline-flex">Assembly Debugger</span></a>
                          </li>
		      </ul>

                      <!-- Tab panes -->
                      <div class="tab-content">
                        <div id="eltos_cpu" class="tab-pane active" role="tabpanel">
                           <div class="container-fluid" style="padding:0 0 0 0">

			     <div class="container-fluid" style="margin:10 0 0 0">
			     <div class="row">
				<div class="col" id="eltos_cpu_a" style="padding:0 5 0 0;">
				    <object id="svg_p" 
					    data="sim_hw/sim_hw_ep/processor6.svg" 
					    type="image/svg+xml" 
					    style="transform:translate3d(0,0,0);">
					Your browser doesn't support SVG
				    </object>
				</div>
				<div class="col" id="eltos_cpu_b" style="padding:0 5 0 5;">
				    <object id="svg_cu" 
					    data="sim_hw/sim_hw_ep/controlunit6.svg" 
					    type="image/svg+xml" 
					    style="transform:translate3d(0,0,0);">
					Your browser doesn't support SVG
				    </object>
				</div>
			     </div>
			     </div>

                           </div>
		        </div>

		        <div id="eltos_dbg" class="tab-pane" role="tabpanel">
			   <center>
		           <div id="asm_table" style="overflow-x:auto; -webkit-overflow-scrolling:touch;">
		   	   <table class='table ui-responsive ui-table' style="margin-bottom:0px; min-width:700px;">
		   	   <thead>
			   <tr>
		   <th width=1%>
		   <a href="#checkboxespopup" data-rel="popup">&plusmn;</a>
		   <div data-role="popup" id="checkboxespopup">
		       <label><input aria-label="Show breakpoint"         type="checkbox" value="1" id="asm_break"  name="asm_break" checked="checked"><span>breakpoints</span></label>
		       <label><input aria-label="Show address"            type="checkbox" value="1" id="asm_addr"   name="asm_addr"  checked="checked"><span>address</span></label>
		       <label><input aria-label="Show label"              type="checkbox" value="1" id="asm_label2" name="asm_label2" checked="checked"><span>labels</span></label>
		       <label><input aria-label="Show pseudo-instruction" type="checkbox" value="1" id="asm_pins"   name="asm_pins"  checked="checked"><span>pseudo</span><span class="d-none d-md-inline">-instructions</span></label>
		       <label><input aria-label="Show label"              type="checkbox" value="1" id="asm_label1" name="asm_label1" checked="checked"><span>labels</span></label>
		       <label><input aria-label="Show instruction"        type="checkbox" value="1" id="asm_ins"    name="asm_ins"   checked="checked"><span>assembly</span></label>
		   </div>
		   </th>
			   <th width=10% class="asm_break"><span>break</span><span class="d-none d-md-inline"><small>points</small></span></th>
			   <th width=15% class="asm_addr"><span>addr</span><span class="d-none d-sm-inline-flex">ess</span></th>
                           <th width=10% class="asm_label2" align=right><span>labels</span></th>
                           <th width=20% class="asm_pins"   align=left><span>pseudo</span><span class="d-none d-md-inline"><small>instructions</small></span></th>
                           <th width=10% class="asm_label1" align=right><span>labels</span></th>
                           <th width=25% class="asm_ins"    align=left><span>assembly</span></th>
			   </tr>
			   </thead>
			   </table>
		   	   </div>
			   </center>

		           <div id="asm_debugger_container" 
                                style="overflow-y:auto; overflow-x:auto; height:70vh !important; -webkit-overflow-scrolling:touch;">
                                <div id="asm_debugger" style="min-width:700px;">
                                <br>
                                <ol>
                                <li>Load the microcode to be used.</li>
                                    <ul>
                                    <li>You can use an example of microcode, load it from a file or you can edit one.</li>
                                    </ul>
                                <br>
                                <li>Load the assembly to be used.</li>
                                    <ul>
                                    <li>You can use an assembly example, load it from a file or you can edit one.</li>
                                    </ul>
                                <br>
                                <li>Come back to the simulator in order to execute the microcode+assembly loaded before.</li>
                                    <ul>
                                    <li>Each step could be executed at microinstruction or instruction level.</li>
                                    </ul>
                                </ol>
                                </div>
		           </div>
		      </div>
	    	    </div>
                </div>

                <div id="col2" class="" style="padding:0px 16px 0px 16px;">

                    <div class="row" style="padding:8px 16px 0px 8px;">
                    <div class="btn-toolbar btn-block" role="toolbar">
			    <button          style="background-color: #CCCCCC; border-color:white; border-width:1 1 1 1px;"
		                    class="btn btn-light ui-shadow ui-icon-reset    ui-btn-icon-top col" data-role="none"
			            onclick="wepsim_execute_reset(true, true);"><b><br>Reset</b></button>
			    <button id="nm1" style="background-color: #CCCCCC; border-color:white; border-width:1 1 1 1px;"
		                    class="btn btn-light ui-shadow ui-icon-arrow-r  ui-btn-icon-top col"  data-role="none"
			            onclick="wepsim_execute_microinstruction();"><b><br>&#181;Instruction</b></button>
			    <button id="ni1" style="background-color: #CCCCCC; border-color:white; border-width:1 1 1 1px;"
		                    class="btn btn-light ui-shadow ui-icon-arrow-r  ui-btn-icon-top col"  data-role="none"
			            onclick="wepsim_execute_instruction();"><b><br>Instruction</b></button>
			    <button id="qbp" style="background-color: #CCCCCC; border-color:white; border-width:1 1 1 1px;"
		                    class="btn btn-light ui-shadow ui-icon-carat-r  ui-btn-icon-top col"  data-role="none"
                                    onclick="var mode = get_cfg('ws_mode');
                                             if ('tutorial' == mode) {
                                                 wepsim_notify_success('<strong>INFO</strong>',
                                                            'Tutorial mode on. Use the configuration to change it.');
                                             }
                                             wepsim_execute_toggle_play('#qbp', (mode == 'tutorial'));
                                             return false;"><b><br>Run</b></button>
                    </div>
                    </div>

                    <div class="row" style="padding:3px 16px 0px 8px;">
                    <div class="btn-toolbar btn-block" role="toolbar">
		          <button class="btn btn-light ui-shadow col" data-role="none"
		                  style="border-color: #CCCCCC;"
		                  onclick="wepsim_dialog_current_state();"><i class="fas fa-camera"></i>&nbsp;<c>States</c></span></button>
                          <select class="custom-select btn btn-light ui-shadow col-5"
                                  style="border-color: #CCCCCC;"
				  name="select5a" id="select5a" 
				  data-role="none" 
                                  onchange="var val = this.value;
				            $('#tab' + val).trigger('click');
				            if ('11' == val)
					         show_rf_values();
				            else show_memories_values();"> 
				  <optgroup label="CPU">
                                      <option value="11" selected><div class="bg-primary text-white">CPU</div> - Registers</option>
                                      <option value="16"><div class="bg-primary text-white">CPU</div> - Control Memory</option>
                                      <option value="17"><div class="bg-primary text-white">CPU</div> - Stats</option>
				  </optgroup>
				  <optgroup label="Main Memory">
                                      <option value="14"><div class="bg-primary text-white">MM</div> - Memory</option>
				  </optgroup>
				  <optgroup label="Devices">
                                      <option value="12"><div class="bg-primary text-white">Dev</div> - Keyboard+Display</a></option>
                                      <option value="15"><div class="bg-primary text-white">Dev</div> - I/O Stats</a></option>
				  </optgroup>
			  </select>
		          <button class="btn btn-light ui-shadow col" data-role="none"
                                  style="border-color: #CCCCCC;"
                                  onclick="var val = $('#select5a').val();
				           $('#tab' + val).trigger('click');
				           if ('11' == val)
					        show_rf_values();
				           else show_memories_values();"><i class="fas fa-sync-alt"></i>&nbsp;<c>Refresh</c></button>
                    </div>
                    </div>

		    <div data-role="tabs" id="tabs1">

    		      <div data-role="navbar" id="tabsnav1" class="ui-responsive">
		        <ul>
		          <li style="display:none;clear:none;width:33% !important"><a id="tab14" href="#mp">Memory</a></li>
		          <li style="display:none;clear:none;width:33% !important"><a id="tab12" href="#con">Console</a></li>
		          <li style="display:none;           width:33% !important"><a id="tab11" href="#all">Registers</a></li>
		          <li style="display:none;clear:none;width:33% !important"><a id="tab16" href="#mc">Control Memory</a></li>
                          <li style="display:none;clear:none;width:33% !important"><a id="tab13" href="#config">Configuration</a></li>
                          <li style="display:none;           width:33% !important"><a id="tab15" href="#io">IO stats</a></li>
		          <li style="display:none;clear:none;width:33% !important"><a id="tab17" href="#cpu">CPU stats</a></li>
		        </ul>
		      </div>

		      <div id="all"  class="ui-body-d ui-content" style="padding: 15 0px 0 0px;">
		         <div id="states_ALL"          style="width:inherit; overflow-y:auto;" class="container container-fluid"></div>
			 <br style="height:0; width:100%; font-size:0; margin:5; padding:0; border:0; display:block;">
		         <div id="states_BR"           style="width: inherit; overflow-y: auto;" class="container container-fluid"></div>
		      </div>
	    	      <div id="config0"  class="ui-body-d ui-content" style="padding:8 8 0 8;">
		         <div id="config_ALL0"         style="width: inherit; overflow-y: auto;"></div>
		      </div>
		      <div id="mp"   class="ui-body-d ui-content">
		         <div id="memory_MP"           style="height:58vh; width: inherit; overflow-y: scroll; -webkit-overflow-scrolling: touch;"></div>
		      </div>
		      <div id="mc"   class="ui-body-d ui-content">
		         <div id="memory_MC"           style="height:58vh; width: inherit; overflow-y: scroll; -webkit-overflow-scrolling: touch;"></div>
		      </div>
		      <div id="con"  class="ui-body-d ui-content">
                         <img alt="monitor" height=55 src="images/monitor2.png">
		         <textarea aria-label="monitor"  style="min-width:90%; overflow-y:auto; -webkit-overflow-scrolling: touch; margin:0 0 8 0"
                                   placeholder="WepSIM" id="kdb_con" rows=8 readonly></textarea>
                         <img alt="keyboard" height=35 src="images/keyboard1.png">
		         <textarea aria-label="keyboard" style="min-width:90%; overflow-y:auto; -webkit-overflow-scrolling: touch; margin:0 0 0 0"
                                   placeholder="WepSIM" id="kdb_key" rows=2></textarea>
		      </div>
		      <div id="io"  class="ui-body-d ui-content">
		         <div id="io_ALL"              style="width: inherit; overflow-y: auto;" class="container container-fluid"></div>
		      </div>
		      <div id="cpu"  class="ui-body-d ui-content">
		         <div id="cpu_ALL"             style="width: inherit; overflow-y: auto;" class="container container-fluid"></div>
		      </div>
	    	    </div>
                </div>
            </div>

	</div><!-- /content -->

</div><!-- /page -->


<div data-role="page" id="main3">

	<div data-role="header" data-position="fixed" data-disable-page-zoom="false" data-theme="a">
                <span class="ui-title">WepSIM <span class="badge badge-pill badge-secondary"><div class="wsversion">X</div></span> / Microcode</span>
		<div id="action_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-left">
		    <a data-toggle="collapse" href="#collapseA2"><img alt="UC3M logo" src="images/uc3m.png" style="height:22pt; padding:8 0 0 0;"></a>
		</div>
                <div id="action_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
		    <a href="#" data-target="#about2" data-toggle="modal" data-position-to="window"><img alt="ARCOS logo" src="images/arcos.svg" height="40"></a>
                </div>
	</div><!-- /header -->

	<div role="main" class="ui-content">

            <div class="row collapse show" id="collapseA2">

		<div id="lsload" 
                     data-role="popup" data-overlay-theme="a" data-theme="a" data-dismissible="false">
		    <div data-role="header" data-theme="a">
		    <h1>Microcode</h1>
		    </div>
		    <div role="main" class="ui-content">
			<h3>Please select the file to be loaded:</h3>
			<p><input aria-label="file to load" type="file" id="fileToLoad" class="dropify"/></p>
			<center>
			<a href="#" class="ui-btn ui-btn-b ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
                        <button class="ui-btn ui-btn-b ui-btn-inline" 
                                onclick="var fileToLoad = document.getElementById('fileToLoad').files[0];
					 wepsim_load_from_file(fileToLoad, inputfirm);
                                         $('#lsload').popup('close');">Load from this File</button>
                        </center>
		    </div>
		</div>

		<div id="lssave" 
                     data-role="popup" data-overlay-theme="a" data-theme="a" data-dismissible="false">
		    <div data-role="header" data-theme="a">
		    <h1>Save Page</h1>
		    </div>
		    <div role="main" class="ui-content">
			<h2>Please write the file name where Microcode will be saved:</h2>
			<p><input aria-label="filename to save content" id="inputFileNameToSaveAs" style="min-width: 90%;"/></p>
			<center>
			<a href="#" class="ui-btn ui-btn-b ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
                        <button class="ui-btn ui-btn-b ui-btn-inline" 
                                onclick="if (confirm('Do you want me to save the current Control Memory contents rather than the editor contents?.\n\n' + 
                                                     'Please notice three things:\n' +
                                                     '* The current Control Memory will replace the editor contents.\n' +
                                                     '* The comments outside the microcode will be removed.\n' +
                                                     '* Pseudo-instructions will be not included.'))
                                         {
					     var SIMWARE = get_simware() ;
					     var simware_as_text = saveFirmware(SIMWARE);
					     if (simware_as_text.trim() == '')
						  alert('The Microcode loaded in memory is empty!\n' + 
							'Please load a Microcode first in memory in order to save it.');
					     else inputfirm.setValue(simware_as_text);
                                             var fileNameToSaveAs = document.getElementById('inputFileNameToSaveAs').value;
                                             wepsim_save_to_file(inputfirm, fileNameToSaveAs);
					 }">Save control memory to File</button>
                        <button class="ui-btn ui-btn-b ui-btn-inline" 
                                onclick="var fileNameToSaveAs = document.getElementById('inputFileNameToSaveAs').value;
                                         wepsim_save_to_file(inputfirm, fileNameToSaveAs);">Save Editor content to File</button>
                        </center>
		    </div>
		</div>

                <div class="container col-12" role="none">
		<div class="col-sm"           role="toolbar" aria-label="MicroCode Toolbar">

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
		            <button class="btn btn-light ui-shadow col" data-role="none"
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
                                    data-toggle="modal" data-target="#config2"><b><span class="d-none d-sm-inline-flex">Configuration</span><span class="d-sm-none">Cfg.</span></b></button>
		            <button class="btn btn-light ui-shadow col" data-role="none"
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    data-transition="none" data-inline="true"
				    onclick="$.mobile.pageContainer.pagecontainer('change','#main4');"><b>Assembly</b></button>
		            <button class="btn btn-light ui-shadow col" data-role="none"
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    data-transition="none" data-inline="true"
				    onclick="$.mobile.pageContainer.pagecontainer('change','#main1');"><b>Simulator</b></button>
		      </div>

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
		            <a      href="#lsload" 
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    class="btn ui-btn ui-btn-a ui-mini ui-shadow"
				    data-rel="popup" data-position-to="window" data-transition="pop"><i class="fas fa-file-upload"></i>&nbsp;Load</a>
		            <a      href="#lssave" 
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    class="btn ui-btn ui-btn-a ui-mini ui-shadow"
	                            data-rel="popup" data-position-to="window" data-transition="pop"><i class="fas fa-file-download"></i>&nbsp;Save</a>
		      </div>

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
		            <button style="background-color: #CCCCCC"
		                    class="btn btn-light ui-shadow col" data-role="none"
				    data-transition="none" data-inline="true"
				    onclick="var textToMCompile = inputfirm.getValue();
                                             wepsim_compile_firmware(textToMCompile);
				 	     $('#asm_debugger').html('<br>After updates on the microcode, assembler has to be compiled against it.');"><i class="fas fa-sign-out-alt"></i>&nbsp;<b>&#181;compile</b></button>
		            <button style="background-color: #DDDDDD"
		                    class="btn btn-light ui-shadow col" data-role="none"
				    onclick="var textToMCompile = inputfirm.getValue();
                                             var ok = wepsim_compile_firmware(textToMCompile);
                                             if (true == ok) {
                                                 wepsim_show_binary_microcode('#bin2','#compile_results');
			                         wepsim_notify_success('<strong>INFO</strong>', 'Please remember to recompile the assembly code if needed.');
                                             }">
                                             <b><i class="fas fa-memory"></i>&nbsp;<span class="d-none d-sm-inline-flex">Show co2&#181;addr + control memory</span><span class="d-sm-none">co2&#181;addr + c.m.</span></b>
			                     </button>
		      </div>

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
                            <button style="background-color: #D4DB17"
		                    class="btn btn-light ui-shadow col" data-role="none"
                                    onclick="wepsim_open_help_content('<object id=svg_p2 data=\'sim_hw/sim_hw_ep/cpu6.svg?time=20180608\' type=image/svg+xml>Your browser does not support SVG</object>');"
				    ><i class="fas fa-microchip"></i>&nbsp;<b>Hardware Summary</b></button>
                            <button style="background-color: #D4DB17"
		                    class="btn btn-light ui-shadow col" data-role="none"
				    onclick="wepsim_help_set_relative('#help_firmware_format'); wepsim_help_refresh();"
				    ><i class="fas fa-info-circle"></i>&nbsp;<b>Help</b></button>
		      </div>

		</div>
		</div>

	    </div>

	    <div id="t3_firm"  class="ui-body-d ui-content" style="height:75vh; overflow-y:auto; -webkit-overflow-scrolling:touch;">
		     <textarea aria-label="microcode" style="min-width:90%; overflow-x:auto; -webkit-overflow-scrolling:touch;"
                               placeholder="Please select 'Example' or 'Load' first in order to have an initial Microcode."
                               id="inputFirmware" rows=20></textarea>
	    </div>

	</div><!-- /content -->

</div><!-- /page -->


<div data-role="page" id="main4">

	<div data-role="header" data-position="fixed" data-disable-page-zoom="false" data-theme="a">
                <span class="ui-title">WepSIM <span class="badge badge-pill badge-secondary"><div class="wsversion">X</div></span> / Assembly</span>
		<div id="action_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-left">
		    <a data-toggle="collapse" href="#collapseA3"><img alt="UC3M logo" src="images/uc3m.png" style="height:22pt; padding:8 0 0 0;"></a>
		</div>
                <div id="action_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
		    <a href="#" data-target="#about2" data-toggle="modal" data-position-to="window"><img alt="ARCOS logo" src="images/arcos.svg" height="40"></a>
                </div>
	</div><!-- /header -->

	<div role="main" class="ui-content">

            <div class="row collapse show" id="collapseA3">

		<div id="lsload2" 
                     data-role="popup" data-overlay-theme="a" data-theme="a" data-dismissible="false">
		    <div data-role="header" data-theme="a">
		    <h1>Assembler</h1>
		    </div>
		    <div role="main" class="ui-content">
			<h3>Please select the file to be assembled:</h3>
			<p><input aria-label="file to load" type="file" id="fileToLoad2" class="dropify"/></p>
			<center>
			<a href="#" class="ui-btn ui-btn-b ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
                        <button class="ui-btn ui-btn-b ui-btn-inline" 
                                onclick="var fileToLoad = document.getElementById('fileToLoad2').files[0];
                                         wepsim_load_from_file(fileToLoad, inputasm);
                                         $('#lsload2').popup('close');">Load from this File</button>
                        </center>
		    </div>
		</div>

		<div id="lssave2" 
                     data-role="popup" data-overlay-theme="a" data-theme="a" data-dismissible="false">
		    <div data-role="header" data-theme="a">
		    <h1>Save Page</h1>
		    </div>
		    <div role="main" class="ui-content">
			<h2>Please write the file name where assembly will be saved:</h2>
			<p><input aria-label="filename to save content" id="inputFileNameToSaveAs2" style="min-width: 90%;"/></p>
			<center>
			<a href="#" class="ui-btn ui-btn-b ui-corner-all ui-shadow ui-btn-inline" data-rel="back">Cancel</a>
                        <button class="ui-btn ui-btn-b ui-btn-inline" 
                                onclick="var fileNameToSaveAs = document.getElementById('inputFileNameToSaveAs2').value;
                                         wepsim_save_to_file(inputasm, fileNameToSaveAs);">Save to File</button>
                        </center>
		    </div>
		</div>

                <div class="container col-12" role="none">
		<div class="col-sm"           role="toolbar" aria-label="Assembly Toolbar">

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
		            <button class="btn btn-light ui-shadow col" data-role="none"
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
                                    data-toggle="modal" data-target="#config2"><b><span class="d-none d-sm-inline-flex">Configuration</span><span class="d-sm-none">Cfg.</span></b></button>
		            <button class="btn btn-light ui-shadow col" data-role="none"
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    data-transition="none" data-inline="true"
				    onclick="$.mobile.pageContainer.pagecontainer('change','#main3');"><b>MicroCode</b></button>
		            <button class="btn btn-light ui-shadow col" data-role="none"
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    data-transition="none" data-inline="true"
				    onclick="$.mobile.pageContainer.pagecontainer('change','#main1');"><b>Simulator</b></button>
		      </div>

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
		            <a      href="#lsload2" 
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    class="btn ui-btn ui-btn-a ui-mini ui-shadow"
				    data-rel="popup" data-position-to="window" data-transition="pop" data-inline="true"><i class="fas fa-file-upload"></i>&nbsp;Load</a>
		            <a      href="#lssave2" 
		                    style="border-width:1 1 1 1px; margin:0 0 0 0; border-color: #CCCCCC;"
				    class="btn ui-btn ui-btn-a ui-mini ui-shadow"
				    data-rel="popup" data-position-to="window" data-transition="pop" data-inline="true"><i class="fas fa-file-download"></i>&nbsp;Save</a>
		      </div>

                      <div class="btn-group mr-2 my-1" role="group"   aria-label="Toolbar load and save buttons">
		            <button style="background-color: #CCCCCC"
		                    class="btn btn-light ui-shadow col" data-role="none"
				    data-transition="none" data-inline="true"
				    onclick="var textToCompile = inputasm.getValue() ;
                                             var ok = wepsim_compile_assembly(textToCompile);"><i class="fas fa-sign-out-alt"></i>&nbsp;<b>Compile</b></button>
		            <button style="background-color: #DDDDDD"
		                    class="btn btn-light ui-shadow col" data-role="none"
				    onclick="var textToCompile = inputasm.getValue();
                                             var ok = wepsim_compile_assembly(textToCompile);
                                             if (true == ok) {
                                                 wepsim_show_binary_code('#bin2','#compile_results');
                                             }"><i class="fas fa-memory"></i>&nbsp;<b>Show Main Memory</b></button>
		      </div>

                      <div class="btn-group mr-2" role="group"   aria-label="Toolbar load and save buttons">
                            <button style="background-color: #D4DB17"
		                    class="btn btn-light ui-shadow col" data-role="none"
				    onclick="wepsim_help_set_relative('#help_assembly_format'); wepsim_help_refresh();"
				    ><i class="fas fa-info-circle"></i>&nbsp;<b>Help</b></button>
		      </div>

		</div>
		</div>

	    </div>

	    <div id="t4_asm"   class="ui-body-d ui-content" style="height:75vh; overflow-y:auto; -webkit-overflow-scrolling:touch;">
		        <textarea aria-label="Assembly" style="min-width:90%; overflow-x:auto; -webkit-overflow-scrolling:touch;"
                                  placeholder="Please select 'Load' first to have the assembly code to work with."
			          id="inputAssembly" rows="20"></textarea>
	    </div>

	</div><!-- /content -->

</div><!-- /page -->


<div id="config2" class="modal">
    <div class="modal-dialog modal-lg" style="height:70vh;">
	<div class="modal-content">
	   <div class="modal-header">
		<button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
                        data-dismiss="modal" aria-hidden="true">x</button>
		<div class="mx-auto">
                <h5><b>Config<span class="d-none d-sm-inline-flex">uration</span></b> <span class="badge badge-pill btn-success"><div class="wsversion">X</div></span></h5>
                </div>
	   </div>
	   <div class="modal-body" style="overflow:auto; -webkit-overflow-scrolling:touch; height:85vh;">

              <div id='table-config2' class='container-fluid grid-striped border border-light'>
		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">01</span></div>
                   <div class="col-sm-4">
			 <div class="form-group" style="margin:0 0 0 0;">
			    <select name="select7" id="select7" class="form-control form-control-sm"
				    aria-label="idiom for examples and help" data-role="none"
				    onchange="var opt = $(this).find('option:selected');
					      var optValue = opt.val();
					      set_cfg('ws_idiom',optValue); save_cfg();"
				    data-native-menu="false">
				<option value="es">Spanish</option>
				<option value="en">English</option>
			    </select>
			 </div>
		   </div>
                   <div class="col-sm">Idiom for help, examples, etc.</div>
                </div>

                <div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">02</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label11-true"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Active voice: true"
				   onclick="set_cfg('use_voice',true); save_cfg(); wepsim_voice_start();">
			        <input type="radio" name="options" id="radio11-true"   autocomplete="off" data-role="none">On
			    </label>
			    <label id="label11-false"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Active voice: false"
				   onclick="set_cfg('use_voice',false); save_cfg(); wepsim_voice_stop();">
			        <input type="radio" name="options" id="radio11-false"  autocomplete="off" data-role="none">Off
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Active voice: experimental voice control</div>
                </div>

		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">03</span></div>
                   <div class="col-sm-4">
			 <input type="range"
				class="custom-range" data-role="none"
				aria-label="Notification delay"
				data-show-value="false" data-theme="a"
				name="slider3" id="slider3"
				min="100" max="2000" value="1000" step="100"
				onchange="set_cfg('NOTIF_delay', this.value); save_cfg();">
		   </div>
                   <div class="col-sm">Notification delay before disapear (fast - slow)</div>
                </div>

                <div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary'>Editor</div>
		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">04</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label7-default"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;" 
				   onclick="set_cfg('editor_theme','default'); save_cfg();
					    inputfirm.getWrapperElement().style['font-weight'] = 'bold';
					    inputfirm.setOption('theme','default');
					    inputasm.getWrapperElement().style['font-weight'] = 'bold';
					    inputasm.setOption('theme','default');">
			        <input type="radio" name="options" id="radio7-default" aria-label="Editor theme: light" autocomplete="off" data-role="none">Light
			    </label>
			    <label id="label7-blackboard"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;" 
				   onclick="set_cfg('editor_theme','blackboard'); save_cfg();
				   	    inputfirm.getWrapperElement().style['font-weight'] = 'normal';
				   	    inputfirm.setOption('theme','blackboard');
				   	    inputasm.getWrapperElement().style['font-weight'] = 'normal';
					    inputasm.setOption('theme','blackboard');">
			        <input type="radio" name="options" id="radio7-blackboard" aria-label="Editor theme: dark" autocomplete="off" data-role="none">Dark
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Editor theme: light or dark</div>
                </div>

                <div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">05</span></div>
                   <div class="col-sm-4">
			 <div class="form-group" style="margin:0 0 0 0;">
			    <select name="select2" id="select2" class="form-control form-control-sm"
				    aria-label="Editor mode"    data-role="none"
				    onchange="var opt = $(this).find('option:selected');
					      var optValue = opt.val();
					      set_cfg('editor_mode',optValue); save_cfg();
					      inputfirm.setOption('keyMap',optValue);
					      inputasm.setOption('keyMap',optValue);"
				    data-native-menu="false">
				<option value="default">default</option>
				<option value="vim">VIM</option>
				<option value="emacs">Emacs</option>
				<option value="sublime">Sublime</option>
			    </select>
			 </div>
		   </div>
                   <div class="col-sm">Editor mode: vim, emacs, etc.</div>
                </div>

                <div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary'>Execution</div>
		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">06</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label12-50"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Speed: slow"
                                   onclick="set_cfg('DBG_delay', 50); save_cfg();">
			        <input type="radio" name="options" id="radio12-50"   autocomplete="off" data-role="none">Slow
			    </label>
			    <label id="label12-5"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Speed: normal"
                                   onclick="set_cfg('DBG_delay', 5); save_cfg();">
			        <input type="radio" name="options" id="radio12-5"  autocomplete="off" data-role="none">Normal
			    </label>
			    <label id="label12-1"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Speed: fast"
                                   onclick="set_cfg('DBG_delay', 1); save_cfg();">
			        <input type="radio" name="options" id="radio12-1"  autocomplete="off" data-role="none">Fast
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Running speed: execution speed</div>
                </div>

                <div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">07</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label1-instruction"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Execution unit: instruction"
				   onclick="set_cfg('DBG_level','instruction'); save_cfg();">
			        <input type="radio" name="options" id="radio1-instruction"   autocomplete="off" data-role="none">
				<span class="d-none d-sm-inline-flex">Instructions</span><span class="d-sm-none">Instruc.</span></label>
			    </label>
			    <label id="label1-microinstruction"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Execution unit: microinstruction"
				   onclick="set_cfg('DBG_level','microinstruction'); save_cfg();">
			        <input type="radio" name="options" id="radio1-microinstruction"  autocomplete="off" data-role="none">
				<span class="d-none d-sm-inline-flex">&#181;instructions</span><span class="d-sm-none">&#181;instruc.</span></label>
			    </label>
			</div>
		  </td>
		   </div>
                   <div class="col-sm">Step-by-step: element in run mode</div>
                </div>

		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">08</span></div>
                   <div class="col-sm-4 mx-auto">
			 <a href="#" id="breakpointicon1" title="Please select your breakpoint Icon or click here to cancel" tabindex="0"
			    data-toggle="popover" data-trigger="focus">
				<img alt="stop icon" id="img_select1" src="images/stop_classic.gif" 
				     style="position:relative; left:10px; height:30px !important; width:30px !important;">
			 </a>
		   </div>
                   <div class="col-sm">Breakpoint icon: icon to be used for breakpoints</div>
                </div>

                <div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">09</span></div>
                   <div class="col-sm-4">
			 <div class="form-group" style="margin:0 0 0 0;">
			    <select name="select6" id="select6" class="form-control form-control-sm"
				    aria-label="max. ticks per instruction" data-role="none"
				    onchange="var opt = $(this).find('option:selected');
					      var optValue = opt.val();
					      set_cfg('DBG_limitins',optValue); save_cfg();"
				    data-native-menu="false">
				<option value="-1">without limit</option>
				<option value="500"  >500</option>
				<option value="1000" >1000</option>
				<option value="2000" >2000</option>
				<option value="10000">10000</option>
				<option value="50000">50000</option>
			    </select>
			 </div>
		   </div>
                   <div class="col-sm">Limit instructions: number of instructions to be executed</div>
                </div>

		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">10</span></div>
                   <div class="col-sm-4">
			 <div class="form-group" style="margin:0 0 0 0;">
			    <select name="select3" id="select3" class="form-control form-control-sm"
				    aria-label="max. ticks per instruction" data-role="none"
				    onchange="var opt = $(this).find('option:selected');
					      var optValue = opt.val();
					      set_cfg('DBG_limitick',optValue); save_cfg();"
				    data-native-menu="false">
				<option value="-1">without limit</option>
				<option value="500"  >500</option>
				<option value="1000" >1000</option>
				<option value="2000" >2000</option>
				<option value="10000">10000</option>
				<option value="50000">50000</option>
			    </select>
			 </div>
		   </div>
                   <div class="col-sm">Limit instruction ticks: to limit clock ticks </div>
                </div>

                <div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary'>Register file</div>
                <div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">11</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label2-16"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="register file display format: hexadecimal"
				   onclick="set_cfg('RF_display_format',16); show_rf_values(); show_states(); show_memories_values(); save_cfg();">
			        <input type="radio" name="options" id="radio2-16"   autocomplete="off" data-role="none">Hex.
			    </label>
			    <label id="label2-10"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="register file display format: decimal"
				   onclick="set_cfg('RF_display_format',10); show_rf_values(); show_states(); show_memories_values(); save_cfg();">
			        <input type="radio" name="options" id="radio2-10"  autocomplete="off" data-role="none">Dec.
			    </label>
			    <label id="label2-8"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="register file display format: octal"
				   onclick="set_cfg('RF_display_format',8); show_rf_values(); show_states(); show_memories_values(); save_cfg();">
			        <input type="radio" name="options" id="radio2-8"  autocomplete="off" data-role="none">Oct.
			    </label>
			</div>
		   </div>
                   <div class="col-sm">
                   Display format&nbsp;
                   <a href='#' data-toggle='popover1' title='Example of display formats' data-html='true' 
   data-content='<img alt="register file example" src="images/cfg-rf.gif" style="height:30vh;">'>(example)</a>
		   </div>
                </div>

		<div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">12</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label3-numerical"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="register file display name (number)"
				   onclick="set_cfg('RF_display_name','numerical'); show_rf_names(); save_cfg();">
			        <input type="radio" name="options" id="radio3-numerical"  autocomplete="off" data-role="none">Numbers
			    </label>
			    <label id="label3-logical"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="register file display name (user identification)"
				   onclick="set_cfg('RF_display_name','logical'); show_rf_names(); save_cfg();">
			        <input type="radio" name="options" id="radio3-logical" autocomplete="off" data-role="none">Labels
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Register file names</div>
                </div>

		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">13</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label9-true"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Is editable: true"
				   onclick="set_cfg('is_editable',true); save_cfg();">
			        <input type="radio" name="options" id="radio9-true"  aria-label="Active voice: true"  autocomplete="off" data-role="none">On
			    </label>
			    <label id="label9-false"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Is editable: false"
				   onclick="set_cfg('is_editable',false); save_cfg();">
			        <input type="radio" name="options" id="radio9-false" aria-label="Active voice: false" autocomplete="off" data-role="none">Off
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Editable registers: edit register file values </div>
                </div>

                <div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary'>Circuitry simulation</div>
                <div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">14</span></div>
                   <div class="col-sm-4">
			 <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" style="margin:0 0 0 0">
			 <input type="color"
				aria-label="Color for active data"
				id="colorpicker1"
				data-show-value="false"
				class="noshadow-d" style="margin:0 0 0 0"
				onchange="set_cfg('color_data_active', $('#colorpicker1').spectrum('get')); refresh(); save_cfg();">
			 </fieldset>
		   </div>
                   <div class="col-sm">
                   Data-path color
                   <a href='#' data-toggle='popover1' title='Example of data-path color' data-html='true' 
 data-content='<img alt="register file example" src="images/cfg-colors.gif" style="height:30vh;">'>(example)</a>
		   </div>
                </div>

                <div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">15</span></div>
                   <div class="col-sm-4">
			 <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" style="margin:0 0 0 0">
			 <input type="color"
				aria-label="Color for active signal name"
				id="colorpicker2"
				data-show-value="false"
				class="noshadow-d" style="margin:0 0 0 0"
				onchange="set_cfg('color_name_active', $('#colorpicker2').spectrum('get')); refresh(); save_cfg();">
			 </fieldset>
		   </div>
                   <div class="col-sm">Signal color</div>
                </div>

		<div class='row py-1' style="background-color:#F5F5F5;">
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">16</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label10-true"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Is by value: true"
				   onclick="set_cfg('is_byvalue',true); save_cfg();">
			        <input type="radio" name="options" id="radio10-true"   autocomplete="off" data-role="none">On
			    </label>
			    <label id="label10-false"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Is by value: false"
				   onclick="set_cfg('is_byvalue',false); save_cfg();">
			        <input type="radio" name="options" id="radio10-false"  autocomplete="off" data-role="none">Off
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Show by value or by activation </div>
                </div>

                <div class='row py-1'>
                   <div class="col-sm-auto"><span class="badge badge-pill badge-light">17</span></div>
                   <div class="col-sm-4">
			 <div class="btn-group btn-group-toggle d-flex" data-toggle="buttons" data-role="none">
			    <label id="label5-true"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Is interactive: true"
				   onclick="set_cfg('is_interactive',true); save_cfg();">
			        <input type="radio" name="options" id="radio5-true"   autocomplete="off" data-role="none">On
			    </label>
			    <label id="label5-false"
				   class="btn btn-light w-50 btn-outline-secondary" style="padding:2 2 2 2;"
				   aria-label="Is interactive: false"
				   onclick="set_cfg('is_interactive',false); save_cfg();">
			        <input type="radio" name="options" id="radio5-false"  autocomplete="off" data-role="none">Off
			    </label>
			</div>
		   </div>
                   <div class="col-sm">Interactive mode: signal value can be updated</div>
                </div>
              </div>

              <br>

	   </div>
	</div>
     </div>
</div> <!-- /.modal -->


<div id="bin2" class="modal">
     <div class="modal-dialog" style="min-width:80vw; height:80vh;">
	<div class="modal-content">
	   <div class="modal-header">
		<button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
                        data-dismiss="modal" aria-hidden="true">x</button>
		<div class="mx-auto">
                <h5><b>Binary</b> <span class="badge badge-pill btn-success"><div class="wsversion">X</div></span></h5>
                </div>
	   </div>
	   <div class="modal-body">

		<div id="bin2-container" class="container-fluid" 
		     style="padding:0 0 0 0; overflow:auto; -webkit-overflow-scrolling:touch;">

		      <div class="ui-body-d ui-content" style="padding: 2px 2px 2px 2px;">
			 <div id=iframe_bin2 style="max-height:80vh; max-width:100%; overflow:auto; -webkit-overflow-scrolling:touch;">
			   <div id="compile_results" style="padding: 16px 16px 16px 16px;">
				<br>
				<center>
				Loading binary, please wait... <br>
				WARNING: loading binary might take time on slow mobile devices.
				</center>
			   </div>
			 </div>
		      </div>

		</div>

	   </div>
	</div>
     </div>
</div> <!-- /.modal -->




<div id="confighw" class="modal">
     <div class="modal-dialog">
	<div class="modal-content">
	   <div class="modal-header">
		 <button type="button" data-role="button"
			 class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
			 data-dismiss="modal" aria-hidden="true">x</button>
		 <div class="mx-auto">
		       <div class="btn-group">
			  <button onclick="$('#bot_hwcfg1').carousel(0);" 
				  type="button" 
				  class="btn btn-info">Hardware Conf<span class='d-sm-none'>.</span><span class='d-none d-sm-inline-flex'>iguration</span></button>
			  <button onclick="$('#bot_hwcfg1').carousel(1);
					   update_checker_loadhelp('#help4a','help_hwcfg');"
				  type="button" 
				  class="btn btn-success">Help</button>
			  <button type="button" 
				  class="btn btn-success dropdown-toggle" 
				  data-toggle="dropdown" 
				  aria-haspopup="true" 
				  aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Help Idiom</span></button>   
			  <div class="dropdown-menu">
			     <a href="#" class="dropdown-item"
		                         onclick="set_cfg('ws_idiom','es'); save_cfg();
						  $('#bot_hwcfg1').carousel(1);
						  update_checker_loadhelp('#help4a','help_hwcfg');">ES</a>
			     <a href="#" class="dropdown-item"
		                         onclick="set_cfg('ws_idiom','en'); save_cfg();
						  $('#bot_hwcfg1').carousel(1);
						  update_checker_loadhelp('#help4a','help_hwcfg');">EN</a>
			  </div>
		       </div>
		 </div>
	   </div>
	   <div class="modal-body">
               <div id="bot_hwcfg1" class="carousel slide" data-ride="carousel" data-interval="false">
                  <div class="carousel-inner" role="listbox">
                     <div class="carousel-item active">
		          <div id="config" class="ui-body-d ui-content" style="padding:8 8 0 8;">
		               <div id="config_ALL" style="width: inherit; overflow-y: auto;"></div>
		          </div>
                     </div>
                     <div class="carousel-item">
                          <div id="help4a" 
                               style="max-height:70vh; width:inherit; overflow:auto;">Loading...</div>
                     </div>
                  </div>
               </div>
	   </div>
	   <div class="modal-footer">
                 <button type="button" 
                         onclick="$('#confighw').modal('hide'); "
                         class="btn btn-primary col-xs-3 pull-right">&nbsp;&nbsp;OK&nbsp;&nbsp;</button>
	   </div>
	</div>
     </div>
</div> <!-- /.modal -->


<div id="help1" class="modal">
     <div class="modal-dialog modal-lg">
	<div class="modal-content">
	   <div class="modal-header">
		<button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
                        data-dismiss="modal" aria-hidden="true">x</button>
		<div class="mx-auto">
		   <div class="btn-group">
		     <button type="button" class="btn btn-success" 
		             onclick="wepsim_open_help_index();">Help Index</button>
		     <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split" 
			     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			 <span class="caret"></span>
			 <span class="sr-only">Toggle Help Idiom</span>
		     </button>
		     <div class="dropdown-menu">
			 <a class="dropdown-item" href="#" 
			    onclick="set_cfg('ws_idiom','es'); save_cfg(); 
                                     wepsim_help_refresh();">ES</a>
			 <a class="dropdown-item" href="#" 
			    onclick="set_cfg('ws_idiom','en'); save_cfg(); 
                                     wepsim_help_refresh();">EN</a>
		     </div>
		   </div>
                </div>
	   </div>
	   <div class="modal-body">
                 <div id="help1_ref" style="display:none;"></div>
                 <div class="ui-body-d ui-content" 
                      style="padding: 2px 2px 2px 2px; max-height:80vh; overflow-y:auto; -webkit-overflow-scrolling:touch;">
                      <div id="iframe_help1"></div>
                 </div>
	   </div>
	</div>
     </div>
</div> <!-- /.modal -->


<div id="example1" class="modal">
     <div class="modal-dialog modal-lg" style="height:80vh;">
	<div class="modal-content">
	   <div class="modal-header">
		<button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
                        data-dismiss="modal" aria-hidden="true">x</button>
		<div class="mx-auto">
		   <div class="btn-group">
		     <button type="button" class="btn btn-success" 
		             onclick="wepsim_open_examples_index(true);">Examples</button>
		     <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split" 
			     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			 <span class="caret"></span>
			 <span class="sr-only">Toggle Help Idiom</span>
		     </button>
		     <div class="dropdown-menu">
			 <a class="dropdown-item" href="#" 
			    onclick="set_cfg('ws_idiom','es'); save_cfg(); 
                                     wepsim_open_examples_index(false);">ES</a>
			 <a class="dropdown-item" href="#" 
			    onclick="set_cfg('ws_idiom','en'); save_cfg(); 
                                     wepsim_open_examples_index(false);">EN</a>
		     </div>
		   </div>
                </div>
	   </div>
	   <div class="modal-body">
		<div id="container-example1" class="container-fluid" 
		     style="max-height:80vh; padding:0 0 0 0; overflow:auto; -webkit-overflow-scrolling:touch;">
		</div>
	   </div>
	</div>
     </div>
</div> <!-- /.modal -->


<div id="current_state1" class="modal">
<div class="modal-dialog bootboxWidth">
   <div class="modal-content">
      <div class="modal-header">
	 <button type="button" data-role="button"
		 class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
		 data-dismiss="modal" aria-hidden="true">x</button>
         <h5 class="modal-title mx-auto">
               <div class="btn-group">
                  <button onclick="$('#bot_check1').carousel(0);"
                          type="button" 
                          class="btn btn-secondary" 
			  style="height:34px !important;">History</button>
                  <button onclick="$('#bot_check1').carousel(1);" 
                          type="button" 
                          class="btn btn-info" 
			  style="height:34px !important;"><span class='d-none d-sm-inline-flex'>Edit</span> State</button>
                  <button onclick="$('#bot_check1').carousel(2);
                                   update_checker_loadhelp('#help3a','help_dumper');"
                          type="button" 
                          class="btn btn-success" 
                          style="height:34px !important;">Help</button>
                  <button type="button" 
                          class="btn btn-success dropdown-toggle" 
                          data-toggle="dropdown" 
                          aria-haspopup="true" 
                          aria-expanded="false" 
                          style="height:34px !important;"><span class="caret"></span><span class="sr-only">Toggle Help Idiom</span></button>   
                  <div class="dropdown-menu">
                     <a href="#" class="dropdown-item"
				 onclick="set_cfg('ws_idiom','es'); save_cfg();
                                          $('#bot_check1').carousel(2);
                                          update_checker_loadhelp('#help3a','help_dumper');">ES</a>
                     <a href="#" class="dropdown-item"
				 onclick="set_cfg('ws_idiom','en'); save_cfg();
                                          $('#bot_check1').carousel(2);
                                          update_checker_loadhelp('#help3a','help_dumper');">EN</a>
                  </div>
               </div>
         </h5>
      </div>
      <div class="modal-body">
         <div class="bootbox-body">
            <div id="bot_check1" class="carousel slide" data-ride="carousel" data-interval="false">
               <div class="carousel-inner" role="listbox">
                  <div class="carousel-item active">
                        <h4 style="margin:0 0 10 0;">History:</h4>
                        <div id="history1"
			     style="max-height:42vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">
				&emsp;<span style="background-color:#FCFC00">Empty.</span>
			</div>
                        <h4 style="margin:20 0 10 0;">Differences (only changed values):
			<span class="btn btn-outline-dark btn-sm"
			      onclick="CopyFromDiv('check_results_scroll1'); return false;"
			      data-inline="true">Copy to clipboard</i></span>
                        </h4>
		        <div id="check_results_scroll1"
		             style="max-height:25vh; width:inherit; overflow-y:auto; -webkit-overflow-scrolling:touch;" >
		             <div id="check_results1"></div>
		        </div>
                  </div>
                  <div class="carousel-item">
                     <div>
                        <h4 style="margin:20 0 10 0;">Current State (non-zero values):
			<span class="btn btn-outline-dark btn-sm"
			      onclick="CopyFromTextarea('end_state1'); return false;"
			      data-inline="true">Copy to clipboard</span>
                        </h4>
                        <form id="end_state_form1" 
                              class="form-horizontal bootboxLargeHeight" 
                              style="white-space:wrap; overflow-y:auto; -webkit-overflow-scrolling:touch;">
                           <textarea aria-label="checks to perform" 
                                     placeholder="Default..." 
                                     id="end_state1" 
                                     name="end_state1" 
                                     data-allowediting="true" 
                                     data-allowpasting="false" 
                                     data-limit="0" 
                                     data-createtokensonblur="false" 
                                     data-delimiter=";" 
                                     data-beautify="true" 
                                     class="form-control input-xs" 
                                     rows="5"></textarea>
                        </form>
                     </div>
                  </div>
                  <div class="carousel-item">
                       <div id="help3a" 
                            style="max-height:70vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">Loading...</div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="modal-footer">
	   <button class="btn btn-secondary col-xs-3 pull-left"
	   	   onclick="wepsim_state_history_reset();
			    wepsim_notify_success('<strong>INFO</strong>', 'Removed all !.');
			    wepsim_state_history_list() ;
			    return false;"
		   type="button">Reset <span class='d-none d-sm-inline-flex'>history</span></button>
	   <button class="btn btn-secondary col-xs-3 pull-left"
		   onclick="wepsim_state_history_add();
			    wepsim_notify_success('<strong>INFO</strong>', 'Added !.');
			    wepsim_state_history_list() ;
			    return false;"
		   type="button">Add <span class='d-none d-sm-inline-flex'>state to history</span></button>
           <button type="button" 
                   onclick="$('#current_state1').modal('hide');"
                   class="btn btn-primary col-xs-3 pull-right">&nbsp;&nbsp;OK&nbsp;&nbsp;</button>
      </div>
   </div>
</div>
</div> <!-- /.modal -->


<div id="current_state2" class="modal">
<div class="modal-dialog bootboxWidth">
   <div class="modal-content">
      <div class="modal-header">
	 <button type="button" data-role="button"
		 class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
		 data-dismiss="modal" aria-hidden="true">x</button>
         <h5 class="modal-title mx-auto">
               <div class="btn-group">
                  <button onclick="$('#bot_check2').carousel(0);" 
                          type="button" 
                          class="btn btn-info" 
                          style="height:34px !important;">State</button>
                  <button onclick="$('#bot_check2').carousel(1);
                                   update_checker_loadhelp('#help3b','help_checker');"
                          type="button" 
                          class="btn btn-success" 
                          style="height:34px !important;">Help</button>
                  <button type="button" 
                          class="btn btn-success dropdown-toggle" 
                          data-toggle="dropdown" 
                          aria-haspopup="true" 
                          aria-expanded="false" 
                          style="height:34px !important;"><span class="caret"></span><span class="sr-only">Toggle Help Idiom</span></button>   
                  <div class="dropdown-menu">
                     <a href="#" class="dropdown-item"
				 onclick="set_cfg('ws_idiom','es'); save_cfg();
                                          $('#bot_check2').carousel(1);
                                          update_checker_loadhelp('#help3b','help_checker');">ES</a>
                     <a href="#" class="dropdown-item"
				 onclick="set_cfg('ws_idiom','en'); save_cfg();
                                          $('#bot_check2').carousel(1);
                                          update_checker_loadhelp('#help3b','help_checker');">EN</a>
                  </div>
               </div>
         </h5>
      </div>
      <div class="modal-body">
         <div class="bootbox-body">
            <div id="bot_check2" class="carousel slide" data-ride="carousel" data-interval="false">
               <div class="carousel-inner" role="listbox">
                  <div class="carousel-item active">
                        <div class="card card-info">
		        <div class="card-header">
                           <h4><span id="dlg_title2">&nbsp;</span></h4>
                        </div>
                        </div>

                        <h4>Requeriment list to compare with:</h4>
                        <form id="end_state_form2" 
                              class="form-horizontal bootboxShortHeight" 
                              style="white-space:wrap; overflow-y:auto; -webkit-overflow-scrolling:touch;">
                           <textarea aria-label="checks to perform" 
                                     placeholder="See help for more information." 
                                     id="end_state2" 
                                     name="end_state2" 
                                     data-allowediting="true" 
                                     data-allowpasting="true" 
                                     data-limit="0" 
                                     data-createtokensonblur="false" 
                                     data-delimiter=";" 
                                     data-beautify="true" 
                                     class="form-control input-xs" 
                                     rows="5"></textarea>
                        </form>
                        <h4 style="margin:20 0 10 0;">Result:
		   	   <span class="btn btn-secondary btn-sm"
			         onclick="CopyFromDiv('check_results_scroll2'); return false;" 
			         data-inline="true">Copy to clipboard</i></span>
                        </h4>
		        <div id="check_results_scroll2"
		             style="max-height:25vh; width:inherit; overflow-y:auto; -webkit-overflow-scrolling:touch;">
		             <div id="check_results2"></div>
		     </div>
                  </div>
                  <div class="carousel-item">
                       <div id="help3b" 
                            style="max-height:70vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">Loading...</div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="modal-footer">
           <button type="button" 
                   onclick="wepsim_dialog_check_reset('check_results2','end_state2'); 
                            return false;"
                   class="btn btn-secondary col-xs-3">Clear</button>
           <button type="button" 
                   onclick="var txt_checklist = $('#end_state2').val();
                            var obj_expected  = simstate_checklist2state(txt_checklist);
                            var obj_current   = simstate_current2state();
                            wepsim_dialog_check_state('check_results2', obj_expected, obj_current); 
                            return false;"
                   class="btn btn-secondary col-xs-3">Check</button>
           <button type="button" 
                   onclick="$('#current_state2').modal('hide');"
                   class="btn btn-primary col-xs-3 pull-right">&nbsp;&nbsp;OK&nbsp;&nbsp;</button>
      </div>
   </div>
</div>
</div> <!-- /.modal -->


<div id="about2" class="modal">
     <div class="modal-dialog modal-lg">
	<div class="modal-content">
	   <div class="modal-header">
	        <button type="button" data-role="button"
	       	        class="close ui-btn-right ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" 
		        data-dismiss="modal" aria-hidden="true">x</button>
		<div class="mx-auto">
                <h5><b>WepSIM</b> <span class="badge badge-pill btn-success"><div class="wsversion">X</div></span></h5>
		</div>
	   </div>
	   <div class="modal-body">

		<div style="font-family: Helvetica Neue,Helvetica,Arial,sans-serif; font-size: 16px; line-height: 24px; padding-bottom: 6.4px; padding-left: 8px; padding-right: 8px; padding-top: 6.4px; max-width: 90vw;">
		<div class="col">
		    Copyright &copy; 2015-2018 <br>
		    <p>

		    <a href="#" 
		       class="btn btn-info" style="padding:0 0 0 0; color:white !important;"
		       data-toggle="popover1"
		       data-html="true" 
		       data-content="<img src='images/author_fgarcia.png' height='200'/>"
		       title="F&eacute;lix Garc&iacute;a Carballeira">F&eacute;lix Garc&iacute;a Carballeira</a> +
		    <a href="#" 
		       class="btn btn-info" style="padding:0 0 0 0; color:white !important;"
		       data-toggle="popover1"
		       data-html="true" 
		       data-content="<img src='images/author_acaldero.png' height='200'/>"
		       title="Alejandro Calder&oacute;n Mateos">Alejandro Calder&oacute;n Mateos</a> +
		    <a href="#" 
		       class="btn btn-info" style="padding:0 0 0 0; color:white !important;"
		       data-toggle="popover1"
		       data-html="true" 
		       data-content="<img src='images/author_jprieto.png' height='200'/><br><br><a class='badge badge-success' href='https://es.linkedin.com/in/javier-prieto-cepeda'>linkedin</a>"
		       title="Javier Prieto Cepeda">Javier Prieto Cepeda</a> +
		    <a href="#" 
		       class="btn btn-info" style="padding:0 0 0 0; color:white !important;"
		       data-toggle="popover1"
		       data-html="true" 
		       data-content="<img src='images/author_salonso.png' height='200'/><br><br><a class='badge badge-success' href='https://www.linkedin.com/in/salonsom/'>linkedin</a>"
		       title="Sa&uacute;l Alonso Monsalve">Sa&uacute;l Alonso Monsalve</a>
		    <p>

		    <a href="http://www.arcos.inf.uc3m.es/">ARCOS Group</a><br>
		    <a href="http://www.inf.uc3m.es/en/">Computer Science and Engineering Department</a><br>
		    <a href="http://www.uc3m.es/">Universidad Carlos III de Madrid</a><br>
		    <p>

		</div>
		</div>
	   </div>
           <div class="modal-footer">
		 <span class="badge badge-success badge-lg" 
	               style="text-align:right;"
		       onclick="wepsim_help_set_absolute('about');
			        wepsim_help_refresh();
				$('#about2').modal('hide');">GNU Lesser General Public 3</span>
	   </div>
	</div>
     </div>
</div> <!-- /.modal -->


<script>
    window.addEventListener("beforeunload", function (e) {
       var confirmationMessage = "\o/";
       (e || window.event).returnValue = confirmationMessage; // Gecko + IE
       return confirmationMessage;                            // Webkit, Safari, Chrome
    });

    try 
    {
	    sim_core_init(true) ;

	    $(document).ready(function()
	    {
		    jQuery.fx.off = true;
                    ko.options.deferUpdates = true;

		    $(".ui-slider-input").hide();
		    $("#listview_1").listview();

		    $("#tabsnav1").navbar();

		    $("#tabs1").tabs();

		    $("#table-config2").enhanceWithin() ;

		    inputfirm = CodeMirror.fromTextArea(document.getElementById("inputFirmware"), 
                                    {
					value: "\n\n\n\n\n\n\n\n\n\n\n\n",
					lineNumbers: true,
					matchBrackets: true,
					tabSize: 2,
					foldGutter: {
						rangeFinder: new CodeMirror.fold.combine(CodeMirror.fold.brace, CodeMirror.fold.comment)
					},
					gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
					mode: "text/javascript"
				    });
                    sim_prepare_editor(inputfirm);
		    inputfirm.setSize("auto","auto");

		    inputasm = CodeMirror.fromTextArea(document.getElementById("inputAssembly"), 
                                    {
					value: "\n\n\n\n\n\n\n\n\n\n\n\n",
					lineNumbers: true,
					matchBrackets: true,
					tabSize: 2,
					extraKeys: {
					  "Ctrl-Space": function(cm) {
					      CodeMirror.showHint(cm, function(cm, options) {
						      var simware = get_simware();
						      var cur = cm.getCursor();
						      var result = new Array();
						      for (var i=0; i<simware.firmware.length; i++)
							   if(simware.firmware[i].name != "begin")
								result.push(simware.firmware[i].signatureUser);
						      return { list: result, from: cur, to: cur };
					      });
					  }
					},
					mode: "gas"
				    });
                    sim_prepare_editor(inputasm) ;
		    inputasm.setSize("auto","auto");

		    $.mobile.pageContainer.pagecontainer('change','#main1');
		    $('#tab26').trigger('click');
		    $('#tab11').trigger('click');
		    $('#select5a').val(11);

		    $("#colorpicker1").spectrum({ preferredFormat: "hex", color: get_cfg('color_data_active')}) ;
		    $("#colorpicker2").spectrum({ preferredFormat: "hex", color: get_cfg('color_name_active')}) ;
		    $("#radio1-" +         get_cfg('DBG_level')).click() ;
		    $("#radio2-" + get_cfg('RF_display_format')).click() ;
		    $("#radio3-" +   get_cfg('RF_display_name')).click() ;
		    $("#radio5-" +    get_cfg('is_interactive')).click() ;
		    $("#radio7-" +      get_cfg('editor_theme')).click() ;
		    $("#radio9-" +       get_cfg('is_editable')).click() ;
		    $("#radio10-" +       get_cfg('is_byvalue')).click() ;
		    $("#radio11-" +        get_cfg('use_voice')).click() ;
		    $("#radio12-" +        get_cfg('DBG_delay')).click() ;
                    $("#select2").val(get_cfg('editor_mode')) ;
                    $("#select6").val(get_cfg('DBG_limitins')) ;
                    $("#select3").val(get_cfg('DBG_limitick')) ;
                    $("#select4").val(get_cfg('ws_mode')) ;
                    $("#select7").val(get_cfg('ws_idiom')) ;
                    $("#slider3").val(get_cfg('NOTIF_delay')) ; // .slider("refresh") ;
                    $("#img_select1").attr("src","images/stop_" +  get_cfg('ICON_theme') + ".gif");

                    $("#slider2a").val(get_cfg('C1C2_size')).slider("refresh");
                    $("#slider2b").val(get_cfg('CPUCU_size')).slider("refresh");
                    set_ab_size('#col1',        '#col2',        get_cfg('C1C2_size'));
                    set_ab_size('#eltos_cpu_a', '#eltos_cpu_b', get_cfg('CPUCU_size'));

                    showhideAsmElements();
		    $("input:checkbox").click(function(){
		        var name = $(this).attr("name") ;
		        var column = "table ." + name ;
                        if (!$("#" + name).is(':checked'))
		             $(column).hide() ;
		        else $(column).show() ;
		    });
	    }) ;

            $("div.wsversion").replaceWith(get_cfg('version'));

            var target = $("#asm_table");
            $("#asm_debugger_container").scroll(function() {
               target.prop("scrollTop", this.scrollTop).prop("scrollLeft", this.scrollLeft);
            });

	    sim_core_init_panel("#states_ALL", "#states_BR", "#io_ALL", "#cpu_ALL", "#config_ALL"); 
	    sim_core_reset(); 

            $('a[data-toggle="popover1"]').popover({
                     placement: 'bottom',
                     trigger: 'focus, hover',
                     animation: false,
                     delay: { "show": 500, "hide": 100 } 
            }) ;
            $('#breakpointicon1').popover({ html: true, content: wepsim_show_breakpoint_icon_list });

            $('.dropify').dropify();

            $('#end_state1').tokenfield({
                    autocomplete: { source: ['register','memory','screen'], delay: 100 },
                    showAutocompleteOnFocus: true,
                    inputType: 'textarea'
            }) ;
            //A1/ var inputEls = document.getElementById('end_state1');
            //A1/ if (null != inputEls)
            //A1/     setup_speech_input(inputEls) ;

            $('#end_state2').tokenfield({
                    autocomplete: { source: ['register','memory','screen'], delay: 100 },
                    showAutocompleteOnFocus: true,
                    inputType: 'textarea'
            }) ;
            //A1/ var inputEls = document.getElementById('end_state2');
            //A1/ if (null != inputEls)
            //A1/     setup_speech_input(inputEls) ;

            wepsim_voice_init() ;
	    if (false == get_cfg('use_voice')) {
		wepsim_voice_stop() ;
	    }

	    var ws_mode = get_cfg('ws_mode');
            wepsim_change_mode(ws_mode, '#select4') ;

            // progressive web application
	    if ('serviceWorker' in navigator) 
            {
		navigator.serviceWorker.register('./min.wepsim_pwa.js').catch(function() {
		  wepsim_notify_error("<h4>Warning:" + 
				      "<br>WepSIM was used over a HTTP connection.</h4>",
		                      "Progressive Web Applications requires a HTTPS connection " +
		                      "with a valid certificate, so PWA is disabled.") ;
		}) ;
	    }

            // Firefox OS
	    if ('mozApps' in navigator) 
	    {
		    var manifest_url = location.href + 'manifest.webapp';
		    var installCheck = navigator.mozApps.checkInstalled(manifest_url);
		    installCheck.onsuccess = function() 
		    {
		        if (!installCheck.result)
		        {
			      var installLocFind = navigator.mozApps.install(manifest_url);
			      installLocFind.onsuccess = function(data) {
				  wepsim_notify_success('<h4>Info:<br></h4>',
					                'WepSIM was installed.');
			      } ;
			      installLocFind.onerror = function() {
				  wepsim_notify_error('<h4>Warning:<br>' + installLocFind.error.name + '</h4>',
						      'FirefoxOS/KaiOS installation was cancelled.') ;
			      } ;
		        } ;
		    } ;
            }
    }
    catch(err) 
    {
        alert("WepSIM was improperly used:\n" + err.message);
    }
</script>

</body>

</html>


function wepsim_file_saveTo(textToWrite,fileNameToSaveAs){window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;if(typeof window.requestFileSystem==="undefined"){return false}var koHandler=function(error){wepsim_notify_error("<strong>ERROR</strong>: failed file write","Failed file write. "+"Error found "+error.toString())};var okHandler=function(msg){wepsim_notify_success("<strong>INFO</strong>","Successful file write request: "+fileNameToSaveAs)};var onWriteFile=function(fileWriter){var textFileAsBlob=new Blob([textToWrite],{type:"text/plain"});fileWriter.onerror=koHandler;fileWriter.onwriteend=okHandler;fileWriter.write(textFileAsBlob)};var onCreatFile=function(fileEntry){fileEntry.createWriter(onWriteFile)};var onInitFs=function(fs){fs.root.getFile(fileNameToSaveAs,{create:true,exclusive:false},onCreatFile,koHandler)};var grandedBytes=2*1024*1024;var onQuotaFs=function(grantedBytes){window.requestFileSystem(PERSISTENT,grandedBytes,onInitFs,koHandler)};navigator.webkitPersistentStorage.requestQuota(grandedBytes,onQuotaFs,koHandler);return true}function wepsim_file_loadFrom(fileToLoad,functionOnLoad){var fileReader=new FileReader;if(fileReader===null){return false}fileReader.onload=function(fileLoadedEvent){var textFromFileLoaded=fileLoadedEvent.target.result;if(null!==functionOnLoad){functionOnLoad(textFromFileLoaded)}};fileReader.onerror=function(e){wepsim_notify_error("<strong>ERROR</strong>","File could not be read. "+"Error code "+e.target.error.code)};fileReader.readAsText(fileToLoad,"UTF-8");return true}function wepsim_file_downloadTo(textToWrite,fileNameToSaveAs){var windowURL=window.webkitURL||window.URL;var textFileAsBlob=new Blob([textToWrite],{type:"text/plain"});var downloadLink=document.createElement("a");downloadLink.innerHTML="Download File";downloadLink.style.display="none";downloadLink.download=fileNameToSaveAs;downloadLink.href=windowURL.createObjectURL(textFileAsBlob);downloadLink.onclick=function(event){document.body.removeChild(event.target)};document.body.appendChild(downloadLink);downloadLink.click();wepsim_notify_success("<strong>INFO</strong>","Successful opportunity for downloading: "+fileNameToSaveAs)}function getURLTimeStamp(){var dateObj=new Date;var year=dateObj.getUTCFullYear();var month=dateObj.getUTCMonth()+1;var day=dateObj.getUTCDate();var hour=dateObj.getUTCHours();var minutes=dateObj.getUTCMinutes();return year+month+day+hour+minutes}function fetchURL(f_url){if(navigator.onLine){return fetch(f_url+"?time="+getURLTimeStamp())}return caches.match(f_url)}function wepsim_save_to_file(textToWrite,fileNameToSaveAs){var ret=false;if(is_cordova())ret=wepsim_file_saveTo(textToWrite,fileNameToSaveAs);else ret=wepsim_file_downloadTo(textToWrite,fileNameToSaveAs);return ret}function wepsim_load_from_url(url,do_next){if(false===is_mobile()){fetchURL(url).then((function(response){if(typeof response=="undefined"){wepsim_notify_error("<strong>ERROR</strong>","File "+url+" could not be fetched:"+" * Please check that you are on-line.");return}if(response.ok){response.text().then((function(text){do_next(text)}))}}))}else{var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&(xmlhttp.status==200||xmlhttp.status==0)){var textFromFileLoaded=xmlhttp.responseText;if(null!==do_next)do_next(textFromFileLoaded)}};xmlhttp.open("GET",url,true);xmlhttp.send()}}var clipboard_copy="";function get_clipboard_copy(){return clipboard_copy}function SelectText(element){var doc=document,text=doc.getElementById(element),range,selection;if(doc.body.createTextRange){range=document.body.createTextRange();range.moveToElementText(text);range.select()}else if(window.getSelection){selection=window.getSelection();range=document.createRange();range.selectNodeContents(text);selection.removeAllRanges();selection.addRange(range)}}function wepsim_clipboard_CopyFromDiv(element_name){var msg="unsuccessful";try{SelectText(element_name);if(document.execCommand("copy")){clipboard_copy=$("#"+element_name).text();msg="successful"}}catch(e){msg+=msg+" because "+e}wepsim_notify_success("<strong>INFO</strong>","Copied "+msg+"!.")}function wepsim_clipboard_CopyFromTextarea(element_name){var msg="successful";try{var copyTextarea=document.getElementById(element_name);copyTextarea.select();document.execCommand("copy");clipboard_copy=$("#"+element_name).val()}catch(err){msg="unsuccessful"}wepsim_notify_success("<strong>INFO</strong>","Copied "+msg+"!.")}function wepsim_preload_hash(hash){var o="";if(hash.mode!==""){wsweb_select_main(hash.mode);o+="<li>Mode set to <strong>"+hash.mode+"</strong>.</li> "}if(hash.example!==""){var example_index=parseInt(hash.example);var example_obj=ws_examples[example_index];if(typeof example_obj!=="undefined"){var example_uri=example_obj.hardware+":"+example_obj.microcode+":"+example_obj.assembly;load_from_example_firmware(example_uri,true);o+="<li>Example titled <strong>"+example_obj.title+"</strong> has been loaded.</li> "}}var panels=[];if(hash.simulator!==""){panels=hash.simulator.split(":");o+="<li>User interface has been adapted.</li> "}if(typeof panels[0]!=="undefined"){if(panels[0]==="microcode"){wsweb_change_show_processor()}if(panels[0]==="assembly"){wsweb_change_show_asmdbg()}}if(typeof panels[1]!=="undefined"){var panel2_ref=panels[1].toUpperCase();wsweb_set_details(panel2_ref)}if(o!==""){o="WepSIM has been instructed to preload some work for you:<br>"+"<ul>"+o+"</ul>"+"To close this notification please press in the "+'<span class="btn btn-sm btn-info py-0" data-dismiss="alert">X</span> mark. <br>'+"In order to execute an example please press the "+'<span class="btn btn-sm btn-info py-0" onclick="wepsim_execute_toggle_play(\'#btn_run_stop\');">Run</span> button.<br>';if(hash.notify!=="false"){wepsim_notify_do_notify("WepSIM preloads some work",o,"info",0)}}return 0}function wepsim_preload_json(json_url,do_after){var max_size=1*1024*1024;var xhr=new XMLHttpRequest;xhr.open("HEAD",json_url,true);xhr.onreadystatechange=function(){if(this.readyState==this.DONE){var size=0;var content_length=xhr.getResponseHeader("Content-Length");if(content_length!==null){size=parseInt(content_length)}if(size<max_size){$.getJSON(json_url,do_after).fail((function(e){wepsim_notify_do_notify("getJSON","There was some problem for getting "+json_url,"warning",0)}))}}};xhr.send()}function wepsim_preload_get(parameters,id_filename,id_tagname){var hash={};var uri_obj=null;if(typeof parameters==="undefined"){return}hash.preload=parameters.get("preload");hash.mode=parameters.get("mode");hash.example=parameters.get("example");hash.simulator=parameters.get("simulator");hash.notify=parameters.get("notify");hash.checkpoint=parameters.get("checkpoint");if(hash.preload===null)hash.preload="";if(hash.mode===null)hash.mode="";if(hash.example===null)hash.example="";if(hash.simulator===null)hash.simulator="";if(hash.notify===null)hash.notify="true";if(hash.checkpoint===null)hash.checkpoint="";if(hash.preload!==""){try{uri_obj=new URL(hash.preload);wepsim_preload_json(uri_obj.pathname,wepsim_preload_hash)}catch(e){}return}wepsim_preload_hash(hash);if(hash.checkpoint!==""){uri_obj=new URL(hash.checkpoint);wepsim_checkpoint_loadURI(uri_obj,id_filename,id_tagname)}}function wepsim_checkpoint_get(tagName){var ws_mode=get_cfg("ws_mode");var history_obj=wepsim_state_history_get();var state_current=wepsim_state_get_clk();var state_obj=simcore_simstate_current2state();state_current.content=simcore_simstate_state2checklist(state_obj);var elements={mode:ws_mode,firmware:inputfirm.getValue(),assembly:inputasm.getValue(),state_current:state_current,state_history:history_obj,record:simcore_record_get(),tag:tagName,notify:true};return elements}function wepsim_checkpoint_loadFromObj(checkpointObj,obj_fileName,obj_tagName,obj_fileToLoad){var o="";var u="";if(checkpointObj===null){return"null checkpoint"}if(typeof checkpointObj.mode==="undefined")checkpointObj.mode="ep";if(typeof checkpointObj.firmware==="undefined")checkpointObj.firmware="";if(typeof checkpointObj.assembly==="undefined")checkpointObj.assembly="";if(typeof checkpointObj.state_history==="undefined")checkpointObj.state_history=[];if(typeof checkpointObj.record==="undefined")checkpointObj.record=[];wepsim_state_history_reset();for(var i=0;i<checkpointObj.state_history.length;i++){state_history.push(checkpointObj.state_history[i])}wepsim_state_history_list();o+="<li>State: restored into the state history.</li>";wsweb_select_main(checkpointObj.mode);inputfirm.setValue(checkpointObj.firmware);inputasm.setValue(checkpointObj.assembly);o+="<li>Firmware and Assembly: Loaded";u="";if(checkpointObj.firmware.trim()!==""){wepsim_compile_firmware(checkpointObj.firmware);u+="Firmware"}if(checkpointObj.assembly.trim()!==""){wepsim_compile_assembly(checkpointObj.assembly);u+=" + Assembly"}if(u!==""){o+=" + Compiled"}o+=".</li>";if(typeof obj_fileName!=="undefined"&&obj_fileName!==null){obj_fileName.value=obj_fileToLoad.name}if(typeof obj_fileName!=="undefined"&&obj_tagName!==null){obj_tagName.value=checkpointObj.tag}o+="<li>Tag: <strong>"+checkpointObj.tag+"</strong></li>";simcore_record_set(checkpointObj.record);if(o!==""){o="WepSIM has been instructed to restore a checkpoint:<br>"+"<ul>"+o+"</ul>"+"To close this notification please press in the "+'<span class="btn btn-sm btn-info py-0" data-dismiss="alert">X</span> mark. <br>'}if(checkpointObj.notify===true){wepsim_notify_do_notify("Restored Checkpoint",o,"info",get_cfg("NOTIF_delay"))}return o}function wepsim_checkpoint_Obj2NB(elements){var val="";var typ="";var cells=[];for(var key in elements){val=elements[key];typ=typeof val;if(typ!=="string"){val=JSON.stringify(val,null,2)}cells.push({cell_type:"markdown",source:"## "+key,metadata:{}});cells.push({cell_type:"code",source:val,outputs:[],execution_count:1,metadata:{name:key,type:typ,collapsed:false,deletable:false,editable:false}})}var nbObj={metadata:{kernelspec:{name:"node_nteract",language:"javascript",display_name:"Node.js (nteract)"},kernel_info:{name:"node_nteract"},language_info:{name:"javascript",version:"8.2.1",mimetype:"application/javascript",file_extension:".js"},title:"WepSIM "+get_cfg("version"),nteract:{version:"nteract-on-jupyter@2.0.0"}},nbformat:4,nbformat_minor:0,cells:cells};return nbObj}function wepsim_checkpoint_NB2Obj(nbObj){var elements={};if(typeof nbObj.cells==="undefined")return elements;if(typeof nbObj.cells.length==="undefined")return elements;var key="";var type="";var value="";for(var i=0;i<nbObj.cells.length;i++){if(nbObj.cells[i].cell_type!=="code"){continue}key=nbObj.cells[i].metadata.name;type=nbObj.cells[i].metadata.type;value=nbObj.cells[i].source;if(type!=="string"){value=JSON.parse(value)}elements[key]=value}return elements}function wepsim_checkpoint_save(id_filename,id_tagname,checkpointObj){var obj_fileName=document.getElementById(id_filename);var obj_tagName=document.getElementById(id_tagname);if(obj_fileName===null||obj_tagName===null){return false}var checkpointNB=wepsim_checkpoint_Obj2NB(checkpointObj);var checkpointStr=JSON.stringify(checkpointNB,null,2);wepsim_save_to_file(checkpointStr,obj_fileName.value);return true}function wepsim_checkpoint_afterLoad(textLoaded,obj_fileName,obj_tagName,obj_fileToLoad){try{var current_checkpoint=null;if(textLoaded!==""){current_checkpoint=JSON.parse(textLoaded);current_checkpoint=wepsim_checkpoint_NB2Obj(current_checkpoint)}wepsim_checkpoint_loadFromObj(current_checkpoint,obj_fileName,obj_tagName,obj_fileToLoad)}catch(e){ws_alert("Error on checkpoint file: "+e)}}function wepsim_checkpoint_load(id_filename,id_tagname,id_file_to_load){var obj_fileName=document.getElementById(id_filename);var obj_tagName=document.getElementById(id_tagname);var obj_fileToLoad=document.getElementById(id_file_to_load).files[0];if(obj_fileName===null||obj_tagName===null||obj_fileToLoad===null||typeof obj_fileToLoad==="undefined"){return false}var function_after_loaded=function(textLoaded){wepsim_checkpoint_afterLoad(textLoaded,obj_fileName,obj_tagName,obj_fileToLoad)};wepsim_file_loadFrom(obj_fileToLoad,function_after_loaded);return true}function wepsim_checkpoint_loadURI(obj_uri,id_filename,id_tagname){var obj_fileName=document.getElementById(id_filename);var obj_tagName=document.getElementById(id_tagname);if(obj_fileName===null||obj_tagName===null||obj_uri===null){return false}try{var filename=obj_uri.href.substring(obj_uri.href.lastIndexOf("/")+1);wepsim_preload_json(obj_uri.href,(function(data){var obj_refName={name:filename};var current_checkpoint=wepsim_checkpoint_NB2Obj(data);wepsim_checkpoint_loadFromObj(current_checkpoint,obj_fileName,obj_tagName,obj_refName)}));return true}catch(e){return false}}function wepsim_checkpoint_loadExample(tutorial_name){var file_uri="examples/checkpoint/"+tutorial_name;var function_after_loaded=function(data_text){var obj_refName={name:file_uri};wepsim_checkpoint_afterLoad(data_text,"FileNameToSaveAs1","tagToSave1",obj_refName)};wepsim_load_from_url(file_uri,function_after_loaded)}function wepsim_checkpoint_share(id_filename,id_tagname,checkpointObj){var obj_fileName=document.getElementById(id_filename);var obj_tagName=document.getElementById(id_tagname);if(obj_fileName===null||obj_tagName===null){return false}var checkpointNB=wepsim_checkpoint_Obj2NB(checkpointObj);var checkpointStr=JSON.stringify(checkpointNB,null,2);var share_title="WepSIM checkpoint backup";var share_text=checkpointStr;var share_url="";if(obj_tagName.value.toString().trim()!=="")share_title+=" ("+obj_tagName.value+")...";else share_title+="...";return share_infomation("checkpoint",share_title,share_text,share_url)}function wepsim_checkpoint_backup_load(){var obj_wsbackup=[];try{var json_wsbackup=localStorage.getItem("wepsim_backup");obj_wsbackup=JSON.parse(json_wsbackup)}catch(e){obj_wsbackup=null}if(obj_wsbackup==null){obj_wsbackup=[]}return obj_wsbackup}function wepsim_checkpoint_backup_save(obj_wsbackup){var json_wsbackup=JSON.stringify(obj_wsbackup);localStorage.setItem("wepsim_backup",json_wsbackup);return obj_wsbackup}function wepsim_checkpoint_listCache(id_listdiv){var o='<span style="background-color:#FCFC00">&lt;<span data-langkey="Empty">Empty</span>&gt;</span>';var obj_wsbackup=wepsim_checkpoint_backup_load();if(obj_wsbackup.length==0){$("#"+id_listdiv+"").html(o);return true}o='<div class="btn-group btn-group-toggle list-group m-1" data-toggle="buttons">';obj_wsbackup=obj_wsbackup.reverse();for(i=0;i<obj_wsbackup.length;i++){o+='<label class="list-group-item btn btn-white border-dark text-truncate rounded-sm">'+'   <input type="radio" name="browserCacheElto" id="'+i+'" autocomplete="off">'+obj_wsbackup[i].tag+"</label>"}o+="</div>";$("#"+id_listdiv+"").html(o);return true}function wepsim_checkpoint_loadFromCache(id_filename,id_tagname,id_backupname){var ret={error:true,msg:""};var obj_fileName=document.getElementById(id_filename);var obj_tagName=document.getElementById(id_tagname);if(obj_fileName===null||obj_tagName===null){ret.msg="Invalid arguments";return ret}var browserCacheElto=$("input[name="+id_backupname+"]:checked");if(typeof browserCacheElto[0]==="undefined"){ret.msg="Invalid arguments";return ret}var id_backupcache=browserCacheElto[0].id;var obj_wsbackup=wepsim_checkpoint_backup_load();obj_wsbackup=obj_wsbackup.reverse();var current_checkpoint=obj_wsbackup[id_backupcache];if(typeof current_checkpoint==="undefined"){ret.msg="Backup id is not valid";return ret}var obj_fileToLoad={name:""};wepsim_checkpoint_loadFromObj(current_checkpoint,obj_fileName,obj_tagName,obj_fileToLoad);ret.error=false;ret.msg="Processing load request...";return ret}function wepsim_checkpoint_addCurrentToCache(){var obj_wsbackup=wepsim_checkpoint_backup_load();var current_date=Date().toString();var current_checkpoint=wepsim_checkpoint_get(current_date);if(current_checkpoint.firmware.trim()!==""&&current_checkpoint.assembly.trim()!==""){obj_wsbackup.push(current_checkpoint)}wepsim_checkpoint_backup_save(obj_wsbackup);return true}function wepsim_checkpoint_clearCache(){var obj_wsbackup=[];wepsim_checkpoint_backup_save(obj_wsbackup);return true}function wepsim_update_signal_dialog(key){var signal_obj=simhw_sim_signal(key);if(typeof signal_obj==="undefined"){return}var checkvalue=signal_obj.value>>>0;var str_bolded="";var str_checked="";var input_help="";var behav_raw="";var behav_str="";var n=0;var nvalues=Math.pow(2,signal_obj.nbits);if(signal_obj.behavior.length==nvalues){input_help='<ol start="0" class="list-group list-group-flush">';for(var k=0;k<signal_obj.behavior.length;k++){str_checked=" ";if(k==checkvalue){str_checked=' checked="checked" '}str_bolded=" ";if(k==signal_obj.default_value){str_bolded='<span class="badge badge-info">default value</span>'}behav_raw=signal_obj.behavior[k];behav_str=compute_signal_verbals(key,k);if(""==behav_str.trim()){behav_str="&lt;without main effect&gt;"}n=k.toString(10);input_help+='<li class="list-group-item p-1">'+'<label class="m-1">'+'  <input aria-label="value '+n+'" type="radio" name="ask_svalue" '+'         value="'+n+'" '+str_checked+" />"+'  <span class="badge badge-secondary badge-pill">'+n+"</span>"+"&nbsp;"+"  <span>"+behav_str+"</span>&nbsp;"+str_bolded+'  <p class="m-0 ml-3 bg-light collapse bh-all"><small>'+behav_raw+"</small></p>"+"</label>"+"</li>"}input_help+="</ol>"}else{input_help+='<ol start="0">'+"<span><center><label>"+'<input aria-label="value for '+key+'" type="number" size=4 min=0 max='+(nvalues-1)+" class=dial "+'       name="ask_svalue" value="'+signal_obj.value+'"/>'+"&nbsp;&nbsp;"+" 0 - "+(nvalues-1)+"</center></label></span>\n"+"</ol>"}var curr_hw=simhw_short_name();if(""==curr_hw){curr_hw="ep"}var o_l=i18n_get_dropdown(["gui"],"$('#bot_signal').carousel(1); "+"update_signal_loadhelp('#help2',$('#ask_shard').val(),$('#ask_skey').val());\" ");var bb=bootbox.dialog({title:"<center>"+key+": "+' <div class="btn-group">'+"   <button onclick=\"$('#bot_signal').carousel(0);\" "+'           type="button" class="btn btn-info">Value</button>'+"   <button onclick=\"$('#bot_signal').carousel(1); update_signal_loadhelp('#help2',$('#ask_shard').val(),$('#ask_skey').val());\" "+'           type="button" class="btn btn-success">Help</button>'+'   <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split" '+'           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+'     <span class="caret"></span>'+'     <span class="sr-only">Toggle Help Idiom</span>'+"   </button>"+'   <div class="dropdown-menu">'+o_l+"</div>"+" </div>"+"</center>",message:'<div id="bot_signal" class="carousel" data-ride="carousel" data-interval="false">'+'  <div class="carousel-inner" role="listbox">'+'    <div class="carousel-item active">'+'         <div style="max-height:70vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">'+'         <form class="form-horizontal" style="white-space:wrap;">'+'         <input aria-label="value for '+key+'" id="ask_skey"  name="ask_skey"  type="hidden" value="'+key+'" class="form-control input-md"> '+'         <input aria-label="value for '+curr_hw+'" id="ask_shard" name="ask_shard" type="hidden" value="'+curr_hw+'" class="form-control input-md"> '+input_help+"         </form>"+"         </div>"+"    </div>"+'    <div class="carousel-item">'+'         <div id=help2 style="max-height:65vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">Loading...</div>'+"    </div>"+"  </div>"+"</div>",value:signal_obj.value,animate:false,size:"large",buttons:{description:{label:'&plusmn; <span data-langkey="Description">Description</span>',className:"btn-outline-dark btn-sm col-3 col-sm-3 col-lg-2 mr-auto",callback:function(){$(".bh-all").collapse("toggle");return false}},success:{label:'<span data-langkey="Save">Save</span>',className:"btn-primary btn-sm col-3 col-sm-2 float-right",callback:function(){key=$("#ask_skey").val();user_input=$("input[name='ask_svalue']:checked").val();if(typeof user_input=="undefined"){user_input=$("input[name='ask_svalue']").val()}wepsim_update_signal_with_value(key,user_input);wsweb_dialogbox_close_updatesignal()}},close:{label:'<span data-langkey="Close">Close</span>',className:"btn-danger btn-sm col-3 col-sm-2 float-right",callback:function(){wsweb_dialogbox_close_updatesignal()}}}});bb.find(".modal-title").addClass("mx-auto");bb.find(".bootbox-close-button").addClass("mx-1");bb.attr("id","dlg_updatesignal");if(typeof $(".dial").knob!=="undefined"){$(".dial").knob({min:0,max:nvalues-1}).val(signal_obj.value).trigger("change")}show_states();wepsim_show_rf_values()}function wepsim_update_signal_quick(key){var signal_obj=simhw_sim_signal(key);if(typeof signal_obj==="undefined"){return}var curr_hw=simhw_short_name();if(""==curr_hw){curr_hw="ep"}var nvalues=Math.pow(2,simhw_sim_signal(key).nbits);var user_input=simhw_sim_signal(key).value;user_input=(user_input+1)%nvalues;wepsim_update_signal_with_value(key,user_input);show_states();wepsim_show_rf_values()}function wepsim_update_signal_with_value(key,value){simhw_sim_signal(key).value=value;propage_signal_update(key);simcore_record_append_new("Update signal "+key+" with value "+value,'wepsim_update_signal_with_value("'+key+'", '+value+");\n")}function show_visgraph(jit_fire_dep,jit_fire_order){var sig={};var tmp_hash={};var tmp_nodes=[];var tmp_id=0;for(sig in simhw_sim_signals()){tmp_hash[sig]=tmp_id;tmp_nodes.push({id:tmp_id,label:sig,title:sig});tmp_id++}for(var i=0;i<jit_fire_order.length;i++){tmp_nodes[tmp_hash[jit_fire_order[i]]].color="#7BE141"}var jit_dep_nodes=new vis.DataSet(tmp_nodes);var tmp_edges=[];for(sig in simhw_sim_signals()){for(var sigorg in jit_fire_dep[sig]){tmp_edges.push({from:tmp_hash[sigorg],to:tmp_hash[sig],arrows:"to"})}}var jit_dep_edges=new vis.DataSet(tmp_edges);var jit_dep_container=document.getElementById("depgraph1");var jit_dep_data={nodes:jit_dep_nodes,edges:jit_dep_edges};var jit_dep_options={interaction:{hover:true},height:"255px",nodes:{borderWidth:2,shadow:true},edges:{width:2,shadow:true}};jit_dep_network=new vis.Network(jit_dep_container,jit_dep_data,jit_dep_options)}function wepsim_state_get_clk(){var reg_maddr=get_value(simhw_sim_state("REG_MICROADDR"));var reg_clk=get_value(simhw_sim_state("CLK"));var timestamp=(new Date).getTime();return{time:timestamp,title:"clock "+reg_clk+" @ &#181;address "+reg_maddr,title_short:"clock "+reg_clk+",<br>&#181;add "+reg_maddr}}var state_history=[];function wepsim_state_history_get(){return state_history}function wepsim_state_history_reset(){$("[data-toggle=popover4]").popover("hide");state_history=[]}function wepsim_state_history_add(){var ret=wepsim_state_get_clk();var state_obj=simcore_simstate_current2state();ret.content=simcore_simstate_state2checklist(state_obj);state_history.push(ret)}function wepsim_state_results_empty(){var empty_results='<span style="background-color:#FCFC00">&lt;Empty (only modified values are shown)&gt;</span>';$("#check_results1").html(empty_results);$("#s_clip").html("clipboard");$("#s_ref").html("reference")}function wepsim_state_history_empty(){var empty_history='<span style="background-color:#FCFC00">'+'&lt;<span data-langkey="Empty history">Empty history</span>&gt;'+"</span>";$("#history1").html(empty_history)}function wepsim_state_history_list(){if(0==state_history.length){wepsim_state_history_empty();wepsim_state_results_empty();return}$("[data-toggle=popover4]").popover("hide");var t=0;var it="";var tt="";var vr="";var o="";for(var i=state_history.length-1;i>=0;i--){t=new Date(state_history[i].time);it=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"-"+t.getHours()+"-"+t.getMinutes()+"-"+t.getSeconds()+"-"+t.getMilliseconds();tt='<div id="popover-content-'+it+'" class="d-none bg-light">'+state_history[i].title+"<br>"+"<b>was inserted at:</b><br>"+"Date: "+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"<br>"+"Hour: "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"-"+t.getMilliseconds()+"<br>"+'<button type="button" id="close" data-role="none" '+'        class="btn btn-sm btn-danger w-100 p-0" '+"        onclick=\"$('#"+it+"').popover('hide');\"><span data-langkey=\"Close\">Close</span></button>"+"</div>";vrow="";if(i!=0)vrow='<div class="row h-100"><div class="col border-right border-dark">&nbsp;</div><div class="col">&nbsp;</div></div>';o+='  <div class="row">'+'       <div class="col-auto text-center flex-column d-flex pr-0">'+'              <strong class="m-2">'+'              <span class="badge badge-pill border-secondary border shadow">'+'  \t\t       <a data-toggle="collapse" data-target="#collapse_'+i+'" '+'                       class="col-auto p-0 text-decoration-none text-reset" target="_blank" href="#">'+state_history[i].title_short+"</a>"+"              </span>"+"              </strong>"+vrow+"       </div>"+'       <div class="col py-2 pl-0">'+'             <div class="btn-group float-none" role="group" aria-label="State information for '+it+'">'+'                   <button class="btn btn-outline-dark btn-sm col-auto float-right"'+'                           onclick="wepsim_state_results_empty();  '+"                                    $('#collapse_"+i+"').collapse('show'); "+"                                    wepsim_clipboard_CopyFromDiv('state_"+i+"');  "+"                                    $('#collapse_"+i+"').collapse('hide'); "+"                                    $('#s_clip').html('"+state_history[i].title_short+"'); "+"                                    $('#s_ref').html('reference'); \" "+'                           type="button"><span data-langkey="Copy">Copy</span><span class="d-none d-sm-inline-flex">&nbsp;<span data-langkey="to clipboard">to clipboard</span></span></button>'+'                   <button class="btn btn-outline-dark btn-sm col-auto float-right"'+'                           onclick="var txt_chklst1 = get_clipboard_copy();'+"                                    var obj_exp1    = simcore_simstate_checklist2state(txt_chklst1);"+"                                    var txt_chklst2 = $('#ta_state_"+i+"').val();"+"                                    var obj_exp2    = simcore_simstate_checklist2state(txt_chklst2);"+"                                    wepsim_dialog_check_state('check_results1', obj_exp1, obj_exp2);"+"                                    $('#s_ref').html('"+state_history[i].title_short+"'); "+"                                    $('#check_results_scroll1').collapse('show');\""+'                           type="button"><span data-langkey="Check">Check</span> <span class="d-none d-md-inline-flex">differences with clipboard state</span></button>'+'                   <button class="btn btn-outline-dark btn-sm col-auto float-right"'+'  \t\t              data-toggle="collapse" data-target="#collapse_'+i+'">&plusmn; <span data-langkey="Show">Show</span></button>'+"             </div>"+tt+'             <div id="collapse_'+i+'" class="border border-secondary mt-2 collapse">'+'                   <div class="card-body p-1 small" '+'                        id="state_'+i+'">'+state_history[i].content+"</div>"+'                   <textarea aria-label="hidden-state"  style="display:none"'+'                             id="ta_state_'+i+'" readonly>'+state_history[i].content+"</textarea>"+"             </div>"+"       </div>"+"  </div>"}$("#history1").html(o);wepsim_state_results_empty();$("[data-toggle=popover4]").popover({html:true,placement:"auto",trigger:"click",container:"body",animation:false,content:function(){var id=$(this).attr("id");return $("#popover-content-"+id).html()},sanitizeFn:function(content){return content}})}function wepsim_dialog_current_state(){wepsim_notify_success("<strong>INFO</strong>","Loading, please wait...");i18n_update_tags("states");$("#current_state1").modal("show");setTimeout((function(){var ret=wepsim_state_get_clk();$("#curr_clk_maddr").html(ret.title_short);var state_obj=simcore_simstate_current2state();var txt_checklist=simcore_simstate_state2checklist(state_obj);$("#end_state1").tokenfield("setTokens",txt_checklist);wepsim_notify_close();wepsim_notify_success("<strong>INFO</strong>","Current state loaded !");var neltos=0;var nceltos=0;var ga_str="";for(var component in state_obj){nceltos=0;for(var eltos in state_obj[component]){nceltos++}ga_str=ga_str+","+component+"="+nceltos;neltos=neltos+nceltos}ga("send","event","state","state.dump","state.dump"+".ci="+get_value(simhw_sim_state("REG_IR_DECO"))+",neltos="+neltos+ga_str)}),80)}function wepsim_dialog_check_state(id_result,obj_chklst_expected,obj_chklst_current){var obj_result=simcore_simstate_diff_results(obj_chklst_expected,obj_chklst_current);var msg="";if(0==obj_result.errors)msg="&emsp;<br><span style='background-color:#7CFC00'>"+"<span data-langkey='Meets the specified requirements'>Meets the specified requirements</span>"+"</span><br>";else msg=simcore_simstate_checkreport2html(obj_result.result,true);$("#"+id_result).html(msg);ga("send","event","state","state.check","state.check"+",ci="+get_value(simhw_sim_state("REG_IR_DECO"))+".a="+obj_result.neltos_expected+",b="+obj_result.neltos_obtained+",sd="+obj_result.errors);return true}function wepsim_dialog_check_reset(id_result,id_input){$("#"+id_input).tokenfield("setTokens",[]);$("#"+id_input).val("");$("#"+id_result).html("");return true}function wepsim_execute_reset(reset_cpu,reset_memory){wepsim_state_history_reset();if(true===reset_memory){var SIMWARE=get_simware();if(SIMWARE.firmware.length!==0)update_memories(SIMWARE)}if(true===reset_cpu){simcore_reset()}}function wepsim_execute_instruction(){var ret=simcore_check_if_can_execute();if(false===ret.ok){alert(ret.msg);return false}var options={verbosity:0,cycles_limit:get_cfg("DBG_limitick")};ret=simcore_execute_microprogram(options);if(false===ret.ok){wepsim_show_stopbyevent("Info",ret.msg);return false}return true}function wepsim_execute_microinstruction(){var ret=simcore_check_if_can_execute();if(false===ret.ok){alert(ret.msg);return false}ret=simcore_execute_microinstruction();if(false===ret.ok){wepsim_show_stopbyevent("Info",ret.msg);return false}return true}function wepsim_execute_set_breakpoint(addr){return asmdbg_set_breakpoint(addr)}var DBG_stop=true;var DBG_limit_instruction=0;function wepsim_execute_stop(btn1){var wsi=get_cfg("ws_idiom");var run_tag=i18n_get("gui",wsi,"Run");$(btn1).html("<i class='fa fa-play'></i><br><b>"+run_tag+"</b>");$(btn1).css("backgroundColor","#CCCCCC");DBG_stop=true;DBG_limit_instruction=0}function wepsim_execute_play(btn1){var wsi=get_cfg("ws_idiom");var stop_tag=i18n_get("gui",wsi,"Stop");var ret=simcore_check_if_can_execute();if(false===ret.ok){alert(ret.msg);return false}$(btn1).css("backgroundColor","rgb(51, 136, 204)");$(btn1).html("<i class='fa fa-stop'></i><br><b>"+stop_tag+"</b>");DBG_stop=false;DBG_limit_instruction=0;wepsim_execute_chainplay(btn1)}function wepsim_execute_toggle_play(btn1){if(DBG_stop===false){DBG_stop=true}else{wepsim_execute_play(btn1)}}function wepsim_check_stopbybreakpoint_firm(reg_maddr){var dash_maddr=simhw_internalState_get("MC_dashboard",reg_maddr);if(typeof dash_maddr==="undefined"){return false}return dash_maddr.breakpoint}function wepsim_check_stopbybreakpoint_asm(curr_firm,reg_pc){var curr_addr="0x"+reg_pc.toString(16);if(typeof curr_firm.assembly[curr_addr]==="undefined"){return false}return curr_firm.assembly[curr_addr].breakpoint}function wepsim_show_stopbyevent(msg1,msg2){var maddr_name=simhw_sim_ctrlStates_get().mpc.state;var reg_maddr=get_value(simhw_sim_state(maddr_name));var curr_maddr="0x"+reg_maddr.toString(16);var pc_name=simhw_sim_ctrlStates_get().pc.state;var reg_pc=get_value(simhw_sim_state(pc_name));var curr_addr="0x"+reg_pc.toString(16);var dialog_title=msg1+" @ pc="+curr_addr+"+mpc="+curr_maddr;$("#dlg_title2").html(dialog_title);$("#dlg_body2").html(msg2);$("#current_state2").modal("show");return true}function wepsim_check_mcdashboard(btn1,reg_maddr){var ref_mcdash=simhw_internalState_get("MC_dashboard",reg_maddr);if(typeof ref_mcdash==="undefined"){return true}if(ref_mcdash.state){wepsim_state_history_add();wepsim_state_history_list()}var notifications=ref_mcdash.notify.length;if(notifications>1){var dialog_title="Notify @ "+reg_maddr+": "+ref_mcdash.notify[1];var dialog_msg='<div style="max-height:70vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">';for(var k=1;k<notifications;k++){dialog_msg+=ref_mcdash.notify[k]+"\n<br>"}dialog_msg+="</div>";bootbox.confirm({title:dialog_title,message:dialog_msg,buttons:{cancel:{label:"Stop",className:"btn-danger  btn-sm"},confirm:{label:"Continue",className:"btn-primary btn-sm"}},callback:function(result){if(result)setTimeout(wepsim_execute_chainplay,get_cfg("DBG_delay"),btn1);else wepsim_execute_stop(btn1)}});return false}return true}function wepsim_execute_chunk(btn1,chunk){var options={verbosity:0,cycles_limit:get_cfg("DBG_limitick")};var curr_firm=simhw_internalState("FIRMWARE");var pc_name=simhw_sim_ctrlStates_get().pc.state;var ref_pc=simhw_sim_state(pc_name);var reg_pc=get_value(ref_pc);var maddr_name=simhw_sim_ctrlStates_get().mpc.state;var ref_maddr=simhw_sim_state(maddr_name);var reg_maddr=get_value(ref_maddr);var ret=false;var i_clks=0;var i=0;while(i<chunk){ret=simcore_execute_microinstruction2(reg_maddr,reg_pc);if(false===ret.ok){wepsim_show_stopbyevent("Info",ret.msg);wepsim_execute_stop(btn1);return false}i_clks++;if(options.cycles_limit>0&&i_clks>=options.cycles_limit){wepsim_show_stopbyevent("Info","Warning: clock cycles limit reached in a single instruction.");wepsim_execute_stop(btn1);return false}reg_maddr=get_value(ref_maddr);reg_pc=get_value(ref_pc);ret=wepsim_check_mcdashboard(btn1,reg_maddr);if(false===ret){return false}ret=wepsim_check_stopbybreakpoint_firm(reg_maddr);if(true===ret){wepsim_show_stopbyevent("Breakpoint","Microinstruction is going to be issue.");wepsim_execute_stop(btn1);return false}if(0===reg_maddr){ret=wepsim_check_stopbybreakpoint_asm(curr_firm,reg_pc);if(true===ret){wepsim_show_stopbyevent("Breakpoint","Instruction is going to be fetched.");wepsim_execute_stop(btn1);return false}i++;i_clks=0}}return true}function wepsim_execute_chunk_atlevel(btn1,chunk){var playlevel=get_cfg("DBG_level");if(playlevel!=="instruction"){return wepsim_execute_chunk(btn1,chunk)}var curr_firm=simhw_internalState("FIRMWARE");var pc_name=simhw_sim_ctrlStates_get().pc.state;var ref_pc=simhw_sim_state(pc_name);var maddr_name=simhw_sim_ctrlStates_get().mpc.state;var ref_maddr=simhw_sim_state(maddr_name);var options={verbosity:0,cycles_limit:get_cfg("DBG_limitick")};var ret=false;var reg_pc=0;for(var i=0;i<chunk;i++){ret=simcore_execute_microprogram(options);if(ret.ok===false){wepsim_show_stopbyevent("Info",ret.msg);wepsim_execute_stop(btn1);return false}reg_pc=get_value(ref_pc);ret=wepsim_check_stopbybreakpoint_asm(curr_firm,reg_pc);if(true===ret){wepsim_show_stopbyevent("Breakpoint","Instruction is going to be fetched.");wepsim_execute_stop(btn1);return false}}return true}var max_turbo=5;function wepsim_reset_max_turbo(){max_turbo=5}function wepsim_execute_chainplay(btn1){var t0=1;var t1=1;if(DBG_stop){wepsim_execute_stop(btn1);return}var turbo=1;if(get_cfg("DBG_delay")<5)turbo=max_turbo;if(max_turbo===5)t0=performance.now();var ret=wepsim_execute_chunk(btn1,turbo);if(false===ret){return}if(max_turbo===5){t1=performance.now()}if(max_turbo===5){max_turbo=3e3/(t1-t0)}DBG_limit_instruction+=turbo;if(DBG_limit_instruction>get_cfg("DBG_limitins")){wepsim_show_stopbyevent("Limit","Number of executed instructions limit reached.<br>"+"<br>"+"See related configuration options about limits:<br>"+"<img height='100vw' src='./images/simulator/simulator018.jpg'>");wepsim_execute_stop(btn1);return}setTimeout(wepsim_execute_chainplay,get_cfg("DBG_delay"),btn1)}function wepsim_notify_show_notify(ntf_title,ntf_message,ntf_type,ntf_delay){var ac=$("#alerts-container");if(ac.length===0){ac=$('<div id="alerts-container" '+'     class="col-10 offset-xs-1  col-md-8 offset-md-2  col-lg-6 offset-lg-3" '+'     style="position:fixed; top:10%; z-index:256;">');$("body").append(ac)}var btn1=$('<button type="button" class="close" onclick="wepsim_notify_close(); return false;">');var alert1=$('<div class="alert alert-'+ntf_type+' shadow border border-light">');ac.prepend(alert1.append(btn1.append("&times;")).append(ntf_message));if(ntf_delay!=0){window.setTimeout((function(){alert1.alert("close")}),ntf_delay)}var msg="Notification type "+ntf_type+" and title "+ntf_title+":"+ntf_message+". ";msg=$("</p>").html(msg).text();simcore_voice_speak(msg)}function wepsim_notify_do_notify(ntf_title,ntf_message,ntf_type,ntf_delay){simcore_notifications_add(ntf_title,ntf_message,ntf_type,ntf_delay);wepsim_notify_show_notify(ntf_title,ntf_message,ntf_type,ntf_delay)}function wepsim_notify_success(ntf_title,ntf_message){return wepsim_notify_do_notify(ntf_title,ntf_message,"success",get_cfg("NOTIF_delay"))}function wepsim_notify_error(ntf_title,ntf_message){return wepsim_notify_do_notify(ntf_title,ntf_message,"danger",0)}function wepsim_notify_warning(ntf_title,ntf_message){return wepsim_notify_do_notify(ntf_title,ntf_message,"warning",get_cfg("NOTIF_delay"))}function wepsim_notify_close(){$(".alert").alert("close");simcore_record_append_new("Close all notifications","wepsim_notify_close();\n")}function table_notifications_html(notifications){var u="";var t=null;var m="";for(var i=notifications.length-1;i!=-1;i--){t=new Date(notifications[i].date);m=notifications[i].message.replace(/\n/g,"<br>\n");u+='<li class="list-group-item list-group-item-'+notifications[i].type+' rounded-lg mx-2 my-1 p-2">'+'<h5 class="m-0 collapse7 show">'+'<span class="badge">('+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds()+")</span>"+'<span class="badge">['+t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"]</span>"+"</h5>"+'<span class="text-monospace">'+notifications[i].title+":"+"</span>"+m+"</li>"}if(u.trim()===""){u='<p class="m-3 text-center py-4"><b>&lt;Empty&gt;</b></p>'}var o='<div id="notifications3" class="alert alert-light p-0 m-0" role="alert">+ <span data-langkey="Recent">Recent</span></div>'+'<div id="container-notifications3" class="card" style="max-height:65vh; overflow:auto; -webkit-overflow-scrolling: touch;">'+'<ul class="list-group list-group-flush">'+u+"</ul>"+"</div>"+'<div class="alert alert-light p-0 m-0" role="alert">- <span data-langkey="Recent">Recent</span></div>';return o}var ws_modes=["newbie","intro","asm_mips","asm_rv32","asm_z80"];var ws_default_example={asm_mips:"ep:ep_mips:ep_s4_e1",asm_rv32:"ep:ep_rv32:ep_s7_e2",asm_z80:"ep:ep_z80:ep_s7_e3"};function wepsim_mode_getAvailableModes(){return ws_modes}function wepsim_mode_change(optValue){var hwid=-1;if(ws_modes.includes(optValue))hwid=simhw_getIdByName("ep");else hwid=simhw_getIdByName(optValue);wepsim_activehw(hwid);wepsim_activeview("only_asm",false);if(optValue.startsWith("asm_")){wepsim_activeview("only_asm",true);load_from_example_firmware(ws_default_example[optValue],false)}if("intro"==optValue){wsweb_recordbar_show();wepsim_checkpoint_loadExample("tutorial_2.txt");return true}if("newbie"==optValue){wepsim_newbie_tour();return true}return true}function share_infomation(info_shared,share_title,share_text,share_url){if(typeof navigator.share==="undefined"){alert("Sorry, unable to share:\n"+"navigator.share is not available.");return false}var data={};data.title=share_title;data.text=share_text;data.url=share_url;try{navigator.share(data)}catch(err){alert("Sorry, unsuccessful share: "+err.message)}ga("send","event","ui","ui.share","ui.share."+info_shared);return true}function table_config_html(config){var e_type="";var e_u_class="";var e_code_cfg="";var e_description="";var e_id="";var fmt_toggle="";var fmt_header="";var row="";var config_groupby_type={};for(var n=0;n<config.length;n++){e_type=config[n].type;e_u_class=config[n].u_class;e_code_cfg=config[n].code_cfg;e_description=config[n].description;e_id=config[n].id;if(fmt_toggle==="")fmt_toggle="bg-light";else fmt_toggle="";row='<div class="row py-1 '+fmt_toggle+" "+e_u_class+'" id="'+e_type+'">'+'<div class="col-md-auto">'+'    <span class="badge badge-pill badge-light">'+(n+1)+"</span>"+"</div>"+'<div class="col-md-4">'+e_code_cfg+"</div>"+'<div class="col-md collapse7 show align-items-center"><c>'+e_description+"</c></div>"+"</div>";if(typeof config_groupby_type[e_type]==="undefined"){config_groupby_type[e_type]=[]}config_groupby_type[e_type].push({row:row,u_class:e_u_class})}var o='<div class="container grid-striped border border-light">';var u="";var l="";var l1=[];var l2={};for(var m in config_groupby_type){u="";l2={};for(n=0;n<config_groupby_type[m].length;n++){u=u+config_groupby_type[m][n].row;l1=config_groupby_type[m][n].u_class.split(" ");for(var li=0;li<l1.length;li++){if(typeof l2[l1[li]]==="undefined"){l2[l1[li]]=0}l2[l1[li]]++}}l="";for(var lj in l2){if(l2[lj]===config_groupby_type[m].length){l+=lj+" "}}o=o+"<div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary bg-white sticky-top "+l+"'>"+"<span data-langkey='"+m+"'>"+m+"</span>"+"</div>"+u}o=o+"</div>";return o}function wepsim_show_breakpoint_icon_list(){var o="<div class='container' style='max-height:65vh; overflow:auto; -webkit-overflow-scrolling:touch;'>"+"<div class='row'>";var prev_type="";for(var elto in breakpoint_icon_list){if(breakpoint_icon_list[elto].type!=prev_type){o=o+"</div>"+"<div class='row p-1'>"+"<div class='float-none text-left text-capitalize font-weight-bold col-12 border-bottom border-secondary'>"+breakpoint_icon_list[elto].type+"</div>"+"</div>"+"<div class='row'>";prev_type=breakpoint_icon_list[elto].type}o=o+"<img src='images/stop/stop_"+elto+".gif' alt='"+elto+" icon' "+"     class='img-thumbnail col-3 mx-2 d-block "+breakpoint_icon_list[elto].addclass+"'"+"     style='height:6vh; min-height:30px;'"+"     onclick=\"$('#img_select1').attr('src',        'images/stop/stop_"+elto+".gif');"+"               $('#img_select1').attr('class',      '"+breakpoint_icon_list[elto].addclass+"');"+"               $('#img_select1').attr('data-theme', '');"+"\t        set_cfg('ICON_theme','"+elto+"'); save_cfg();"+"               $('#breakpointicon1').popover('hide');"+'               wepsim_restore_uicfg();">'}o=o+"</div>"+"</div>";return o}function wepsim_show_breakpoint_icon_template(){var o='<div class="popover" role="tooltip">'+'<div class="arrow"></div><h3 class="popover-header"></h3>'+'<div class="popover-body"></div>'+'<div class="popover-footer">'+'  <div class="m-0 p-2" style="background-color: #f7f7f7">'+'  <button type="button" id="close" data-role="none" '+'          class="btn btn-sm btn-danger w-100 p-0" '+"          onclick=\"$('#breakpointicon1').popover('hide');\"><span data-langkey=\"Close\">Close</span></button>"+"  </div>"+"</div>"+"</div>";return o}var ws_config=[];ws_config.push({id:"select7",type:"General",u_class:"",code_cfg:"<div class='form-group m-0'>"+i18n_get_selectcfg()+"</div>",code_init:function(){$("#select7").val(get_cfg("ws_idiom"))},description:"<span data-langkey='Idiom for help, examples, etc.'>Idiom for help, examples, etc.</span>"});ws_config.push({id:"slider3",type:"General",u_class:"",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label8-2000'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Notification delay: slow'"+"\t\t   onclick=\"update_cfg('NOTIF_delay', 2000);\">"+"\t\t<input type='radio' name='options' id='radio8-2000'   autocomplete='off' ><span data-langkey='Slow'>Slow</span>"+"\t    </label>"+"\t    <label id='label8-1000'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Notification delay: normal'"+"\t\t   onclick=\"update_cfg('NOTIF_delay', 1000);\">"+"\t\t<input type='radio' name='options' id='radio8-1000'  autocomplete='off' ><span data-langkey='Normal'>Normal</span>"+"\t    </label>"+"\t    <label id='label8-100'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Notification delay: fast'"+"\t\t   onclick=\"update_cfg('NOTIF_delay', 100);\">"+"\t\t<input type='radio' name='options' id='radio8-100'  autocomplete='off' ><span data-langkey='Fast'>Fast</span>"+"\t    </label>"+"\t</div>",code_init:function(){$("#label8-"+get_cfg("NOTIF_delay")).button("toggle")},description:"<span data-langkey='Notification speed: time before disapear'>Notification speed: time before disapear</span>"});ws_config.push({id:"radio15",type:"General",u_class:"",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label15-true'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary p-1' "+"               aria-label='WepSIM dark mode: true' "+'\t\t   onclick="wepsim_restore_darkmode(true) ; '+"\t\t             update_cfg('ws_skin_dark_mode', true);"+'\t\t             return false;">'+"\t\t<input type='radio' name='options' id='radio15-true'  aria-label='Dark mode: true'  autocomplete='off' >On"+"\t    </label>"+"\t    <label id='label15-false'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary p-1' "+"               aria-label='WepSIM dark mode: true' "+'\t\t   onclick="wepsim_restore_darkmode(false) ; '+"\t\t             update_cfg('ws_skin_dark_mode', false);"+'\t\t             return false;">'+"\t\t<input type='radio' name='options' id='radio15-false' aria-label='Dark mode: false' autocomplete='off' >Off"+"\t    </label>"+"\t</div>",code_init:function(){var optValue=get_cfg("ws_skin_dark_mode");$("#label15-"+optValue).button("toggle");wepsim_restore_darkmode(optValue)},description:"<span data-langkey='Dark Mode'>Dark Mode</span>"});ws_config.push({id:"radio12",type:"Execution",u_class:"",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label12-50'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Speed: slow'"+"\t\t   onclick=\"update_cfg('DBG_delay', 50);\">"+"\t\t<input type='radio' name='options' id='radio12-50'   autocomplete='off' ><span data-langkey='Slow'>Slow</span>"+"\t    </label>"+"\t    <label id='label12-5'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Speed: normal'"+"\t\t   onclick=\"update_cfg('DBG_delay', 5);\">"+"\t\t<input type='radio' name='options' id='radio12-5'  autocomplete='off' ><span data-langkey='Normal'>Normal</span>"+"\t    </label>"+"\t    <label id='label12-1'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Speed: fast'"+"\t\t   onclick=\"update_cfg('DBG_delay', 1);\">"+"\t\t<input type='radio' name='options' id='radio12-1'  autocomplete='off' ><span data-langkey='Fast'>Fast</span>"+"\t    </label>"+"\t</div>",code_init:function(){$("#label12-"+get_cfg("DBG_delay")).button("toggle")},description:"<span data-langkey='Running speed: execution speed'>Running speed: execution speed</span>"});ws_config.push({id:"select1",type:"Execution",u_class:"",code_cfg:"<a href='#' id='breakpointicon1' title='Please select breakpoint icon' tabindex='0'"+"   data-toggle='popover' data-trigger='click'>"+"   \t\t<img alt='stop icon' id='img_select1' src='images/stop/stop_classic.gif' class='' "+"                 style='position:relative; left:10px; height:30px !important; width:30px !important;'>"+"</a>",code_init:function(){var elto=get_cfg("ICON_theme");$("#img_select1").attr("src","images/stop/stop_"+elto+".gif");$("#img_select1").attr("class",breakpoint_icon_list[elto].addclass);$("#breakpointicon1").popover({html:true,content:wepsim_show_breakpoint_icon_list,template:wepsim_show_breakpoint_icon_template(),sanitizeFn:function(content){return content}}).on("shown.bs.popover",(function(shownEvent){wepsim_restore_uicfg()}))},description:"<span data-langkey='Breakpoint icon: icon to be used for breakpoints'>Breakpoint icon: icon to be used for breakpoints</span>"});ws_config.push({id:"select6",type:"Execution",u_class:"",code_cfg:" <div class='form-group m-0'>"+"\t    <select name='select6' id='select6' class='form-control form-control-sm custom-select'"+"\t\t    aria-label='max. ticks per instruction' "+"\t\t    onchange=\"var opt = $(this).find('option:selected');"+"\t\t\t       var optValue = opt.val();"+"\t\t\t       update_cfg('DBG_limitins',optValue);\""+"\t\t    data-native-menu='false'>"+"\t\t<option value='-1'>without limit</option>"+"\t\t<option value='500'  >500</option>"+"\t\t<option value='1000' >1000</option>"+"\t\t<option value='2000' >2000</option>"+"\t\t<option value='10000'>10000</option>"+"\t\t<option value='50000'>50000</option>"+"\t    </select>"+"\t </div>",code_init:function(){$("#select6").val(get_cfg("DBG_limitins"))},description:"<span data-langkey='Limit instructions: number of instructions to be executed'>Limit instructions: number of instructions to be executed</span>"});ws_config.push({id:"select3",type:"Execution",u_class:"",code_cfg:" <div class='form-group m-0'>"+"\t    <select name='select3' id='select3' class='form-control form-control-sm custom-select'"+"\t\t    aria-label='max. ticks per instruction' "+"\t\t    onchange=\"var opt = $(this).find('option:selected');"+"\t\t\t       var optValue = opt.val();"+"\t\t\t       update_cfg('DBG_limitick',optValue);\""+"\t\t    data-native-menu='false'>"+"\t\t<option value='-1'>without limit</option>"+"\t\t<option value='500'  >500</option>"+"\t\t<option value='1000' >1000</option>"+"\t\t<option value='2000' >2000</option>"+"\t\t<option value='10000'>10000</option>"+"\t\t<option value='50000'>50000</option>"+"\t    </select>"+"\t </div>",code_init:function(){$("#select3").val(get_cfg("DBG_limitick"))},description:"<span data-langkey='Limit instruction ticks: to limit clock ticks'>Limit instruction ticks: to limit clock ticks</span>"});ws_config.push({id:"radio7",type:"Editor",u_class:"",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label7-default'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;' "+"\t\t   onclick=\"update_cfg('editor_theme','default');"+"\t\t\t     sim_cfg_editor_theme(inputfirm) ;"+'\t\t\t     sim_cfg_editor_theme(inputasm) ;">'+"\t\t<input type='radio' name='options' id='radio7-default' aria-label='Editor theme: light' autocomplete='off' ><span data-langkey='Light'>Light</span>"+"\t    </label>"+"\t    <label id='label7-blackboard'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;' "+"\t\t   onclick=\"update_cfg('editor_theme','blackboard');"+"\t\t\t     sim_cfg_editor_theme(inputfirm) ;"+'\t\t\t     sim_cfg_editor_theme(inputasm) ;">'+"\t\t<input type='radio' name='options' id='radio7-blackboard' aria-label='Editor theme: dark' autocomplete='off' ><span data-langkey='Dark'>Dark</span>"+"\t    </label>"+"\t</div>",code_init:function(){$("#label7-"+get_cfg("editor_theme")).button("toggle")},description:"<span data-langkey='Editor theme: light or dark'>Editor theme: light or dark</span>"});ws_config.push({id:"select2",type:"Editor",u_class:"",code_cfg:"<div class='form-group m-0'>"+"   <select name='select2' id='select2' class='form-control form-control-sm custom-select'"+"\t    aria-label='Editor mode'    "+"\t    onchange=\"var opt = $(this).find('option:selected');"+"\t\t      var optValue = opt.val();"+"\t\t      update_cfg('editor_mode',optValue);"+"\t\t      sim_cfg_editor_mode(inputfirm);"+'\t\t      sim_cfg_editor_mode(inputasm);"'+"\t    data-native-menu='false'>"+"\t<option value='default'>default</option>"+"\t<option value='vim'>VIM</option>"+"\t<option value='emacs'>Emacs</option>"+"\t<option value='sublime'>Sublime</option>"+"    </select>"+"</div>",code_init:function(){$("#select2").val(get_cfg("editor_mode"))},description:"<span data-langkey='Editor mode: vim, emacs, etc.'>Editor mode: vim, emacs, etc.</span>"});ws_config.push({id:"radio2",type:"Register file",u_class:"user_archived",code_cfg:"    <div class='btn-group-toggle' data-toggle='buttons' >"+"    <div class='btn-group d-flex btn-group-justified'>"+"\t    <label id='label2-unsigned_16_nofill'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display format: hexadecimal'"+"\t\t   onclick=\"update_cfg('RF_display_format','unsigned_16_nofill'); show_rf_values(); show_states(); show_memories_values();\">"+"\t\t<input type='radio' name='options' id='radio2-unsigned_16_nofill'  autocomplete='off' >1A<sub>16</sub>"+"\t    </label>"+"\t    <label id='label2-unsigned_10_nofill'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display format: decimal'"+"\t\t   onclick=\"update_cfg('RF_display_format','unsigned_10_nofill'); show_rf_values(); show_states(); show_memories_values();\">"+"\t\t<input type='radio' name='options' id='radio2-unsigned_10_nofill'  autocomplete='off' >32<sub>10</sub>"+"\t    </label>"+"\t    <label id='label2-unsigned_8_nofill'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display format: octal'"+"\t\t   onclick=\"update_cfg('RF_display_format','unsigned_8_nofill');  show_rf_values(); show_states(); show_memories_values();\">"+"\t\t<input type='radio' name='options' id='radio2-unsigned_8_nofill'   autocomplete='off' >26<sub>8</sub>"+"\t    </label>"+"    </div>"+"    <div class='btn-group d-flex btn-group-justified'>"+"\t    <label id='label2-unsigned_16_fill'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display format: hexadecimal'"+"\t\t   onclick=\"update_cfg('RF_display_format','unsigned_16_fill'); show_rf_values(); show_states(); show_memories_values();\">"+"\t\t<input type='radio' name='options' id='radio2-unsigned_16_fill'  autocomplete='off' >001A<sub>16</sub>"+"\t    </label>"+"\t    <label id='label2-unsigned_10_fill'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display format: decimal'"+"\t\t   onclick=\"update_cfg('RF_display_format','unsigned_10_fill'); show_rf_values(); show_states(); show_memories_values();\">"+"\t\t<input type='radio' name='options' id='radio2-unsigned_10_fill'  autocomplete='off' >0032<sub>10</sub>"+"\t    </label>"+"\t    <label id='label2-unsigned_8_fill'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display format: octal'"+"\t\t   onclick=\"update_cfg('RF_display_format','unsigned_8_fill');  show_rf_values(); show_states(); show_memories_values();\">"+"\t\t<input type='radio' name='options' id='radio2-unsigned_8_fill'   autocomplete='off' >0026<sub>8</sub>"+"\t    </label>"+"    </div>"+"\t</div>",code_init:function(){$("#label2-"+get_cfg("RF_display_format")).button("toggle")},description:"<span data-langkey='Display format'>Display format</span>&nbsp;"+"<a href='#' data-toggle='popover1' title='Example of display formats' data-html='true' "+'   data-content=\'<img alt="register file example" src="images/cfg-rf.gif" class="img-fluid">\'><span <span data-langkey=\'(example)\'>(example)</span></a>'});ws_config.push({id:"radio3",type:"Register file",u_class:"user_archived",code_cfg:" <div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label3-numerical'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display name (number)'"+"\t\t   onclick=\"update_cfg('RF_display_name','numerical'); wepsim_show_rf_names();\">"+"\t\t<input type='radio' name='options' id='radio3-numerical'  autocomplete='off' ><span data-langkey='Numbers'>Numbers</span>"+"\t    </label>"+"\t    <label id='label3-logical'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='register file display name (user identification)'"+"\t\t   onclick=\"update_cfg('RF_display_name','logical'); wepsim_show_rf_names();\">"+"\t\t<input type='radio' name='options' id='radio3-logical' autocomplete='off' ><span data-langkey='Labels'>Labels</span>"+"\t    </label>"+"\t</div>",code_init:function(){$("#label3-"+get_cfg("RF_display_name")).button("toggle")},description:"<span data-langkey='Register file names'>Register file names</span>"});ws_config.push({id:"radio9",type:"Register file",u_class:"user_archived",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label9-true'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary p-1' "+"\t\t   aria-label='Is editable: true'"+"\t\t   onclick=\"update_cfg('is_editable',true);\">"+"\t\t<input type='radio' name='options' id='radio9-true'  aria-label='Is editable: true'  autocomplete='off' >On"+"\t    </label>"+"\t    <label id='label9-false'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary p-1' "+"\t\t   aria-label='Is editable: false'"+"\t\t   onclick=\"update_cfg('is_editable',false);\">"+"\t\t<input type='radio' name='options' id='radio9-false' aria-label='Is editable: false' autocomplete='off' >Off"+"\t    </label>"+"\t</div>",code_init:function(){$("#label9-"+get_cfg("is_editable")).button("toggle")},description:"<span data-langkey='Editable registers: edit register file values'>Editable registers: edit register file values</span>"});ws_config.push({id:"colorpicker1",type:"Circuitry simulation",u_class:"user_microcode",code_cfg:"<fieldset data-role='controlgroup' data-type='horizontal' data-mini='true' style='margin:0 0 0 0'>"+"\t <input type='color'"+"\t\taria-label='Color for active data'"+"\t\tid='colorpicker1'"+"\t\tdata-show-value='false'"+"\t\tclass='noshadow-d m-0' "+"\t\tonchange=\"update_cfg('color_data_active', $('#colorpicker1').spectrum('get')); refresh();\">"+"</fieldset>",code_init:function(){$("#colorpicker1").spectrum({preferredFormat:"hex",color:get_cfg("color_data_active")})},description:"<span data-langkey='Data-path color'>Data-path color</span> <a href='#' data-toggle='popover1' title='Example of data-path color' data-html='true' data-content='<img alt=\"register file example\" src=\"images/cfg-colors.gif\" class=\"img-fluid\">'><span <span data-langkey='(example)'>(example)</span></a>"});ws_config.push({id:"colorpicker2",type:"Circuitry simulation",u_class:"user_microcode",code_cfg:"<fieldset data-role='controlgroup' data-type='horizontal' data-mini='true' style='margin:0 0 0 0'>"+"\t <input type='color'"+"\t\taria-label='Color for active signal name'"+"\t\tid='colorpicker2'"+"\t\tdata-show-value='false'"+"\t\tclass='noshadow-d m-0' "+"\t\tonchange=\"update_cfg('color_name_active', $('#colorpicker2').spectrum('get')); refresh();\">"+"\t </fieldset> ",code_init:function(){$("#colorpicker2").spectrum({preferredFormat:"hex",color:get_cfg("color_name_active")})},description:"<span data-langkey='Signal color'>Signal color</span>"});ws_config.push({id:"radio10",type:"Circuitry simulation",u_class:"user_archived user_microcode",code_cfg:" <div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label10-true'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Is by value: true'"+"\t\t   onclick=\"update_cfg('is_byvalue',true);\">"+"\t\t<input type='radio' name='options' id='radio10-true'   autocomplete='off' >Value"+"\t    </label>"+"\t    <label id='label10-false'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Is by value: false'"+"\t\t   onclick=\"update_cfg('is_byvalue',false);\">"+"\t\t<input type='radio' name='options' id='radio10-false'  autocomplete='off' >Activation"+"\t    </label>"+"\t</div> ",code_init:function(){$("#label10-"+get_cfg("is_byvalue")).button("toggle")},description:"<span data-langkey='Show by value or by activation'>Show by value or by activation</span>"});ws_config.push({id:"radio5",type:"Circuitry simulation",u_class:"user_microcode",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label5-true'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Is interactive: true'"+"\t\t   onclick=\"update_cfg('is_interactive',true);\">"+"\t\t<input type='radio' name='options' id='radio5-true'   autocomplete='off' >On"+"\t    </label>"+"\t    <label id='label5-false'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Is interactive: false'"+"\t\t   onclick=\"update_cfg('is_interactive',false);\">"+"\t\t<input type='radio' name='options' id='radio5-false'  autocomplete='off' >Off"+"\t    </label>"+"\t</div> ",code_init:function(){$("#label5-"+get_cfg("is_interactive")).button("toggle")},description:"<span data-langkey='Interactive mode: signal value can be updated'>Interactive mode: signal value can be updated</span>"});ws_config.push({id:"radio6",type:"Circuitry simulation",u_class:"user_microcode",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label6-true'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Is quick interactive: true'"+"\t\t   onclick=\"update_cfg('is_quick_interactive',true);\">"+"\t\t<input type='radio' name='options' id='radio6-true'   autocomplete='off' >On"+"\t    </label>"+"\t    <label id='label6-false'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Is quick interactive: false'"+"\t\t   onclick=\"update_cfg('is_quick_interactive',false);\">"+"\t\t<input type='radio' name='options' id='radio6-false'  autocomplete='off' >Off"+"\t    </label>"+"\t</div> ",code_init:function(){$("#label6-"+get_cfg("is_quick_interactive")).button("toggle")},description:"<span data-langkey='Quick interactive mode: quick update of signal value'>Quick interactive mode: quick update of signal value</span>"});ws_config.push({id:"radio11",type:"Accesibility",u_class:"user_archived",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label11-true'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Active voice: true'"+"\t\t   onclick=\"update_cfg('use_voice',true); wepsim_voice_start();\">"+"\t\t<input type='radio' name='options' id='radio11-true'   autocomplete='off' >On"+"\t    </label>"+"\t    <label id='label11-false'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Active voice: false'"+"\t\t   onclick=\"update_cfg('use_voice',false); wepsim_voice_stop();\">"+"\t\t<input type='radio' name='options' id='radio11-false'  autocomplete='off' >Off"+"\t    </label>"+"\t</div>",code_init:function(){$("#label11-"+get_cfg("use_voice")).button("toggle")},description:"<span data-langkey='Active voice: external voice control'>Active voice: external voice control</span>"});ws_config.push({id:"radio13",type:"Accesibility",u_class:"user_archived",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label13-text'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Verbose: text'"+"\t\t   onclick=\"update_cfg('verbal_verbose','text');\">"+"\t\t<input type='radio' name='options' id='radio13-text'   autocomplete='off' >Text"+"\t    </label>"+"\t    <label id='label13-math'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'"+"\t\t   aria-label='Verbose: math'"+"\t\t   onclick=\"update_cfg('verbal_verbose','math');\">"+"\t\t<input type='radio' name='options' id='radio13-math'  autocomplete='off' >Math"+"\t    </label>"+"\t</div>",code_init:function(){$("#label13-"+get_cfg("verbal_verbose")).button("toggle")},description:"<span data-langkey='Verbalization: textual or mathematical'>Verbalization: textual or mathematical</span>"});ws_config.push({id:"select8",type:"Accesibility",u_class:"",code_cfg:"<div class='form-group m-0'>"+" <select name='select8' id='select8' class='form-control form-control-sm custom-select'"+"         aria-label='User Interface for WepSIM' "+"         onchange=\"var opt = $(this).find('option:selected');"+"                    var optValue = opt.val();"+"                    update_cfg('ws_skin_ui', optValue);"+"                    window.removeEventListener('beforeunload', wepsim_confirm_exit);"+"                    window.location='wepsim-' + optValue + '.html';"+'                    return false;"'+"         data-native-menu='false'>"+"    <option value='classic'>Desktop</option>"+"    <option value='compact'>Mobile</option>"+" </select>"+"</div>",code_init:function(){$("#select8").val(get_cfg("ws_skin_ui"))},description:"<span data-langkey='WepSIM User Interface skin'>WepSIM User Interface skin</span>"});ws_config.push({id:"radio14",type:"Accesibility",u_class:"",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >"+"\t    <label id='label14-only_asm__of__only_frequent__on'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary p-1' "+"               aria-label='User Interface set of features for WepSIM: false' "+"\t\t   onclick=\"var optValue = 'only_asm:of:only_frequent:on';"+"\t\t             update_cfg('ws_skin_user', optValue);"+"                         wepsim_restore_view(optValue);"+'\t\t             return false;">'+"\t\t<input type='radio' name='options' id='radio14-false' aria-label='Is expert: false' autocomplete='off' >On"+"\t    </label>"+"\t    <label id='label14-only_asm__of__only_frequent__of'"+"\t\t   class='btn btn-sm btn-light w-50 btn-outline-secondary p-1' "+"               aria-label='User Interface set of features for WepSIM: true' "+"\t\t   onclick=\"var optValue = 'only_asm:of:only_frequent:of';"+"\t\t             update_cfg('ws_skin_user', optValue);"+"                         wepsim_restore_view(optValue);"+'\t\t             return false;">'+"\t\t<input type='radio' name='options' id='radio14-true'  aria-label='Is expert: true'  autocomplete='off' >Off"+"\t    </label>"+"\t</div>",code_init:function(){var optValue=get_cfg("ws_skin_user");$("#label14-"+optValue.replace(/:/g,"__")).button("toggle")},description:"<span data-langkey='Beginner view'>Beginner view</span>"});function load_from_example_assembly(example_id,chain_next_step){inputasm.setValue("Please wait...");inputasm.refresh();var sid=example_id.split(":");var sample_hw="";if(sid.length>0)sample_hw=sid[0];else console.log("warning: example without hardware id");var sample_mc="";if(sid.length>1)sample_mc=sid[1];else console.log("warning: example without microcode id");var sample_asm="";if(sid.length>2)sample_asm=sid[2];else console.log("warning: example without assembly id");var url="examples/assembly/asm-"+sample_asm+".txt";var do_next=function(mcode){inputasm.setValue(mcode);inputasm.refresh();var ok=false;var SIMWARE=get_simware();if(SIMWARE.firmware.length!==0){ok=wepsim_compile_assembly(mcode)}if(false===ok){wsweb_change_workspace_assembly();return}if(true===chain_next_step){setTimeout((function(){wsweb_change_workspace_simulator();show_memories_values()}),50)}wepsim_notify_success("<strong>INFO</strong>","Example ready to be used.")};wepsim_load_from_url(url,do_next);simcore_record_append_new("Load assembly from example "+example_id,'load_from_example_assembly("'+example_id+'", '+chain_next_step+");\n");ga("send","event","example","example.assembly","example.assembly."+sample_hw+"."+sample_asm)}function load_from_example_firmware(example_id,chain_next_step){inputfirm.setValue("Please wait...");inputfirm.refresh();var sid=example_id.split(":");var sample_hw="";if(sid.length>0)sample_hw=sid[0];else console.log("warning: example without hardware id");var sample_mc="";if(sid.length>1)sample_mc=sid[1];else console.log("warning: example without microcode id");var sample_asm="";if(sid.length>2)sample_asm=sid[2];else console.log("warning: example without assembly id");var url="examples/microcode/mc-"+sample_mc+".txt";inputfirm.setOption("readOnly",false);var do_next=function(mcode){inputfirm.setValue(mcode);inputfirm.refresh();var ok=wepsim_compile_firmware(mcode);if(false===ok){wsweb_change_workspace_microcode();return}if(true===chain_next_step){setTimeout((function(){load_from_example_assembly(example_id,chain_next_step)}),50)}else{show_memories_values();wepsim_notify_success("<strong>INFO</strong>","Example ready to be used.")}};wepsim_load_from_url(url,do_next);simcore_record_append_new("Load firmware from example "+example_id,'load_from_example_firmware("'+example_id+'", false);\n');ga("send","event","example","example.firmware","example.firmware."+sample_hw+"."+sample_mc)}function share_example(m,base_url){var e_description=ws_examples[m].description;e_description=e_description.replace(/<[^>]+>/g,"");var e_id=ws_examples[m].id;var e_hw=ws_examples[m].hardware;var share_title="WepSIM example "+e_id+"...";var share_text="This is a link to the WepSIM example "+e_id+" ("+e_description+"):\n";var share_url=""+base_url+"?mode="+e_hw+"&example="+m;return share_infomation("example_"+m,share_title,share_text,share_url)}function table_examples_html(examples){var ahw="ep";var ep_modes=wepsim_mode_getAvailableModes();var mode=get_cfg("ws_mode");if(mode!=="null"&&!ep_modes.includes(mode)){ahw=mode}var base_url=get_cfg("base_url");var fmt_toggle="";var t_hwmcasm="";var t_index="";var e_title="";var e_type="";var e_level="";var e_hw="";var e_mc="";var e_asm="";var e_description="";var e_id="";var u="";var examples_groupby_type={};for(var m=0;m<examples.length;m++){e_modes=examples[m].modes;if(!e_modes.split(",").includes(mode)){continue}e_hw=examples[m].hardware;if(e_hw!==ahw){continue}e_title=examples[m].title;e_type=examples[m].type;e_level=examples[m].level;e_mc=examples[m].microcode;e_asm=examples[m].assembly;e_description=examples[m].description;e_id=examples[m].id;t_hwmcasm=e_hw+":"+e_mc+":"+e_asm;t_index=(m+1).toString().padStart(2," ").replace(/ /g,"&nbsp;");if(fmt_toggle==="")fmt_toggle="bg-light";else fmt_toggle="";u="<div class='row py-1 "+fmt_toggle+" user_"+e_level+"'>"+'<div class="col-sm-auto">'+'    <span class="badge badge-pill badge-light">'+t_index+"</span>"+"</div>"+'<div class="col-sm-3">'+'     <span style="cursor:pointer;" '+'           id="example_'+m+'" '+'           onclick="simcore_record_append_pending(); '+"                    load_from_example_firmware('"+t_hwmcasm+"', true); "+"                    wsweb_dialog_close('examples'); "+'                    return false;" '+'           class="btn-like bg-info text-white text-truncate rounded border px-1 mr-2" style="cursor:pointer;" >'+e_title+"</span>"+"</div>"+'<div class="col-sm collapse7 show">'+"    <c>"+e_description+"</c>"+"</div>"+'<div class="col-sm-auto">'+'    <span id="example_reference_'+e_id+'" class="d-none">'+base_url+"?mode="+mode+"&example="+m+"</span>"+'    <div class="btn-group btn-group-md float-right align-top">'+'           <button type="button" '+'                   class="btn btn-md btn-info dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+'              <span class="sr-only">Toggle Dropdown</span>'+"           </button>"+'           <div class="dropdown-menu bg-info" style="z-index:1024;">'+'             <a onclick="simcore_record_append_pending();'+"                         load_from_example_firmware('"+t_hwmcasm+"', true);"+"                         wsweb_dialog_close('examples'); "+'                         return false;"'+'                class="dropdown-item text-white bg-info" href="#"><c><span data-langkey="Load example">Load example</span></c></a>'+'             <a onclick="simcore_record_append_pending();'+"                         load_from_example_assembly('"+t_hwmcasm+"', false);"+"                         wsweb_dialog_close('examples'); "+'                         return false;"'+'                class="dropdown-item text-white bg-info" href="#"><c><span data-langkey="Load Assembly only">Load Assembly only</span></c></a>'+'             <a onclick="simcore_record_append_pending();'+"                         load_from_example_firmware('"+t_hwmcasm+"', false);"+"                         wsweb_dialog_close('examples'); "+'                         return false;"'+'                class="dropdown-item text-white bg-info" href="#"><c><span data-langkey="Load Firmware only">Load Firmware only</span></c></a>'+"             <a onclick=\"$('#example_reference_"+e_id+"').removeClass('d-none');"+"                         wepsim_clipboard_CopyFromDiv('example_reference_"+e_id+"');"+"                         $('#example_reference_"+e_id+"').addClass('d-none');"+"                         wsweb_dialog_close('examples'); "+'                         return false;"'+'                class="dropdown-item text-white bg-info" href="#"><c><span data-langkey="Copy reference to clipboard">Copy reference to clipboard</span></c></a>'+"             <a onclick=\"wsweb_dialog_close('examples'); "+"                         share_example('"+m+"', '"+base_url+"');"+'                         return false;"'+'                class="dropdown-item text-white bg-info user_archived" href="#"><c><span data-langkey="Share">Share</span></c></a>'+"           </div>"+"    </div>"+"</div>"+"</div>";if(typeof examples_groupby_type[e_type]==="undefined"){examples_groupby_type[e_type]=[]}examples_groupby_type[e_type].push({row:u,level:e_level})}var o="";u="";var l="";for(m in examples_groupby_type){u="";l=examples_groupby_type[m][0].level;for(var n=0;n<examples_groupby_type[m].length;n++){u=u+examples_groupby_type[m][n].row;if(l!==examples_groupby_type[m][n].level){l=""}}o=o+"<div class='col-sm-12 border-bottom border-secondary text-right text-capitalize font-weight-bold bg-white sticky-top user_"+l+"'>"+ahw.toUpperCase()+": "+m+"</div>"+u}if(o.trim()===""){o='&lt;<span data-langkey="No examples available...">No examples are available for the selected hardware</span>&gt;'}o='<div class="container grid-striped border border-light">'+o+"</div>";return o}var ws_examples=[];ws_examples.push({id:"S1E1",title:"<span data-langkey='Instructions'>Instructions</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_base",assembly:"ep_s1_e1",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S1E2",title:"<span data-langkey='Memory access'>Memory access</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_base",assembly:"ep_s1_e2",description:"<span data-langkey='example_01_02'>Simple example with fetch, memory access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S1E3",title:"<span data-langkey='Looping'>Looping</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_enhanced",assembly:"ep_s1_e3",description:"<span data-langkey='example_01_03'>Simple example with fetch, branch, and basic .text segment.</span>"});ws_examples.push({id:"S1E4",title:"<span data-langkey='Vector'>Vector</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_enhanced",assembly:"ep_s1_e4",description:"<span data-langkey='example_01_04'>Simple example with fetch, branch, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E1",title:"<span data-langkey='I/O'>I/O</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_base",assembly:"ep_s2_e1",description:"<span data-langkey='example_02_01'>Example with programmed I/O access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E2",title:"<span data-langkey='Subrutine'>Subrutine</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_enhanced",assembly:"ep_s2_e2",description:"<span data-langkey='example_02_02'>Extended example with more instructions and I/O (keyboard, display).</span>"});ws_examples.push({id:"S2E3",title:"<span data-langkey='Masks & shift'>Masks & shift</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_s2_e3",assembly:"ep_s2_e3",description:"<span data-langkey='example_02_03'>More extended example with masks, shift, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E4",title:"<span data-langkey='Matrix'>Matrix</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_s2_e4",assembly:"ep_s2_e4",description:"<span data-langkey='example_02_04'>Extended example with subrutine and matrix.</span>"});ws_examples.push({id:"S3E1",title:"<span data-langkey='Interruptions'>Interruptions</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"archived",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_s3_e1",assembly:"ep_s3_e1",description:"<span data-langkey='example_03_01'><b>Instructive</b> example with interruptions support: fetch, RETI, and .ktext/.kdata.</span>"});ws_examples.push({id:"S3E2",title:"<span data-langkey='System call'>System call</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"archived",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_s3_e2",assembly:"ep_s3_e2",description:"<span data-langkey='example_03_02'><b>Instructive</b> example with system call support.</span>"});ws_examples.push({id:"S3E3",title:"<span data-langkey='Exception'>Exception</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"archived",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_s3_e3",assembly:"ep_s3_e3",description:"<span data-langkey='example_03_03'><b>Instructive</b> example with floating point exception.</span>"});ws_examples.push({id:"S4E1",title:"<span data-langkey='Int. + syscall + except.'>Int. + syscall + except.</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_s4_e1",assembly:"ep_s4_e1",description:"<span data-langkey='example_04_01'>Advanced example with interruption, system call, and exception.</span>"});ws_examples.push({id:"S4E2",title:"<span data-langkey='SC 1, 4-5, 8, 11-12'>SC 1, 4-5, 8, 11-12</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_os",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S4E3",title:"<span data-langkey='Threads'>Threads</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_os",assembly:"ep_s4_e3",description:"<span data-langkey='example_04_03'>Example of threads.</span>"});ws_examples.push({id:"S4E4",title:"<span data-langkey='Alloc.s'>Alloc.s</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_os",assembly:"ep_s4_e4",description:"<span data-langkey='example_04_04'>Example of malloc + free.</span>"});ws_examples.push({id:"S7E1",title:"<span data-langkey='MIPS32-like'>MIPS32-like</span>",type:"<span data-langkey='Native'>Native</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_mips",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S7E2",title:"<span data-langkey='RISCV32'>RISCV32</span>",type:"<span data-langkey='Native'>Native</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_rv32",assembly:"ep_s7_e2",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S7E3",title:"<span data-langkey='Z80-like'>Z80-like</span>",type:"<span data-langkey='Native'>Native</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_z80",assembly:"ep_s7_e3",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S1E1",title:"<span data-langkey='Instructions'>Instructions</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e1",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S1E2",title:"<span data-langkey='Memory access'>Memory access</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e2",description:"<span data-langkey='example_01_02'>Simple example with fetch, memory access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S1E3",title:"<span data-langkey='Looping'>Looping</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e3",description:"<span data-langkey='example_01_03'>Simple example with fetch, branch, and basic .text segment.</span>"});ws_examples.push({id:"S1E4",title:"<span data-langkey='Vector'>Vector</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e4",description:"<span data-langkey='example_01_04'>Simple example with fetch, branch, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E1",title:"<span data-langkey='I/O'>I/O</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e1",description:"<span data-langkey='example_02_01'>Example with programmed I/O access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E2",title:"<span data-langkey='Subrutine'>Subrutine</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"archived",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e2",description:"<span data-langkey='example_02_02'>Extended example with more instructions and I/O (keyboard, display).</span>"});ws_examples.push({id:"S2E3",title:"<span data-langkey='Masks & shift'>Masks & shift</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e3",description:"<span data-langkey='example_02_03'>More extended example with masks, shift, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E4",title:"<span data-langkey='Matrix'>Matrix</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e4",description:"<span data-langkey='example_02_04'>Extended example with subrutine and matrix.</span>"});ws_examples.push({id:"S3E1",title:"<span data-langkey='Interruptions'>Interruptions</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s3_e1",description:"<span data-langkey='example_03_01b'>Example with interruptions support: fetch, RETI, and .ktext/.kdata.</span>"});ws_examples.push({id:"S3E2",title:"<span data-langkey='System call'>System call</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s3_e2",description:"<span data-langkey='example_03_02b'>Example with system call support.</span>"});ws_examples.push({id:"S3E3",title:"<span data-langkey='Exception'>Exception</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s3_e3",description:"<span data-langkey='example_03_03b'>Example with floating point exception.</span>"});ws_examples.push({id:"S4E1",title:"<span data-langkey='Int. + syscall + except.'>Int. + syscall + except.</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s4_e1",description:"<span data-langkey='example_04_01'>Advanced example with interruption, system call, and exception.</span>"});ws_examples.push({id:"S4E2",title:"<span data-langkey='syscall 1, 4-5, 8, 11-12'>syscall 1, 4-5, 8, 11-12</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,asm_mips",hardware:"ep",microcode:"ep_mips",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S6E1",title:"<span data-langkey='Dummy instruction'>Dummy instruction</span>",type:"<span data-langkey='Special'>Special</span>",level:"actual",modes:"newbie,intro,ep",hardware:"ep",microcode:"ep_bare",assembly:"ep_s6_e1",description:"<span data-langkey='example_06_01'>Test example.</span>"});ws_examples.push({id:"S7E2",title:"<span data-langkey='Instructions'>Instructions</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,asm_rv32",hardware:"ep",microcode:"ep_rv32",assembly:"ep_s7_e2",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S7E3",title:"<span data-langkey='Instructions'>Instructions</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,asm_z80",hardware:"ep",microcode:"ep_z80",assembly:"ep_s7_e3",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S1E1",title:"<span data-langkey='Instructions'>Instructions</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"poc_s1_e1",description:"<span data-langkey='example_01_01'>Simple example.</span>"});ws_examples.push({id:"S1E2",title:"<span data-langkey='Memory access'>Memory access</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s1_e2",description:"<span data-langkey='example_01_02'>Simple example with fetch, memory access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S1E3",title:"<span data-langkey='Looping'>Looping</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s1_e3",description:"<span data-langkey='example_01_03'>Simple example with fetch, branch, and basic .text segment.</span>"});ws_examples.push({id:"S1E4",title:"<span data-langkey='Vector'>Vector</span>",type:"<span data-langkey='Initial'>Initial</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s1_e4",description:"<span data-langkey='example_01_04'>Simple example with fetch, branch, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E1",title:"<span data-langkey='I/O'>I/O</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e1",description:"<span data-langkey='example_02_01'>Example with programmed I/O access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E2",title:"<span data-langkey='Subrutine'>Subrutine</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e2",description:"<span data-langkey='example_02_02'>Extended example with more instructions and I/O (keyboard, display).</span>"});ws_examples.push({id:"S2E3",title:"<span data-langkey='Masks & shift'>Masks & shift</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e3",description:"<span data-langkey='example_02_03'>More extended example with masks, shift, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E4",title:"<span data-langkey='Matrix'>Matrix</span>",type:"<span data-langkey='Intermediate'>Intermediate</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e4",description:"<span data-langkey='example_02_04'>Extended example with subrutine and matrix.</span>"});ws_examples.push({id:"S3E1",title:"<span data-langkey='Interruptions'>Interruptions</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"archived",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_s3",assembly:"ep_s3_e1",description:"<span data-langkey='example_03_01'><b>Instructive</b> example with interruptions support: fetch, RETI, and .ktext/.kdata.</span>"});ws_examples.push({id:"S3E2",title:"<span data-langkey='System call'>System call</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"archived",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_s3",assembly:"ep_s3_e2",description:"<span data-langkey='example_03_02'><b>Instructive</b> example with system call support.</span>"});ws_examples.push({id:"S3E3",title:"<span data-langkey='Exception'>Exception</span>",type:"<span data-langkey='Advanced'>Advanced</span>",level:"archived",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_s3",assembly:"ep_s3_e3",description:"<span data-langkey='example_03_03'><b>Instructive</b> example with floating point exception.</span>"});ws_examples.push({id:"S4E1",title:"<span data-langkey='Int. + syscall + except.'>Int. + syscall + except.</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e1",description:"<span data-langkey='example_04_01'>Advanced example with interruption, system call, and exception.</span>"});ws_examples.push({id:"S4E2",title:"<span data-langkey='SC 1, 4-5, 8, 11-12'>SC 1, 4-5, 8, 11-12</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S4E3",title:"<span data-langkey='Threads'>Threads</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e3",description:"<span data-langkey='example_04_03'>Example of threads.</span>"});ws_examples.push({id:"S4E4",title:"<span data-langkey='Alloc.s'>Alloc.s</span>",type:"<span data-langkey='Operating Systems'>Operating Systems</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e4",description:"<span data-langkey='example_04_04'>Example of malloc + free.</span>"});ws_examples.push({id:"S5E1",title:"<span data-langkey='Dummy instruction'>Dummy instruction</span>",type:"<span data-langkey='Special'>Special</span>",level:"actual",modes:"newbie,intro,poc",hardware:"poc",microcode:"poc_bare",assembly:"poc_s5_e1",description:"<span data-langkey='example_06_01'>Test example.</span>"});function table_helps_html(helps){var o="";var fmt_toggle="";var fmt_header="";var e_title="";var e_itype="";var e_utype="";var e_reference="";var e_description="";var e_id="";var t_index="";var utypes=[];for(var m=0;m<helps.length;m++){if(false===array_includes(utypes,helps[m].u_type)){utypes.push(helps[m].u_type)}}o=o+'<div class="container grid-striped border border-light">';for(m=0;m<helps.length;m++){fmt_header="";if(e_utype!=helps[m].u_type){fmt_header="<div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary bg-white sticky-top'>"+helps[m].u_type+"</div>"}e_title=helps[m].title;e_itype=helps[m].i_type;e_utype=helps[m].u_type;e_uclass=helps[m].u_class;e_reference=helps[m].reference;e_description=helps[m].description;e_id=helps[m].id;var onclick_code="";if("relative"===e_itype)onclick_code="wepsim_help_set_relative('"+e_reference+"');"+"wepsim_help_refresh();";if("absolute"===e_itype)onclick_code="wepsim_help_set_absolute('"+e_reference+"');"+"wepsim_help_refresh();";if("code"===e_itype)onclick_code=e_reference;if(fmt_toggle==="")fmt_toggle="bg-light";else fmt_toggle="";t_index=(m+1).toString().padStart(2," ").replace(/ /g,"&nbsp;");o=o+fmt_header+"<div class='row py-1 "+fmt_toggle+" "+e_uclass+"' id='"+e_utype+"'>"+'<div class="col-md-auto">'+'    <span class="badge badge-pill badge-light">'+t_index+"</span>"+"</div>"+'<div class="col-md-4">'+'    <span class="btn-like bg-success text-white text-truncate rounded border px-1" style="cursor:pointer;" '+'          id="help_index_'+m+'" '+'          onclick="simcore_record_append_pending(); '+onclick_code+'">'+e_title+"</span>"+"</div>"+'<div class="col-md collapse7 show">'+"    <c>"+e_description+"</c>"+"</div>"+"</div>"}o=o+"</div>";return o}function wepsim_help_refresh(){var helpdiv="#scroller-help1";var scrolltothetop=function(){var helpdiv_container="scroller-help1-container";var elto=document.getElementById(helpdiv_container);if(elto!=null)elto.scrollTop=0};var helpurl="";var seg_idiom=get_cfg("ws_idiom");var seg_hardw=simhw_active().sim_short_name;var rel=$("#help1_ref").data("relative");if(typeof rel!="undefined"&&rel!=""){var r=rel.split("#");helpurl="help/"+r[0]+"-"+seg_idiom+".html";$("#help1").modal("show");resolve_html_url(helpdiv,helpurl,"#"+r[1],scrolltothetop);ga("send","event","help","help.simulator","help.simulator."+rel);return}var ab1=$("#help1_ref").data("absolute");if(typeof ab1!="undefined"&&ab1!=""){helpurl="examples/hardware/"+seg_hardw+"/help/"+ab1+"-"+seg_idiom+".html";$("#help1").modal("show");resolve_html_url(helpdiv,helpurl,"",scrolltothetop);ga("send","event","help","help."+ab1,"help."+ab1+".*");return}var cod1=$("#help1_ref").data("code");if(typeof cod1!="undefined"&&cod1==="true"){ga("send","event","help","help.code","help.code.*");return}}function wepsim_help_set_relative(rel){$("#help1_ref").data("relative",rel);$("#help1_ref").data("absolute","");$("#help1_ref").data("code","false")}function wepsim_help_set_absolute(ab1){$("#help1_ref").data("relative","");$("#help1_ref").data("absolute",ab1);$("#help1_ref").data("code","false")}function wepsim_open_help_content(content){$("#scroller-help1").html(content);$("#help1_ref").data("relative","");$("#help1_ref").data("absolute","");$("#help1_ref").data("code","true");$("#help1").modal("show")}function request_html_url(r_url){var robj=null;if(false===is_mobile()){if(navigator.onLine)robj=fetch(r_url);else robj=caches.match(r_url).then()}else{robj=$.ajax(r_url,{type:"GET",dataType:"html"})}return robj}function update_div_frompartialhtml(helpdiv,key,data){var default_content="<br>Sorry, No more details available for this element.<p>\n";if(""===data)$(helpdiv).html(default_content);else $(helpdiv).html(data);if(""===data||""===key||"#"===key){return}var help_content=$(helpdiv).filter(key).html();if(typeof help_content==="undefined"){help_content=$(helpdiv).find(key).html()}if(typeof help_content==="undefined"){help_content=default_content}$(helpdiv).html(help_content)}function resolve_html_url(helpdiv,r_url,key,update_div){return request_html_url(r_url).then((function(data){if(typeof data=="object"){data.text().then((function(res){update_div_frompartialhtml(helpdiv,key,res);update_div()}))}else{update_div_frompartialhtml(helpdiv,key,data);update_div()}}))}function update_signal_loadhelp(helpdiv,simhw,key){var curr_idiom=get_cfg("ws_idiom");var help_base="examples/hardware/"+simhw+"/help/signals-"+curr_idiom+".html";resolve_html_url(helpdiv,help_base,"#"+key,(function(){$(helpdiv).trigger("create")}));ga("send","event","help","help.signal","help.signal."+simhw+"."+key)}function update_checker_loadhelp(helpdiv,key){var curr_idiom=get_cfg("ws_idiom");var help_base="help/simulator-"+curr_idiom+".html";resolve_html_url(helpdiv,help_base,"#"+key,(function(){$(helpdiv).trigger("create")}));ga("send","event","help","help.checker","help.checker."+key)}var ws_help=[];ws_help.push({id:"simulator",title:"<span data-langkey='Welcome tutorial'>Welcome tutorial</span>",i_type:"code",u_type:"tutorial",u_class:"",reference:"wsweb_dialog_close('help'); "+"sim_tutorial_showframe('welcome', 0);",description:"<span data-langkey='help_01_01'>Open the welcome tutorial</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simple usage tutorial'>Simple usage tutorial</span>",i_type:"code",u_type:"tutorial",u_class:"",reference:"wsweb_dialog_close('help'); "+"sim_tutorial_showframe('simpleusage', 0);",description:"<span data-langkey='help_01_02'>Open the simple usage tutorial, for microprogramming and assembly programming</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Execute example'>Execute example</span>",i_type:"code",u_type:"tutorial",u_class:"",reference:"wsweb_dialog_close('help'); "+"wsweb_recordbar_show(); "+"wepsim_checkpoint_loadExample('tutorial_2.txt') ; "+"setTimeout(wsweb_record_play, 1000);",description:"<span data-langkey='help_01_03'>Play the execute example tutorial</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simulator: firmware'>Simulator: firmware</span>",i_type:"relative",u_type:"simulator",u_class:"user_microcode",reference:"simulator#help_simulator_firmware",description:"<span data-langkey='help_02_01'>How to work with the firmware to be loaded into the control memory</span>.<br>"});ws_help.push({id:"microcode",title:"<span data-langkey='Microcode format'>Microcode format</span>",i_type:"relative",u_type:"simulator",u_class:"user_microcode",reference:"simulator#help_firmware_format",description:"<span data-langkey='help_02_02'>Syntax of the microcode used</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simulator: assembly'>Simulator: assembly</span>",i_type:"relative",u_type:"simulator",u_class:"",reference:"simulator#help_simulator_assembly",description:"<span data-langkey='help_02_03'>How to work with the assembly that use the aforementioned firmware</span>.<br>"});ws_help.push({id:"assembly",title:"<span data-langkey='Assembly format'>Assembly format</span>",i_type:"relative",u_type:"simulator",u_class:"",reference:"simulator#help_assembly_format",description:"<span data-langkey='help_02_04'>Syntax of the assembly elements</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simulator: execution'>Simulator: execution</span>",i_type:"relative",u_type:"simulator",u_class:"",reference:"simulator#help_simulator_execution",description:"<span data-langkey='help_02_05'>How the simulator can execute the assembly and firmware</span>.<br>"});ws_help.push({id:"architecture",title:"<span data-langkey='Simulated architecture'>Simulated architecture</span>",i_type:"absolute",u_type:"simulated processor",u_class:"",reference:"hardware",description:"<span data-langkey='help_03_01'>Description of the simulated processor architecture</span>.<br>"});ws_help.push({id:"architecture",title:"<span data-langkey='Simulated signals'>Simulated signals</span>",i_type:"absolute",u_type:"simulated processor",u_class:"user_microcode",reference:"signals",description:"<span data-langkey='help_03_02'>Main signals summary of the simulated elemental processor</span>.<br>"});ws_help.push({id:"architecture",title:"<span data-langkey='Hardware summary'>Hardware summary</span>",i_type:"code",u_type:"simulated processor",u_class:"user_microcode",reference:"var ahw1 = simhw_active().sim_short_name ; "+"var img1 = 'examples/hardware/' + ahw1 + '/images/cpu.svg?time=20190102' ; "+"var txt1 = 'Your browser does not support SVG' ;"+"var lyt1 = '<object id=\\'svg_p2\\' data=\\'' + img1 + '\\' "+"                    type=\\'image/svg+xml\\'>' + txt1 +  '</object>'; "+"wepsim_open_help_content(lyt1) ;",description:"<span data-langkey='help_03_03'>Reference card for the simulated elemental processor hardware</span>.<br>"});ws_help.push({id:"about",title:"<span data-langkey='License, platforms, etc.'>License, platforms, etc.</span>",i_type:"relative",u_type:"info",u_class:"",reference:"about#help_about",description:"<span data-langkey='help_04_01'>WepSIM license, supported platforms, technologies used</span>.<br>"});ws_help.push({id:"authors",title:"<span data-langkey='Authors'>Authors</span>",i_type:"code",u_type:"info",u_class:"",reference:"wsweb_dialog_close('help'); "+"wsweb_dialog_open_list('about');",description:"<span data-langkey='help_04_02'>Authors of WepSIM</span>.<br>"});tutorials={};function sim_tutorial_goframe(tutorial_name,from_step,to_step){var tutorial=tutorials[tutorial_name];if(typeof tutorial==="undefined"){return}tutorial[from_step].code_post();if(typeof tutbox!=="undefined"){tutbox.modal("hide")}setTimeout((function(){sim_tutorial_showframe(tutorial_name,to_step)}),tutorial[from_step].wait_next);if(simcore_voice_canSpeak()){window.speechSynthesis.cancel()}}function sim_tutorial_cancelframe(){var ws_mode=get_cfg("ws_mode");wsweb_select_main(ws_mode);tutbox.modal("hide");if(simcore_voice_canSpeak()){window.speechSynthesis.cancel()}}function sim_tutorial_showframe(tutorial_name,step){var tutorial=tutorials[tutorial_name];if(typeof tutorials=="undefined"){return}if(step==tutorial.length){return}if(step<0){return}ga("send","event","help","help.tutorial","help.tutorial.name="+tutorial_name+",step="+step);tutorial[step].code_pre();var wsi=get_cfg("ws_idiom");var bbbt={};bbbt.cancel={label:i18n_get("gui",wsi,"Disable tutorial mode"),className:"btn-danger col float-right",callback:function(){sim_tutorial_cancelframe()}};if(step!=0)bbbt.prev={label:i18n_get("gui",wsi,"Prev."),className:"btn-success col float-right",callback:function(){sim_tutorial_goframe(tutorial_name,step,step-1)}};if(step!=tutorial.length-1)bbbt.next={label:i18n_get("gui",wsi,"Next"),className:"btn-success col float-right",callback:function(){sim_tutorial_goframe(tutorial_name,step,step+1)}};else bbbt.end={label:i18n_get("gui",wsi,"End"),className:"btn-success col float-right",callback:function(){sim_tutorial_goframe(tutorial_name,step,step+1)}};tutbox=bootbox.dialog({title:tutorial[step].title,message:tutorial[step].message,buttons:bbbt,size:"large",animate:false});simcore_voice_speak(tutorial[step].title.replace(/<[^>]*>/g,"")+". "+tutorial[step].message.replace(/<[^>]*>/g,""));i18n_update_tags("tutorial_"+tutorial_name)}tutorials.welcome=[];tutorials.welcome.push({id:"welcome",title:"<span data-langkey='title_0'>title 0</span>",message:"<span data-langkey='message_0'>message 0</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.welcome.push({id:"welcome",title:"<span data-langkey='title_1'>title 1</span>",message:"<span data-langkey='message_1'>message 1</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.welcome.push({id:"welcome",title:"<span data-langkey='title_2'>title 2</span>",message:"<span data-langkey='message_2'>message 2</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.welcome.push({id:"welcome",title:"<span data-langkey='title_3'>title 3</span>",message:"<span data-langkey='message_3'>message 3</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.welcome.push({id:"welcome",title:"<span data-langkey='title_4'>title 4</span>",message:"<span data-langkey='message_4'>message 4</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.welcome.push({id:"welcome",title:"<span data-langkey='title_5'>title 5</span>",message:"<span data-langkey='message_5'>message 5</span>",code_pre:function(){},code_post:function(){load_from_example_firmware("ep:ep_base:ep_s1_e1",true)},wait_next:100});tutorials.simpleusage=[];tutorials.simpleusage.push({id:"simpleusage",title:"<span data-langkey='title_0'>title 0</span>",message:"<span data-langkey='message_0'>message 0</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.simpleusage.push({id:"simpleusage",title:"<span data-langkey='title_1'>title 1</span>",message:"<span data-langkey='message_1'>message 1</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.simpleusage.push({id:"simpleusage",title:"<span data-langkey='title_2'>title 2</span>",message:"<span data-langkey='message_2'>message 2</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.simpleusage.push({id:"simpleusage",title:"<span data-langkey='title_3'>title 3</span>",message:"<span data-langkey='message_3'>message 3</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.simpleusage.push({id:"simpleusage",title:"<span data-langkey='title_4'>title 4</span>",message:"<span data-langkey='message_4'>message 4</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});tutorials.simpleusage.push({id:"simpleusage",title:"<span data-langkey='title_5'>title 5</span>",message:"<span data-langkey='message_5'>message 5</span>",code_pre:simcore_do_nothing_handler,code_post:simcore_do_nothing_handler,wait_next:100});function wepsim_newbie_tour(){var ws_idiom=get_cfg("ws_idiom");wepsim_newbie_tour_setLang(ws_idiom);tour=introJs();tour.setOptions({steps:ws_tour,keyboardNavigation:true,tooltipClass:"tooltip-large",showProgress:true,overlayOpacity:"0.1"});tour.onbeforechange((function(){ws_tour[this._currentStep].do_before()}));tour.onexit((function(){$("#help1").modal("hide");wsweb_dialog_close("examples");wsweb_dialog_close("config");if(get_cfg("ws_mode")!="ep"){wsweb_select_main("ep")}return true}));tour.start();ga("send","event","ui","ui.tour","ui.tour.newbie")}function wepsim_newbie_tour_setLang(lang){var step="";for(var i=0;i<ws_tour.length;i++){step=ws_tour[i].step;if(""!==step){ws_tour[i].intro=i18n.eltos.tour_intro[lang][step]}}}function wepsim_newbie_tour_reload(lang){set_cfg("ws_idiom",lang);save_cfg();i18n_update_tags("gui");tour.exit();wepsim_newbie_tour()}var ws_tour=[];ws_tour.push({intro:i18n_get_welcome(),step:"",position:"auto",do_before:function(){return true}});ws_tour.push({intro:"<span data-langkey='step1'>Step 1</span>",step:"step1",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({element:"#select4",intro:"<span data-langkey='step2'>Step 2</span>",step:"step2",position:"auto",do_before:function(){wsweb_select_main("ep");tour.refresh();return true}});ws_tour.push({element:"#btn_help1",intro:"<span data-langkey='step3'>Step 3</span>",step:"step3",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({element:"#btn_example1",intro:"<span data-langkey='step4'>Step 4</span>",step:"step4",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({element:"#btn_cfg1",intro:"<span data-langkey='step5'>Step 5</span>",step:"step5",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({intro:"<span data-langkey='step6'>Step 6</span>",step:"step6",position:"auto",do_before:function(){tour.refresh();return true}});function wepsim_voice_init(){if(!annyang){return false}annyang.addCommands(wepsim_voice_commands);annyang.addCallback("errorNetwork",(function(){annyang.abort();alert("Sorry but some network connection is needed in order to use the voice recognition engine.")}));SpeechKITT.annyang();SpeechKITT.setStylesheet("external/speechkitt/themes/flat.css");SpeechKITT.setInstructionsText("What can I help you with? (list)");SpeechKITT.vroom();return true}function wepsim_voice_start(){if(!annyang){wepsim_notify_error("<h4>Warning:<br/>"+"annyang not available"+"</h4>","Voice support is not available in this platform.");return false}SpeechKITT.show();return true}function wepsim_voice_stop(){if(!annyang){return false}SpeechKITT.hide();return true}var wepsim_voice_commands={};var wepsim_voice_dialog=null;wepsim_voice_commands["hello"]=function(){var msg="Hello, I am WepSIM, nice to meet you. ";simcore_voice_speak(msg)};wepsim_voice_commands["(show) configuration"]=function(){wsweb_dialog_open_list("config")};wepsim_voice_commands["(show) examples"]=function(){wsweb_dialog_open_list("examples")};wepsim_voice_commands["load example :id (from) :level"]=function(id,level){var ex_id=parseInt(id);var ex_lv=parseInt(level);load_from_example_firmware("ep:s"+ex_lv+"_e"+ex_lv,true)};wepsim_voice_commands["(show) help"]=function(){wsweb_dialog_open_list("help");wepsim_help_refresh()};wepsim_voice_commands["close"]=function(){wsweb_dialog_close("help");wsweb_dialog_close("config");wsweb_dialog_close("examples");if(null!==wepsim_voice_dialog){wepsim_voice_dialog.modal("hide")}};wepsim_voice_commands["reset"]=function(){wepsim_execute_reset(true,true);var msg="Current processor has been reset.";simcore_voice_speak(msg)};wepsim_voice_commands["next"]=function(){wepsim_execute_instruction();var msg="Next executed.";simcore_voice_speak(msg)};wepsim_voice_commands["next micro(instruction)"]=function(){wepsim_execute_microinstruction();var msg="Next microinstruction executed. ";simcore_voice_speak(msg)};wepsim_voice_commands["play"]=function(){wepsim_execute_play("#btn_run_stop")};wepsim_voice_commands["stop"]=function(){wepsim_execute_stop("#btn_run_stop")};wepsim_voice_commands["describe micro(instruction)"]=function(){var msg=get_verbal_from_current_mpc();simcore_voice_speak(msg)};wepsim_voice_commands["describe instruction"]=function(){var msg=get_verbal_from_current_pc();simcore_voice_speak(msg)};wepsim_voice_commands["list"]=function(){var vc_list="available commands:<br>";for(var vc in wepsim_voice_commands){vc_list=vc_list+" * '"+vc+"'<br>"}wepsim_voice_dialog=bootbox.alert(vc_list);wepsim_voice_dialog.modal("show");var msg=$("</p>").html(vc_list).text();simcore_voice_speak(msg)};wepsim_voice_commands["silence"]=function(){simcore_voice_stopSpeak()};function hex2values_update(index){var new_value=parseInt($("#popover1")[0].value);var filter_states=simhw_internalState("filter_states");if(typeof simhw_sim_states().BR[index]!="undefined"){set_value(simhw_sim_states().BR[index],new_value);fullshow_rf_values();$("#rf"+index).click();$("#rf"+index).click()}if(typeof simhw_sim_states()[index]!="undefined"){if(1==simhw_sim_states()[index].nbits)new_value=new_value%2;set_value(simhw_sim_states()[index],new_value);fullshow_eltos(simhw_sim_states(),filter_states);$("#rp"+index).click();$("#rp"+index).click()}}function hex2values(hexvalue,index){var rhex=/[0-9A-F]{1,8}/gi;if(!rhex.test(hexvalue)){hexvalue=0}var valuei=hexvalue>>0;var valueui=hexvalue>>>0;var valuec8=hex2char8(valueui);var valuef=hex2float(valueui);var valuebin=hex2bin(valueui);var valueoct=valueui.toString(8).toUpperCase();var valuehex=valueui.toString(16).toUpperCase();valuehex="0x"+pack8(valuehex);var valuedt="";if(get_cfg("is_editable")==true){valuedt="<tr><td class='py-1 px-1' colspan='5' align='center'>"+"<input type='text' id='popover1' value='"+valueui+"' data-mini='true' style='width:65%'>&nbsp;"+"<span class='badge badge-secondary' "+"      onclick='hex2values_update(\""+index+"\");'>update</span>"+"</td></tr>"}var vtable="<table class='table table-bordered table-hover table-sm mb-1'>"+"<tbody>"+"<tr><td class='p-0 pl-1 align-middle'><strong>hex.</strong></td>"+"    <td class='p-0 pl-1 align-middle'><strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>"+valuehex+"</strong></td>"+"</tr>"+"<tr><td class='p-0 pl-1 align-middle'><strong>oct.</strong></td>"+"    <td class='p-0 pl-1 align-middle'><strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>"+valueoct+"</strong></td>"+"</tr>"+"<tr><td class='p-0 pl-1 align-middle'><strong>binary</strong></td>"+"    <td class='p-0 pl-1 align-middle'><strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>"+valuebin+"</strong></td>"+"</tr>"+"<tr><td class='p-0 pl-1 align-middle'><strong>signed</strong></td>"+"    <td class='p-0 pl-1 align-middle'><strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>"+valuei+"</strong></td>"+"</tr>"+"<tr><td class='p-0 pl-1 align-middle'><strong>unsig.</strong></td>"+"    <td class='p-0 pl-1 align-middle'><strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>"+valueui+"</strong></td>"+"</tr>"+"<tr><td class='p-0 pl-1 align-middle'><strong>char</strong></td>"+"    <td class='p-0 pl-1 align-middle'>"+"<strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>&nbsp;"+valuec8[0]+"&nbsp;</strong>&nbsp;"+"<strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>&nbsp;"+valuec8[1]+"&nbsp;</strong>&nbsp;"+"<strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>&nbsp;"+valuec8[2]+"&nbsp;</strong>&nbsp;"+"<strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>&nbsp;"+valuec8[3]+"&nbsp;</strong>&nbsp;"+"</td>"+"</tr>"+"<tr><td class='p-0 pl-1 align-middle'><strong>float</strong></td>"+"    <td class='p-0 pl-1 align-middle'><strong class='rounded text-dark' style='background-color:#CEECF5;  font-family:monospace;'>"+valuef+"</strong></td>"+"</tr>"+valuedt+"</tbody>"+"</table>";return vtable}function quick_config_rf(){var o="<div class='container mt-1'>"+"<div class='row'>"+"<div class='col-12 p-0'><span data-langkey='Display format'>Display format</span></div>"+"<div class='col-7 p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "unsigned_16_fill"); show_rf_values(); show_states(); return true; \'>'+"0x<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>0000001A<sub>16</sub></span></buttom>"+"</div>"+"<div class='col p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "unsigned_16_nofill"); show_rf_values(); show_states(); return true; \'>'+"0x<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>1A<sub>16</sub></span></buttom>"+"</div>"+"<div class='w-100 border border-light'></div>"+"<div class='col-7 p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "unsigned_8_fill"); show_rf_values(); show_states(); return true; \'>'+"<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>00000032<sub>8&nbsp;</sub></span></buttom>"+"</div>"+"<div class='col p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "unsigned_8_nofill"); show_rf_values(); show_states(); return true; \'>'+"<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>032<sub>8&nbsp;</sub></span></buttom>"+"</div>"+"<div class='w-100 border border-light'></div>"+"<div class='col-7 p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "unsigned_10_fill"); show_rf_values(); show_states(); return true; \'>'+"+<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>00000026<sub>10</sub></span></buttom>"+"</div>"+"<div class='col p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "unsigned_10_nofill"); show_rf_values(); show_states(); return true; \'>'+"+<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>26<sub>10</sub></span></buttom>"+"</div>"+"<div class='w-100 border border-light'></div>"+"<div class='col-7 p-1'>"+"</div>"+"<div class='col p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_format", "float_10_nofill"); show_rf_values(); show_states(); return true; \'>'+"<span class='mx-auto px-1 font-weight-bold rounded text-dark' style='background-color:#CEECF5; '>3.6e-44<sub>10</sub></span></buttom>"+"</div>"+"<div class='w-100 border border-light'></div>"+"<div class='col-12 p-0'><span data-langkey='Register file names'>Register file names</span></div>"+"<div class='col-6 p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_name", "logical"); wepsim_show_rf_names(); return true; \'>'+"<span class='font-weight-bold text-monospace'>$t0</span>"+"&nbsp;"+"<span class='mx-auto px-1 rounded' style='background-color:#CEECF5;'>0</span></buttom>"+"</div>"+"<div class='col-6 p-1'>"+"<buttom class='btn btn-sm btn-outline-secondary col p-1 text-right float-right' "+'        onclick=\'update_cfg("RF_display_name", "numerical"); wepsim_show_rf_names(); return true; \'>'+"<span class='font-weight-bold text-monospace'>R10</span>"+"&nbsp;"+"<span class='mx-auto px-1 rounded' style='background-color:#CEECF5;'>0</span></buttom>"+"</div>"+"<div class='w-100 border border-light'></div>"+"<div class='col p-1'>"+"<button type='button' id='close' data-role='none' "+"        class='btn btn-sm btn-danger w-100 p-0 mt-1' "+'        onclick=\'$("#popover-rfcfg").popover("hide");\'>'+"<span data-langkey='Close'>Close</span>"+"</button>"+"</div>"+"</div>"+"</div>";return o}function wepsim_init_rf(jqdiv){if(jqdiv==""){return}var rf_val=0;var rf_format=get_cfg("RF_display_format");var o1_rf="";var o1_rn="";for(var index=0;index<simhw_sim_states().BR.length;index++){o1_rn="R"+index;o1_rn=o1_rn.padEnd(3," ");rf_val=value2string(rf_format,get_value(simhw_sim_states().BR[index])>>>0);o1_rf+="<button type='button' class='btn py-0 px-1 mt-1 col-auto' "+"        style='border-color:#cecece; background-color:#f5f5f5' data-role='none' "+"        data-toggle='popover-up' data-popover-content='"+index+"' data-container='body' "+"        id='rf"+index+"'>"+"<span id='name_RF"+index+"' class='p-0 text-monospace' style='float:center; '>"+o1_rn+"</span>&nbsp;"+"<span class='badge badge-secondary text-dark' style='background-color:#CEECF5; ' id='tbl_RF"+index+"'>"+rf_val+"</span>"+"</button>"}$(jqdiv).html("<div class='d-flex flex-row flex-wrap justify-content-around justify-content-sm-between'>"+o1_rf+"</div>");$("[data-toggle=popover-up]").popover({html:true,placement:"auto",animation:false,trigger:"click",template:'<div class="popover shadow" role="tooltip">'+'<div class="arrow"></div>'+'<h3  class="popover-header"></h3>'+'<div class="popover-body"></div>'+"</div>",container:"body",content:function(){var index=$(this).attr("data-popover-content");var hexvalue=get_value(simhw_sim_states().BR[index]);return hex2values(hexvalue,index)},title:function(){var index=$(this).attr("data-popover-content");var id_button="&quot;#rf"+index+"&quot;";return'<span class="text-dark"><strong>R'+index+"</strong></span>"+'<button type="button" id="close" class="close" '+'        onclick="$('+id_button+').click();">&times;</button>'},sanitizeFn:function(content){return content}})}function fullshow_rf_values(){var rf_format=get_cfg("RF_display_format");var br_value="";for(var index=0;index<simhw_sim_states().BR.length;index++){br_value=value2string(rf_format,get_value(simhw_sim_states().BR[index])>>>0);$("#tbl_RF"+index).html(br_value)}}var show_rf_values_deferred=null;function innershow_rf_values(){fullshow_rf_values();show_rf_values_deferred=null}function wepsim_show_rf_values(){if(null!==show_rf_values_deferred)return;show_rf_values_deferred=setTimeout(innershow_rf_values,cfg_show_rf_delay)}function wepsim_show_rf_names(){var SIMWARE=get_simware();var disp_name=get_cfg("RF_display_name");var br_value="";for(var index=0;index<simhw_sim_states().BR.length;index++){br_value="R"+index;if("logical"==disp_name&&typeof SIMWARE.registers[index]!="undefined"){br_value=SIMWARE.registers[index]}br_value=br_value.padEnd(3," ");var obj=document.getElementById("name_RF"+index);if(obj!=null){obj.innerHTML=br_value}}}function init_eltos(jqdiv,sim_eltos,filter){if(jqdiv==""){return}var o1="<a data-toggle='popover-rfcfg' id='popover-rfcfg' "+"   tabindex='0' class='m-auto show multi-collapse-3'><strong><strong class='fas fa-wrench text-secondary'></strong></strong></a>";var rf_format=get_cfg("RF_display_format");var divclass="";var value="";var part1="";var part2="";for(var i=0;i<filter.length;i++){var s=filter[i].split(",")[0];var showkey=sim_eltos[s].name;if(sim_eltos[s].nbits>1){part1=showkey.substring(0,3);part2=showkey.substring(3,showkey.length);if(showkey.length<3)showkey='<span class="text-monospace">'+part1+"&nbsp;</span>";else showkey='<span class="text-monospace">'+part1+"</span>";if(part2.length>0)showkey+='<span class="d-none d-sm-inline-flex text-monospace">'+part2+"</span>"}divclass=filter[i].split(",")[1];value=value2string(rf_format,sim_eltos[s].value);o1+="<button type='button' class='btn py-0 px-1 mt-1 "+divclass+"' "+"        style='border-color:#cecece; background-color:#f5f5f5' data-role='none' "+"        data-toggle='popover-bottom' data-popover-content='"+s+"' data-container='body' "+"        id='rp"+s+"'>"+showkey+" <span class='badge badge-secondary text-dark' style='background-color:#CEECF5;' id='tbl_"+s+"'>"+value+"</span>"+"</button>"}$(jqdiv).html("<div class='d-flex flex-row flex-wrap justify-content-around justify-content-sm-between'>"+o1+"</div>");$("[data-toggle=popover-bottom]").popover({html:true,placement:"bottom",animation:false,content:function(){var index=$(this).attr("data-popover-content");var hexvalue=get_value(simhw_sim_states()[index]);return hex2values(hexvalue,index)},title:function(){var index=$(this).attr("data-popover-content");var id_button="&quot;#rp"+index+"&quot;";return'<span class="text-dark"><strong>'+simhw_sim_states()[index].name+"</strong></span>"+'<button type="button" id="close" class="close" '+'        onclick="$('+id_button+').click();">&times;</button>'},sanitizeFn:function(content){return content}});$("[data-toggle=popover-rfcfg]").popover({html:true,placement:"auto",animation:false,trigger:"click",template:'<div class="popover shadow" role="tooltip">'+'<div class="arrow"></div>'+'<h3  class="popover-header"></h3>'+'<div class="popover-body"></div>'+"</div>",container:"body",content:quick_config_rf,sanitizeFn:function(content){return content}}).on("shown.bs.popover",(function(shownEvent){i18n_update_tags("cfg");i18n_update_tags("dialogs")}))}function fullshow_eltos(sim_eltos,filter){var rf_format=get_cfg("RF_display_format");var value="";var r=[];var key="";for(var i=0;i<filter.length;i++){r=filter[i].split(",");key=r[0];value=value2string("text:char:nofill",sim_eltos[key].value);if(sim_eltos[key].nbits>1){value=value2string(rf_format,simhw_sim_state(key).value>>>0)}$("#tbl_"+key).html(value)}}var show_eltos_deferred=null;function show_eltos(sim_eltos,filter){if(null!==show_eltos_deferred)return;show_eltos_deferred=setTimeout((function(){fullshow_eltos(sim_eltos,filter);show_eltos_deferred=null}),cfg_show_eltos_delay)}function wepsim_init_states(jqdiv){var filter_states=simhw_internalState("filter_states");return init_eltos(jqdiv,simhw_sim_states(),filter_states)}function wepsim_show_states(){var filter_states=simhw_internalState("filter_states");return show_eltos(simhw_sim_states(),filter_states)}function simcoreui_init_hw_summary(ahw){var c='<span class="row justify-content-between">';for(var elto in ahw.components){c=c+'<span class="col">'+'<a href="#" class="popover_hw" data-toggle="popover" data-html="true" onclick="event.preventDefault();" title="" data-content="'+"name: "+ahw.components[elto].name+"<br> "+"version: "+ahw.components[elto].version+"<br> "+"abilities: "+ahw.components[elto].abilities.join(" + ")+"<button type='button' id='close' data-role='none' "+"        class='btn btn-sm btn-danger w-100 p-0 mt-2' "+"        onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button>"+'">'+elto+"</a></span>"}c=c+"</span>";var o="";o+='<div class="card m-2">'+'    <div class="card-header border border-light p-2">'+'      <h5 class="card-title">'+'        <span class="row">'+'          <span class="col-6">'+ahw.sim_name+" ("+ahw.sim_short_name+")</span>"+'          <a data-toggle="collapse" href="#th_processor" role="button"   class="col w-25" '+'aria-expanded="false" aria-controls="th_processor">'+'<img src="'+ahw.sim_img_processor+'" class="img-thumbnail" alt="sim_img_processor"></a>'+'          <a data-toggle="collapse" href="#th_controlunit" role="button" class="col w-25" '+'aria-expanded="false" aria-controls="th_controlunit">'+'<img src="'+ahw.sim_img_controlunit+'" class="img-thumbnail" alt="sim_img_controlunit"></a>'+"        </span>"+"      </h5>"+"    </div>"+'    <div class="card-body border border-light p-2">'+'      <p class="card-text">'+'      <span class="collapse multi-collapse" id="th_processor">'+'<img src="'+ahw.sim_img_processor+'"   class="img-thumbnail mb-2" alt="sim_img_processor"></a>'+"      </span>"+'      <span class="collapse multi-collapse" id="th_controlunit">'+'<img src="'+ahw.sim_img_controlunit+'" class="img-thumbnail mb-2" alt="sim_img_controlunit"></a>'+"      </span>"+c+"      </p>"+"    </div>"+"</div>";return o}function simcoreui_signal_dialog(ahw_elto_name){wepsim_update_signal_dialog(ahw_elto_name);$(".popover_hw").popover("hide")}function simcoreui_init_hw_signals(ahw,update){var elto_n="";var elto_v="";var elto_dv="";var e="";var c='<span class="row justify-content-between">';for(var elto in ahw.signals){elto_v=ahw.signals[elto].value;elto_dv=ahw.signals[elto].default_value;elto_v="0x"+elto_v.toString(16);elto_dv="0x"+elto_dv.toString(16);if(elto_v!=elto_dv)elto_n="font-weight-bold";else elto_n="font-weight-normal";e="<span style='text-align:left'>"+"name: "+ahw.signals[elto].name+"<br>"+"value: "+"<span"+" onclick=simcoreui_signal_dialog('"+ahw.signals[elto].name+"'); "+" class='font-weight-bold'>"+elto_v+"</span><br>"+"default_value: "+elto_dv+"<br>"+"nbits: "+ahw.signals[elto].nbits+"<br>"+"type: "+ahw.signals[elto].type+"<br>"+"visible: "+ahw.signals[elto].visible+"<button type='button' id='close' data-role='none' "+"        class='btn btn-sm btn-danger w-100 p-0 mt-2' "+"        onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button>"+"</span>";c=c+'<span class="col">'+'<a href="#" id="hw_signal_tt_'+elto+'" class="popover_hw" data-toggle="popover" onclick="event.preventDefault();" '+'   data-html="true" title="" data-content="'+e+'"><span id="hw_signal_strong_'+elto+'" class="'+elto_n+'">'+elto+"</span></a>"+"</span>";if(true==update){$("#hw_signal_strong_"+elto).attr("class",elto_n);$("#hw_signal_tt_"+elto).attr("data-content",e)}}c=c+"</span>";var o='  <div class="card m-2">'+'    <div class="card-header border border-light p-2">'+'      <h5 class="card-title m-0">'+'       <div class="container">'+'       <span class="row">'+'        <span class="col-auto pl-0" data-langkey="Signals">Signals</span>'+'        <span class="col-auto btn btn-sm btn-outline-secondary ml-auto" '+'              data-toggle="tooltip" data-html="true" title="Graph of the signal dependencies <br>(it needs several seconds to be displayed)."'+"              onclick=\"$('#depgraph1c').collapse('toggle'); "+'                       show_visgraph(jit_fire_dep, jit_fire_order);" data-langkey="Dependencies">Dependencies</span>'+"       </span>"+"       </div>"+"      </h5>"+"    </div>"+'    <div class="card-body border border-light p-2">'+'      <div id="depgraph1c" class="m-2 p-0 border collapse h-100" '+'           style="max-height:65vh; overflow:auto; resize:both;">'+'         <span id="depgraph1">Loading...</span>'+"      </div>"+'      <p class="card-text">'+c+"</p>"+"    </div>"+"  </div>";return o}function simcoreui_init_hw_states(ahw,update){var elto_n="";var elto_v="";var elto_dv="";var elto_nb="";var elto_vi="";var e="";var c='<span class="row justify-content-between">';for(var elto in ahw.states){elto_v="-";elto_dv="-";if(typeof ahw.states[elto].value!="undefined"){elto_v=ahw.states[elto].value;elto_dv=ahw.states[elto].default_value;if(typeof elto_v=="object"){elto_v="object";elto_dv="object"}else{if(typeof elto_v=="function"){elto_v=elto_v()}elto_v="0x"+elto_v.toString(16);elto_dv="0x"+elto_dv.toString(16)}}if(elto_v!=elto_dv)elto_n="font-weight-bold";else elto_n="font-weight-normal";if(typeof ahw.states[elto].nbits!="undefined")elto_nb=ahw.states[elto].nbits;else elto_nb="-";if(typeof ahw.states[elto].visible!="undefined")elto_vi=ahw.states[elto].visible;else elto_vi="-";e="<span style='text-align:left'>"+"name: "+elto+"<br>"+"value: <span id=hw_state_value_"+elto+">"+elto_v+"</span><br>"+"default_value: "+elto_dv+"<br>"+"nbits: "+elto_nb+"<br>"+"visible: "+elto_vi+"<button type='button' id='close' data-role='none' "+"        class='btn btn-sm btn-danger w-100 p-0 mt-2' "+"        onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button>"+"</span>";c=c+'<span class="col">'+'<a href="#" id="hw_state_tt_'+elto+'" class="popover_hw" data-toggle="popover" onclick="event.preventDefault();" '+'   data-html="true" title="" data-content="'+e+'"><span id="hw_state_strong_'+elto+'" class="'+elto_n+'">'+elto+"</span></a>"+"</span>";if(true==update){$("#hw_state_strong_"+elto).attr("class",elto_n);$("#hw_state_tt_"+elto).attr("data-content",e)}}c=c+"</span>";var o='  <div class="card m-2">'+'    <div class="card-header border border-light p-2">'+'      <h5 class="card-title m-0">'+'       <div class="container">'+'       <span class="row">'+'        <span class="col-auto pl-0" data-langkey="States">States</span>'+'        <span class="col-auto btn btn-sm btn-outline-secondary ml-auto" '+'              data-toggle="tooltip" data-html="true" title="It shows the control states: PC, IR, and SP."'+"              onclick=\"$('#ctrlstates1').collapse('toggle');\" data-langkey=\"Control States\">Control States</span>"+"       </span>"+"       </div>"+"      </h5>"+"    </div>"+'    <div class="card-body border border-light p-2">'+'      <div id="ctrlstates1" class="m-2 p-0 border collapse" '+'           style="max-height:65vh; overflow:auto; resize:both;">'+'         <span id="ctrlstates1">'+"         Program Counter      (PC) &rarr; "+ahw.ctrl_states.pc.state+"<br>"+"         Instruction Register (IR) &rarr; "+ahw.ctrl_states.ir.state+"<br>"+"         Stack Pointer        (SP) &rarr; "+ahw.ctrl_states.sp.state+"<br>"+"      </span>"+"      </div>"+'      <p class="card-text">'+c+"</p>"+"    </div>"+"  </div>";return o}function simcoreui_init_hw_behaviors(ahw){var c='<span class="row justify-content-between">';for(var elto in ahw.behaviors){c=c+'<span class="col">'+'<a href="#" class="popover_hw" data-toggle="popover" onclick="event.preventDefault();" '+'   data-html="true" title="" data-content="'+"<span style='text-align:left'>"+"name: "+elto+"<br> "+"nparameters: "+ahw.behaviors[elto].nparameters+"<br> "+"<button type='button' id='close' data-role='none' "+"        class='btn btn-sm btn-danger w-100 p-0 mt-2' "+"        onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button>"+"</span>"+'">'+elto+"</a></span>"}c=c+"</span>";var o='  <div class="card m-2">'+'    <div class="card-header border border-light p-2">'+'      <h5 class="card-title m-0"><span data-langkey="Behaviors">Behaviors</span></h5>'+"    </div>"+'    <div class="card-body border border-light p-2">'+'      <p class="card-text">'+c+"</p>"+"    </div>"+"  </div>";return o}function simcoreui_init_hw(div_hw){var ahw=simhw_active();var o="";o+=simcoreui_init_hw_summary(ahw);o+=simcoreui_init_hw_signals(ahw,false);o+=simcoreui_init_hw_states(ahw,false);o+=simcoreui_init_hw_behaviors(ahw);$(div_hw).html(o);$('[data-toggle="tooltip"]').tooltip({trigger:"hover",sanitizeFn:function(content){return content}});$(".popover_hw").popover({trigger:"hover click",container:"body",placement:"auto",template:'<div class="popover" role="tooltip">'+'<div class="arrow border-dark" style="border-right-color:black !important;"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body bg-dark text-white border-dark"></div>'+"</div>",sanitizeFn:function(content){return content}});return true}function simcoreui_show_hw(){var ahw=simhw_active();simcoreui_init_hw_signals(ahw,true);simcoreui_init_hw_states(ahw,true);return true}var breakpoint_icon_list={classic:{type:"classic",addclass:"no-dark-mode",origin:"https://www.optikunde.de/farbe/rot.php"},pushpin:{type:"classic",addclass:"no-dark-mode",origin:"http://clipart-library.com/red-push-pin.html"},cat1:{type:"pets",addclass:"no-dark-mode",origin:""},dog1:{type:"pets",addclass:"no-dark-mode",origin:""},halloween1:{type:"halloween",addclass:"no-dark-mode",origin:"https://es.vexels.com/svg-png/halloween/"},halloween2:{type:"halloween",addclass:"no-dark-mode",origin:"https://es.vexels.com/png-svg/vista-previa/153871/casa-de-halloween-de-miedo"},xmas1:{type:"christmas",addclass:"",origin:"https://week-of-icons-2018.netlify.com/data/5/animations/1.gif"},xmas2:{type:"christmas",addclass:"",origin:"https://week-of-icons-2018.netlify.com/data/5/animations/3.gif"},xmas3:{type:"christmas",addclass:"",origin:"https://peaceartsite.com/images/stained-glass-snowy-peace-t.gif"},r2d2:{type:"star wars",addclass:"",origin:"https://imgur.com/gallery/gKSmy"},sw:{type:"star wars",addclass:"",origin:"https://i2.wp.com/icons.iconarchive.com/icons/sensibleworld/starwars/1024/Death-Star-icon.png"},bb8:{type:"star wars",addclass:"no-dark-mode",origin:""},vader1:{type:"star wars",addclass:"",origin:""},ds1:{type:"star wars",addclass:"",origin:"https://media0.giphy.com/media/SVhnmDDdOzrZC/source.gif"},lotr4:{type:"lotr",addclass:"no-dark-mode",origin:"http://www.cinecollectibles.com/gentle-giant-c-1_62.html"},lotr2:{type:"lotr",addclass:"no-dark-mode",origin:"https://www.forbes.com/sites/adrianbridgwater/2016/01/15/microsoft-r-one-big-data-tool-to-rule-them-all/"},lotr6:{type:"lotr",addclass:"no-dark-mode",origin:"https://pm1.narvii.com/5903/f831ee80d012b8a8ba7156c39505cc4824889901_128.jpg"},hp1:{type:"harry potter",addclass:"no-dark-mode",origin:"http://www.logosclicks.com/logos/harry-potter-name-logo-46a93c.html"},hp2:{type:"harry potter",addclass:"no-dark-mode",origin:"https://www.flaticon.com/free-icon/harry-potter_86485"},hp3:{type:"harry potter",addclass:"no-dark-mode",origin:"https://www.flaticon.com/free-icon/harry-potter_86485"},super:{type:"films",addclass:"no-dark-mode",origin:"https://worldvectorlogo.com/logo/superman-3"},batman:{type:"films",addclass:"",origin:"http://getwallpapers.com/collection/black-and-white-batman-wallpaper"},grail:{type:"films",addclass:"no-dark-mode",origin:"http://3png.com/a-31243892.html"},despicable:{type:"films",addclass:"no-dark-mode",origin:"https://www.helloforos.com/t/cerrado/350821/81"},t800a:{type:"films",addclass:"no-dark-mode",origin:"https://purepng.com/photo/27494/movie-terminator-skull"}};function sim_core_breakpointicon_get(icon_name){var icon_obj=null;icon_obj=breakpoint_icon_list[icon_name];if(typeof icon_obj==="undefined"){icon_name="classic";icon_obj=breakpoint_icon_list[icon_name]}return"<img alt='stop icon' height=22 "+"     class='"+icon_obj.addclass+"' "+"     src='images/stop/stop_"+icon_name+".gif'>"}class ws_cpu extends HTMLElement{constructor(){super()}render(msg_default){var o1="<div id='cpu_ALL' style='height:58vh; width: inherit; overflow-y: auto;' "+"     class='container container-fluid'>"+"<div class='col-12'>"+"<table class='table table-hover table-sm table-bordered'>"+"<tr>"+"<td align=center width=50%>Instructions</td>"+"<td align=center width=50%>"+"<div id='ins_context'>"+"<span data-bind='text: value'>&nbsp;</span>"+"</div>"+"</td>"+"</tr>"+"<tr>"+"<td align=center width=50%>CLK ticks</td>"+"<td align=center width=50%>"+"<div id='clk_context'>"+"<span data-bind='text: value'>&nbsp;</span>"+"</div>"+"</td>"+"</tr>"+"</table>"+"</div>"+"</div>";this.innerHTML=o1;ko_rebind_state("CLK","clk_context");ko_rebind_state("DECO_INS","ins_context")}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-cpu",ws_cpu);class ws_mainmemory extends HTMLElement{constructor(){super()}render(msg_default){var o1="<div id='memory_MP' "+"     style='height:58vh; width:inherit; overflow-y:scroll; -webkit-overflow-scrolling:touch;'>"+"</div>";this.innerHTML=o1}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-mainmemory",ws_mainmemory);var show_main_memory_deferred=null;var show_main_memory_redraw=false;function wepsim_show_main_memory(memory,index,redraw,updates){if(get_cfg("DBG_delay")>3){show_main_memory_redraw=redraw||show_main_memory_redraw}if(null!==show_main_memory_deferred){return}show_main_memory_redraw=redraw;show_main_memory_deferred=setTimeout((function(){if(show_main_memory_redraw==false)light_refresh_main_memory(memory,index,updates);else hard_refresh_main_memory(memory,index,updates);show_main_memory_deferred=null;show_main_memory_updates=false}),cfg_show_main_memory_delay)}function hard_refresh_main_memory(memory,index,redraw){var o1="";var value="";var taddr="";var valkeys=[];var SIMWARE=get_simware();var revlabels={};for(var key in SIMWARE.labels2){revlabels[SIMWARE.labels2[key]]=key}var seglabels=[];var curr_segments=simhw_internalState("segments");for(var skey in curr_segments){seglabels.push({begin:parseInt(curr_segments[skey].begin),name:skey})}var seglabels_i=0;for(key in memory){value=main_memory_getword(revlabels,valkeys,memory,key);if(seglabels_i<seglabels.length&&parseInt(key)>=seglabels[seglabels_i].begin){o1+='<div style="position:sticky;top:0px;z-index:1;width:50%;background:#FFFFFF;"><b><small>'+seglabels[seglabels_i].name+"</small></b></div>";seglabels_i++}taddr="<small>0x</small>"+pack5(valkeys[3])+'<span class="d-none d-sm-inline-flex"> </span>-'+'<span class="d-none d-sm-inline-flex"><small> 0x</small></span>'+pack5(valkeys[0]);if(key==index)o1+="<div class='row' id='addr"+key+"'"+"     style='color:blue; font-size:small; font-weight:bold;    border-bottom: 1px solid lightgray !important'>"+"<div class='col-6 pr-2' align='right'  style='padding:5'>"+taddr+"</div>"+"<div class='col-6'      align='left'   style='padding:5' id='mpval"+key+"'>"+value+"</div>"+"</div>";else o1+="<div class='row' id='addr"+key+"'"+"     style='color:black; font-size:small; font-weight:normal; border-bottom: 1px solid lightgray !important'>"+"<div class='col-6 pr-2' align='right'  style='padding:5'>"+taddr+"</div>"+"<div class='col-6'      align='left'   style='padding:5' id='mpval"+key+"'>"+value+"</div>"+"</div>"}if(typeof memory[index]=="undefined"){o1+="<div class='row' id='addr"+index+"'"+"     style='color:blue; font-size:small; font-weight:bold; border-bottom: 1px solid lightgray !important'>"+"<div class='col-6 pr-2' align='right'  style='padding:5'>"+"0x"+parseInt(index).toString(16)+"</div>"+"<div class='col-6'      align='left'   style='padding:5' id='mpval>"+index+"'>"+"00 00 00 00"+"</div>"+"</div>"}$("#memory_MP").html("<div class='container-fluid'>"+o1+"</div>");var obj_byid=$("#addr"+index);if(redraw&&obj_byid.length>0){var topPos=obj_byid[0].offsetTop;obj_byid=$("#memory_MP");if(obj_byid.length>0)obj_byid[0].scrollTop=topPos-120}old_main_addr=index}function main_memory_getword(revlabels,valkeys,memory,key){if(typeof memory[key]=="undefined")return"00 00 00 00";var value=memory[key].toString(16);value=pack8(value);var i=0;for(i=0;i<4;i++){valkeys[i]=(parseInt(key)+i).toString(16)}value2="";for(i=0;i<4;i++){labeli=revlabels["0x"+valkeys[3-i]];valuei=value[i*2]+value[i*2+1];if(typeof labeli!="undefined")value2+="<span>"+'<span style="border:1px solid gray;">'+valuei+"</span>"+'<span class="badge badge-pill badge-info" '+'     style="position:relative;top:-8px;">'+labeli+"</span>"+"</span>";else value2+=valuei+" "}return value2}var old_main_addr=0;function light_refresh_main_memory(memory,index,redraw){if(redraw){var valkeys=[];var SIMWARE=get_simware();var revlabels={};for(var key in SIMWARE.labels2)revlabels[SIMWARE.labels2[key]]=key;var svalue=main_memory_getword(revlabels,valkeys,memory,index);o1=$("#mpval"+index);o1.html(svalue)}o1=$("#addr"+old_main_addr);o1.css("color","black");o1.css("font-weight","normal");old_main_addr=index;o1=$("#addr"+old_main_addr);o1.css("color","blue");o1.css("font-weight","bold")}function labels2html_aux(slebal,c){var clabel="";var wadd="";for(var j=3;j>=0;j--){wadd="0x"+(parseInt(c)+j).toString(16);if(typeof slebal[wadd]!="undefined")for(var i=0;i<slebal[wadd].length;i++)clabel=clabel+"<span class='badge badge-pill badge-secondary float-left'>"+slebal[wadd][i]+"</span>";else clabel=clabel+"&nbsp;"}return clabel}function mp2html(mp,labels,seg){var slebal={};for(var l in labels){if(typeof slebal[labels[l]]=="undefined")slebal[labels[l]]=[];slebal[labels[l]].push(l)}var o="";o+="<center>"+"<table style='table-layout:auto; border-style: solid; border-width:0px;'>"+"<tr>"+"<th style='border-style: solid; border-width:0px;'>labels</th>"+"<th style='border-style: solid; border-width:1px;'>address</th>"+"<th style='border-style: solid; border-width:1px;'>"+"<table border=0 width=100%>"+"<tr align=center>"+"  <td width='25%' align='center'><small><b>byte 3</b></small></td>"+"  <td width='25%' align='center'><small><b>byte 2</b></small></td>"+"  <td width='25%' align='center'><small><b>byte 1</b></small></td>"+"  <td width='25%' align='center'><small><b>byte 0</b></small></td>"+"</tr>"+"<tr>"+"  <td width='12%' align='center' >&nbsp;<sup>31&nbsp;&nbsp;......&nbsp;&nbsp;24</sup>&nbsp;</td>"+"  <td width='12%' align='center' >&nbsp;<sup>23&nbsp;&nbsp;......&nbsp;&nbsp;16</sup>&nbsp;</td>"+"  <td width='12%' align='center' >&nbsp;<sup>15&nbsp;&nbsp;......&nbsp;&nbsp;8</sup>&nbsp;</td>"+"  <td width='12%' align='center' >&nbsp;<sup>7&nbsp;&nbsp;......&nbsp;&nbsp;0</sup>&nbsp;</td>"+"</tr>"+"</table>"+"<th style='border-style: solid; border-width:0px;' align='right'>&nbsp;&nbsp;segment</th>"+"</tr>";var color="white";for(var skey in seg){c_begin=parseInt(seg[skey].begin);c_end=parseInt(seg[skey].end);color=seg[skey].color;rows=0;var x="";for(var i=c_begin;i<c_end;i++){c="0x"+i.toString(16);if(typeof mp[c]=="undefined"){continue}if(0==rows){o+="<tr style=\"font-family:'Consolas'; font-size:11pt;\">"+"<td align='right'  style='border-style: solid; border-width:0px;'>"+labels2html_aux(slebal,c)+"</td>"+"<td                style='border-style: solid; border-width:1px;' bgcolor="+color+">"+c.toUpperCase()+"</td>"+"<td                style='border-style: solid; border-width:1px;' bgcolor="+color+">"+mp[c].substr(0,8)+"&nbsp;"+mp[c].substr(8,8)+"&nbsp;"+mp[c].substr(16,8)+"&nbsp;"+mp[c].substr(24,8)+"</td>"+"<td rowspan="}else{x+="<tr style=\"font-family:'Consolas'; font-size:11pt;\">"+"<td align='right'  style='border-style: solid; border-width:0px;'>"+labels2html_aux(slebal,c)+"</td>"+"<td                style='border-style: solid; border-width:1px;' bgcolor="+color+">"+c.toUpperCase()+"</td>"+"<td                style='border-style: solid; border-width:1px;' bgcolor="+color+">"+mp[c].substr(0,8)+"&nbsp;"+mp[c].substr(8,8)+"&nbsp;"+mp[c].substr(16,8)+"&nbsp;"+mp[c].substr(24,8)+"</td>"+"</tr>"}rows++}if(0==rows){o+="<tr style=\"font-family:'Consolas'; font-size:12pt;\">"+"<td>&nbsp;</td>"+"<td style='border-style: solid; border-width:1px;' bgcolor="+color+">0x"+parseInt(seg[skey].begin).toString(16).toUpperCase()+"</td>"+"<td style='border-style: solid; border-width:1px;' bgcolor="+color+">&nbsp;</td>"+"<td rowspan=";x+="<tr style=\"font-family:'Consolas'; font-size:12pt;\">"+"<td>&nbsp;</td>"+"<td style='border-style: solid; border-width:1px;' bgcolor="+color+">0x"+parseInt(seg[skey].end).toString(16).toUpperCase()+"</td>"+"<td style='border-style: solid; border-width:1px;' bgcolor="+color+">&nbsp;</td>"+"<td>&nbsp;</td>"+"</tr>";rows=2}o+=rows+" align=right>"+seg[skey].name+"&nbsp;</td></tr>"+x;if(seg[skey].name!=".stack"){o+="<tr style=\"font-family:'Consolas'; font-size:12pt;\">"+"<td>&nbsp;</td>"+"<td valign='middle' align='center' height='25px'>...</td>"+"<td valign='middle' align='center' height='25px'>...</td>"+"<td>&nbsp;</td>"+"</tr>"}}o+="</table>"+"</center><br>";return o}function segments2html(segments){var o1="<br>";o1+=" <center>"+" <table height='400px'>"+" <tr>"+" <td>"+"<table style='border-style: solid' border='1' width='100%' height='100%'>";for(var skey in segments){if(segments[skey].name!=".stack")o1+="<tr><td valign='middle' align='center' height='60px' bgcolor='"+segments[skey].color+"'>"+segments[skey].name+"</td></tr>"+"<tr><td valign='middle' align='center' height='25px'>...</td></tr>"}o1+="<tr><td valign='middle' align='center' bgcolor='"+segments[".stack"].color+"'>"+segments[".stack"].name+"</td></tr>"+"</table>"+" </td>"+" <td width='20px'>&nbsp;</td>"+" <td>"+" <table style='border-style: solid; border-width:0px; width:100%; height:100%'>";var sx="";var sp="";for(skey in segments){sx="<tr>"+"    <td valign='top' align='left' height='30px' style=''>"+"    <div id='compile_begin_"+segments[skey].name+"'>"+segments[skey].begin+"</div>"+"    </td>"+" </tr>"+" <tr>"+"    <td valign='bottom' align='left' height='30px' style=''>"+"    <div id='compile_end_"+segments[skey].name+"'>"+segments[skey].end+"</div>"+"    </td>"+" </tr>";if(segments[skey].name!=".stack")o1+=sx+"<tr><td valign='middle' align='center' height='25px'>...</td></tr>";else sp=sx}o1+=sp+" </table>"+" </td>"+" </tr>"+" </table>"+" </center>";return o1}function instruction2tooltip(mp,asm,l){var wsi=get_cfg("ws_idiom");var ins_quoted=asm[l].source_original.replace(/"/g,"&quot;").replace(/'/g,"&apos;");var firm_reference=asm[l].firm_reference;var nwords=parseInt(asm[l].firm_reference.nwords);var next=0;var ins_bin=mp[l];for(var iw=1;iw<nwords;iw++){next="0x"+(parseInt(l,16)+iw*4).toString(16);if(typeof mp[next]!=="undefined"){ins_bin+=mp[next]}}var o='<div class="text-center p-1 m-1 border border-secondary rounded">\n'+ins_quoted+"<br>\n"+"</div>"+'<div class="text-left p-1 m-1">\n'+"<b>"+ins_bin+"</b>\n"+"</div>";var u="";if(typeof firm_reference.cop!=="undefined"){u="+"+firm_reference.cop}o+='<div class="text-left px-2 my-1">\n'+'<span class="square">Format:</span>\n'+'<ul class="mb-0">\n'+" <li>"+firm_reference.name+": <b>"+firm_reference.co+u+"</b></li>\n";var fields=firm_reference.fields;for(var f=0;f<fields.length;f++){o+=" <li>"+fields[f].name+": bits <b>"+fields[f].stopbit+"</b> to <b>"+fields[f].startbit+"</b></li>\n"}o+="</ul>\n";o+='<span class="user_microcode">'+'<span class="square">Microcode:</span>\n'+'<ul class="mb-0">\n'+" <li> starts: <b>0x"+firm_reference["mc-start"].toString(16)+"</b></li>\n"+" <li> clock cycles: <b>"+firm_reference.microcode.length+"</b></li>\n"+"</ul>\n"+"</span>"+"</div>";o+='<button type="button" id="close" data-role="none" '+'        class="btn btn-sm btn-danger w-100 p-0 mt-2" '+'        onclick=$(".tooltip").tooltip("hide");>'+i18n_get("dialogs",wsi,"Close")+"</button>";return o}function assembly2html(mp,labels,seg,asm){var s_label="";var s1_instr="";var s2_instr="";var s3_bin="";var s4_hex="";var bgc="#F0F0F0";var o="";var l="";var a2l={};for(l in labels){if(typeof a2l[labels[l]]=="undefined"){a2l[labels[l]]=[]}a2l[labels[l]].push(l)}var a2s={};for(l in seg){laddr="0x"+seg[l].begin.toString(16);a2s[laddr]=l}o+="<center>"+"<table data-role='table' class='table table-sm'>"+"<tbody>";for(l in asm){if(bgc==="#F0F0F0")bgc="#F8F8F8";else bgc="#F0F0F0";asm[l].bgcolor=bgc;s3_bin=mp[l];if(typeof s3_bin==="undefined")s3_bin=0;s1_instr=asm[l].source;s2_instr=asm[l].source_original;s4_hex=parseInt(s3_bin,2).toString(16);s4_hex="0x"+s4_hex.padStart(1*8,"0");s_label="";if(typeof a2l[l]!="undefined"){for(var i=0;i<a2l[l].length;i++){s_label=s_label+"<span class='badge badge-info'>"+a2l[l][i]+"</span>"}}if(s1_instr===""){s2_instr='<span class="text-secondary">'+s2_instr+"</span>"}else if(s1_instr!=s2_instr){s1_instr='<span class="text-primary">'+s1_instr+"</span>";s2_instr='<span class="text-primary">'+s2_instr+"</span>"}if(typeof a2s[l]!=="undefined"){o+="<tr bgcolor='#FEFEFE'>"+"<td colspan='7' style='line-height:0.3;' align='left'><small><font color='gray'>"+a2s[l]+"</font></small></td>"+"</tr>"}o+="<tr id='asmdbg"+l+"' bgcolor='"+asm[l].bgcolor+"'>"+"<td class='asm_label  text-monospace col-auto collapse pb-0' "+"    style='line-height:0.9;' align=right"+"    onclick='asmdbg_set_breakpoint("+l+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+s_label+"</td>"+"<td class='asm_addr   text-monospace col-auto collapse' "+"    style='line-height:0.9;'"+"    onclick='asmdbg_set_breakpoint("+l+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+l+"</td>"+"<td class='asm_break  text-monospace col-auto show py-0 px-0' "+"    style='line-height:0.9;' id='bp"+l+"' width='1%'"+"    onclick='asmdbg_set_breakpoint("+l+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+"    <span data-toggle='tooltip' rel='tooltip1' title='click to toggle breakpoint'>.</span>"+"</td>"+"<td class='asm_hex    text-monospace col-auto collapse' "+"    style='line-height:0.9;' align=left>"+"    <span data-toggle='tooltip' rel='tooltip2' data-placement='right' data-html='true' data-l='"+l+"'>"+"    <span data-toggle='tooltip' rel='tooltip1' title='click to show instruction format details'>"+s4_hex+"    </span>"+"    </span>"+"</td>"+"<td class='asm_ins    text-monospace col-auto collapse' "+"    style='line-height:0.9;'"+"    onclick='asmdbg_set_breakpoint("+l+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+s1_instr+"</td>"+"<td class='asm_pins   text-monospace col-auto collapse' "+"    style='line-height:0.9;' align=left"+"    onclick='asmdbg_set_breakpoint("+l+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+s2_instr+"</td>"+"</tr>"}o+="</tbody>"+"</table>"+"</center>";return o}class ws_mem_config extends HTMLElement{constructor(){super()}render(msg_default){var o1="<div id='config_MP' style='height:58vh; width: inherit; overflow-y: auto;' "+"     class='container container-fluid'>"+"<div class='container-fluid'>"+"<div class='row'>"+"<div class='col-12' style='padding:0 0 10 0;'>"+"<div class='card bg-light'>"+"<div class='card-body p-0' id='mempanel'>"+"<table class='table table-hover table-sm table-bordered' "+"       style='margin:0'>"+"<tbody class='no-ui-mini'>"+"<tr><td align=center'>Wait cycles (<b>0</b> - &infin;)</td>"+"    <td align=center'>"+"<div id='mp_wc'>"+"<input type=number data-bind='value: simhw_internalState(\"MP_wc\")' min='0' max='99999999'>"+"</div>"+"    </td></tr>"+"</tbody>"+"</table>"+"</div>"+"</div>"+"</div>"+"</div>";this.innerHTML=o1;simhw_internalState_reset("MP_wc",ko_observable(0));var ko_context=document.getElementById("mp_wc");ko.applyBindings(simhw_internalState("MP_wc"),ko_context)}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-mem-config",ws_mem_config);class ws_console extends HTMLElement{constructor(){super()}render(msg_default){var o1='<label class="my-0" for="kdb_con" style="min-width:95%">'+'   <img alt="monitor" height="55" src="images/monitor2.png" />'+"</label>"+'<textarea aria-label="monitor"'+'          style="width:100%; overflow-y:auto; -webkit-overflow-scrolling: touch; margin:0 0 8 0"'+'          placeholder="WepSIM" id="kdb_con" rows="8" readonly></textarea>'+""+'<label class="my-0" for="kdb_key" style="min-width:95%">'+'   <img alt="keyboard" height="35" src="images/keyboard1.png" />'+"</label>"+'<textarea aria-label="keyboard"'+'          style="min-width:100%; overflow-y:auto; -webkit-overflow-scrolling: touch; margin:0 0 0 0"'+'          placeholder="WepSIM" id="kdb_key" rows="2"></textarea>';this.innerHTML=o1}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-console",ws_console);function wepsim_get_screen_content(){var screen_content="";var scrobj=document.getElementById("kdb_con");if(scrobj!=null){screen_content=scrobj.value}simcore_native_set_value("SCREEN","content",screen_content);return screen_content}function wepsim_set_screen_content(screen_content){var scrobj=document.getElementById("kdb_con");if(scrobj!=null){scrobj.value=screen_content}simcore_native_set_value("SCREEN","content",screen_content);return screen_content}function wepsim_get_keyboard_content(){var keystrokes="";var keyobj=document.getElementById("kdb_key");if(keyobj!=null){keystrokes=keyobj.value}simcore_native_set_value("KBD","keystrokes",keystrokes);return keystrokes}function wepsim_set_keyboard_content(keystrokes){var keyobj=document.getElementById("kdb_key");if(keyobj!=null){keyobj.value=keystrokes}simcore_native_set_value("KBD","keystrokes",keystrokes);return true}class ws_io_info extends HTMLElement{constructor(){super()}render(msg_default){var curr_iointfactory=simhw_internalState("io_int_factory");if(typeof curr_iointfactory=="undefined"){this.innerHTML=msg_default;return}var i=0;var o1="<div id='io_ALL' style='height:58vh; width: inherit; overflow-y: auto;' "+"     class='container container-fluid'>"+"<div class='container'>"+"<div class='row'>"+"<div class='col-12'>"+"<table class='table table-hover table-sm table-bordered'>";for(i=0;i<curr_iointfactory.length;i++){o1+="<tr id='int"+i+"_context'>"+"<td align=center width=50%>"+"<span data-bind=\"style: {fontWeight: active() ? 'bold' : ''}\">"+"Interrupt "+i+"</span>"+"</td>"+"<td align=center width=50%>"+"<span data-bind='text: accumulated'>&nbsp;</span>"+"</td>"+"</tr>"}o1+="</table>"+"</div>"+"</div>"+"</div>"+"</div>";this.innerHTML=o1;for(i=0;i<curr_iointfactory.length;i++){if(typeof curr_iointfactory[i].accumulated!="function")curr_iointfactory[i].accumulated=ko_observable(curr_iointfactory[i].accumulated);if(typeof curr_iointfactory[i].active!="function")curr_iointfactory[i].active=ko_observable(curr_iointfactory[i].active);var ko_context=document.getElementById("int"+i+"_context");ko.cleanNode(ko_context);ko.applyBindings(curr_iointfactory[i],ko_context)}}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-io-info",ws_io_info);class ws_io_config extends HTMLElement{constructor(){super()}render(msg_default){var curr_iointfactory=simhw_internalState("io_int_factory");if(typeof curr_iointfactory=="undefined"){this.innerHTML=msg_default;return}var i=0;var o1="<div id='config_IO' style='height:58vh; width: inherit; overflow-y: auto;'>"+"<div class='container-fluid'>"+"<div class='row'>"+"<div class='col-12 p-0'>"+"<div class='card bg-light m-0'>"+"<div class='card-body p-0' id='iopanel'>"+"<center>"+"<table class='table table-hover table-sm table-bordered m-0'>"+"<tbody class='no-ui-mini'>"+"<tr>"+"<td align=center width='33%'>"+"  <span class='d-none d-sm-inline-flex'>Interrupt identificator</span>"+"  <span class='d-sm-none'>Int. Id.<br>(0 - 7)</span>"+"</td>"+"<td align=center width='33%'>"+"  <span class='d-none d-sm-inline-flex'>CLK period (<b>0</b> - &infin;)</span>"+"  <span class='d-sm-none'>CLK ticks <br>(<b>0</b> - &infin;)</span>"+"</td>"+"<td align=center width='33%'>"+"  <span class='d-none d-sm-inline-flex'>Probability (0 - 1)</span>"+"  <span class='d-sm-none'>Probability <br>(0 - 1)</span>"+"</td>"+"</tr>";for(i=0;i<8;i++){o1+="<tr>"+"<td align='center' style='padding:0 0 0 0; vertical-align: middle !important'>"+"<span class='p-0 m-0'>"+i+"</span>"+"</td>"+"<td align='center' class='p-0'>"+"<div id='int"+i+"_per' style='margin:0 3 0 3'>"+"<input type=number data-bind='value: period' min='0' max='99999999' class='form-control p-0'>"+"</div>"+"</td>"+"<td align='center' class='p-0'>"+"<div id='int"+i+"_pro' style='margin:0 3 0 3'>"+"<input type='number' data-bind='value: probability' min='0' max='1' step='.05' class='form-control p-0'>"+"</div>"+"</td>"+"</tr>"}o1+="</tbody>"+"</table>"+"</center>"+"</div>"+"</div>"+"</div>"+"</div>";this.innerHTML=o1;var ko_context={};for(i=0;i<curr_iointfactory.length;i++){if(typeof curr_iointfactory[i].period!="function")curr_iointfactory[i].period=ko_observable(curr_iointfactory[i].period);ko_context=document.getElementById("int"+i+"_per");ko.cleanNode(ko_context);ko.applyBindings(curr_iointfactory[i],ko_context);if(typeof curr_iointfactory[i].probability!="function")curr_iointfactory[i].probability=ko_observable(curr_iointfactory[i].probability);ko_context=document.getElementById("int"+i+"_pro");ko.cleanNode(ko_context);ko.applyBindings(curr_iointfactory[i],ko_context)}}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-io-config",ws_io_config);var apirest_name="L3D";var apirest_endpoint="http://localhost:5000/led/api1/";var apirest_user="";var apirest_pass="";class ws_l3d extends HTMLElement{constructor(){super()}render(msg_default){var curr_l3dstates=simhw_internalState("l3d_state");if(typeof curr_l3dstates=="undefined"){this.innerHTML=msg_default;return}simcore_rest_add(apirest_name,{endpoint:apirest_endpoint,user:apirest_user,pass:apirest_pass});var i=0;var ko_context=null;var o1="<div id='config_L3D' style='height:58vh; width:inherit; overflow-y:auto;'>"+"<div class='container'>"+"<div class='row'>"+"<div class='col-12'>";for(i=0;i<curr_l3dstates.length/9;i++){o1+="<table class='table table-hover table-sm table-bordered pb-3'>";for(var j=0;j<3;j++){o1+="<tr>";for(var k=0;k<3;k++){o1+="<td align=center id='l3d"+(i*9+j*3+k)+"_context' "+"    data-bind=\"style: { fontWeight: active() ? 'bold' : '' }, "+"                event: { click: function(){ active(!active()); simcore_rest_call('L3D','GET','/set',{'id': "+(i*9+j*3+k)+'}); } }">&Pi;</td>'}o1+="</tr>"}o1+="</table>"}o1+="</div>"+"</div>"+"<table class='table table-hover table-sm table-bordered m-0'>"+"<tr><td>"+"<input id='apirest_endpoint' type='text' data-bind='value: apirest_endpoint' class='form-control text-info p-0'>"+"</td></tr>"+"</table>"+"</div>"+"</div>";this.innerHTML=o1;for(i=0;i<curr_l3dstates.length;i++){if(typeof curr_l3dstates[i].active!="function")curr_l3dstates[i].active=ko_observable(curr_l3dstates[i].active);ko_context=document.getElementById("l3d"+i+"_context");ko.cleanNode(ko_context);ko.applyBindings(curr_l3dstates[i],ko_context)}if(typeof apirest_endpoint!="function")apirest_endpoint=ko_observable(apirest_endpoint);ko_context=document.getElementById("apirest_endpoint");ko.cleanNode(ko_context);ko.applyBindings(apirest_endpoint,ko_context)}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-l3d",ws_l3d);class ws_dbg_mc extends HTMLElement{constructor(){super()}render(msg_default){var o1="<div id='memory_MC' "+"     style='height:60vh; width:inherit; overflow-y:scroll; -webkit-overflow-scrolling:touch;'>"+"</div>";this.innerHTML=o1}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-dbg-mc",ws_dbg_mc);function dbg_set_breakpoint(addr){var icon_theme=get_cfg("ICON_theme");var dbg_level=get_cfg("DBG_level");var o1=document.getElementById("mcpin"+addr);var bp_state=simhw_internalState_get("MC_dashboard",addr).breakpoint;if(bp_state===true){bp_state=false;o1.innerHTML="&nbsp;"}else{bp_state=true;o1.innerHTML=sim_core_breakpointicon_get(icon_theme)}simhw_internalState_get("MC_dashboard",addr).breakpoint=bp_state;if(bp_state&&"instruction"===dbg_level){wepsim_notify_do_notify("<strong>INFO</strong>","Please remember to change configuration to execute at microinstruction level.","success",get_cfg("NOTIF_delay"))}simcore_record_append_new("Set firmware breakpoint at "+addr,"dbg_set_breakpoint("+addr+");\n")}function wepsim_show_dbg_mpc(){var maddr_name=simhw_sim_ctrlStates_get().mpc.state;var reg_maddr=get_value(simhw_sim_state(maddr_name));show_control_memory(simhw_internalState("MC"),simhw_internalState("MC_dashboard"),reg_maddr,false)}function controlmemory_lineToString(memory,key){var value="";for(var ks in memory[key]){if(1==memory[key][ks]){value+=ks+" ";continue}if("NATIVE"==ks){value+="&lt;native&gt; ";continue}if("NATIVE_JIT"==ks){value+="&lt;built-in&gt; ";continue}value+=ks+"="+parseInt(memory[key][ks]).toString(2)+" "}return value}function hard_refresh_control_memory(memory,memory_dashboard,index,redraw){var o1="";var key="";var value="";var icon_theme=get_cfg("ICON_theme");var SIMWARE=get_simware();var revlabels={};for(key in SIMWARE.firmware)revlabels[SIMWARE.firmware[key]["mc-start"]]=SIMWARE.firmware[key].name;var maddr="";var trpin="";var htmllabel="";var htmlfill=0;for(key in memory){value=controlmemory_lineToString(memory,key);maddr="0x"+parseInt(key).toString(16);if(typeof revlabels[key]!="undefined"){htmllabel=revlabels[key];htmlfill=5-htmllabel.length;if(htmlfill>0){for(var i=0;i<htmlfill;i++){htmllabel=htmllabel+"&nbsp;"}}maddr="<span>"+'<span class="badge badge-pill badge-info text-monospace" '+'      style="position:relative;top:4px;">'+htmllabel+"</span>"+'<span style="border:1px solid gray;">'+maddr+"</span>"+"</span>"}trpin="&nbsp;";if(true==memory_dashboard[key].breakpoint){trpin=sim_core_breakpointicon_get(icon_theme)}if(key==index)o1+="<tr id='maddr"+key+"' class='d-flex' "+"    style='color:blue; font-size:small; font-weight:bold' "+"    onclick='dbg_set_breakpoint("+key+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+"<td             class='col-3 col-md-2 py-0' align='right'>"+maddr+"</td>"+"<td width='1%'  class='col-auto py-0 px-0' id='mcpin"+key+"'>"+trpin+"</td>"+"<td             class='col py-0'>"+value+"</td></tr>";else o1+="<tr id='maddr"+key+"' class='d-flex' "+"    style='color:black; font-size:small; font-weight:normal' "+"    onclick='dbg_set_breakpoint("+key+"); "+"             if (event.stopPropagation) event.stopPropagation();'>"+"<td             class='col-3 col-md-2 py-0' align='right'>"+maddr+"</td>"+"<td width='1%'  class='col-auto py-0 px-0' id='mcpin"+key+"'>"+trpin+"</td>"+"<td             class='col py-0'>"+value+"</td></tr>"}if(typeof memory[index]=="undefined"){o1+="<tr>"+"<td width='15%'><font style='color:blue; font-size:small; font-weight:bold'>0x"+parseInt(index).toString(16)+"</font></td>"+"<td><font style='color:blue; font-size:small; font-weight:bold'><b>&nbsp;</b></font></td></tr>"}$("#memory_MC").html("<center><table class='table table-hover table-sm'>"+"<tbody id='none'>"+o1+"</tbody>"+"</table></center>");var obj_byid=$("#maddr"+index);if(redraw&&obj_byid.length>0){var topPos=obj_byid[0].offsetTop;obj_byid=$("#memory_MC");if(obj_byid.length>0)obj_byid[0].scrollTop=topPos}old_mc_addr=index}var old_mc_addr=0;function light_refresh_control_memory(memory,memory_dashboard,index){o1=$("#maddr"+old_mc_addr);o1.css("color","black");o1.css("font-weight","normal");old_mc_addr=index;o1=$("#maddr"+old_mc_addr);o1.css("color","blue");o1.css("font-weight","bold")}var show_control_memory_deferred=null;function wepsim_show_control_memory(memory,memory_dashboard,index,redraw){if(null!==show_control_memory_deferred)return;show_control_memory_deferred=setTimeout((function(){if(false===redraw)light_refresh_control_memory(memory,memory_dashboard,index);else hard_refresh_control_memory(memory,memory_dashboard,index,redraw);show_control_memory_deferred=null}),cfg_show_control_memory_delay)}function firmware2html(fir,showBinary){var i=0;var s="";var filter=simhw_internalState("filter_signals");var h="<tr bgcolor='#FF9900'>"+"<td bgcolor='white'     style='border-style: solid; border-width:0px; border-color:lightgray;'></td>"+"<td bgcolor='lightblue' style='border-style: solid; border-width:1px; border-color:lightgray;'>co</td>"+"<td bgcolor='#FFCC00'   style='border-style: solid; border-width:1px; border-color:lightgray;' align='center'><small><b>&#181;dir</b></small></td>"+"<td bgcolor='white'     style='border-style: solid; border-width:0px; border-color:lightgray;'>&nbsp;&nbsp;</td>";var contSignals=1;for(i=0;i<filter.length;i++){s=filter[i].split(",")[0];h+="<td align='center' style='border-style: solid; border-width:1px;'><small><b>"+simhw_sim_signals()[s].name+"</b></small></td>";contSignals++}h+="</tr>";var o="<center>";o+="<table style='table-layout:auto; border-style: solid: border-width:0px; border-collapse:collapse;'>";var l=0;var line="";var fragment="";var ico="";var madd="";for(i=0;i<fir.length;i++){var mstart=fir[i]["mc-start"];var mcode=fir[i].microcode;for(j=0;j<mcode.length;j++){if(++l%10==1)o=o+h;ico="";if(typeof fir[i].co!="undefined")ico=parseInt(fir[i].co,2);var isignature=fir[i].signature.split(",")[0];line="";if(j==0)line+="<td style='border-style: solid; border-width:0px; border-color:lightgray;'>"+"<span class='badge badge-pill badge-secondary float-left'>"+isignature+"</span>&nbsp;</td>"+"<td style='border-style: solid; border-width:1px; border-color:lightgray;'>"+ico+"</td>";else line+="<td style='border-style: solid; border-width:0px; border-color:lightgray;'>&nbsp;</td>"+"<td style='border-style: solid; border-width:1px; border-color:lightgray;'>&nbsp;</td>";if(showBinary)madd="0x"+(mstart+j).toString(16);else madd=mstart+j;line+="<td align='center'  style='border-style: solid; border-width:1px; border-color:lightgray;' bgcolor='white'>"+madd+"</td>"+"<td bgcolor='white' style='border-style: solid; border-width:0px; border-color:lightgray;'>&nbsp;</td>";var mins=mcode[j];for(var k=0;k<filter.length;k++){s=filter[k].split(",")[0];var svalue=parseInt(simhw_sim_signals()[s].default_value);var newval=false;if(typeof mins[s]!="undefined"&&!isNaN(parseInt(mins[s]))){svalue=parseInt(mins[s]);newval=true}if((s=="SELA"||s=="SELB"||s=="SELC")&&typeof mins.MADDR!="undefined"&&!isNaN(parseInt(mins.MADDR))){fragment=parseInt(mins.MADDR).toString(2);fragment="000000000000".substring(0,12-fragment.length)+fragment+"000";if(s=="SELA"){svalue=parseInt(fragment.substring(0,5),2);newval=true}if(s=="SELB"){svalue=parseInt(fragment.substring(5,10),2);newval=true}if(s=="SELC"){svalue=parseInt(fragment.substring(10,15),2);newval=true}}if(showBinary){fragment=svalue.toString(2);var nbits=parseInt(simhw_sim_signals()[s].nbits);svalue="00000000000000000000000000000000".substring(0,nbits-fragment.length)+fragment;var ngreen=filter[k].split(",")[1];var part1=svalue.substring(0,ngreen);var part2=svalue.substring(ngreen);svalue="<font color=green>"+part1+"</font>"+part2}if(newval)line+="<td align='center' style='border-style: solid; border-width:1px;'><b>"+svalue+"</b></td>";else line+="<td align='center' style='border-style: solid; border-width:1px;'><font color='grey'>"+svalue+"</font></td>"}o+="<tr>"+line+"</tr>"}}o+="</table></center>";return o}class ws_dbg_mp extends HTMLElement{constructor(){super()}render(msg_default){var o1="<center>"+"<div id='asm_table' style='overflow-x:auto; -webkit-overflow-scrolling:touch;'>"+"<table class='table ui-responsive ui-table' style='margin-bottom:0px; min-width:700px;'>"+"<thead>"+"<tr style='border-top:2pt solid white;'>"+"<th width='1%'>"+"<a tabindex='0' href='#' class='show multi-collapse-3' data-toggle='popover2' id='popover2_asm'><strong class='fas fa-wrench text-secondary'></strong></a>"+"</th>"+"<th width='10%' class='asm_label collapse' align='right'><span data-langkey='labels'>labels</span></th>"+"<th width='15%' class='asm_addr  collapse'              ><span><span data-langkey='addr'>addr</span></span><span class='d-none d-sm-inline-flex'><span data-langkey='ess'>ess</span></span></th>"+"<th width='15%' class='asm_hex   collapse' align='right'><span data-langkey='content'>content</span></th>"+"<th width='30%' class='asm_ins   collapse' align='left' ><span data-langkey='assembly'>assembly</span></th>"+"<th width='30%' class='asm_pins  collapse' align='left' ><span>pseudo</span><span class='d-none d-md-inline'><small><span data-langkey='instructions'>instructions</span></small></span></th>"+"</tr>"+"</thead>"+"</table>"+"</div>"+"</center>"+""+"<div id='asm_debugger_container'"+"     style='overflow-y:auto; overflow-x:auto; height:65vh !important; -webkit-overflow-scrolling:touch;'>"+"     <div id='asm_debugger' style='min-width:700px;'>"+"     </div>"+"</div>";this.innerHTML=o1}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-dbg-mp",ws_dbg_mp);function showhideAsmElements(){var tlabel=["label","addr","hex","ins","pins"];for(var tli=0;tli<tlabel.length;tli++){var label_name="SHOWCODE_"+tlabel[tli];var column_name="table .asm_"+tlabel[tli];var column_show=get_cfg(label_name);if(column_show!==false)$(column_name).show();else $(column_name).hide()}}function showhideAsmHeader(){var tlabel=["label","addr","hex","ins","pins"];for(var tli=0;tli<tlabel.length;tli++){var label_name="SHOWCODE_"+tlabel[tli];var btn_show=get_cfg(label_name);var btn_name="#asm_"+tlabel[tli];$(btn_name).removeClass("btn-outline-secondary").removeClass("btn-dark");if(btn_show!==false)$(btn_name).addClass("btn-dark");else $(btn_name).addClass("btn-outline-secondary")}}function default_asmdbg_content_horizontal(){var wsi=get_cfg("ws_idiom");var o="<br>"+"<div class='card m-3'>"+"  <div class='row no-gutters'>"+"  <div class='col-md-12'>"+"  <div class='card-body py-0'>"+"    <p class='card-text'>"+"    <div class='badge badge-primary'>1</div>"+"    <span data-langkey='simulator intro 1'>"+i18n_get("gui",wsi,"simulator intro 1")+"    </span>"+"    </p>"+"  </div>"+"  </div>"+"  </div>"+"</div>"+"<div class='card m-3'>"+"  <div class='row no-gutters'>"+"  <div class='col-md-12'>"+"  <div class='card-body py-0'>"+"    <p class='card-text'>"+"    <div class='badge badge-primary'>2</div>"+"    <span data-langkey='simulator intro 2'>"+i18n_get("gui",wsi,"simulator intro 2")+"    </span>"+"    </p>"+"  </div>"+"  </div>"+"  </div>"+"</div>"+"<div class='card m-3'>"+"  <div class='row no-gutters'>"+"  <div class='col-md-12'>"+"  <div class='card-body py-0'>"+"    <p class='card-text'>"+"    <div class='badge badge-primary'>3</div>"+"    <span data-langkey='simulator intro 3'>"+i18n_get("gui",wsi,"simulator intro 3")+"    </span>"+"    </p>"+"  </div>"+"  </div>"+"  </div>"+"</div>";return o}function default_asmdbg_content_vertical(){var o="<br>"+"<div class='container-fluid'>"+"<div class='card-column row'>"+"<div class='card m-2 col-sm'>"+"  <div class='card-body h-50 py-0'>"+"    <p class='card-text'>"+"    <div class='badge badge-primary'>1</div>"+"    <span data-langkey='simulator intro 1'>"+i18n_get("gui",wsi,"simulator intro 1")+"    </span>"+"    </p>"+"  </div>"+"</div>"+"<div class='card m-2 col-sm'>"+"  <div class='card-body h-50 py-0'>"+"    <p class='card-text'>"+"    <div class='badge badge-primary'>2</div>"+"    <span data-langkey='simulator intro 2'>"+i18n_get("gui",wsi,"simulator intro 2")+"    </span>"+"    </p>"+"  </div>"+"</div>"+"<div class='card m-2 col-sm'>"+"  <div class='card-body h-50 py-0'>"+"    <p class='card-text'>"+"    <div class='badge badge-primary'>3</div>"+"    <span data-langkey='simulator intro 3'>"+i18n_get("gui",wsi,"simulator intro 3")+"    </span>"+"    </p>"+"  </div>"+"</div>"+"</div>"+"</div>";return o}function wepsim_click_asm_columns(name){var label_name="SHOWCODE_"+name;var show_elto=get_cfg(label_name);show_elto=!show_elto;var column_name="table .asm_"+name;if(show_elto!==false)$(column_name).show();else $(column_name).hide();set_cfg(label_name,show_elto);save_cfg();var btn_name="#asm_"+name;$(btn_name).removeClass("btn-outline-secondary").removeClass("btn-dark");if(show_elto!==false)$(btn_name).addClass("btn-dark");else $(btn_name).addClass("btn-outline-secondary")}function wepsim_show_asm_columns_checked(asm_po){var wsi=get_cfg("ws_idiom");var o='<button type="button" id="asm_label" aria-label="Show label" '+"        onclick=\"wepsim_click_asm_columns('label'); return false;\" "+'        class="btn btn-sm btn-block btn-outline-secondary mb-1">'+'<span class="float-left">'+i18n_get("dialogs",wsi,"Show/Hide labels")+"</span>"+"</button>"+'<button type="button" id="asm_hex" aria-label="Show content" '+"        onclick=\"wepsim_click_asm_columns('hex'); return false;\" "+'        class="btn btn-sm btn-block btn-outline-secondary mb-1">'+'<span class="float-left">'+i18n_get("dialogs",wsi,"Show/Hide content")+"</span>"+"</button>"+'<button type="button" id="asm_ins" aria-label="Show instruction" '+"        onclick=\"wepsim_click_asm_columns('ins'); return false;\" "+'        class="btn btn-sm btn-block btn-outline-secondary mb-1">'+'<span class="float-left">'+i18n_get("dialogs",wsi,"Show/Hide assembly")+"</span>"+"</button>"+'<button type="button" id="asm_pins" aria-label="Show pseudoinstruction" '+"        onclick=\"wepsim_click_asm_columns('pins'); return false;\" "+'        class="btn btn-sm btn-block btn-outline-secondary mb-1">'+'<span class="float-left">'+i18n_get("dialogs",wsi,"Show/Hide pseudo-instructions")+"</span>"+"</button>"+'<button type="button" id="close" data-role="none" '+'        class="btn btn-sm btn-danger w-100 p-0 mt-2" '+"        onclick=\"$('#"+asm_po+"').popover('hide');\">"+i18n_get("dialogs",wsi,"Close")+"</button>";return o}var show_asmdbg_pc_deferred=null;function innershow_asmdbg_pc(){fullshow_asmdbg_pc();show_asmdbg_pc_deferred=null}function wepsim_show_asmdbg_pc(){if(get_cfg("DBG_delay")>5)return fullshow_asmdbg_pc();if(null==show_asmdbg_pc_deferred)show_asmdbg_pc_deferred=setTimeout(innershow_asmdbg_pc,cfg_show_asmdbg_pc_delay)}var old_addr=0;function fullshow_asmdbg_pc(){if(typeof document==="undefined"){return null}var o1=null;var pc_name=simhw_sim_ctrlStates_get().pc.state;var reg_pc=get_value(simhw_sim_state(pc_name));var curr_addr="0x"+reg_pc.toString(16);var curr_firm=simhw_internalState("FIRMWARE");if(typeof curr_firm.assembly[old_addr]!="undefined"){o1=$("#asmdbg"+old_addr);o1.css("background-color",curr_firm.assembly[old_addr].bgcolor)}else{for(var l in curr_firm.assembly){o1=$("#asmdbg"+l);o1.css("background-color",curr_firm.assembly[l].bgcolor)}}old_addr=curr_addr;o1=$("#asmdbg"+curr_addr);o1.css("background-color","#00EE88");return o1}function asmdbg_set_breakpoint(addr){var icon_theme=get_cfg("ICON_theme");var hexaddr="0x"+addr.toString(16);var curr_firm=simhw_internalState("FIRMWARE");var o1=document.getElementById("bp"+hexaddr);var bp_state=curr_firm.assembly[hexaddr].breakpoint;var inner_elto=".";if(bp_state===true){bp_state=false;inner_elto="."}else{bp_state=true;inner_elto=sim_core_breakpointicon_get(icon_theme)}$("span[rel='tooltip1']").tooltip("hide");o1.innerHTML="<span data-toggle='tooltip' rel='tooltip1' title='click to toggle breakpoint'>"+inner_elto+"</span>";wepsim_restore_uicfg();$("span[rel='tooltip1']").tooltip({trigger:"hover",html:true,sanitizeFn:function(content){return content}});curr_firm.assembly[hexaddr].breakpoint=bp_state;simcore_record_append_new("Set assembly breakpoint at "+addr,"asmdbg_set_breakpoint("+addr+");\n")}var show_dbg_ir_deferred=null;function wepsim_show_dbg_ir(decins){if(null!==show_dbg_ir_deferred){return}show_dbg_ir_deferred=setTimeout((function(){fullshow_dbg_ir(decins);show_dbg_ir_deferred=null}),cfg_show_dbg_ir_delay)}function fullshow_dbg_ir(decins){if(typeof document==="undefined"){return}var o=document.getElementById("svg_p");if(o!=null)o=o.contentDocument;if(o!=null)o=o.getElementById("tspan3899");if(o!=null)o.innerHTML=decins;o=document.getElementById("svg_cu");if(o!=null)o=o.contentDocument;if(o!=null)o=o.getElementById("text3611");if(o!=null)o.innerHTML=decins}function asmdbg_loadContent(asmdbg_content){$("#asm_debugger").html(asmdbg_content);setTimeout((function(){$("span[rel='tooltip1']").tooltip({trigger:"hover",html:true,sanitizeFn:function(content){return content}});$("span[rel='tooltip2']").tooltip({trigger:"click",html:true,title:function(){var l=this.getAttribute("data-l");var SIMWARE=get_simware();return instruction2tooltip(SIMWARE.mp,SIMWARE.assembly,l)},sanitizeFn:function(content){return content}}).on("shown.bs.tooltip",(function(shownEvent){wepsim_restore_uicfg()}))}),500);showhideAsmElements()}class ws_cpusvg extends HTMLElement{constructor(){super()}render(msg_default){var o1="<div class='container-fluid m-0 p-2'>"+"<div class='row'>"+"   <div class='col' id='eltos_cpu_a' style='padding:0 5 0 0;'>"+"       <object id='svg_p'"+"               title='processor'"+"               data='examples/hardware/ep/images/processor.svg'"+"               type='image/svg+xml'"+"               style='transform:translate3d(0,0,0);'>"+"           Your browser doesn't support SVG"+"       </object>"+"   </div>"+"   <div class='col' id='eltos_cpu_b' style='padding:0 5 0 5;'>"+"       <object id='svg_cu'"+"               title='control unit'"+"               data='examples/hardware/ep/images/controlunit.svg'"+"               type='image/svg+xml'"+"               style='transform:translate3d(0,0,0);'>"+"           Your browser doesn't support SVG"+"       </object>"+"   </div>"+"</div>"+"</div>";this.innerHTML=o1}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-cpusvg",ws_cpusvg);function wepsim_svg_obj_draw(obj_name,active,color_active,color_inactive,size_active,size_inactive){var r=obj_name.split(":");var o=document.getElementById(r[0]);if(o===null)return;o=o.contentDocument;if(o===null)return;o=o.getElementById(r[1]);if(o===null)return;if(active){o.style.setProperty("stroke",color_active,"");o.style.setProperty("fill",color_active,"");o.style.setProperty("stroke-width",size_active,"")}else{if(o.style.getPropertyValue("stroke")===color_inactive)return;o.style.setProperty("stroke",color_inactive,"");o.style.setProperty("fill",color_inactive,"");o.style.setProperty("stroke-width",size_inactive,"")}}var DRAW_stop=false;function wepsim_svg_start_drawing(){DRAW_stop=false}function wepsim_svg_stop_drawing(){DRAW_stop=true}function wepsim_svg_is_drawing(){return DRAW_stop}function wepsim_svg_update_draw(obj,value){if(true===DRAW_stop){return}var i=0;var j=0;var k=0;var draw_it=get_cfg("is_byvalue");if(typeof simhw_sim_state("REG_MICROINS").value[obj.name]!="undefined"){draw_it=true}if(false===draw_it&&typeof obj.depends_on!="undefined"){for(k=0;k<obj.depends_on.length;k++){var sname=obj.depends_on[k];if(typeof simhw_sim_state("REG_MICROINS").value[sname]!="undefined"){draw_it=true;break}else if("CLK"===sname){draw_it=true;break}}}var cfg_color_data_active=get_cfg("color_data_active");var cfg_color_data_inactive=get_cfg("color_data_inactive");var cfg_color_name_active=get_cfg("color_name_active");var cfg_color_name_inactive=get_cfg("color_name_inactive");var cfg_size_active=get_cfg("size_active");var cfg_size_inactive=get_cfg("size_inactive");if(obj.draw_data.length>1){for(i=0;i<obj.draw_data.length;i++)for(j=0;j<obj.draw_data[i].length;j++){wepsim_svg_obj_draw(obj.draw_data[i][j],i===value&&draw_it,cfg_color_data_active,cfg_color_data_inactive,cfg_size_active,cfg_size_inactive)}}else if(obj.nbits===1){for(j=0;j<obj.draw_data[0].length;j++){wepsim_svg_obj_draw(obj.draw_data[0][j],0!=value&&draw_it,cfg_color_data_active,cfg_color_data_inactive,cfg_size_active,cfg_size_inactive)}}else if(obj.draw_data.length===1){for(j=0;j<obj.draw_data[0].length;j++){wepsim_svg_obj_draw(obj.draw_data[0][j],draw_it,cfg_color_data_active,cfg_color_data_inactive,cfg_size_active,cfg_size_inactive)}}if(obj.draw_name.length>1){for(i=0;i<obj.draw_name.length;i++)for(j=0;j<obj.draw_name[i].length;j++){wepsim_svg_obj_draw(obj.draw_name[i][j],i===value&&draw_it,cfg_color_name_active,cfg_color_name_inactive,cfg_size_active,cfg_size_inactive)}}else if(obj.nbits===1){for(j=0;j<obj.draw_name[0].length;j++){wepsim_svg_obj_draw(obj.draw_name[0][j],0!=value&&draw_it,cfg_color_name_active,cfg_color_name_inactive,cfg_size_active,cfg_size_inactive)}}else if(obj.draw_name.length===1){for(j=0;j<obj.draw_name[0].length;j++){wepsim_svg_obj_draw(obj.draw_name[0][j],draw_it,cfg_color_name_active,cfg_color_name_inactive,cfg_size_active,cfg_size_inactive)}}}function wepsim_svg_update_bus_visibility(bus_name,value){if(true===DRAW_stop){return}var o=document.getElementById("svg_p");if(o===null)return;o=o.contentDocument;if(o===null)return;o=o.getElementById(bus_name);if(o===null)return;o.setAttributeNS(null,"visibility",value);o.style.visibility=value}class ws_authors extends HTMLElement{constructor(){super()}render(msg_default){var o1='<div class="card-desk row mx-auto"'+'     style="max-width:512px;">'+'      <div class="card bg-white text-center col-3 p-0">'+'        <img class="card-img-top img-fluid shadow no-dark-mode" id="collapse-author-1"'+'             src="images/author_fgarcia.png" alt="Felix Garcia Carballeira" />'+'        <div class="card-body p-3">'+'          <a class="btn text-vertical-lr p-0 text-primary"'+'             id="fgarcia">F&eacute;lix Garc&iacute;a Carballeira</a>'+"        </div>"+'        <div id="cf-fgarcia" class="card-footer p-1 collapse collapse7 bg-white text-left">'+'\t  <div class="list-group list-group-flush">'+'          <a class="card-link list-group-item p-1"'+'             ><span class="fab fa-linkedin"></span> linkedin</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             href="https://www.researchgate.net/profile/Felix_Garcia-Carballeira"><span class="fab fa-researchgate"></span> r-gate</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             ><span class="fab fa-github"></span> github</a>'+"          </div>"+"        </div>"+"      </div>"+""+'      <div class="card bg-white text-center col-3 p-0">'+'        <img class="card-img-top img-fluid shadow no-dark-mode" id="collapse-author-2"'+'             src="images/author_acaldero.png" alt="Alejandro Calder&oacute;n Mateos" />'+'        <div class="card-body p-3">'+'          <a class="btn text-vertical-lr p-0 text-primary"'+'             id="acaldero">Alejandro Calder&oacute;n Mateos</a>'+"        </div>"+'        <div id="cf-acaldero" class="card-footer p-1 collapse collapse7 bg-white text-left">'+'\t  <div class="list-group list-group-flush">'+'          <a class="card-link list-group-item p-1"'+'             href="https://www.linkedin.com/in/alejandro-calderon-mateos/"><span class="fab fa-linkedin"></span> linkedin</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             href="https://www.researchgate.net/profile/Alejandro_Calderon2"><span class="fab fa-researchgate"></span> r-gate</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             href="https://github.com/acaldero/"><span class="fab fa-github"></span> github</a>'+"          </div>"+"        </div>"+"      </div>"+""+'      <div class="card bg-white text-center col-3 p-0">'+'        <img class="card-img-top img-fluid shadow no-dark-mode" id="collapse-author-3"'+'             src="images/author_jprieto.png" alt="Javier Prieto Cepeda" />'+'        <div class="card-body p-3">'+'          <a class="btn text-vertical-lr p-0 text-primary"'+'             id="jprieto">Javier Prieto Cepeda</a>'+"        </div>"+'        <div id="cf-jprieto" class="card-footer p-1 collapse collapse7 bg-white text-left">'+'\t  <div class="list-group list-group-flush">'+'          <a class="card-link list-group-item p-1"'+'             href="https://www.linkedin.com/in/javier-prieto-cepeda"><span class="fab fa-linkedin"></span> linkedin</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             ><span class="fab fa-researchgate"></span> r-gate</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             ><span class="fab fa-github"></span> github</a>'+"          </div>"+"        </div>"+"      </div>"+""+'      <div class="card bg-white text-center col-3 p-0">'+'        <img class="card-img-top img-fluid shadow no-dark-mode" id="collapse-author-4"'+'             src="images/author_salonso.png" alt="Sa&uacute;l Alonso Monsalve" />'+'        <div class="card-body p-3">'+'          <a class="btn text-vertical-lr p-0 text-primary"'+'             id="salonso">Sa&uacute;l Alonso Monsalve</a>'+"        </div>"+'        <div id="cf-salonso" class="card-footer p-1 collapse collapse7 bg-white text-left">'+'\t  <div class="list-group list-group-flush">'+'          <a class="card-link list-group-item p-1"'+'             href="https://www.linkedin.com/in/salonsom/"><span class="fab fa-linkedin"></span> linkedin</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             href="https://www.researchgate.net/profile/Saul_Alonso_Monsalve"><span class="fab fa-researchgate"></span> r-gate</a>'+'          <a class="card-link list-group-item p-1 m-0"'+'             href="https://github.com/saulam/"><span class="fab fa-github"></span> github</a>'+"          </div>"+"        </div>"+"      </div>"+"</div>";this.innerHTML=o1}connectedCallback(){this.render("")}}if(typeof window!=="undefined")window.customElements.define("ws-authors",ws_authors);
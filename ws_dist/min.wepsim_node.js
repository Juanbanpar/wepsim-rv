var sim={systems:[],active:null,index:0};function simhw_add(a){sim.systems.push(a);sim.active=a;sim.index=sim.systems.length-1;check_behavior();compile_behaviors();firedep_to_fireorder(jit_fire_dep);compute_references();compile_verbals()}function simhw_getActive(){return sim.index}function simhw_setActive(a){if((a>=0)&&(sim.systems.length>=a)){sim.active=sim.systems[a];sim.index=a}compile_behaviors();firedep_to_fireorder(jit_fire_dep);compute_references();compile_verbals()}function simhw_getIdByName(c){for(var a=0;a<sim.systems.length;a++){if(sim.systems[a].sim_short_name==c){return a}}return -1}function simhw_getObjByName(c){for(var a=0;a<sim.systems.length;a++){if(sim.systems[a].sim_short_name==c){return sim.systems[a]}}return null}function simhw_active(){return sim.active}function simhw_short_name(){return sim.active.sim_short_name}function simhw_sim_signals(){return sim.active.signals}function simhw_sim_signal(a){return sim.active.signals[a]}function simhw_sim_states(){return sim.active.states}function simhw_sim_state(a){return sim.active.states[a]}function simhw_syntax_behaviors(){return sim.active.behaviors}function simhw_syntax_behavior(a){return sim.active.behaviors[a]}function simhw_sim_components(){return sim.active.components}function simhw_sim_component(a){return sim.active.components[a]}function simhw_internalState(a){return sim.active.internal_states[a]}function simhw_internalState_get(a,c){return sim.active.internal_states[a][c]}function simhw_internalState_set(a,d,c){sim.active.internal_states[a][d]=c}function simhw_internalState_reset(a,c){if(typeof ep_internal_states!="undefined"){ep_internal_states[a]=c;sim.active.internal_states[a]=ep_internal_states[a]}else{sim.active.internal_states[a]=c}}function simhw_sim_ctrlStates_get(){return sim.active.ctrl_states}function get_value(a){if(typeof a.value=="function"){return a.value()}return a.value}function set_value(a,c){if(typeof a.value=="function"){if(a.value()!=c){a.changed=true}a.value(c)}else{if(a.value!=c){a.changed=true}a.value=c}}function reset_value(c){if(typeof c.value=="function"){if(c.value()!=c.default_value){c.changed=true}set_value(c,c.default_value)}else{if(typeof c.default_value=="object"){c.changed=true;c.value=Object.create(c.default_value)}else{if(c instanceof Array){c.changed=true;for(var a=0;a<c.length;a++){set_value(c[a],c[a].default_value)}}else{if(c.value!=c.default_value){c.changed=true}set_value(c,c.default_value)}}}}function get_var(a){if(typeof a=="function"){return a()}else{return a}}function set_var(c,a){if(typeof c=="function"){c(a)}else{c=a}}var sim_references={};function compute_references(){for(var a in simhw_sim_signals()){sim_references[a]=simhw_sim_signal(a);simhw_sim_signal(a).changed=false}for(a in simhw_sim_states()){sim_references[a]=simhw_sim_state(a);simhw_sim_state(a).changed=false}}function get_reference(a){return sim_references[a]}function show_verbal(c){var a=simhw_sim_state(c);if(typeof a=="undefined"){a=simhw_sim_signal(c)}if("undefined"==typeof a){return c}if("undefined"==typeof a.verbal){return c}return a.verbal}function show_value(a){if(isNaN(a)){return"NaN"}return"0x"+(a>>>0).toString(16)}function check_behavior(){if(0==simhw_sim_signals().length){alert("ALERT: empty signals!!!")}if(0==simhw_sim_states().length){alert("ALERT: empty states!!!")}for(var h in simhw_sim_signals()){for(var g in simhw_sim_signal(h).behavior){var a=simhw_sim_signal(h).behavior[g].split(";");for(var f=0;f<a.length;f++){var d=a[f].trim();var c=d.split(" ");if(""==d){continue}if(typeof(simhw_syntax_behavior(c[0]))=="undefined"){alert("ALERT: Unknown operation -> "+c[0]+" ("+d+")");return}if(c.length!=simhw_syntax_behavior(c[0]).nparameters){alert("ALERT: Behavior has an incorrect number of elements --> "+d+"/"+simhw_syntax_behavior(c[0]).nparameters);return}for(var e=1;e<c.length;e++){var l=c[e].split("/");var k=simhw_syntax_behavior(c[0]).types[e-1];if(("E"==k)&&(typeof simhw_sim_state(l[0])=="undefined")){alert("ALERT: Behavior has an undefined reference to a object state -> '"+d);return}else{if(("S"==k)&&(typeof simhw_sim_signal(l[0])=="undefined")){alert("ALERT: Behavior has an undefined reference to a signal -> '"+d);return}else{if(("X"==k)&&(typeof simhw_sim_state(l[0])=="undefined")&&(typeof simhw_sim_signal(l[0])=="undefined")){alert("ALERT: Behavior has an undefined reference to a object state OR signal -> '"+d);return}}}}}}}}var jit_behaviors=false;var jit_verbals=false;var jit_fire_dep=null;var jit_fire_order=null;var jit_dep_network=null;var jit_fire_ndep=null;function firedep_to_fireorder(c){var a=false;jit_fire_order=[];jit_fire_ndep=[];for(var e in simhw_sim_signals()){if(typeof c[e]=="undefined"){jit_fire_order.push(e);continue}ndep=0;a=false;for(var d in c[e]){ndep++;if(c[e][d]==simhw_sim_signal(d).behavior.length){a=true}}jit_fire_ndep[e]=ndep;if(a==false){jit_fire_order.push(e)}}}function compile_behaviors(){var jit_bes="";jit_fire_dep={};var sig_obj=null;var expr_obj=null;for(var sig in simhw_sim_signals()){jit_bes+="simhw_sim_signal('"+sig+"').behavior_fn = new Array();\n";for(var val in simhw_sim_signal(sig).behavior){var input_behavior=simhw_sim_signal(sig).behavior[val];var jit_be="";var s_exprs=input_behavior.split(";");for(var i=0;i<s_exprs.length;i++){s_exprs[i]=s_exprs[i].trim();if(""==s_exprs[i]){continue}var s_expr=s_exprs[i].split(" ");if(s_expr[0]!="NOP"){jit_be+="simhw_syntax_behavior('"+s_expr[0]+"').operation("+JSON.stringify(s_expr)+");\t"}if("FIRE"==s_expr[0]){sig_obj=simhw_sim_signal(sig);expr_obj=simhw_sim_signal(s_expr[1]);if(typeof expr_obj=="undefined"){alert("ERROR: for signal '"+sig+"', unknow behavior '"+s_exprs[i]+"'")}else{if(sig_obj.type==expr_obj.type){if(typeof jit_fire_dep[s_expr[1]]=="undefined"){jit_fire_dep[s_expr[1]]={}}if(typeof jit_fire_dep[s_expr[1]][sig]=="undefined"){jit_fire_dep[s_expr[1]][sig]=0}jit_fire_dep[s_expr[1]][sig]++}}}}jit_bes+="simhw_sim_signal('"+sig+"').behavior_fn["+val+"] = \t function() {"+jit_be+"};\n"}}eval(jit_bes);jit_behaviors=true}function compute_behavior(d){var e=d.split(";");for(var c=0;c<e.length;c++){e[c]=e[c].trim();if(""==e[c]){continue}var a=e[c].split(" ");simhw_syntax_behavior(a[0]).operation(a)}}function compute_general_behavior(a){if(jit_behaviors){simhw_syntax_behavior(a).operation()}else{compute_behavior(a)}}function compute_signal_behavior(c,a){if(jit_behaviors){simhw_sim_signal(c).behavior_fn[a]()}else{compute_behavior(simhw_sim_signal(c).behavior[a])}}function compile_verbals(){var jit_vbl="";for(var sig in simhw_sim_signals()){jit_vbl+="simhw_sim_signal('"+sig+"').verbal_fn = new Array();\n";for(var val in simhw_sim_signal(sig).behavior){var input_behavior=simhw_sim_signal(sig).behavior[val];var jit_be=' var r = ""; ';var s_exprs=input_behavior.split(";");for(var i=0;i<s_exprs.length;i++){s_exprs[i]=s_exprs[i].trim();if(""==s_exprs[i]){continue}var s_expr=s_exprs[i].split(" ");jit_be+=" r = r + simhw_syntax_behavior('"+s_expr[0]+"').verbal("+JSON.stringify(s_expr)+");\t"}jit_vbl+="simhw_sim_signal('"+sig+"').verbal_fn["+val+"] = \t function() {"+jit_be+" return r; };\n"}}eval(jit_vbl);jit_verbals=true}function compute_verbal(d){var e="";var f=d.split(";");for(var c=0;c<f.length;c++){f[c]=f[c].trim();if(""==f[c]){continue}var a=f[c].split(" ");e=e+simhw_syntax_behavior(a[0]).verbal(a)}return e}function compute_signal_verbals(e,a){var d="";var f=null;f=simhw_sim_signal(e);if(typeof f.behavior=="undefined"){return d}var c=f.behavior.length-1;if(a<c){c=a}if((typeof f.verbal!="undefined")&&(typeof f.verbal[c]!="undefined")){return f.verbal[c]}if(jit_behaviors){d=f.verbal_fn[c]()}else{d=compute_verbal(f.behavior[c])}return d}var ep_components={};var ep_states={};var ep_events={};var ep_signals={};var ep_behaviors={};var ep_internal_states={};var ep_ctrl_states={};var ep_def={sim_name:"Elemental Processor",sim_short_name:"ep",sim_img_processor:"examples/hardware/ep/images/processor.svg",sim_img_controlunit:"examples/hardware/ep/images/controlunit.svg",sim_img_cpu:"examples/hardware/ep/images/cpu.svg",components:ep_components,states:ep_states,signals:ep_signals,behaviors:ep_behaviors,events:ep_events,internal_states:ep_internal_states,ctrl_states:ep_ctrl_states};simhw_add(ep_def);ep_behaviors.PRINT_S={nparameters:2,types:["S"],operation:function(a){console.log(a[1]+": 0x"+ep_signals[a[1]].value.toString(16))},verbal:function(a){return"Print value of signal "+a[1]+": 0x"+ep_signals[a[1]].value.toString(16)+". "}};ep_behaviors.PRINT_E={nparameters:2,types:["E"],operation:function(a){console.log(a[1]+": 0x"+ep_states[a[1]].value.toString(16))},verbal:function(a){return"Print value of state "+a[1]+": 0x"+ep_states[a[1]].value.toString(16)+". "}};ep_components.CPU={name:"CPU",version:"1",abilities:["CPU"],details_name:["REGISTER_FILE","CONTROL_MEMORY","CLOCK","CPU_STATS"],details_fire:[["svg_p:text3029","svg_p:text3031"],["svg_cu:text3010"],["svg_p:text3459-7","svg_cu:text4138","svg_cu:text4138-7"],["svg_p:text3495"]],write_state:function(d){if(typeof d.CPU=="undefined"){d.CPU={}}var a=["PC","SR"];var e=0;for(var c=0;c<ep_states.BR.length;c++){e=parseInt(ep_states.BR[c].value);if(e!=0){d.CPU["R"+c]={type:"register",default_value:0,id:"R"+c,op:"=",value:"0x"+e.toString(16)}}}for(c=0;c<a.length;c++){e=parseInt(ep_states["REG_"+a[c]].value);if(e!=0){d.CPU[a[c]]={type:"register",default_value:0,id:a[c],op:"=",value:"0x"+e.toString(16)}}}return d},read_state:function(d,a){if(typeof d.CPU=="undefined"){d.CPU={}}var c=a.id.toUpperCase().trim();var e=parseInt(a.value).toString(16);if("REGISTER"==a.type.toUpperCase().trim()){d.CPU[c]={type:"register",default_value:0,id:c,op:a.condition,value:"0x"+e};return true}return false},get_state:function(c){var d=c.toUpperCase().trim();if(typeof ep_states["REG_"+d]!="undefined"){return"0x"+get_value(ep_states["REG_"+d]).toString(16)}d=d.replace("R","");var a=parseInt(d);if(typeof ep_states.BR[a]!="undefined"){return"0x"+get_value(ep_states.BR[a]).toString(16)}return null},get_value:function(a){if(Number.isInteger(a)){index=a}else{index=parseInt(a)}if(isNaN(index)){return(get_value(simhw_sim_state(a))>>>0)}return(get_value(simhw_sim_states().BR[index])>>>0)},set_value:function(c,d){var a=simhw_sim_ctrlStates_get().pc.state;if(Number.isInteger(c)){index=c}else{index=parseInt(c)}if(isNaN(index)){set_value(simhw_sim_state(c),d);if(a===c){show_asmdbg_pc()}return d}return set_value(simhw_sim_states().BR[index],d)}};ep_ctrl_states.pc={name:"PC",state:"REG_PC"};ep_ctrl_states.sp={name:"SP",state:"BR.29"};ep_ctrl_states.ir={name:"IR",state:"REG_IR",default_eltos:{co:{begin:0,end:5,length:6},cop:{begin:28,end:31,length:4}}};ep_ctrl_states.mpc={name:"mPC",state:"REG_MICROADDR"};ep_internal_states.MC={};ep_internal_states.MC_dashboard={};ep_internal_states.ROM={};ep_internal_states.FIRMWARE={};ep_internal_states.io_hash={};ep_internal_states.fire_stack=[];ep_internal_states.tri_state_names=["T1","T2","T3","T4","T5","T6","T7","T8","T9","T10","T11"];ep_internal_states.fire_visible={databus:false,internalbus:false};ep_internal_states.filter_states=["REG_IR_DECO,col-11","REG_IR,col-auto","REG_PC,col-auto","REG_MAR,col-auto","REG_MBR,col-auto","REG_RT1,col-auto","REG_RT2,col-auto","REG_RT3,col-auto","REG_SR,col-auto","REG_MICROADDR,col-auto"];ep_internal_states.filter_signals=["A0,0","B,0","C,0","SELA,5","SELB,5","SELC,2","SELCOP,0","MR,0","MC,0","C0,0","C1,0","C2,0","C3,0","C4,0","C5,0","C6,0","C7,0","T1,0","T2,0","T3,0","T4,0","T5,0","T6,0","T7,0","T8,0","T9,0","T10,0","T11,0","M1,0","M2,0","M7,0","MA,0","MB,0","SELP,0","LC,0","SE,0","SIZE,0","OFFSET,0","BW,0","R,0","W,0","TA,0","TD,0","IOR,0","IOW,0","TEST_I,0","TEST_U,0"];ep_internal_states.alu_flags={flag_n:0,flag_z:0,flag_v:0,flag_c:0};ep_states.BR=[];ep_states.BR[0]={name:"R0",verbal:"Register 0",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[1]={name:"R1",verbal:"Register 1",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[2]={name:"R2",verbal:"Register 2",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[3]={name:"R3",verbal:"Register 3",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[4]={name:"R4",verbal:"Register 4",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[5]={name:"R5",verbal:"Register 5",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[6]={name:"R6",verbal:"Register 6",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[7]={name:"R7",verbal:"Register 7",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[8]={name:"R8",verbal:"Register 8",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[9]={name:"R9",verbal:"Register 9",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[10]={name:"R10",verbal:"Register 10",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[11]={name:"R11",verbal:"Register 11",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[12]={name:"R12",verbal:"Register 12",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[13]={name:"R13",verbal:"Register 13",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[14]={name:"R14",verbal:"Register 14",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[15]={name:"R15",verbal:"Register 15",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[16]={name:"R16",verbal:"Register 16",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[17]={name:"R17",verbal:"Register 17",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[18]={name:"R18",verbal:"Register 18",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[19]={name:"R19",verbal:"Register 19",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[20]={name:"R20",verbal:"Register 20",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[21]={name:"R21",verbal:"Register 21",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[22]={name:"R22",verbal:"Register 22",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[23]={name:"R23",verbal:"Register 23",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[24]={name:"R24",verbal:"Register 24",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[25]={name:"R25",verbal:"Register 25",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[26]={name:"R26",verbal:"Register 26",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[27]={name:"R27",verbal:"Register 27",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[28]={name:"R28",verbal:"Register 28",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[29]={name:"R29",verbal:"Register 29",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[30]={name:"R30",verbal:"Register 30",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BR[31]={name:"R31",verbal:"Register 31",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_PC={name:"PC",verbal:"Program Counter Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_MAR={name:"MAR",verbal:"Memory Address Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_MBR={name:"MBR",verbal:"Memory Data Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_IR={name:"IR",verbal:"Instruction Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_RT1={name:"RT1",verbal:"Temporal 1 Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_RT2={name:"RT2",verbal:"Temporal 2 Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_RT3={name:"RT3",verbal:"Temporal 3 Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.REG_SR={name:"SR",verbal:"State Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BUS_IB={name:"I_BUS",verbal:"Internal Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BUS_AB={name:"A_BUS",verbal:"Address Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BUS_CB={name:"C_BUS",verbal:"Control Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BUS_DB={name:"D_BUS",verbal:"Data Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.C2_T2={name:"C2_T2",verbal:"Output of PC",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.RA_T9={name:"RA_T9",verbal:"Input of T9 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.RB_T10={name:"RB_T10",verbal:"Input of T10 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.SELEC_T3={name:"SELEC_T3",verbal:"Input of T3 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.SELP_M7={name:"SELP_M7",verbal:"Output of MUX SelP",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.ALU_C6={name:"ALU_C6",verbal:"Input of Temporal 3 Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.MA_ALU={name:"MA_ALU",verbal:"Input ALU via MA",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.MB_ALU={name:"MB_ALU",verbal:"Input ALU via MB",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.FLAG_C={name:"FLAG_C",verbal:"Flag Carry",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.FLAG_V={name:"FLAG_V",verbal:"Flag Overflow",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.FLAG_N={name:"FLAG_N",verbal:"Flag Negative",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.FLAG_Z={name:"FLAG_Z",verbal:"Flag Zero",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.FLAG_I={name:"FLAG_I",verbal:"Flag Interruption",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.FLAG_U={name:"FLAG_U",verbal:"Flag User",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.REG_MICROADDR={name:"µADDR",verbal:"Microaddress Register",visible:true,nbits:"12",value:0,default_value:0,draw_data:["svg_cu:text4667"]};ep_states.REG_MICROINS={name:"µINS",verbal:"Microinstruction Register",visible:true,nbits:"77",value:{},default_value:{},draw_data:[]};ep_states.FETCH={name:"FETCH",verbal:"Input Fetch ",visible:false,nbits:"12",value:0,default_value:0,draw_data:[]};ep_states.ROM_MUXA={name:"ROM_MUXA",verbal:"Input ROM ",visible:false,nbits:"12",value:0,default_value:0,draw_data:[]};ep_states.SUM_ONE={name:"SUM_ONE",verbal:"Input next microinstruction ",visible:false,nbits:"12",value:1,default_value:1,draw_data:[]};ep_states.MUXA_MICROADDR={name:"MUXA_MICROADDR",verbal:"Input microaddress from microinstruction",visible:false,nbits:"12",value:0,default_value:0,draw_data:[]};ep_states.MUXC_MUXB={name:"MUXC_MUXB",verbal:"Output of MUX C",visible:false,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.INEX={name:"INEX",verbal:"Illegal Instruction Exception",visible:false,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.BS_M1={name:"BS_M1",verbal:"from Memory",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.BS_TD={name:"BS_TD",verbal:"Memory",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.INTV={name:"INTV",verbal:"Interruption Vector",visible:false,nbits:"8",value:0,default_value:0,draw_data:[]};ep_states.M2_C2={name:"M2_C2",verbal:"Input of Program Counter",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.M1_C1={name:"M1_C1",verbal:"Input of Memory Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.M7_C7={name:"M7_C7",verbal:"Input of State Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.VAL_ZERO={name:"VAL_ZERO",verbal:"Wired Zero",visible:false,nbits:"1",value:0,default_value:0,draw_data:[]};ep_states.VAL_ONE={name:"VAL_ONE",verbal:"Wired One",visible:false,nbits:"32",value:1,default_value:1,draw_data:[]};ep_states.VAL_FOUR={name:"VAL_FOUR",verbal:"Wired Four",visible:false,nbits:"32",value:4,default_value:4,draw_data:[]};ep_states.REG_IR_DECO={name:"IR_DECO",verbal:"Instruction Decoded",visible:true,nbits:"0",value:0,default_value:0,draw_data:[]};ep_states.DECO_INS={name:"DECO_INS",verbal:"Instruction decoded in binary",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.CLK={name:"CLK",verbal:"Clock",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_signals.C={name:"C",visible:true,type:"L",value:0,default_value:0,nbits:"4",behavior:["MV MUXC_MUXB VAL_ZERO; FIRE B","MBIT MUXC_MUXB INT 0 1; FIRE B","MBIT MUXC_MUXB IORDY 0 1; FIRE B","MBIT MUXC_MUXB MRDY 0 1; FIRE B","MBIT MUXC_MUXB REG_SR 0 1; FIRE B","MBIT MUXC_MUXB REG_SR 1 1; FIRE B","MBIT MUXC_MUXB REG_SR 28 1; FIRE B","MBIT MUXC_MUXB REG_SR 29 1; FIRE B","MBIT MUXC_MUXB REG_SR 30 1; FIRE B","MBIT MUXC_MUXB REG_SR 31 1; FIRE B","MV MUXC_MUXB INEX; FIRE B"],fire_name:["svg_cu:text3410"],draw_data:[["svg_cu:path3108"],["svg_cu:path3062"],["svg_cu:path3060"],["svg_cu:path3136"],["svg_cu:path3482"],["svg_cu:path3480"],["svg_cu:path3488"],["svg_cu:path3486"],["svg_cu:path3484"],["svg_cu:path3484-9"],["svg_cu:path3108-3","svg_cu:path3260-3-8-6","svg_cu:path3260-3-8","svg_cu:path3260-3"]],draw_name:[["svg_cu:path3496","svg_cu:path3414","svg_cu:path3194-08"]]};ep_signals.B={name:"B",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV A1 MUXC_MUXB; FIRE A1","NOT_ES A1 MUXC_MUXB; FIRE A1"],depends_on:["CLK"],fire_name:["svg_cu:text3408"],draw_data:[["svg_cu:path3094-7"],["svg_cu:path3392","svg_cu:path3372","svg_cu:path3390","svg_cu:path3384","svg_cu:path3108-1","svg_cu:path3100-8-7"]],draw_name:[[],["svg_cu:path3194-0","svg_cu:path3138-8","svg_cu:path3498-6"]]};ep_signals.A0={name:"A0",visible:false,type:"L",value:0,default_value:0,nbits:"1",behavior:["SBIT A0A1 A0 1; FIRE A0A1","SBIT A0A1 A0 1; FIRE A0A1"],depends_on:["CLK"],fire_name:["svg_cu:text3406"],draw_data:[["svg_cu:path3096"],["svg_cu:path3096"]],draw_name:[[],["svg_cu:path3138-8-1","svg_cu:path3098-2","svg_cu:path3124-2-5"]]};ep_signals.A1={name:"A1",visible:false,type:"L",value:0,default_value:0,nbits:"1",behavior:["SBIT A0A1 A1 0; FIRE A0A1","SBIT A0A1 A1 0; FIRE A0A1"],depends_on:["CLK"],fire_name:[],draw_data:[["svg_cu:path3094"],["svg_cu:path3094"]],draw_name:[[]]};ep_signals.A0A1={name:"A0A1",visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["ADD MUXA_MICROADDR REG_MICROADDR VAL_ONE","CP_FIELD MUXA_MICROADDR REG_MICROINS/MADDR","MV MUXA_MICROADDR ROM_MUXA","MV MUXA_MICROADDR FETCH"],depends_on:["CLK"],fire_name:[],draw_data:[["svg_cu:path3102","svg_cu:path3100","svg_cu:path3098","svg_cu:path3100-9","svg_cu:path3088"],["svg_cu:path3104","svg_cu:path3134","svg_cu:path3500","svg_cu:path3416"],["svg_cu:path3504","svg_cu:path3100-8","svg_cu:path3234-9"],["svg_cu:path3124"]],draw_name:[[]]};ep_signals.C0={name:"C0",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_MAR BUS_IB"],fire_name:["svg_p:text3077"],draw_data:[["svg_p:path3081"]],draw_name:[["svg_p:path3075"]]};ep_signals.C1={name:"C1",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_MBR M1_C1"],fire_name:["svg_p:text3079"],draw_data:[["svg_p:path3055"]],draw_name:[["svg_p:path3073"]]};ep_signals.C2={name:"C2",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_PC M2_C2; UPDATEDPC"],fire_name:["svg_p:text3179"],draw_data:[["svg_p:path3485"]],draw_name:[["svg_p:path3177"]]};ep_signals.C3={name:"C3",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_IR BUS_IB; DECO; FIRE_IFSET C 10"],fire_name:["svg_p:text3439"],draw_data:[["svg_p:path3339"]],draw_name:[["svg_p:path3337"]]};ep_signals.C4={name:"C4",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_RT1 BUS_IB"],fire_name:["svg_p:text3441"],draw_data:[["svg_p:path3263"]],draw_name:[["svg_p:path3255"]]};ep_signals.C5={name:"C5",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_RT2 BUS_IB"],fire_name:["svg_p:text3443"],draw_data:[["svg_p:path3277"]],draw_name:[["svg_p:path3269"]]};ep_signals.C6={name:"C6",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_RT3 ALU_C6"],fire_name:["svg_p:text3445"],draw_data:[["svg_p:path3325","svg_p:path3323"]],draw_name:[["svg_p:path3245"]]};ep_signals.C7={name:"C7",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","LOAD REG_SR M7_C7; FIRE C"],fire_name:["svg_p:text3655"],draw_data:[["svg_p:path3651-9"]],draw_name:[["svg_p:path3681"]]};ep_signals.TA={name:"TA",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_AB REG_MAR; MOVE_BITSE A1A0 0 2 BUS_AB 0; FIRE_IFCHANGED A1A0 A1A0"],fire_name:["svg_p:text3091"],draw_data:[["svg_p:path3089","svg_p:path3597","svg_p:path3513","svg_p:path3601","svg_p:path3601-2","svg_p:path3187","svg_p:path3087","svg_p:path2995","svg_p:path3535"]],draw_name:[["svg_p:path3085"]]};ep_signals.TD={name:"TD",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_DB BS_TD; MOVE_BITSE A1A0 0 2 BUS_AB 0; FIRE_IFCHANGED A1A0 A1A0"],fire_name:["svg_p:text3103"],draw_data:[["svg_p:path3101","svg_p:path3587","svg_p:path3515","svg_p:path3071","svg_p:path3419","svg_p:path3099","svg_p:path3097","svg_p:path3559-5","svg_p:path3419-1-0","svg_p:path3583","svg_p:path3419-1","svg_p:path3491","svg_p:path3641","svg_p:path3541"]],draw_name:[["svg_p:path3095"]]};ep_signals.T1={name:"T1",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_MBR; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3105"],draw_data:[["svg_p:path3071","svg_p:path3069","svg_p:path3049","svg_p:path3063-9","svg_p:path3071","svg_p:path3071"]],draw_name:[["svg_p:path3067"]]};ep_signals.T2={name:"T2",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_PC; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3449"],draw_data:[["svg_p:path3199","svg_p:path3201","svg_p:path3049"]],draw_name:[["svg_p:path3329"]]};ep_signals.T3={name:"T3",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB SELEC_T3; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3451"],draw_data:[["svg_p:path3349","svg_p:path3931","svg_p:path3345","svg_p:path3049"]],draw_name:[["svg_p:path3351"]]};ep_signals.T4={name:"T4",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_RT1; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3453"],draw_data:[["svg_p:path3261","svg_p:path3259","svg_p:path3049"]],draw_name:[["svg_p:path3305"]]};ep_signals.T5={name:"T5",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_RT2; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3455"],draw_data:[["svg_p:path3275","svg_p:path3273","svg_p:path3049"]],draw_name:[["svg_p:path3307"]]};ep_signals.T6={name:"T6",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB ALU_C6; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3457"],draw_data:[["svg_p:path3589","svg_p:path3317","svg_p:path3163-2","svg_p:path3049"]],draw_name:[["svg_p:path3319"]]};ep_signals.T7={name:"T7",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_RT3; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3459"],draw_data:[["svg_p:path3327","svg_p:path3311","svg_p:path3049"]],draw_name:[["svg_p:path3313"]]};ep_signals.T8={name:"T8",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_SR; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3657"],draw_data:[["svg_p:path3651","svg_p:path3647","svg_p:path3049"]],draw_name:[["svg_p:path3649"]]};ep_signals.T9={name:"T9",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB RA_T9; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3147"],draw_data:[["svg_p:path3143","svg_p:path3139","svg_p:path3049","svg_p:path3143-9"]],draw_name:[["svg_p:path3133"]]};ep_signals.T10={name:"T10",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB RB_T10; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3149"],draw_data:[["svg_p:path3145","svg_p:path3141","svg_p:path3049","svg_p:path3145-5"]],draw_name:[["svg_p:path3137"]]};ep_signals.T11={name:"T11",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","CP_FIELD BUS_IB REG_MICROINS/EXCODE; FIRE M7; FIRE M2; FIRE M1"],fire_name:["svg_p:text3147-5","svg_cu:tspan4426"],draw_data:[["svg_p:path3145","svg_p:path3081-3","svg_p:path3139-7","svg_p:path3049","svg_cu:path3081-3","svg_cu:path3139-7","svg_cu:path3502"]],draw_name:[["svg_p:path3133-6","svg_cu:path3133-6"]]};ep_signals.M1={name:"M1",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV M1_C1 BUS_IB","MV M1_C1 BS_M1"],depends_on:["C1"],fire_name:["svg_p:text3469"],draw_data:[["svg_p:path3063","svg_p:path3061","svg_p:path3059"],["svg_p:path3057","svg_p:path3641","svg_p:path3419","svg_p:path3583"]],draw_name:[[],["svg_p:path3447"]]};ep_signals.M2={name:"M2",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV M2_C2 BUS_IB","PLUS4 M2_C2 REG_PC"],depends_on:["C2"],fire_name:["svg_p:text3471"],draw_data:[["svg_p:path3217","svg_p:path3215","svg_p:path3213","svg_p:path3213-9"],["svg_p:path3211","svg_p:path3209","svg_p:path3193","svg_p:path3207","svg_p:path3197","svg_p:path3201"]],draw_name:[[],["svg_p:path3467","svg_p:path3467"]]};ep_signals.M7={name:"M7",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV M7_C7 BUS_IB","MV M7_C7 SELP_M7"],depends_on:["C7"],fire_name:["svg_p:text3673"],draw_data:[["svg_p:path3691","svg_p:path3693","svg_p:path3659"],["svg_p:path3695"]],draw_name:[[],["svg_p:path3667"]]};ep_signals.MA={name:"MA",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV MA_ALU RA_T9; FIRE COP","MV MA_ALU REG_RT1; FIRE COP"],depends_on:["SELA","SELB"],fire_name:["svg_p:text3463"],draw_data:[["svg_p:path3249","svg_p:path3161","svg_p:path3165"],["svg_p:path3279"]],draw_name:[[],["svg_p:path3423"]]};ep_signals.MB={name:"MB",visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["MV MB_ALU RB_T10; FIRE COP","MV MB_ALU REG_RT2; FIRE COP","MV MB_ALU VAL_FOUR; FIRE COP","MV MB_ALU VAL_ONE; FIRE COP"],depends_on:["SELA","SELB"],fire_name:["svg_p:text3465"],draw_data:[["svg_p:path3281","svg_p:path3171","svg_p:path3169"],["svg_p:path3283"],["svg_p:path3295","svg_p:path3293"],["svg_p:path3297","svg_p:path3299"]],draw_name:[[],["svg_p:path3425","svg_p:path3427"]]};ep_signals.COP={name:"COP",visible:true,type:"L",value:0,default_value:0,nbits:"4",forbidden:true,behavior:["NOP_ALU; UPDATE_NZVC","AND ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","OR ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","NOT ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","XOR ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","SRL ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","SRA ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","SL ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","RR ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","RL ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","ADD ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","SUB ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","MUL ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","DIV ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","MOD ALU_C6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3","LUI ALU_C6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET SELP 3"],depends_on:["SELCOP"],fire_name:["svg_p:text3303"],draw_data:[["svg_p:path3237","svg_p:path3239","svg_p:path3261-8","svg_p:path3321","svg_p:path3901-6","svg_p:path3317-9"]],draw_name:[["svg_p:path3009","svg_p:path3301"]]};ep_signals.SELP={name:"SELP",visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["NOP","MV SELP_M7 REG_SR; SBIT SELP_M7 FLAG_U 0; FIRE M7","MV SELP_M7 REG_SR; SBIT SELP_M7 FLAG_I 1; FIRE M7","MV SELP_M7 REG_SR; SBIT SELP_M7 FLAG_C 31; SBIT SELP_M7 FLAG_V 30; SBIT SELP_M7 FLAG_N 29; SBIT SELP_M7 FLAG_Z 28; FIRE M7"],fire_name:["svg_p:text3703"],draw_data:[[],["svg_p:path3643"],["svg_p:path3705"],["svg_p:path3675","svg_p:path3331"]],draw_name:[[],["svg_p:path3697"]]};ep_signals.SELA={name:"SELA",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["FIRE MR_RA"],depends_on:["RA"],fire_name:["svg_cu:text3164"],draw_data:[[]],draw_name:[[]]};ep_signals.SELB={name:"SELB",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["FIRE MR_RB"],depends_on:["RB"],fire_name:["svg_cu:text3168"],draw_data:[[]],draw_name:[[]]};ep_signals.SELC={name:"SELC",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["FIRE MR_RC"],depends_on:["RC"],fire_name:["svg_cu:text3172"],draw_data:[[]],draw_name:[[]]};ep_signals.SELCOP={name:"SELCOP",visible:true,type:"L",value:0,default_value:0,nbits:"4",behavior:["FIRE MC"],depends_on:["COP"],fire_name:["svg_cu:text3312"],draw_data:[[]],draw_name:[[]]};ep_signals.EXCODE={name:"EXCODE",visible:true,type:"L",value:0,default_value:0,nbits:"4",behavior:["FIRE T11"],fire_name:["svg_cu:text3312-6"],draw_data:[[]],draw_name:[[]]};ep_signals.RA={name:"RA",visible:true,type:"L",value:0,default_value:0,nbits:"5",forbidden:true,behavior:["GET RA_T9 BR RA; FIRE_IFSET T9 1; FIRE_IFSET MA 0"],depends_on:["SELA"],fire_name:["svg_p:text3107"],draw_data:[[]],draw_name:[["svg_p:path3109"]]};ep_signals.RB={name:"RB",visible:true,type:"L",value:0,default_value:0,nbits:"5",forbidden:true,behavior:["GET RB_T10 BR RB; FIRE_IFSET T10 1; FIRE_IFSET MB 0"],depends_on:["SELB"],fire_name:["svg_p:text3123"],draw_data:[[]],draw_name:[["svg_p:path3113"]]};ep_signals.RC={name:"RC",visible:true,type:"L",value:0,default_value:0,nbits:"5",forbidden:true,behavior:["FIRE LC"],depends_on:["SELC"],fire_name:["svg_p:text3125"],draw_data:[[]],draw_name:[["svg_p:path3117"]]};ep_signals.LC={name:"LC",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","SET BR RC BUS_IB"],fire_name:["svg_p:text3127"],draw_data:[["svg_p:path3153","svg_p:path3151","svg_p:path3129"]],draw_name:[["svg_p:path3121"]]};ep_signals.SE={name:"SE",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBITS SELEC_T3 0 REG_IR OFFSET SIZE 0 SE; FIRE T3; MOVE_BITS SBWA 4 1 SE; FIRE_IFCHANGED SBWA SE","MBITS SELEC_T3 0 REG_IR OFFSET SIZE 0 SE; FIRE T3; MOVE_BITS SBWA 4 1 SE; FIRE_IFCHANGED SBWA SE"],depends_on:["T3"],fire_name:["svg_p:text3593","svg_p:text3431"],draw_data:[[]],draw_name:[["svg_p:path3591","svg_p:path3447-7-7"]]};ep_signals.SIZE={name:"SIZE",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["MBITS SELEC_T3 0 REG_IR OFFSET SIZE 0 SE; FIRE T3"],depends_on:["T3"],fire_name:["svg_p:text3363"],draw_data:[[]],draw_name:[["svg_p:path3355"]]};ep_signals.OFFSET={name:"OFFSET",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["MBITS SELEC_T3 0 REG_IR OFFSET SIZE 0 SE; FIRE T3"],depends_on:["T3"],fire_name:["svg_p:text3707"],draw_data:[[]],draw_name:[["svg_p:path3359"]]};ep_signals.MC={name:"MC",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBIT COP REG_IR 0 4; FIRE COP;","CP_FIELD COP REG_MICROINS/SELCOP; FIRE COP;"],depends_on:["SELCOP"],fire_name:["svg_cu:text3322","svg_cu:text3172-1-5"],draw_data:[["svg_cu:path3320","svg_cu:path3142"],["svg_cu:path3318","svg_cu:path3502-6","svg_cu:path3232-6"]],draw_name:[[],["svg_cu:path3306"]]};ep_signals.MR={name:"MR",verbal:["Copy from IR[SelA], from IR[SelB], and from IR[SelB] into RA, RB, and RC. ","Copy SelA, SelB, and SelB into RA, RB, and RC. "],visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV MR_RA MR; FIRE MR_RA; MV MR_RB MR; FIRE MR_RB; MV MR_RC MR; FIRE MR_RC;","MV MR_RA MR; FIRE MR_RA; MV MR_RB MR; FIRE MR_RB; MV MR_RC MR; FIRE MR_RC;"],depends_on:["SELA","SELB","SELC"],fire_name:["svg_cu:text3222","svg_cu:text3242","svg_cu:text3254","svg_cu:text3172-1"],draw_data:[["svg_cu:path3494","svg_cu:path3492","svg_cu:path3490","svg_cu:path3142b","svg_cu:path3188","svg_cu:path3190","svg_cu:path3192","svg_cu:path3194","svg_cu:path3276","svg_cu:path3290","svg_cu:path3260","svg_cu:path3196","svg_cu:path3278","svg_cu:path3232","svg_cu:path3292"],["svg_cu:path3270","svg_cu:path3282","svg_cu:path3300","svg_cu:path3258","svg_cu:path3260","svg_cu:path3258-4","svg_cu:path3278","svg_cu:path3196","svg_cu:path3294","svg_cu:path3292","svg_cu:path3288","svg_cu:path3232","svg_cu:path3280"]],draw_name:[[],["svg_cu:path3220","svg_cu:path3240","svg_cu:path3252"]]};ep_signals.MR_RA={name:"MR_RA",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBIT_SN RA REG_IR REG_MICROINS/SELA 5; FIRE RA;","CP_FIELD RA REG_MICROINS/SELA; FIRE RA;"],fire_name:[],draw_data:[[]],draw_name:[[]]};ep_signals.MR_RB={name:"MR_RB",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBIT_SN RB REG_IR REG_MICROINS/SELB 5; FIRE RB;","CP_FIELD RB REG_MICROINS/SELB; FIRE RB;"],fire_name:[],draw_data:[[]],draw_name:[[]]};ep_signals.MR_RC={name:"MR_RC",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBIT_SN RC REG_IR REG_MICROINS/SELC 5; FIRE RC;","CP_FIELD RC REG_MICROINS/SELC; FIRE RC;"],fire_name:[],draw_data:[[]],draw_name:[[]]};ep_signals.BW={name:"BW",verbal:["Select one byte (based on A1A0) from Word. ","Select two bytes (one Half Word based on A1A0) from Word. ","","Select the full Word. "],visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["MOVE_BITS BWA 2 2 BW; MOVE_BITS SBWA 2 2 BW; FIRE_IFCHANGED BWA BW; FIRE SBWA; RESET_CHANGED BW","MOVE_BITS BWA 2 2 BW; MOVE_BITS SBWA 2 2 BW; FIRE_IFCHANGED BWA BW; FIRE SBWA; RESET_CHANGED BW","MOVE_BITS BWA 2 2 BW; MOVE_BITS SBWA 2 2 BW; FIRE_IFCHANGED BWA BW; FIRE SBWA; RESET_CHANGED BW","MOVE_BITS BWA 2 2 BW; MOVE_BITS SBWA 2 2 BW; FIRE_IFCHANGED BWA BW; FIRE SBWA; RESET_CHANGED BW"],fire_name:["svg_p:text3433"],draw_data:[["svg_p:path3061-2-6","svg_p:path3101-8","svg_p:path3535-8"]],draw_name:[[],[]]};ep_signals.A1A0={name:"A1A0",visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["MOVE_BITS BWA 0 2 A1A0; MOVE_BITS SBWA 0 2 A1A0; FIRE BWA; FIRE SBWA","MOVE_BITS BWA 0 2 A1A0; MOVE_BITS SBWA 0 2 A1A0; FIRE BWA; FIRE SBWA","MOVE_BITS BWA 0 2 A1A0; MOVE_BITS SBWA 0 2 A1A0; FIRE BWA; FIRE SBWA","MOVE_BITS BWA 0 2 A1A0; MOVE_BITS SBWA 0 2 A1A0; FIRE BWA; FIRE SBWA"],fire_name:["svg_p:text3603"],draw_data:[[],[]],draw_name:[[],[]]};ep_signals.BWA={name:"BWA",visible:false,type:"L",value:0,default_value:0,nbits:"4",behavior:["BSEL BS_TD 0 8 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 8 8 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 16 8 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 24 8 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 0 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 0 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 0 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 0 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 16 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 16 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 16 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","BSEL BS_TD 16 16 REG_MBR 0; FIRE TD; FIRE R; FIRE W","MV BS_TD REG_MBR; FIRE TD; FIRE R; FIRE W","MV BS_TD REG_MBR; FIRE TD; FIRE R; FIRE W","MV BS_TD REG_MBR; FIRE TD; FIRE R; FIRE W","MV BS_TD REG_MBR; FIRE TD; FIRE R; FIRE W"],fire_name:["svg_p:text3533-5"],draw_data:[[],[]],draw_name:[[],[]]};ep_signals.SBWA={name:"SBWA",visible:false,type:"L",value:0,default_value:0,nbits:"5",behavior:["BSEL BS_M1 0 8 BUS_DB 0; FIRE M1","BSEL BS_M1 0 8 BUS_DB 8; FIRE M1","BSEL BS_M1 0 8 BUS_DB 16; FIRE M1","BSEL BS_M1 0 8 BUS_DB 24; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","BSEL BS_M1 0 8 BUS_DB 0; EXT_SIG BS_M1 7; FIRE M1","BSEL BS_M1 0 8 BUS_DB 8; EXT_SIG BS_M1 7; FIRE M1","BSEL BS_M1 0 8 BUS_DB 16; EXT_SIG BS_M1 7; FIRE M1","BSEL BS_M1 0 8 BUS_DB 24; EXT_SIG BS_M1 7; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 0; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; EXT_SIG BS_M1 15; FIRE M1","BSEL BS_M1 0 16 BUS_DB 16; EXT_SIG BS_M1 15; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","MV BS_M1 BUS_DB; FIRE M1","MV BS_M1 BUS_DB; FIRE M1"],fire_name:[],draw_data:[[],[]],draw_name:[[],[]]};ep_signals.IOR={name:"IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MOVE_BITS KBD_IOR 0 1 IOR; MOVE_BITS SCR_IOR 0 1 IOR; FIRE KBD_IOR; FIRE SCR_IOR"],fire_name:["svg_p:text3715"],draw_data:[[],["svg_p:path3733","svg_p:path3491","svg_p:text3715"]],draw_name:[[],[]]};ep_signals.IOW={name:"IOW",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MOVE_BITS SCR_IOW 0 1 IOW; FIRE SCR_IOW; MOVE_BITS IO_IOW 0 1 IOW; FIRE IO_IOW"],fire_name:["svg_p:text3717"],draw_data:[[],["svg_p:path3735","svg_p:path3491","svg_p:text3717"]],draw_name:[[],[]]};ep_signals.I={name:"I",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV FLAG_I VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_I VAL_ONE; FIRE_IFSET SELP 2"],fire_name:[],draw_data:[[],[]],draw_name:[[],[]]};ep_signals.U={name:"U",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV FLAG_U VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_U VAL_ONE; FIRE_IFSET SELP 2"],fire_name:[],draw_data:[[],[]],draw_name:[[],[]]};ep_signals.TEST_C={name:"TEST_C",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_C VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_C VAL_ONE; FIRE_IFSET SELP 3"],depends_on:["SELCOP","COP"],fire_name:["svg_p:text3701-3"],draw_data:[["svg_p:text3701-3"]],draw_name:[[]]};ep_signals.TEST_V={name:"TEST_V",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_V VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_V VAL_ONE; FIRE_IFSET SELP 3"],depends_on:["SELCOP","COP"],fire_name:["svg_p:text3701-3-1"],draw_data:[["svg_p:text3701-3-1"]],draw_name:[[]]};ep_signals.TEST_N={name:"TEST_N",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_N VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_N VAL_ONE; FIRE_IFSET SELP 3"],depends_on:["SELCOP","COP"],fire_name:["svg_p:text3701-3-2"],draw_data:[["svg_p:text3701-3-2"]],draw_name:[[]]};ep_signals.TEST_Z={name:"TEST_Z",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_Z VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_Z VAL_ONE; FIRE_IFSET SELP 3"],depends_on:["SELCOP","COP"],fire_name:["svg_p:text3701-3-5"],draw_data:[["svg_p:text3701-3-5"]],draw_name:[[]]};ep_signals.TEST_I={name:"TEST_I",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV FLAG_I VAL_ZERO; FIRE_IFSET SELP 2","MV FLAG_I VAL_ONE; FIRE_IFSET SELP 2"],depends_on:["CLK"],fire_name:["svg_p:text3669"],draw_data:[["svg_p:text3669"]],draw_name:[[]]};ep_signals.TEST_U={name:"TEST_U",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV FLAG_U VAL_ZERO; FIRE_IFSET SELP 1","MV FLAG_U VAL_ONE; FIRE_IFSET SELP 1"],depends_on:["CLK"],fire_name:["svg_p:text3669-1"],draw_data:[["svg_p:text3669-1"]],draw_name:[[]]};ep_signals.TEST_INTV={name:"TEST_INTV",visible:true,type:"L",value:0,default_value:0,nbits:"8",forbidden:true,behavior:["MBIT INTV TEST_INTV 0 32"],depends_on:["INT"],fire_name:["svg_p:tspan4225"],draw_data:[["svg_p:path3749"]],draw_name:[[]]};ep_behaviors.NOP={nparameters:1,operation:function(a){},verbal:function(a){return""}};ep_behaviors.NOP_ALU={nparameters:1,operation:function(a){ep_internal_states.alu_flags.flag_n=0;ep_internal_states.alu_flags.flag_z=0;ep_internal_states.alu_flags.flag_c=0;ep_internal_states.alu_flags.flag_v=0},verbal:function(a){return""}};ep_behaviors.MV={nparameters:3,types:["X","X"],operation:function(a){sim_elto_org=get_reference(a[2]);sim_elto_dst=get_reference(a[1]);newval=get_value(sim_elto_org);set_value(sim_elto_dst,newval)},verbal:function(c){var d=get_reference(c[2]);var e=get_value(d);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy from "+show_verbal(c[2])+" to "+show_verbal(c[1])+" value "+show_value(e)+". "}return show_verbal(c[1])+" = "+show_verbal(c[2])+" ("+show_value(e)+"). "}};ep_behaviors.LOAD={nparameters:3,types:["X","X"],operation:function(a){sim_elto_org=get_reference(a[2]);sim_elto_dst=get_reference(a[1]);newval=get_value(sim_elto_org);set_value(sim_elto_dst,newval)},verbal:function(c){var d=get_reference(c[2]);var e=get_value(d);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Load from "+show_verbal(c[2])+" to "+show_verbal(c[1])+" value "+show_value(e)+". "}return show_verbal(c[1])+" = "+show_verbal(c[2])+" ("+show_value(e)+"). "}};ep_behaviors.CP_FIELD={nparameters:3,types:["X","X"],operation:function(a){r=a[2].split("/");sim_elto_org=get_reference(r[0]);newval=get_value(sim_elto_org);newval=newval[r[1]];if(typeof newval!="undefined"){sim_elto_dst=get_reference(a[1]);set_value(sim_elto_dst,newval)}},verbal:function(c){var e=c[2].split("/");var d=get_reference(e[0]);var f=get_value(d);f=f[e[1]];if(typeof f=="undefined"){return""}var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy from Field "+e[1]+" of "+show_verbal(e[0])+" to "+show_verbal(c[1])+" value "+show_value(f)+". "}return show_verbal(c[1])+" = "+show_verbal(e[0])+"."+e[1]+" ("+show_value(f)+"). "}};ep_behaviors.NOT_ES={nparameters:3,types:["S","E"],operation:function(a){set_value(ep_signals[a[1]],Math.abs(get_value(ep_states[a[2]])-1))},verbal:function(c){var d=Math.abs(get_value(ep_states[c[2]])-1);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Set "+show_verbal(c[1])+" with value "+show_value(d)+" (Logical NOT of "+c[2]+"). "}return show_verbal(c[1])+" = "+show_value(d)+" (Logical NOT "+c[2]+"). "}};ep_behaviors.GET={nparameters:4,types:["E","E","S"],operation:function(a){set_value(ep_states[a[1]],get_value(ep_states[a[2]][ep_signals[a[3]].value]))},verbal:function(c){var d=get_value(ep_states[c[2]][ep_signals[c[3]].value]);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Set "+show_verbal(c[1])+" with value "+show_value(d)+" (Register File "+c[3]+"). "}return show_verbal(c[1])+" = "+show_value(d)+" (Register File "+c[3]+"). "}};ep_behaviors.SET={nparameters:4,types:["E","S","E"],operation:function(a){set_value(ep_states[a[1]][ep_signals[a[2]].value],get_value(ep_states[a[3]]))},verbal:function(e){var f=get_value(ep_states[e[3]]);var d=ep_states[e[1]][ep_signals[e[2]].value];var c=d.name;if(typeof d.verbal!="undefined"){c=d.verbal}var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy to "+c+" the value "+show_value(f)+". "}return c+" = "+show_value(f)+". "}};ep_behaviors.AND={nparameters:4,types:["E","E","E"],operation:function(c){var a=get_value(ep_states[c[2]])&get_value(ep_states[c[3]]);set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=get_value(ep_states[d[2]])&get_value(ep_states[d[3]]);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU AND with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (AND). "}};ep_behaviors.OR={nparameters:4,types:["E","E","E"],operation:function(c){var a=get_value(ep_states[c[2]])|get_value(ep_states[c[3]]);set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=get_value(ep_states[d[2]])|get_value(ep_states[d[3]]);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU OR with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (OR). "}};ep_behaviors.NOT={nparameters:3,types:["E","E"],operation:function(c){var a=~(get_value(ep_states[c[2]]));set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=~(get_value(ep_states[d[2]]));var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU NOT with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (NOT). "}};ep_behaviors.XOR={nparameters:4,types:["E","E","E"],operation:function(c){var a=get_value(ep_states[c[2]])^get_value(ep_states[c[3]]);set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=get_value(ep_states[d[2]])^get_value(ep_states[d[3]]);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU XOR with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (XOR). "}};ep_behaviors.SRL={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(ep_states[c[2]]))>>>1;set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(ep_states[d[2]]))>>>1;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Shift Right Logical with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (SRL). "}};ep_behaviors.SRA={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(ep_states[c[2]]))>>1;set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(ep_states[d[2]]))>>1;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Shift Right Arithmetic with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (SRA). "}};ep_behaviors.SL={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(ep_states[c[2]]))<<1;set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=((a)>>>31)},verbal:function(d){var a=(get_value(ep_states[d[2]]))<<1;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Shift Left with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (SL). "}};ep_behaviors.RR={nparameters:3,types:["E","E"],operation:function(c){var a=((get_value(ep_states[c[2]]))>>>1)|(((get_value(ep_states[c[2]]))&1)<<31);set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=((get_value(ep_states[d[2]]))>>>1)|(((get_value(ep_states[d[2]]))&1)<<31);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Right Rotation with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (RR). "}};ep_behaviors.RL={nparameters:3,types:["E","E"],operation:function(c){var a=((get_value(ep_states[c[2]]))<<1)|(((get_value(ep_states[c[2]]))&2147483648)>>>31);set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=((get_value(ep_states[d[2]]))<<1)|(((get_value(ep_states[d[2]]))&2147483648)>>>31);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Left Rotation with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (LR). "}};ep_behaviors.ADD={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(ep_states[f[2]])<<0;var d=get_value(ep_states[f[3]])<<0;var c=e+d;set_value(ep_states[f[1]],c>>>0);ep_internal_states.alu_flags.flag_n=(c<0)?1:0;ep_internal_states.alu_flags.flag_z=(c==0)?1:0;ep_internal_states.alu_flags.flag_c=(e>>>31)&&(d>>>31);ep_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){ep_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){ep_internal_states.alu_flags.flag_v=1}},verbal:function(g){var f=get_value(ep_states[g[2]])<<0;var d=get_value(ep_states[g[3]])<<0;var c=f+d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU ADD with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (ADD). "}};ep_behaviors.SUB={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(ep_states[f[2]])<<0;var d=get_value(ep_states[f[3]])<<0;var c=e-d;set_value(ep_states[f[1]],c>>>0);ep_internal_states.alu_flags.flag_n=(c<0)?1:0;ep_internal_states.alu_flags.flag_z=(c==0)?1:0;ep_internal_states.alu_flags.flag_c=(e>>>31)&&(d>>>31);ep_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){ep_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){ep_internal_states.alu_flags.flag_v=1}},verbal:function(g){var f=get_value(ep_states[g[2]])<<0;var d=get_value(ep_states[g[3]])<<0;var c=f-d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU SUB with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (SUB). "}};ep_behaviors.MUL={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(ep_states[f[2]])<<0;var d=get_value(ep_states[f[3]])<<0;var c=e*d;set_value(ep_states[f[1]],c>>>0);ep_internal_states.alu_flags.flag_n=(c<0)?1:0;ep_internal_states.alu_flags.flag_z=(c==0)?1:0;ep_internal_states.alu_flags.flag_c=0;ep_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){ep_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){ep_internal_states.alu_flags.flag_v=1}},verbal:function(g){var f=get_value(ep_states[g[2]])<<0;var d=get_value(ep_states[g[3]])<<0;var c=f*d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU MUL with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (MUL). "}};ep_behaviors.DIV={nparameters:4,types:["E","E","E"],operation:function(f){var e=(get_value(ep_states[f[2]])<<0);var d=(get_value(ep_states[f[3]])<<0);if(0==d){set_value(ep_states[f[1]],0);ep_internal_states.alu_flags.flag_n=0;ep_internal_states.alu_flags.flag_z=1;ep_internal_states.alu_flags.flag_v=1;ep_internal_states.alu_flags.flag_c=0;return}var c=Math.floor(e/d);set_value(ep_states[f[1]],c);ep_internal_states.alu_flags.flag_n=(c<0)?1:0;ep_internal_states.alu_flags.flag_z=(c==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(g){var f=get_value(ep_states[g[2]])<<0;var d=get_value(ep_states[g[3]])<<0;if(0==d){return"ALU DIV zero by zero (oops!). "}var c=Math.floor(f/d);var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU DIV with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (DIV). "}};ep_behaviors.MOD={nparameters:4,types:["E","E","E"],operation:function(c){var a=(get_value(ep_states[c[2]])<<0)%(get_value(ep_states[c[3]])<<0);set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(g){var f=get_value(ep_states[g[2]])<<0;var d=get_value(ep_states[g[3]])<<0;if(0==d){return"ALU MOD zero by zero (oops!). "}var c=f%d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU MOD with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (MOD). "}};ep_behaviors.LUI={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(ep_states[c[2]]))<<16;set_value(ep_states[c[1]],a);ep_internal_states.alu_flags.flag_n=(a<0)?1:0;ep_internal_states.alu_flags.flag_z=(a==0)?1:0;ep_internal_states.alu_flags.flag_v=0;ep_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(ep_states[d[2]]))<<16;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Load Upper Immediate with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (LUI). "}};ep_behaviors.PLUS1={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(ep_states[e[2]])<<0;var c=d+1;set_value(ep_states[e[1]],c>>>0)},verbal:function(f){var e=get_value(ep_states[f[2]])<<0;var c=e+1;var d=get_cfg("verbal_verbose");if(d!=="math"){return"Copy to "+show_verbal(f[1])+" "+show_verbal(f[2])+" plus one with result "+show_value(c)+". "}return show_verbal(f[1])+" = "+show_verbal(f[2])+" + 1 ("+show_value(c)+"). "}};ep_behaviors.PLUS4={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(ep_states[e[2]])<<0;var c=d+4;set_value(ep_states[e[1]],c>>>0)},verbal:function(f){var e=get_value(ep_states[f[2]])<<0;var c=e+4;var d=get_cfg("verbal_verbose");if(d!=="math"){return"Copy to "+show_verbal(f[1])+" "+show_verbal(f[2])+" plus four with result "+show_value(c)+". "}return show_verbal(f[1])+" = "+show_verbal(f[2])+" + 4 ("+show_value(c)+"). "}};ep_behaviors.MBIT={nparameters:5,types:["X","X","I","I"],operation:function(a){var g=get_reference(a[1]);var f=get_reference(a[2]);var h=parseInt(a[3]);var d=parseInt(a[4]);var e=get_value(f).toString(2);var c="00000000000000000000000000000000".substring(0,32-e.length)+e;c=c.substr(31-(h+d-1),d);set_value(g,parseInt(c,2))},verbal:function(h){var e=get_reference(h[1]);var k=get_reference(h[2]);var c=parseInt(h[3]);var l=parseInt(h[4]);var g=get_value(k).toString(2);var f="00000000000000000000000000000000".substring(0,32-g.length)+g;f=f.substr(31-(c+l-1),l);var d=parseInt(f,2);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy from "+show_verbal(h[2])+" to "+show_verbal(h[1])+" value "+show_value(d)+" (copied "+l+" bits from bit "+c+"). "}return show_verbal(h[1])+" = "+show_verbal(h[2])+" ("+show_value(d)+", "+l+" bits from bit "+c+"). "}};ep_behaviors.MBIT_SN={nparameters:5,types:["S","E","E","I"],operation:function(c){var g=0;var f=c[3].split("/");if(1==f.length){g=get_value(ep_states[c[3]])}else{if(typeof ep_states[f[0]].value[f[1]]!="undefined"){g=ep_states[f[0]].value[f[1]]}else{if(typeof ep_signals[f[1]].default_value!="undefined"){g=ep_signals[f[1]].default_value}else{if(typeof ep_states[f[1]].default_value!="undefined"){g=ep_states[f[1]].default_value}else{alert("WARN: undefined state/field pair -> "+f[0]+"/"+f[1])}}}}var h=parseInt(c[4]);var e=get_value(ep_states[c[2]]).toString(2);var d="00000000000000000000000000000000".substring(0,32-e.length)+e;var a=d.substr(31-(g+h-1),h);set_value(ep_signals[c[1]],parseInt(a,2))},verbal:function(a){return""}};ep_behaviors.SBIT={nparameters:4,types:["X","X","I"],operation:function(a){sim_elto_org=get_reference(a[2]);sim_elto_dst=get_reference(a[1]);var c=(sim_elto_dst.value&~(1<<a[3]))|(sim_elto_org.value<<a[3]);set_value(sim_elto_dst,(c>>>0))},verbal:function(c){sim_elto_org=get_reference(c[2]);sim_elto_dst=get_reference(c[1]);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Set bit "+show_verbal(c[3])+" of "+show_verbal(c[1])+" to value "+sim_elto_org.value+". "}return show_verbal(c[1])+"."+show_verbal(c[3])+" = "+sim_elto_org.value+". "}};ep_behaviors.MBITS={nparameters:8,types:["E","I","E","S","S","I","S"],operation:function(c){var g=parseInt(ep_signals[c[4]].value);var e=parseInt(ep_signals[c[5]].value);var f=get_value(ep_states[c[3]]).toString(2);var d=("00000000000000000000000000000000".substring(0,32-f.length)+f);d=d.substr(31-(g+e-1),e);var a="00000000000000000000000000000000".substring(0,32-d.length)+d;if(("1"==ep_signals[c[7]].value)&&("1"==d.substr(0,1))){a="11111111111111111111111111111111".substring(0,32-d.length)+d}set_value(ep_states[c[1]],parseInt(a,2))},verbal:function(d){var h=parseInt(ep_signals[d[4]].value);var f=parseInt(ep_signals[d[5]].value);var g=get_value(ep_states[d[3]]).toString(2);var e=("00000000000000000000000000000000".substring(0,32-g.length)+g);e=e.substr(31-(h+f-1),f);var c="00000000000000000000000000000000".substring(0,32-e.length)+e;if(("1"==ep_signals[d[7]].value)&&("1"==e.substr(0,1))){c="11111111111111111111111111111111".substring(0,32-e.length)+e}g=parseInt(c,2);var a=get_cfg("verbal_verbose");if(a!=="math"){return" Copy from "+show_verbal(d[3])+" to "+show_verbal(d[1])+" value "+show_value(g)+" (copied "+f+" bits from bit "+h+"). "}return show_verbal(d[1])+" = "+show_verbal(d[3])+" ("+show_value(g)+", "+f+" bits from bit "+h+"). "}};ep_behaviors.BSEL={nparameters:6,types:["E","I","I","E","I"],operation:function(e){var k=parseInt(e[2]);var h=parseInt(e[5]);var a=parseInt(e[3]);var g=get_value(ep_states[e[4]]).toString(2);var f="00000000000000000000000000000000".substring(0,32-g.length)+g;f=f.substr(31-(h+a)+1,a);var d="00000000000000000000000000000000".substring(0,32-f.length)+f;var c="00000000000000000000000000000000".substr(0,k);d=d+c;set_value(ep_states[e[1]],parseInt(d,2))},verbal:function(m){var g=parseInt(m[2]);var k=parseInt(m[3]);var a=parseInt(m[5]);var l=get_value(ep_states[m[4]]).toString(2);var h="00000000000000000000000000000000".substring(0,32-l.length)+l;h=h.substr(31-(a+k)+1,k);var f="00000000000000000000000000000000".substring(0,32-h.length)+h;var e="00000000000000000000000000000000".substr(0,g);f=f+e;var d=parseInt(f,2);var c=get_cfg("verbal_verbose");if(c!=="math"){return"Copy from "+show_verbal(m[4])+" to "+show_verbal(m[1])+" value "+show_value(d)+" (copied "+k+" bits, from bit "+a+" of "+m[4]+" to bit "+g+" of "+m[1]+"). "}return show_verbal(m[1])+" = "+show_verbal(m[4])+" ("+show_value(d)+", "+k+" bits, from bit "+a+" of "+m[4]+" to bit "+g+" of "+m[1]+"). "}};ep_behaviors.EXT_SIG={nparameters:3,types:["E","I"],operation:function(d){var f=get_value(ep_states[d[1]]).toString(2);var e=("00000000000000000000000000000000".substring(0,32-f.length)+f);var c=e.substr(31-d[2],31);var a=c;if("1"==e[31-d[2]]){a="11111111111111111111111111111111".substring(0,32-c.length)+a}set_value(ep_states[d[1]],parseInt(a,2))},verbal:function(e){var g=get_value(ep_states[e[1]]).toString(2);var f=("00000000000000000000000000000000".substring(0,32-g.length)+g);var d=f.substr(31-e[2],31);var c=d;if("1"==f[31-e[2]]){c="11111111111111111111111111111111".substring(0,32-d.length)+c}var a=parseInt(c,2);return"Sign Extension with value "+show_value(a)+". "}};ep_behaviors.MOVE_BITS={nparameters:5,types:["S","I","I","S"],operation:function(h){var d=parseInt(h[2]);var a=0;var f=parseInt(h[3]);var g=ep_signals[h[4]].value.toString(2);g=("00000000000000000000000000000000".substring(0,32-g.length)+g);g=g.substr(31-a-f+1,f);var e=ep_signals[h[1]].value.toString(2);e=("00000000000000000000000000000000".substring(0,32-e.length)+e);var l=e.substr(0,32-(d+f));var k=e.substr(31-d+1,d);var c=l+g+k;set_value(ep_signals[h[1]],parseInt(c,2))},verbal:function(a){return""}};ep_behaviors.MOVE_BITSE={nparameters:6,types:["S","I","I","E","I"],operation:function(h){var d=parseInt(h[2]);var a=parseInt(h[5]);var f=parseInt(h[3]);var g=get_value(ep_states[h[4]]).toString(2);g=("00000000000000000000000000000000".substring(0,32-g.length)+g);g=g.substr(31-a-f+1,f);var e=ep_signals[h[1]].value.toString(2);e=("00000000000000000000000000000000".substring(0,32-e.length)+e);var l=e.substr(0,32-(d+f));var k=e.substr(31-d+1,d);var c=l+g+k;set_value(ep_signals[h[1]],parseInt(c,2))},verbal:function(a){return""}};ep_behaviors.DECO={nparameters:1,operation:function(c){ep_states.INEX.value=0;var f=decode_instruction(ep_internal_states.FIRMWARE,ep_ctrl_states.ir,get_value(ep_states.REG_IR));if(null==f.oinstruction){alert("ERROR: undefined instruction code in firmware (co:"+f.op_code.toString(2)+", cop:"+f.cop_code.toString(2)+")");ep_states.ROM_MUXA.value=0;ep_states.INEX.value=1;return -1}var e=f.op_code<<6;if(typeof f.oinstruction.cop!="undefined"){e=e+f.cop_code}if(typeof ep_internal_states.ROM[e]=="undefined"){alert("ERROR: undefined rom address "+e+" in firmware");ep_states.ROM_MUXA.value=0;return -1}ep_states.ROM_MUXA.value=ep_internal_states.ROM[e];var g=get_value(ep_states.DECO_INS);set_value(ep_states.DECO_INS,g+1);var a=get_value(ep_states.REG_PC)-4;var d=get_deco_from_pc(a);set_value(ep_states.REG_IR_DECO,d);show_dbg_ir(get_value(ep_states.REG_IR_DECO))},verbal:function(a){return"Decode instruction. "}};ep_behaviors.FIRE={nparameters:2,types:["S"],operation:function(a){if(ep_internal_states.fire_stack.indexOf(a[1])!=-1){return}ep_internal_states.fire_stack.push(a[1]);update_draw(ep_signals[a[1]],ep_signals[a[1]].value);if("L"==ep_signals[a[1]].type){update_state(a[1])}ep_internal_states.fire_stack.pop(a[1]);check_buses(a[1])},verbal:function(a){return""}};ep_behaviors.FIRE_IFSET={nparameters:3,types:["S","I"],operation:function(a){if(get_value(ep_signals[a[1]])!=parseInt(a[2])){return}ep_behaviors.FIRE.operation(a)},verbal:function(a){return""}};ep_behaviors.FIRE_IFCHANGED={nparameters:3,types:["S","X"],operation:function(a){sim_elto=get_reference(a[2]);if(sim_elto.changed==false){return}ep_behaviors.FIRE.operation(a)},verbal:function(a){return""}};ep_behaviors.RESET_CHANGED={nparameters:2,types:["X"],operation:function(a){sim_elto=get_reference(a[1]);sim_elto.changed=false},verbal:function(a){return""}};ep_behaviors.CLOCK={nparameters:1,operation:function(s_expr){var val=get_value(ep_states.CLK);set_value(ep_states.CLK,val+1);for(var i=0;i<jit_fire_order.length;i++){fn_updateE_now(jit_fire_order[i])}var new_maddr=get_value(ep_states.MUXA_MICROADDR);set_value(ep_states.REG_MICROADDR,new_maddr);if(typeof ep_internal_states.MC[new_maddr]!="undefined"){var new_mins=Object.create(ep_internal_states.MC[new_maddr])}else{var new_mins=Object.create(ep_states.REG_MICROINS.default_value)}ep_states.REG_MICROINS.value=new_mins;for(var key in ep_signals){if(typeof new_mins[key]!="undefined"){set_value(ep_signals[key],new_mins[key])}else{set_value(ep_signals[key],ep_signals[key].default_value)}}for(var i=0;i<jit_fire_order.length;i++){fn_updateL_now(jit_fire_order[i])}if(typeof new_mins.NATIVE_JIT!="undefined"){new_mins.NATIVE_JIT()}else{if(typeof new_mins.NATIVE!="undefined"){eval(new_mins.NATIVE)}}},verbal:function(a){return""}};ep_behaviors.CPU_RESET={nparameters:1,operation:function(a){for(var c in ep_states){reset_value(ep_states[c])}for(var c in ep_signals){reset_value(ep_signals[c])}},verbal:function(a){return"Reset CPU. "}};ep_behaviors.UPDATEDPC={nparameters:1,operation:function(a){show_asmdbg_pc()},verbal:function(a){return""}};ep_behaviors.UPDATE_NZVC={nparameters:1,operation:function(a){set_value(simhw_sim_state("FLAG_N"),ep_internal_states.alu_flags.flag_n);set_value(simhw_sim_state("FLAG_Z"),ep_internal_states.alu_flags.flag_z);set_value(simhw_sim_state("FLAG_V"),ep_internal_states.alu_flags.flag_v);set_value(simhw_sim_state("FLAG_C"),ep_internal_states.alu_flags.flag_c);set_value(simhw_sim_signal("TEST_N"),ep_internal_states.alu_flags.flag_n);set_value(simhw_sim_signal("TEST_Z"),ep_internal_states.alu_flags.flag_z);set_value(simhw_sim_signal("TEST_V"),ep_internal_states.alu_flags.flag_v);set_value(simhw_sim_signal("TEST_C"),ep_internal_states.alu_flags.flag_c);update_draw(ep_signals.TEST_N,ep_signals.TEST_N.value);update_draw(ep_signals.TEST_Z,ep_signals.TEST_Z.value);update_draw(ep_signals.TEST_V,ep_signals.TEST_V.value);update_draw(ep_signals.TEST_C,ep_signals.TEST_C.value)},verbal:function(a){return"Update flags N-Z-V-C."}};ep_components.MEMORY={name:"MEMORY",version:"1",abilities:["MEMORY"],details_name:["MEMORY","MEMORY_CONFIG"],details_fire:[["svg_p:text3001"],[]],write_state:function(d){if(typeof d.MEMORY=="undefined"){d.MEMORY={}}var c=0;var e=0;for(var a in ep_internal_states.MP){e=parseInt(ep_internal_states.MP[a]);if(e!=0){c=parseInt(a).toString(16);d.MEMORY["0x"+c]={type:"memory",default_value:0,id:"0x"+c,op:"=",value:"0x"+e.toString(16)}}}return d},read_state:function(d,a){if(typeof d.MEMORY=="undefined"){d.MEMORY={}}var c=parseInt(a.id).toString(16);var e=parseInt(a.value).toString(16);if("MEMORY"==a.type.toUpperCase().trim()){d.MEMORY["0x"+c]={type:"memory",default_value:0,id:"0x"+c,op:a.condition,value:"0x"+e};return true}return false},get_state:function(c){var a=parseInt(c);if(typeof ep_internal_states.MP[a]!="undefined"){return"0x"+parseInt(ep_internal_states.MP[a]).toString(16)}return null},get_value:function(a){return(simhw_internalState_get("MP",a)>>>0)},set_value:function(a,c){simhw_internalState_set("MP",a,c);return c}};ep_internal_states.segments={};ep_internal_states.MP={};ep_internal_states.MP_wc=0;ep_signals.MRDY={name:"MRDY",visible:true,type:"L",value:0,default_value:0,nbits:"1",depends_on:["CLK"],behavior:["FIRE_IFCHANGED MRDY C","FIRE_IFCHANGED MRDY C"],fire_name:["svg_p:tspan3916","svg_p:text3909"],draw_data:[[],["svg_p:path3895","svg_p:path3541"]],draw_name:[[],[]]};ep_signals.R={name:"R",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MEM_READ BUS_AB BUS_DB BWA MRDY CLK; FIRE MRDY"],fire_name:["svg_p:text3533-5-2","svg_p:text3713"],draw_data:[[],["svg_p:path3557","svg_p:path3571"]],draw_name:[[],[]]};ep_signals.W={name:"W",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MEM_WRITE BUS_AB BUS_DB BWA MRDY CLK; FIRE MRDY"],fire_name:["svg_p:text3533-5-08","svg_p:text3527","svg_p:text3431-7"],draw_data:[[],["svg_p:path3559","svg_p:path3575","svg_p:path3447-7"]],draw_name:[[],[]]};ep_behaviors.MEM_READ={nparameters:6,types:["E","E","S","S","E"],operation:function(c){var a=ep_states[c[1]].value;var d=ep_states[c[2]].value;var h=ep_signals[c[3]].value;var f=get_value(ep_states[c[5]].value);ep_signals[c[4]].value=0;var g=get_var(ep_internal_states.MP_wc);if((typeof ep_events.mem[f-1]!="undefined")&&(ep_events.mem[f-1]>0)){g=ep_events.mem[f-1]-1}ep_events.mem[f]=g;if(g>0){return}var e=0;a=a&4294967292;if(typeof ep_internal_states.MP[a]!="undefined"){e=ep_internal_states.MP[a]}if(0==(h&12)){if(0==(h&3)){d=(d&4294967040)|(e&255)}if(1==(h&3)){d=(d&4294902015)|(e&65280)}if(2==(h&3)){d=(d&4278255615)|(e&16711680)}if(3==(h&3)){d=(d&16777215)|(e&4278190080)}}else{if(1==(h&12)){if(0==(h&2)){d=(d&4294901760)|(e&65535)}if(1==(h&2)){d=(d&65535)|(e&4294901760)}}else{d=e}}ep_states[c[2]].value=(d>>>0);ep_signals[c[4]].value=1;show_main_memory(ep_internal_states.MP,a,false,false)},verbal:function(k){var f="";var l=ep_states[k[1]].value;var a=ep_states[k[2]].value;var g=ep_signals[k[3]].value;var d=get_value(ep_states[k[5]].value);var c="word";if(0==(g&12)){c="byte"}else{if(1==(g&12)){c="half"}}var h=0;if(typeof ep_internal_states.MP[l]!="undefined"){h=ep_internal_states.MP[l]}var e=get_cfg("verbal_verbose");if(e!=="math"){f="Try to read a "+c+" from memory at address 0x"+l.toString(16)+" with value 0x"+h.toString(16)+". "}f="Memory output = 0x"+h.toString(16)+" (Read a "+c+" from 0x"+l.toString(16)+"). ";return f}};ep_behaviors.MEM_WRITE={nparameters:6,types:["E","E","S","S","E"],operation:function(c){var a=ep_states[c[1]].value;var d=ep_states[c[2]].value;var h=ep_signals[c[3]].value;var f=get_value(ep_states[c[5]].value);ep_signals[c[4]].value=0;var g=get_var(ep_internal_states.MP_wc);if((typeof ep_events.mem[f-1]!="undefined")&&(ep_events.mem[f-1]>0)){g=ep_events.mem[f-1]-1}ep_events.mem[f]=g;if(g>0){return}var e=0;a=a&4294967292;if(typeof ep_internal_states.MP[a]!="undefined"){e=ep_internal_states.MP[a]}if(0==(h&12)){if(0==(h&3)){e=(e&4294967040)|(d&255)}if(1==(h&3)){e=(e&4294902015)|(d&65280)}if(2==(h&3)){e=(e&4278255615)|(d&16711680)}if(3==(h&3)){e=(e&16777215)|(d&4278190080)}}else{if(1==(h&12)){if(0==(h&2)){e=(e&4294901760)|(d&65535)}if(1==(h&2)){e=(e&65535)|(d&4294901760)}}else{e=d}}ep_internal_states.MP[a]=(e>>>0);ep_signals[c[4]].value=1;show_main_memory(ep_internal_states.MP,a,true,true)},verbal:function(k){var f="";var l=ep_states[k[1]].value;var a=ep_states[k[2]].value;var g=ep_signals[k[3]].value;var d=get_value(ep_states[k[5]].value);var c="word";if(0==(g&12)){c="byte"}else{if(1==(g&12)){c="half"}}var h=0;if(typeof ep_internal_states.MP[l]!="undefined"){h=ep_internal_states.MP[l]}var e=get_cfg("verbal_verbose");if(e!=="math"){f="Try to write a "+c+" to memory at address 0x"+l.toString(16)+" with value "+h.toString(16)+". "}f="Memory[0x"+l.toString(16)+"] = 0x"+h.toString(16)+" (Write a "+c+" to 0x"+l.toString(16)+"). ";return f}};ep_behaviors.MEMORY_RESET={nparameters:1,operation:function(a){ep_events.mem={}},verbal:function(a){return"Reset main memory (all values will be zeroes). "}};ep_components.IO={name:"IO",version:"1",abilities:["IO_TIMER"],details_name:["IO_STATS","IO_CONFIG"],details_fire:[["svg_p:text3775"],[]],write_state:function(a){return a},read_state:function(c,a){return false},get_state:function(a){return null},get_value:function(a){var c=simhw_internalState_get("io_hash",a);var d=(get_value(simhw_sim_state(c))>>>0);set_value(simhw_sim_state("BUS_AB"),a);set_value(simhw_sim_signal("IOR"),1);compute_behavior("FIRE IOR");d=get_value(simhw_sim_state("BUS_DB"));return d},set_value:function(a,d){var c=simhw_internalState_get("io_hash",a);set_value(simhw_sim_state(c),d);set_value(simhw_sim_state("BUS_AB"),a);set_value(simhw_sim_state("BUS_DB"),d);set_value(simhw_sim_signal("IOW"),1);compute_behavior("FIRE IOW");return d}};ep_internal_states.io_int_factory=[];ep_internal_states.io_int_factory[0]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[1]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[2]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[3]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[4]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[5]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[6]={period:0,probability:0.5,accumulated:0,active:false};ep_internal_states.io_int_factory[7]={period:0,probability:0.5,accumulated:0,active:false};var IOSR_ID=4352;var IOCR_ID=4356;var IODR_ID=4360;ep_internal_states.io_hash[IOSR_ID]="IOSR";ep_internal_states.io_hash[IOCR_ID]="IOCR";ep_internal_states.io_hash[IODR_ID]="IODR";ep_states.IOSR={name:"IOSR",verbal:"IO State Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.IOCR={name:"IOCR",verbal:"IO Control Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.IODR={name:"IODR",verbal:"IO Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_signals.INT={name:"INT",visible:true,type:"L",value:0,default_value:0,nbits:"1",depends_on:["CLK"],behavior:["FIRE C","FIRE C"],fire_name:["svg_p:tspan4199"],draw_data:[[],["svg_p:path3809"]],draw_name:[[],[]]};ep_signals.IORDY={name:"IORDY",visible:true,type:"L",value:0,default_value:0,nbits:"1",depends_on:["CLK"],behavior:["FIRE_IFCHANGED IORDY C","FIRE_IFCHANGED IORDY C"],fire_name:["svg_p:tspan4089","svg_p:path3793","svg_p:text3911"],draw_data:[[],["svg_p:path3897"]],draw_name:[[],[]]};ep_signals.IO_IOR={name:"IO_IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","IO_IOR BUS_AB BUS_DB IOSR IOCR IODR CLK; FIRE SBWA"],fire_name:["svg_p:tspan4173"],draw_data:[[],["svg_p:path3795","svg_p:path3733"]],draw_name:[[],[]]};ep_signals.IO_IOW={name:"IO_IOW",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","IO_IOW BUS_AB BUS_DB IOSR IOCR IODR CLK; FIRE SBWA"],fire_name:["svg_p:text3785-0-6-0-5-5"],draw_data:[[],["svg_p:path3805","svg_p:path3733"]],draw_name:[[],[]]};ep_signals.IO_IE={name:"IO_IE",visible:true,type:"L",value:1,default_value:1,nbits:"1",behavior:["NOP","IO_CHK_I CLK INT INTV; FIRE C"],fire_name:[],draw_data:[[],[]],draw_name:[[],[]]};ep_signals.INTA={name:"INTA",visible:true,type:"L",value:1,default_value:0,nbits:"1",behavior:["NOP","INTA CLK INT INTA BUS_DB INTV; FIRE BW; FIRE C"],fire_name:["svg_p:text3785-0-6-0-5-5-1-1"],draw_data:[[],["svg_p:path3807","svg_p:path3737"]],draw_name:[[],[]]};ep_behaviors.IO_IOR={nparameters:7,types:["E","E","E","E","E","E"],operation:function(a){var f=get_value(ep_states[a[1]]);var c=get_value(ep_states[a[3]]);var d=get_value(ep_states[a[4]]);var e=get_value(ep_states[a[5]]);if(f==IOSR_ID){set_value(ep_states[a[2]],c)}if(f==IOCR_ID){set_value(ep_states[a[2]],d)}if(f==IODR_ID){set_value(ep_states[a[2]],e)}},verbal:function(a){var e="";var g=get_value(ep_states[a[1]]);var c=get_value(ep_states[a[3]]);var d=get_value(ep_states[a[4]]);var f=get_value(ep_states[a[5]]);if(g==IOSR_ID){e="I/O device read at IOSR of value "+c+". "}if(g==IOCR_ID){e="I/O device read at IOCR of value "+d+". "}if(g==IODR_ID){e="I/O device read at IODR of value "+f+". "}return e}};ep_behaviors.IO_IOW={nparameters:7,types:["E","E","E","E","E","E"],operation:function(c){var f=get_value(ep_states[c[1]]);var d=get_value(ep_states[c[2]]);if((f!=IOSR_ID)&&(f!=IOCR_ID)&&(f!=IODR_ID)){return}if(f==IOSR_ID){set_value(ep_states[c[3]],d)}if(f==IOCR_ID){set_value(ep_states[c[4]],d)}if(f==IODR_ID){set_value(ep_states[c[5]],d)}var a=get_value(ep_states[c[4]]);var e=get_value(ep_states[c[5]]);if((a<0)||(a>7)){return}set_var(ep_internal_states.io_int_factory[a].period,e);set_var(ep_internal_states.io_int_factory[a].probability,1);if(0==e){set_var(ep_internal_states.io_int_factory[a].probability,0)}},verbal:function(a){var d="";var e=get_value(ep_states[a[1]]);var c=get_value(ep_states[a[2]]);if(e==IOSR_ID){d="I/O device write at IOSR with value "+c+". "}if(e==IOCR_ID){d="I/O device write at IOCR with value "+c+". "}if(e==IODR_ID){d="I/O device write at IODR with value "+c+". "}return d}};ep_behaviors.IO_CHK_I={nparameters:4,types:["E","S","E"],operation:function(a){var d=get_value(ep_states[a[1]]);for(var c=ep_internal_states.io_int_factory.length-1;c>=0;c--){if(get_var(ep_internal_states.io_int_factory[c].period)==0){continue}if(get_var(ep_internal_states.io_int_factory[c].active)==true){set_value(ep_signals[a[2]],1);set_value(ep_states[a[3]],c)}if((d%get_var(ep_internal_states.io_int_factory[c].period))==0){if(Math.random()>get_var(ep_internal_states.io_int_factory[c].probability)){continue}set_var(ep_internal_states.io_int_factory[c].accumulated,get_var(ep_internal_states.io_int_factory[c].accumulated)+1);set_var(ep_internal_states.io_int_factory[c].active,true);if(typeof ep_events.io[d]=="undefined"){ep_events.io[d]=[]}ep_events.io[d].push(c);set_value(ep_signals[a[2]],1);set_value(ep_states[a[3]],c)}}},verbal:function(a){return"Check I/O Interruption. "}};ep_behaviors.INTA={nparameters:6,types:["E","S","S","E","E"],operation:function(a){var d=get_value(ep_states[a[1]]);if(typeof ep_events.io[d]!="undefined"){set_value(ep_states[a[4]],ep_events.io[d][0]);return}set_value(ep_signals[a[2]],0);set_value(ep_states[a[5]],0);for(var c=0;c<ep_internal_states.io_int_factory.length;c++){if(get_var(ep_internal_states.io_int_factory[c].active)){set_value(ep_signals[a[2]],0);set_value(ep_states[a[5]],c);set_value(ep_states[a[4]],c);if(typeof ep_events.io[d]=="undefined"){ep_events.io[d]=[]}ep_events.io[d].push(c);set_var(ep_internal_states.io_int_factory[c].active,false);break}}},verbal:function(a){return"Signal an interruption ACK. "}};ep_behaviors.IO_RESET={nparameters:1,operation:function(a){ep_events.io={};for(var c=0;c<ep_internal_states.io_int_factory.length;c++){set_var(ep_internal_states.io_int_factory[c].accumulated,0);set_var(ep_internal_states.io_int_factory[c].active,false)}},verbal:function(a){return"Reset the I/O device. "}};ep_components.KBD={name:"KBD",version:"1",abilities:["KEYBOARD"],details_name:["KEYBOARD"],details_fire:[["svg_p:text3829"]],write_state:function(a){return a},read_state:function(c,a){return false},get_state:function(a){return null},get_value:function(a){return ep_internal_states.keyboard_content},set_value:function(a,c){ep_internal_states.keyboard_content=c;return c}};var KBDR_ID=256;var KBSR_ID=260;ep_internal_states.io_hash[KBDR_ID]="KBDR";ep_internal_states.io_hash[KBSR_ID]="KBSR";ep_internal_states.keyboard_content="";ep_states.KBDR={name:"KBDR",verbal:"Keyboard Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.KBSR={name:"KBSR",verbal:"Keyboard Status Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_signals.KBD_IOR={name:"IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","KBD_IOR BUS_AB BUS_DB KBDR KBSR CLK; FIRE SBWA"],fire_name:["svg_p:tspan4057"],draw_data:[[],["svg_p:path3863","svg_p:path3847"]],draw_name:[[],[]]};ep_behaviors.KBD_IOR={nparameters:6,types:["E","E","E","E","E"],operation:function(d){var f=get_value(ep_states[d[1]]);var e=get_value(ep_states[d[5]]);if((f!=KBDR_ID)&&(f!=KBSR_ID)){return}if(typeof ep_events.keybd[e]!="undefined"){if(f==KBDR_ID){set_value(ep_states[d[2]],ep_events.keybd[e])}if(f==KBSR_ID){set_value(ep_states[d[2]],1)}return}if(get_value(ep_states[d[4]])==0){var c=get_keyboard_content();if(c.length!=0){var a=c.substr(1,c.length-1);set_keyboard_content(a);set_value(ep_states[d[4]],1);set_value(ep_states[d[3]],c[0].charCodeAt(0))}}if(get_value(ep_states[d[4]])==1){ep_events.keybd[e]=get_value(ep_states[d[3]])}if(f==KBSR_ID){set_value(ep_states[d[2]],get_value(ep_states[d[4]]))}if(f==KBDR_ID){if(get_value(ep_states[d[4]])==1){set_value(ep_states[d[2]],get_value(ep_states[d[3]]))}set_value(ep_states[d[4]],0)}},verbal:function(a){var c="";var e=get_value(ep_states[a[1]]);var d=get_value(ep_states[a[5]]);if(e==KBDR_ID){c="Read the screen data: "+ep_states[a[2]]+". "}if(e==KBSR_ID){c="Read the screen state: "+ep_states[a[2]]+". "}return c}};ep_behaviors.KBD_RESET={nparameters:1,operation:function(a){ep_events.keybd={}},verbal:function(a){return"Reset the keyboard content. "}};ep_components.SCREEN={name:"SCREEN",version:"1",abilities:["SCREEN"],details_name:["SCREEN"],details_fire:[["svg_p:text3845"]],write_state:function(c){if(typeof c.SCREEN=="undefined"){c.SCREEN={}}var e=ep_internal_states.screen_content;var d=e.trim().split("\n");for(var a=0;a<d.length;a++){value=d[a];if(value!=""){c.SCREEN[a]={type:"screen",default_value:"",id:a,op:"==",value:value}}}return c},read_state:function(c,a){if(typeof c.SCREEN=="undefined"){c.SCREEN={}}if("SCREEN"==a.type.toUpperCase().trim()){c.SCREEN[a.id]={type:"screen",default_value:"",id:a.id,op:a.condition,value:a.value};return true}return false},get_state:function(a){var e=ep_internal_states.screen_content;var d=e.trim().split("\n");var c=parseInt(a);if(typeof d[c]!="undefined"){return d[c]}return null},get_value:function(a){return ep_internal_states.screen_content},set_value:function(a,c){ep_internal_states.screen_content=c;return c}};var DDR_ID=4096;var DSR_ID=4100;ep_internal_states.io_hash[DDR_ID]="DDR";ep_internal_states.io_hash[DSR_ID]="DSR";ep_internal_states.screen_content="";ep_states.DDR={name:"DDR",verbal:"Display Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_states.DSR={name:"DSR",verbal:"Display State Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};ep_signals.SCR_IOR={name:"IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","SCR_IOR BUS_AB BUS_DB DDR DSR CLK"],fire_name:["svg_p:tspan4004"],draw_data:[[],["svg_p:path3871","svg_p:path3857"]],draw_name:[[],[]]};ep_signals.SCR_IOW={name:"IOW",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","SCR_IOW BUS_AB BUS_DB DDR DSR CLK"],fire_name:["svg_p:tspan4006"],draw_data:[[],["svg_p:path3873","svg_p:path3857"]],draw_name:[[],[]]};ep_behaviors.SCR_IOR={nparameters:6,types:["E","E","E","E","E"],operation:function(c){var e=get_value(ep_states[c[1]]);var d=get_value(ep_states[c[3]]);var a=get_value(ep_states[c[4]]);if(e==DDR_ID){set_value(ep_states[c[2]],d)}if(e==DSR_ID){set_value(ep_states[c[2]],a)}},verbal:function(c){var e="";var f=get_value(ep_states[c[1]]);var d=get_value(ep_states[c[3]]);var a=get_value(ep_states[c[4]]);if(f==DDR_ID){e="Try to read from the screen the DDR value "+d+". "}if(f==DDR_ID){e="Try to read into the screen the DSR value "+a+". "}return e}};ep_behaviors.SCR_IOW={nparameters:6,types:["E","E","E","E","E"],operation:function(d){var k=get_value(ep_states[d[1]]);var f=get_value(ep_states[d[2]]);var h=get_value(ep_states[d[5]]);var g=String.fromCharCode(f);if(k!=DDR_ID){return}if(g==String.fromCharCode(7)){timbre.reset();var e=T("sin",{freq:440,mul:0.5});var c=T("sin",{freq:660,mul:0.5});T("perc",{r:500},e,c).on("ended",function(){this.pause()}).bang().play()}else{var a=get_screen_content();if(typeof ep_events.screen[h]!="undefined"){a=a.substr(0,a.length-1)}set_screen_content(a+String.fromCharCode(f))}set_value(ep_states[d[3]],f);set_value(ep_states[d[4]],1);ep_events.screen[h]=f},verbal:function(a){var e="";var g=get_value(ep_states[a[1]]);var c=get_value(ep_states[a[2]]);var f=get_value(ep_states[a[5]]);var d=String.fromCharCode(c);if(g==DDR_ID){e="Try to write into the screen the code "+d+" at clock cycle "+f+". "}return e}};ep_behaviors.SCREEN_RESET={nparameters:1,operation:function(a){ep_events.screen={}},verbal:function(a){return"Reset the screen content. "}};var poc_components={};var poc_states={};var poc_events={};var poc_signals={};var poc_behaviors={};var poc_internal_states={};var poc_ctrl_states={};var poc_def={sim_name:"Proof-Of-Concept Processor",sim_short_name:"poc",sim_img_processor:"examples/hardware/poc/images/processor.svg",sim_img_controlunit:"examples/hardware/poc/images/controlunit.svg",sim_img_cpu:"examples/hardware/poc/images/cpu.svg",components:poc_components,states:poc_states,signals:poc_signals,behaviors:poc_behaviors,events:poc_events,internal_states:poc_internal_states,ctrl_states:poc_ctrl_states};simhw_add(poc_def);poc_behaviors.PRINT_S={nparameters:2,types:["S"],operation:function(a){console.log(a[1]+": 0x"+poc_signals[a[1]].value.toString(16))},verbal:function(a){return"Print value of signal "+a[1]+": 0x"+poc_signals[a[1]].value.toString(16)+". "}};poc_behaviors.PRINT_E={nparameters:2,types:["E"],operation:function(a){console.log(a[1]+": 0x"+poc_states[a[1]].value.toString(16))},verbal:function(a){return"Print value of state "+a[1]+": 0x"+poc_states[a[1]].value.toString(16)+". "}};poc_components.CPU={name:"CPU",version:"1",abilities:["CPU"],details_name:["REGISTER_FILE","CONTROL_MEMORY","CLOCK","CPU_STATS"],details_fire:[["svg_p:text3495","svg_p:text3029","svg_p:text3031"],["svg_cu:text3010"],["svg_p:text3459-7","svg_cu:text4138","svg_cu:text4138-7","svg_cu:tspan4140-2"],["svg_p:text3495"]],write_state:function(d){if(typeof d.CPU=="undefined"){d.CPU={}}var a=["PC","SR"];var e=0;for(var c=0;c<poc_states.BR.length;c++){e=parseInt(poc_states.BR[c].value);if(e!=0){d.CPU["R"+c]={type:"register",default_value:0,id:"R"+c,op:"=",value:"0x"+e.toString(16)}}}for(var c=0;c<a.length;c++){e=parseInt(poc_states["REG_"+a[c]].value);if(e!=0){d.CPU[a[c]]={type:"register",default_value:0,id:a[c],op:"=",value:"0x"+e.toString(16)}}}return d},read_state:function(d,a){if(typeof d.CPU=="undefined"){d.CPU={}}var c=a.id.toUpperCase().trim();var e=parseInt(a.value).toString(16);if("REGISTER"==a.type.toUpperCase().trim()){d.CPU[c]={type:"register",default_value:0,id:c,op:a.condition,value:"0x"+e};return true}return false},get_state:function(c){var d=c.toUpperCase().trim();if(typeof poc_states["REG_"+d]!="undefined"){return"0x"+get_value(poc_states["REG_"+d]).toString(16)}d=d.replace("R","");var a=parseInt(d);if(typeof poc_states.BR[a]!="undefined"){return"0x"+get_value(poc_states.BR[a]).toString(16)}return null},get_value:function(a){if(Number.isInteger(a)){index=a}else{index=parseInt(a)}if(isNaN(index)){return(get_value(simhw_sim_state(a))>>>0)}return(get_value(simhw_sim_states().BR[index])>>>0)},set_value:function(c,d){var a=simhw_sim_ctrlStates_get().pc.state;if(Number.isInteger(c)){index=c}else{index=parseInt(c)}if(isNaN(index)){set_value(simhw_sim_state(c),d);if(a===c){show_asmdbg_pc()}return d}return set_value(simhw_sim_states().BR[index],d)}};poc_ctrl_states.pc={name:"PC",state:"REG_PC"};poc_ctrl_states.sp={name:"SP",state:"BR.29"};poc_ctrl_states.ir={name:"IR",state:"REG_IR",default_eltos:{co:{begin:0,end:5,length:6},cop:{begin:27,end:31,length:5}}};poc_ctrl_states.mpc={name:"mPC",state:"REG_MICROADDR"};poc_internal_states.MC={};poc_internal_states.MC_dashboard={};poc_internal_states.ROM={};poc_internal_states.FIRMWARE={};poc_internal_states.io_hash={};poc_internal_states.fire_stack=[];poc_internal_states.tri_state_names=["T1","T2","T3","T6","T8","T9","T10","T11"];poc_internal_states.fire_visible={databus:false,internalbus:false};poc_internal_states.filter_states=["REG_IR_DECO,col-11","REG_IR,col-auto","REG_PC,col-auto","REG_SR,col-auto","REG_RT1,col-auto","REG_MAR,col-auto","REG_MBR,col-auto","REG_MICROADDR,col-auto"];poc_internal_states.filter_signals=["A0,0","B,0","C,0","SELA,5","SELB,5","SELC,2","SELCOP,0","MR,0","MC,0","C0,0","C1,0","C2,0","C3,0","C4,0","C7,0","T1,0","T2,0","T3,0","T6,0","T8,0","T9,0","T10,0","T11,0","M1,0","M7,0","MA,0","MB,0","LC,0","SE,0","SIZE,0","OFFSET,0","BW,0","R,0","W,0","TA,0","TD,0","IOR,0","IOW,0","TEST_I,0","TEST_U,0"];poc_internal_states.alu_flags={flag_n:0,flag_z:0,flag_v:0,flag_c:0};poc_states.BR=[];poc_states.BR[0]={name:"R0",verbal:"Register  0",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[1]={name:"R1",verbal:"Register  1",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[2]={name:"R2",verbal:"Register  2",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[3]={name:"R3",verbal:"Register  3",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[4]={name:"R4",verbal:"Register  4",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[5]={name:"R5",verbal:"Register  5",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[6]={name:"R6",verbal:"Register  6",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[7]={name:"R7",verbal:"Register  7",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[8]={name:"R8",verbal:"Register  8",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[9]={name:"R9",verbal:"Register  9",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[10]={name:"R10",verbal:"Register 10",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[11]={name:"R11",verbal:"Register 11",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[12]={name:"R12",verbal:"Register 12",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[13]={name:"R13",verbal:"Register 13",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[14]={name:"R14",verbal:"Register 14",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[15]={name:"R15",verbal:"Register 15",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[16]={name:"R16",verbal:"Register 16",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[17]={name:"R17",verbal:"Register 17",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[18]={name:"R18",verbal:"Register 18",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[19]={name:"R19",verbal:"Register 19",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[20]={name:"R20",verbal:"Register 20",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[21]={name:"R21",verbal:"Register 21",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[22]={name:"R22",verbal:"Register 22",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[23]={name:"R23",verbal:"Register 23",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[24]={name:"R24",verbal:"Register 24",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[25]={name:"R25",verbal:"Register 25",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[26]={name:"R26",verbal:"Register 26",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[27]={name:"R27",verbal:"Register 27",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[28]={name:"R28",verbal:"Register 28",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[29]={name:"R29",verbal:"Register 29",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[30]={name:"R30",verbal:"Register 30",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[31]={name:"R31",verbal:"Register 31",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[32]={name:"R32",verbal:"Register 32",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[33]={name:"R33",verbal:"Register 33",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[34]={name:"R34",verbal:"Register 34",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[35]={name:"R35",verbal:"Register 35",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[36]={name:"R36",verbal:"Register 36",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[37]={name:"R37",verbal:"Register 37",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[38]={name:"R38",verbal:"Register 38",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[39]={name:"R39",verbal:"Register 39",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[40]={name:"R40",verbal:"Register 40",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[41]={name:"R41",verbal:"Register 41",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[42]={name:"R42",verbal:"Register 42",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[43]={name:"R43",verbal:"Register 43",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[44]={name:"R44",verbal:"Register 44",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[45]={name:"R45",verbal:"Register 45",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[46]={name:"R46",verbal:"Register 46",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[47]={name:"R47",verbal:"Register 47",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[48]={name:"R48",verbal:"Register 48",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[49]={name:"R49",verbal:"Register 49",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[50]={name:"R50",verbal:"Register 50",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[51]={name:"R51",verbal:"Register 51",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[52]={name:"R52",verbal:"Register 52",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[53]={name:"R53",verbal:"Register 53",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[54]={name:"R54",verbal:"Register 54",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[55]={name:"R55",verbal:"Register 55",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[56]={name:"R56",verbal:"Register 56",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[57]={name:"R57",verbal:"Register 57",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[58]={name:"R58",verbal:"Register 58",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[59]={name:"R59",verbal:"Register 59",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[60]={name:"R60",verbal:"Register 60",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[61]={name:"R61",verbal:"Register 61",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[62]={name:"R62",verbal:"Register 62",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BR[63]={name:"R63",verbal:"Register 63",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.REG_PC={name:"PC",verbal:"Program Counter Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.REG_MAR={name:"MAR",verbal:"Memory Address Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.REG_MBR={name:"MBR",verbal:"Memory Data Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.REG_IR={name:"IR",verbal:"Instruction Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.REG_SR={name:"SR",verbal:"State Register",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.REG_RT1={name:"RT1",verbal:"Temporal Register 1",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BUS_IB={name:"I_BUS",verbal:"Internal Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BUS_AB={name:"A_BUS",verbal:"Address Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BUS_CB={name:"C_BUS",verbal:"Control Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BUS_DB={name:"D_BUS",verbal:"Data Bus",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.RA_T9={name:"RA_T9",verbal:"Input of T9 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.RB_T10={name:"RB_T10",verbal:"Input of T10 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.SELEC_T3={name:"SELEC_T3",verbal:"Input of T3 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.ALU_T6={name:"ALU_T6",verbal:"Input of T6 Tristate",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.MA_ALU={name:"MA_ALU",verbal:"Input ALU via MA",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.MB_ALU={name:"MB_ALU",verbal:"Input ALU via MB",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.FLAG_C={name:"FLAG_C",verbal:"Flag Carry",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.FLAG_V={name:"FLAG_V",verbal:"Flag Overflow",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.FLAG_N={name:"FLAG_N",verbal:"Flag Negative",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.FLAG_Z={name:"FLAG_Z",verbal:"Flag Zero",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.FLAG_I={name:"FLAG_I",verbal:"Flag Interruption",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.FLAG_U={name:"FLAG_U",verbal:"Flag User",visible:true,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.REG_MICROADDR={name:"µADDR",verbal:"Microaddress Register",visible:true,nbits:"12",value:0,default_value:0,draw_data:["svg_cu:text4667"]};poc_states.REG_MICROINS={name:"µINS",verbal:"Microinstruction Register",visible:true,nbits:"77",value:{},default_value:{},draw_data:[]};poc_states.FETCH={name:"FETCH",verbal:"Input Fetch ",visible:false,nbits:"12",value:0,default_value:0,draw_data:[]};poc_states.ROM_MUXA={name:"ROM_MUXA",verbal:"Input ROM ",visible:false,nbits:"12",value:0,default_value:0,draw_data:[]};poc_states.SUM_ONE={name:"SUM_ONE",verbal:"Input next microinstruction ",visible:false,nbits:"12",value:1,default_value:1,draw_data:[]};poc_states.MUXA_MICROADDR={name:"MUXA_MICROADDR",verbal:"Input microaddress from microinstruction",visible:false,nbits:"12",value:0,default_value:0,draw_data:[]};poc_states.MUXC_MUXB={name:"MUXC_MUXB",verbal:"Output of MUX C",visible:false,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.INEX={name:"INEX",verbal:"Illegal Instruction Exception",visible:false,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.BS_M1={name:"BS_M1",verbal:"from Memory",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.BS_TD={name:"BS_TD",verbal:"Memory",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.INTV={name:"INTV",verbal:"Interruption Vector",visible:false,nbits:"8",value:0,default_value:0,draw_data:[]};poc_states.M1_C1={name:"M1_C1",verbal:"Input of Memory Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.M7_C7={name:"M7_C7",verbal:"Input of State Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.VAL_ZERO={name:"VAL_ZERO",verbal:"Wired Zero",visible:false,nbits:"1",value:0,default_value:0,draw_data:[]};poc_states.VAL_ONE={name:"VAL_ONE",verbal:"Wired One",visible:false,nbits:"32",value:1,default_value:1,draw_data:[]};poc_states.VAL_FOUR={name:"VAL_FOUR",verbal:"Wired Four",visible:false,nbits:"32",value:4,default_value:4,draw_data:[]};poc_states.REG_IR_DECO={name:"IR_DECO",verbal:"Instruction Decoded",visible:true,nbits:"0",value:0,default_value:0,draw_data:[]};poc_states.DECO_INS={name:"DECO_INS",verbal:"Instruction decoded in binary",visible:true,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.CLK={name:"CLK",verbal:"Clock",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_signals.C={name:"C",visible:true,type:"L",value:0,default_value:0,nbits:"4",behavior:["MV MUXC_MUXB VAL_ZERO; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB INT 0 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB IORDY 0 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB MRDY 0 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB REG_SR 0 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB REG_SR 1 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB REG_SR 28 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB REG_SR 29 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB REG_SR 30 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MBIT MUXC_MUXB REG_SR 31 1; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB","MV MUXC_MUXB INEX; FIRE_IFCHANGED B MUXC_MUXB; RESET_CHANGED MUXC_MUXB"],fire_name:["svg_cu:text3410"],draw_data:[["svg_cu:path3108"],["svg_cu:path3062"],["svg_cu:path3060"],["svg_cu:path3136"],["svg_cu:path3482"],["svg_cu:path3480"],["svg_cu:path3488"],["svg_cu:path3486"],["svg_cu:path3484"],["svg_cu:path3484-9"],["svg_cu:path3108-3","svg_cu:path3260-3-8-6","svg_cu:path3260-3-8","svg_cu:path3260-3"]],draw_name:[["svg_cu:path3496","svg_cu:path3414","svg_cu:path3194-08"]]};poc_signals.B={name:"B",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV A1 MUXC_MUXB; FIRE A1","NOT_ES A1 MUXC_MUXB; FIRE A1"],depends_on:["CLK"],fire_name:["svg_cu:text3408"],draw_data:[["svg_cu:path3094-7"],["svg_cu:path3392","svg_cu:path3372","svg_cu:path3390","svg_cu:path3384","svg_cu:path3108-1","svg_cu:path3100-8-7"]],draw_name:[[],["svg_cu:path3194-0","svg_cu:path3138-8","svg_cu:path3498-6"]]};poc_signals.A0={name:"A0",visible:false,type:"L",value:0,default_value:0,nbits:"1",behavior:["SBIT A0A1 A0 1; FIRE A0A1","SBIT A0A1 A0 1; FIRE A0A1"],depends_on:["CLK"],fire_name:["svg_cu:text3406"],draw_data:[["svg_cu:path3096"],["svg_cu:path3096"]],draw_name:[[],["svg_cu:path3138-8-1","svg_cu:path3098-2","svg_cu:path3124-2-5"]]};poc_signals.A1={name:"A1",visible:false,type:"L",value:0,default_value:0,nbits:"1",behavior:["SBIT A0A1 A1 0; FIRE A0A1","SBIT A0A1 A1 0; FIRE A0A1"],depends_on:["CLK"],fire_name:[],draw_data:[["svg_cu:path3094"],["svg_cu:path3094"]],draw_name:[[]]};poc_signals.A0A1={name:"A0A1",visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["PLUS1 MUXA_MICROADDR REG_MICROADDR","CP_FIELD MUXA_MICROADDR REG_MICROINS/MADDR","MV MUXA_MICROADDR ROM_MUXA","MV MUXA_MICROADDR FETCH"],depends_on:["CLK"],fire_name:[],draw_data:[["svg_cu:path3102","svg_cu:path3100","svg_cu:path3098","svg_cu:path3100-9","svg_cu:path3088"],["svg_cu:path3104","svg_cu:path3134","svg_cu:path3500","svg_cu:path3416"],["svg_cu:path3504","svg_cu:path3100-8","svg_cu:path3234-9"],["svg_cu:path3124"]],draw_name:[[]]};poc_signals.C0={name:"C0",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","MV REG_MAR BUS_IB"],fire_name:["svg_p:text3077"],draw_data:[["svg_p:path3081"]],draw_name:[["svg_p:path3075"]]};poc_signals.C1={name:"C1",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","MV REG_MBR M1_C1"],fire_name:["svg_p:text3079"],draw_data:[["svg_p:path3055"]],draw_name:[["svg_p:path3073"]]};poc_signals.C2={name:"C2",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","MV REG_PC BUS_IB; UPDATEDPC"],fire_name:["svg_p:text3179"],draw_data:[["svg_p:path3217"]],draw_name:[["svg_p:path3177"]]};poc_signals.C3={name:"C3",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","MV REG_IR BUS_IB; DECO; FIRE_IFSET C 10"],fire_name:["svg_p:text3439"],draw_data:[["svg_p:path3339","svg_p:path3913-4"]],draw_name:[["svg_p:path3337"]]};poc_signals.C4={name:"C4",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","MV REG_RT1 BUS_IB"],fire_name:["svg_p:tspan482"],draw_data:[["svg_p:path3339-4"]],draw_name:[["svg_p:path3337-0"]]};poc_signals.C7={name:"C7",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","MV REG_SR M7_C7; FIRE C"],fire_name:["svg_p:text3655"],draw_data:[["svg_p:path3651-9"]],draw_name:[["svg_p:path3681"]]};poc_signals.TA={name:"TA",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_AB REG_MAR"],fire_name:["svg_p:text3091"],draw_data:[["svg_p:path3089","svg_p:path3597","svg_p:path3513","svg_p:path3601","svg_p:path3601-2","svg_p:path3187","svg_p:path3087","svg_p:path2995","svg_p:path3535"]],draw_name:[["svg_p:path3085"]]};poc_signals.TD={name:"TD",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_DB REG_MBR; FIRE R; FIRE W"],fire_name:["svg_p:text3103"],draw_data:[["svg_p:path3101","svg_p:path3587","svg_p:path3419-8","svg_p:path3071","svg_p:path3099","svg_p:path3097","svg_p:path3559-5","svg_p:path3419-1-0","svg_p:path3583","svg_p:path3419-1","svg_p:path3491","svg_p:path3641","svg_p:path3541"]],draw_name:[["svg_p:path3095"]]};poc_signals.T1={name:"T1",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_MBR; FIRE M7; FIRE M1"],fire_name:["svg_p:text3105"],draw_data:[["svg_p:path3071","svg_p:path3069","svg_p:path3049","svg_p:path3063-9","svg_p:path3071"]],draw_name:[["svg_p:path3067"]]};poc_signals.T2={name:"T2",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_PC; FIRE M7; FIRE M1"],fire_name:["svg_p:text3449"],draw_data:[["svg_p:path3199","svg_p:path3201","svg_p:path3049"]],draw_name:[["svg_p:path3329"]]};poc_signals.T3={name:"T3",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB SELEC_T3; FIRE M7; FIRE M1"],fire_name:["svg_p:text3451"],draw_data:[["svg_p:path3349","svg_p:path3931","svg_p:path3345","svg_p:path3049"]],draw_name:[["svg_p:path3351"]]};poc_signals.T6={name:"T6",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB ALU_T6; FIRE M7; FIRE M1"],fire_name:["svg_p:text3457"],draw_data:[["svg_p:path3589","svg_p:path3317","svg_p:path3163-2","svg_p:path3049","svg_p:path3317-9","svg_p:path3321","svg_p:path3261-8"]],draw_name:[["svg_p:path3319"]]};poc_signals.T8={name:"T8",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB REG_SR; FIRE M7; FIRE M1"],fire_name:["svg_p:text3657"],draw_data:[["svg_p:path3651","svg_p:path3647","svg_p:path3049"]],draw_name:[["svg_p:path3649"]]};poc_signals.T9={name:"T9",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB RA_T9; FIRE M7; FIRE M1"],fire_name:["svg_p:text3147"],draw_data:[["svg_p:path3143","svg_p:path3139","svg_p:path3049","svg_p:path3143-9"]],draw_name:[["svg_p:path3133"]]};poc_signals.T10={name:"T10",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MV BUS_IB RB_T10; FIRE M7; FIRE M1"],fire_name:["svg_p:text3149"],draw_data:[["svg_p:path3145","svg_p:path3141","svg_p:path3049","svg_p:path3145-5"]],draw_name:[["svg_p:path3137"]]};poc_signals.T11={name:"T11",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","CP_FIELD BUS_IB REG_MICROINS/EXCODE; FIRE M7; FIRE M1"],fire_name:["svg_p:text3147-5","svg_cu:tspan4426"],draw_data:[["svg_p:path3081-3","svg_p:path3139-7","svg_p:path3049","svg_cu:path3081-3","svg_cu:path3139-7","svg_cu:path3502"]],draw_name:[["svg_p:path3133-6","svg_cu:path3133-6"]]};poc_signals.M1={name:"M1",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV M1_C1 BUS_IB","MV M1_C1 BUS_DB"],depends_on:["C1"],fire_name:["svg_p:text3469"],draw_data:[["svg_p:path3063","svg_p:path3061","svg_p:path3059"],["svg_p:path3057","svg_p:path3641","svg_p:path3419","svg_p:path3583"]],draw_name:[[],["svg_p:path3447"]]};poc_signals.M7={name:"M7",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV M7_C7 BUS_IB","MV M7_C7 REG_SR; SBIT M7_C7 FLAG_C 31; SBIT M7_C7 FLAG_V 30; SBIT M7_C7 FLAG_N 29; SBIT M7_C7 FLAG_Z 28"],depends_on:["C7"],fire_name:["svg_p:text3673"],draw_data:[["svg_p:path3691","svg_p:path3693","svg_p:path3659"],["svg_p:path3695"]],draw_name:[[],["svg_p:path3667"]]};poc_signals.MA={name:"MA",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV MA_ALU RA_T9; FIRE COP","MV MA_ALU BUS_IB; FIRE COP"],depends_on:["SELA","SELB"],fire_name:["svg_p:text3463"],draw_data:[["svg_p:path3249","svg_p:path3161","svg_p:path3165"],["svg_p:path3279"]],draw_name:[[],["svg_p:path3423"]]};poc_signals.MB={name:"MB",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV MB_ALU RB_T10; FIRE COP","MV MB_ALU REG_PC; FIRE COP"],depends_on:["SELA","SELB"],fire_name:["svg_p:text3465"],draw_data:[["svg_p:path3281","svg_p:path3171","svg_p:path3169"],["svg_p:path3283"]],draw_name:[[],["svg_p:path3425","svg_p:path3427"]]};poc_signals.COP={name:"COP",visible:true,type:"L",value:0,default_value:0,nbits:"5",forbidden:true,behavior:["NOP_ALU; UPDATE_NZVC","AND ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","OR ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","NOT ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","XOR ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","SRL ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","SRA ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","SL ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","RR ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","RL ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","ADD ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","SUB ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","MUL ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","DIV ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","MOD ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","LUI ALU_T6 MA_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","ADDFOUR ALU_T6 MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","ADDONE ALU_T6 MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","SUBFOUR ALU_T6 MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","SUBONE ALU_T6 MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","FADD ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","FSUB ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","FMUL ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","FDIV ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","FMOD ALU_T6 MA_ALU MB_ALU; UPDATE_NZVC; FIRE_IFSET T6 1; FIRE_IFSET M7 1","NOP_ALU","NOP_ALU","NOP_ALU","NOP_ALU","NOP_ALU","NOP_ALU","NOP_ALU"],depends_on:["SELCOP"],fire_name:["svg_p:text3303"],draw_data:[["svg_p:path3237","svg_p:path3239","svg_p:path3261-8","svg_p:path3321","svg_p:path3901-6","svg_p:path3317-9"]],draw_name:[["svg_p:path3009","svg_p:path3301"]]};poc_signals.SELA={name:"SELA",visible:true,type:"L",value:0,default_value:0,nbits:"6",behavior:["FIRE_IFCHANGED MRA SELA; RESET_CHANGED SELA"],depends_on:["RA"],fire_name:["svg_cu:text3164"],draw_data:[[]],draw_name:[[]]};poc_signals.SELB={name:"SELB",visible:true,type:"L",value:0,default_value:0,nbits:"6",behavior:["FIRE_IFCHANGED MRB SELB; RESET_CHANGED SELB"],depends_on:["RB"],fire_name:["svg_cu:text3168"],draw_data:[[]],draw_name:[[]]};poc_signals.SELC={name:"SELC",visible:true,type:"L",value:0,default_value:0,nbits:"6",behavior:["FIRE_IFCHANGED MRC SELC; RESET_CHANGED SELC"],depends_on:["RC"],fire_name:["svg_cu:text3172"],draw_data:[[]],draw_name:[[]]};poc_signals.SELCOP={name:"SELCOP",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["FIRE_IFCHANGED MC SELCOP; RESET_CHANGED SELCOP"],depends_on:["COP"],fire_name:["svg_cu:text3312"],draw_data:[[]],draw_name:[[]]};poc_signals.EXCODE={name:"EXCODE",visible:true,type:"L",value:0,default_value:0,nbits:"4",behavior:["FIRE T11"],fire_name:["svg_cu:text3312-6"],draw_data:[[]],draw_name:[[]]};poc_signals.RA={name:"RA",visible:true,type:"L",value:0,default_value:0,nbits:"6",forbidden:true,behavior:["GET RA_T9 BR RA; FIRE_IFSET T9 1; FIRE_IFSET MA 0"],depends_on:["SELA"],fire_name:["svg_p:text3107"],draw_data:[[]],draw_name:[["svg_p:path3109"]]};poc_signals.RB={name:"RB",visible:true,type:"L",value:0,default_value:0,nbits:"6",forbidden:true,behavior:["GET RB_T10 BR RB; FIRE_IFSET T10 1; FIRE_IFSET MB 0"],depends_on:["SELB"],fire_name:["svg_p:text3123"],draw_data:[[]],draw_name:[["svg_p:path3113"]]};poc_signals.RC={name:"RC",visible:true,type:"L",value:0,default_value:0,nbits:"6",forbidden:true,behavior:["FIRE LC"],depends_on:["SELC"],fire_name:["svg_p:text3125"],draw_data:[[]],draw_name:[["svg_p:path3117"]]};poc_signals.LC={name:"LC",visible:true,type:"E",value:0,default_value:0,nbits:"1",behavior:["NOP","SET BR RC BUS_IB"],fire_name:["svg_p:text3127"],draw_data:[["svg_p:path3153","svg_p:path3151","svg_p:path3129"]],draw_name:[["svg_p:path3121"]]};poc_signals.SE={name:"SE",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBITS SELEC_T3 0 REG_RT1 OFFSET SIZE 0 SE; FIRE T3","MBITS SELEC_T3 0 REG_RT1 OFFSET SIZE 0 SE; FIRE T3"],depends_on:["T3"],fire_name:["svg_p:text3593"],draw_data:[[]],draw_name:[["svg_p:path3591","svg_p:path3447-7-7"]]};poc_signals.SIZE={name:"SIZE",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["MBITS SELEC_T3 0 REG_RT1 OFFSET SIZE 0 SE; FIRE T3"],depends_on:["T3"],fire_name:["svg_p:text3363"],draw_data:[[]],draw_name:[["svg_p:path3355"]]};poc_signals.OFFSET={name:"OFFSET",visible:true,type:"L",value:0,default_value:0,nbits:"5",behavior:["MBITS SELEC_T3 0 REG_RT1 OFFSET SIZE 0 SE; FIRE T3"],depends_on:["T3"],fire_name:["svg_p:text3707"],draw_data:[[]],draw_name:[["svg_p:path3359"]]};poc_signals.MC={name:"MC",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MBIT COP REG_IR 0 5; FIRE_IFCHANGED COP MC","CP_FIELD COP REG_MICROINS/SELCOP; FIRE_IFCHANGED COP MC"],depends_on:["SELCOP"],fire_name:["svg_cu:text3322","svg_cu:text3172-1-5"],draw_data:[["svg_cu:path3320","svg_cu:path3142"],["svg_cu:path3318","svg_cu:path3502-6","svg_cu:path3232-6"]],draw_name:[[],["svg_cu:path3306"]]};poc_signals.MRA={name:"MRA",visible:true,type:"L",value:0,default_value:0,nbits:"1",verbal:["Copy from IR[SelA] into RA. ","Copy SelA into RA. "],behavior:["MBIT_SN RA REG_IR REG_MICROINS/SELA 5; FIRE RA;","CP_FIELD RA REG_MICROINS/SELA; FIRE RA;"],depends_on:["SELA"],fire_name:["svg_cu:text3222"],draw_data:[["svg_cu:path3494","svg_cu:path3492","svg_cu:path3490","svg_cu:path3142b","svg_cu:path3188","svg_cu:path3190","svg_cu:path3192","svg_cu:path3194","svg_cu:path3276","svg_cu:path3290","svg_cu:path3260"],["svg_cu:path3270","svg_cu:path3258","svg_cu:path3260","svg_cu:path3294","svg_cu:path3288","svg_cu:path3280"]],draw_name:[[],["svg_cu:path3220"]]};poc_signals.MRB={name:"MRB",visible:true,type:"L",value:0,default_value:0,nbits:"1",verbal:["Copy from IR[SelB] into RB. ","Copy SelB into RB. "],behavior:["MBIT_SN RB REG_IR REG_MICROINS/SELB 5; FIRE RB;","CP_FIELD RB REG_MICROINS/SELB; FIRE RB;"],depends_on:["SELB"],fire_name:["svg_cu:text3242"],draw_data:[["svg_cu:path3196","svg_cu:path3278","svg_cu:path3292"],["svg_cu:path3282","svg_cu:path3258-4","svg_cu:path3278","svg_cu:path3196"]],draw_name:[[],["svg_cu:path3240"]]};poc_signals.MRC={name:"MRC",visible:true,type:"L",value:0,default_value:0,nbits:"1",verbal:["Copy from IR[SelC] into RC. ","Copy SelC into RC. "],behavior:["MBIT_SN RC REG_IR REG_MICROINS/SELC 5; FIRE RC;","CP_FIELD RC REG_MICROINS/SELC; FIRE RC;"],depends_on:["SELC"],fire_name:["svg_cu:text3254"],draw_data:[["svg_cu:path3494","svg_cu:path3492","svg_cu:path3490","svg_cu:path3142b","svg_cu:path3188","svg_cu:path3190","svg_cu:path3192","svg_cu:path3194","svg_cu:path3276","svg_cu:path3290","svg_cu:path3232","svg_cu:path3292"],["svg_cu:path3300","svg_cu:path3294","svg_cu:path3292","svg_cu:path3288","svg_cu:path3232"]],draw_name:[[],["svg_cu:path3252"]]};poc_signals.IOR={name:"IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MOVE_BITS SCR_IOR 0 1 IOR; FIRE SCR_IOR; MOVE_BITS IO_IOR 0 1 IOR; FIRE IO_IOR; MOVE_BITS KBD_IOR 0 1 IOR; FIRE KBD_IOR"],fire_name:[],draw_data:[[],["svg_p:path3733","svg_p:path3491","svg_p:text3715"]],draw_name:[[],[]]};poc_signals.IOW={name:"IOW",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MOVE_BITS SCR_IOW 0 1 IOW; FIRE SCR_IOW; MOVE_BITS IO_IOW 0 1 IOW; FIRE IO_IOW"],fire_name:[],draw_data:[[],["svg_p:path3735","svg_p:path3491","svg_p:text3717"]],draw_name:[[],[]]};poc_signals.TEST_C={name:"TEST_C",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_C VAL_ZERO; FIRE M7","MV FLAG_C VAL_ONE; FIRE M7"],depends_on:["SELCOP"],fire_name:["svg_p:text3701-3"],draw_data:[["svg_p:text3701-3"]],draw_name:[[]]};poc_signals.TEST_V={name:"TEST_V",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_V VAL_ZERO; FIRE M7","MV FLAG_V VAL_ONE; FIRE M7"],depends_on:["SELCOP"],fire_name:["svg_p:text3701-3-1"],draw_data:[["svg_p:text3701-3-1"]],draw_name:[[]]};poc_signals.TEST_N={name:"TEST_N",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_N VAL_ZERO; FIRE M7","MV FLAG_N VAL_ONE; FIRE M7"],depends_on:["SELCOP"],fire_name:["svg_p:text3701-3-2"],draw_data:[["svg_p:text3701-3-2"]],draw_name:[[]]};poc_signals.TEST_Z={name:"TEST_Z",visible:true,type:"L",value:0,default_value:0,nbits:"1",forbidden:true,behavior:["MV FLAG_Z VAL_ZERO; FIRE M7","MV FLAG_Z VAL_ONE; FIRE M7"],depends_on:["SELCOP"],fire_name:["svg_p:text3701-3-5"],draw_data:[["svg_p:text3701-3-5"]],draw_name:[[]]};poc_signals.TEST_I={name:"TEST_I",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV FLAG_I VAL_ZERO; FIRE M7","MV FLAG_I VAL_ONE; FIRE M7"],depends_on:["CLK"],fire_name:["svg_cu:text3440"],draw_data:[["svg_cu:text3440"]],draw_name:[[]]};poc_signals.TEST_U={name:"TEST_U",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["MV FLAG_U VAL_ZERO; FIRE M7","MV FLAG_U VAL_ONE; FIRE M7"],depends_on:["CLK"],fire_name:["svg_cu:text3442"],draw_data:[["svg_cu:text3442"]],draw_name:[[]]};poc_signals.TEST_INTV={name:"TEST_INTV",visible:true,type:"L",value:0,default_value:0,nbits:"8",forbidden:true,behavior:["MBIT INTV TEST_INTV 0 32"],depends_on:["INT"],fire_name:["svg_p:tspan4225"],draw_data:[["svg_p:path3749"]],draw_name:[[]]};poc_behaviors.NOP={nparameters:1,operation:function(a){},verbal:function(a){return""}};poc_behaviors.NOP_ALU={nparameters:1,operation:function(a){poc_internal_states.alu_flags.flag_n=0;poc_internal_states.alu_flags.flag_z=0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(a){return"Reset ALU flags. "}};poc_behaviors.MV={nparameters:3,types:["X","X"],operation:function(a){sim_elto_org=get_reference(a[2]);sim_elto_dst=get_reference(a[1]);newval=get_value(sim_elto_org);set_value(sim_elto_dst,newval)},verbal:function(c){var d=get_reference(c[2]);var e=get_value(d);var a=get_cfg("verbal_verbose");if(a!=="short"){return"Copy from "+show_verbal(c[2])+" to "+show_verbal(c[1])+" value "+show_value(e)+". "}return show_verbal(c[1])+" = "+show_verbal(c[2])+" ("+show_value(e)+"). "}};poc_behaviors.LOAD={nparameters:3,types:["X","X"],operation:function(a){sim_elto_org=get_reference(a[2]);sim_elto_dst=get_reference(a[1]);newval=get_value(sim_elto_org);set_value(sim_elto_dst,newval)},verbal:function(c){var d=get_reference(c[2]);var e=get_value(d);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Load from "+show_verbal(c[2])+" to "+show_verbal(c[1])+" value "+show_value(e)+". "}return show_verbal(c[1])+" = "+show_value(e)+" ( "+show_verbal(c[2])+"). "}};poc_behaviors.CP_FIELD={nparameters:3,types:["X","X"],operation:function(a){r=a[2].split("/");sim_elto_org=get_reference(r[0]);newval=get_value(sim_elto_org);newval=newval[r[1]];if(typeof newval!="undefined"){sim_elto_dst=get_reference(a[1]);set_value(sim_elto_dst,newval)}},verbal:function(c){var e=c[2].split("/");var d=get_reference(e[0]);var f=get_value(d);f=f[e[1]];if(typeof f=="undefined"){return""}var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy from Field "+e[1]+" of "+show_verbal(e[0])+" to "+show_verbal(c[1])+" value "+show_value(f)+". "}return show_verbal(c[1])+" = "+show_verbal(e[0])+"."+e[1]+" ("+show_value(f)+"). "}};poc_behaviors.NOT_ES={nparameters:3,types:["S","E"],operation:function(a){set_value(poc_signals[a[1]],Math.abs(get_value(poc_states[a[2]])-1))},verbal:function(c){var d=Math.abs(get_value(poc_states[c[2]])-1);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Set "+show_verbal(c[1])+" with value "+show_value(d)+" (Logical NOT of "+c[2]+"). "}return show_verbal(c[1])+" = "+show_value(d)+" (Logical NOT "+c[2]+"). "}};poc_behaviors.GET={nparameters:4,types:["E","E","S"],operation:function(a){set_value(poc_states[a[1]],get_value(poc_states[a[2]][poc_signals[a[3]].value]))},verbal:function(c){var d=get_value(poc_states[c[2]][poc_signals[c[3]].value]);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Set "+show_verbal(c[1])+" with value "+show_value(d)+" (Register File "+c[3]+"). "}return show_verbal(c[1])+" = "+show_value(d)+" (Register File "+c[3]+"). "}};poc_behaviors.SET={nparameters:4,types:["E","S","E"],operation:function(a){set_value(poc_states[a[1]][poc_signals[a[2]].value],get_value(poc_states[a[3]]))},verbal:function(e){var f=get_value(poc_states[e[3]]);var d=poc_states[e[1]][poc_signals[e[2]].value];var c=d.name;if(typeof d.verbal!="undefined"){c=d.verbal}var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy to "+c+" the value "+show_value(f)+". "}return c+" = "+show_value(f)+". "}};poc_behaviors.AND={nparameters:4,types:["E","E","E"],operation:function(c){var a=get_value(poc_states[c[2]])&get_value(poc_states[c[3]]);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=get_value(poc_states[d[2]])&get_value(poc_states[d[3]]);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU AND with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (AND). "}};poc_behaviors.OR={nparameters:4,types:["E","E","E"],operation:function(c){var a=get_value(poc_states[c[2]])|get_value(poc_states[c[3]]);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=get_value(poc_states[d[2]])|get_value(poc_states[d[3]]);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU OR with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (OR). "}};poc_behaviors.NOT={nparameters:3,types:["E","E"],operation:function(c){var a=~(get_value(poc_states[c[2]]));set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=~(get_value(poc_states[d[2]]));var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU NOT with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (NOT). "}};poc_behaviors.XOR={nparameters:4,types:["E","E","E"],operation:function(c){var a=get_value(poc_states[c[2]])^get_value(poc_states[c[3]]);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=get_value(poc_states[d[2]])^get_value(poc_states[d[3]]);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU XOR with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (XOR). "}};poc_behaviors.SRL={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(poc_states[c[2]]))>>>1;set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(poc_states[d[2]]))>>>1;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Shift Right Logical with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (SRL). "}};poc_behaviors.SRA={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(poc_states[c[2]]))>>1;set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(poc_states[d[2]]))>>1;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Shift Right Arithmetic with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (SRA). "}};poc_behaviors.SL={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(poc_states[c[2]]))<<1;set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(poc_states[d[2]]))<<1;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Shift Left with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (SL). "}};poc_behaviors.RR={nparameters:3,types:["E","E"],operation:function(c){var a=((get_value(poc_states[c[2]]))>>>1)|(((get_value(poc_states[c[2]]))&1)<<31);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=((get_value(poc_states[d[2]]))>>>1)|(((get_value(poc_states[d[2]]))&1)<<31);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Right Rotation with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (RR). "}};poc_behaviors.RL={nparameters:3,types:["E","E"],operation:function(c){var a=((get_value(poc_states[c[2]]))<<1)|(((get_value(poc_states[c[2]]))&2147483648)>>>31);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=((get_value(poc_states[d[2]]))<<1)|(((get_value(poc_states[d[2]]))&2147483648)>>>31);var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Left Rotation with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (LR). "}};poc_behaviors.ADD={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e+d;set_value(poc_states[f[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=(e>>>31)&&(d>>>31);poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(g){var f=get_value(poc_states[g[2]])<<0;var d=get_value(poc_states[g[3]])<<0;var c=f+d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU ADD with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (ADD). "}};poc_behaviors.SUB={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e-d;set_value(poc_states[f[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=(e>>>31)&&(d>>>31);poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(g){var f=get_value(poc_states[g[2]])<<0;var d=get_value(poc_states[g[3]])<<0;var c=f-d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU SUB with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (SUB). "}};poc_behaviors.MUL={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e*d;set_value(poc_states[f[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=0;poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(g){var f=get_value(poc_states[g[2]])<<0;var d=get_value(poc_states[g[3]])<<0;var c=f*d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU MUL with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (MUL). "}};poc_behaviors.DIV={nparameters:4,types:["E","E","E"],operation:function(f){var e=(get_value(poc_states[f[2]])<<0);var d=(get_value(poc_states[f[3]])<<0);if(0==d){set_value(poc_states[f[1]],0);poc_internal_states.alu_flags.flag_n=0;poc_internal_states.alu_flags.flag_z=1;poc_internal_states.alu_flags.flag_v=1;poc_internal_states.alu_flags.flag_c=0;return}var c=Math.floor(e/d);set_value(poc_states[f[1]],c);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(g){var f=get_value(poc_states[g[2]])<<0;var d=get_value(poc_states[g[3]])<<0;if(0==d){return"ALU DIV zero by zero (oops!). "}var c=Math.floor(f/d);var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU DIV with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (DIV). "}};poc_behaviors.MOD={nparameters:4,types:["E","E","E"],operation:function(c){var a=(get_value(poc_states[c[2]])<<0)%(get_value(poc_states[c[3]])<<0);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(g){var f=get_value(poc_states[g[2]])<<0;var d=get_value(poc_states[g[3]])<<0;if(0==d){return"ALU MOD zero by zero (oops!). "}var c=f%d;var e=get_cfg("verbal_verbose");if(e!=="math"){return"ALU MOD with result "+show_value(c)+". "}return"ALU output = "+show_value(c)+" (MOD). "}};poc_behaviors.LUI={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(poc_states[c[2]]))<<16;set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(d){var a=(get_value(poc_states[d[2]]))<<16;var c=get_cfg("verbal_verbose");if(c!=="math"){return"ALU Load Upper Immediate with result "+show_value(a)+". "}return"ALU output = "+show_value(a)+" (LUI). "}};poc_behaviors.ADDFOUR={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d+4;set_value(poc_states[e[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=(d>>>31)&&(b>>>31);poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(d>=0)&&(b>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(d<0)&&(b<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d+4;return"ALU ADD 4 with result "+show_value(c)+". "}};poc_behaviors.ADDONE={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d+1;set_value(poc_states[e[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=(d>>>31)&&(b>>>31);poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(d>=0)&&(b>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(d<0)&&(b<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d+1;return"ALU ADD 1 with result "+show_value(c)+". "}};poc_behaviors.SUBFOUR={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d-4;set_value(poc_states[e[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=(d>>>31)&&(b>>>31);poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(d>=0)&&(b>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(d<0)&&(b<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d-4;return"ALU SUB 4 with result "+show_value(c)+". "}};poc_behaviors.SUBONE={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d-1;set_value(poc_states[e[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=(d>>>31)&&(b>>>31);poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(d>=0)&&(b>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(d<0)&&(b<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d-1;return"ALU SUB 1 with result "+show_value(c)+". "}};poc_behaviors.FADD={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)+d.toFixed(2);set_value(poc_states[f[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=0;poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)+d.toFixed(2);return"ALU Float ADD with result "+c+". "}};poc_behaviors.FSUB={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)-d.toFixed(2);set_value(poc_states[f[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=0;poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)-d.toFixed(2);return"ALU Float SUB with result "+c+". "}};poc_behaviors.FMUL={nparameters:4,types:["E","E","E"],operation:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)*d.toFixed(2);set_value(poc_states[f[1]],c>>>0);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_c=0;poc_internal_states.alu_flags.flag_v=0;if((c<0)&&(e>=0)&&(d>=0)){poc_internal_states.alu_flags.flag_v=1}if((c>=0)&&(e<0)&&(d<0)){poc_internal_states.alu_flags.flag_v=1}},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)*d.toFixed(2);return"ALU Float MUL with result "+c+". "}};poc_behaviors.FDIV={nparameters:4,types:["E","E","E"],operation:function(f){var e=(get_value(poc_states[f[2]])<<0);var d=(get_value(poc_states[f[3]])<<0);if(0==d){set_value(poc_states[f[1]],0);poc_internal_states.alu_flags.flag_n=0;poc_internal_states.alu_flags.flag_z=1;poc_internal_states.alu_flags.flag_v=1;poc_internal_states.alu_flags.flag_c=0;return}var c=Math.floor(e/d);set_value(poc_states[f[1]],c);poc_internal_states.alu_flags.flag_n=(c<0)?1:0;poc_internal_states.alu_flags.flag_z=(c==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)/d.toFixed(2);return"ALU Float DIV with result "+c+". "}};poc_behaviors.FMOD={nparameters:4,types:["E","E","E"],operation:function(c){var a=(get_value(poc_states[c[2]])<<0)%(get_value(poc_states[c[3]])<<0);set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var d=get_value(poc_states[f[3]])<<0;var c=e.toFixed(2)%d.toFixed(2);return"ALU Float MOD with result "+c+". "}};poc_behaviors.LUI={nparameters:3,types:["E","E"],operation:function(c){var a=(get_value(poc_states[c[2]]))<<16;set_value(poc_states[c[1]],a);poc_internal_states.alu_flags.flag_n=(a<0)?1:0;poc_internal_states.alu_flags.flag_z=(a==0)?1:0;poc_internal_states.alu_flags.flag_v=0;poc_internal_states.alu_flags.flag_c=0},verbal:function(c){var a=(get_value(poc_states[c[2]]))<<16;return"ALU Load Upper Immediate with result "+show_value(a)+". "}};poc_behaviors.PLUS1={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d+1;set_value(poc_states[e[1]],c>>>0)},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var c=e+1;var d=get_cfg("verbal_verbose");if(d!=="math"){return"Add one to "+show_verbal(f[2])+" and copy to "+show_verbal(f[1])+" with result "+show_value(c)+". "}return show_verbal(f[1])+" = "+show_verbal(f[2])+" + 1 ("+show_value(c)+"). "}};poc_behaviors.PLUS4={nparameters:3,types:["E","E"],operation:function(e){var d=get_value(poc_states[e[2]])<<0;var c=d+4;set_value(poc_states[e[1]],c>>>0)},verbal:function(f){var e=get_value(poc_states[f[2]])<<0;var c=e+4;var d=get_cfg("verbal_verbose");if(d!=="math"){return"Add four to "+show_verbal(f[2])+" and copy to "+show_verbal(f[1])+" with result "+show_value(c)+". "}return show_verbal(f[1])+" = "+show_verbal(f[2])+" + 4 ("+show_value(c)+"). "}};poc_behaviors.MBIT={nparameters:5,types:["X","X","I","I"],operation:function(a){var g=get_reference(a[1]);var f=get_reference(a[2]);var h=parseInt(a[3]);var d=parseInt(a[4]);var e=get_value(f).toString(2);var c="00000000000000000000000000000000".substring(0,32-e.length)+e;c=c.substr(31-(h+d-1),d);set_value(g,parseInt(c,2))},verbal:function(h){var e=get_reference(h[1]);var k=get_reference(h[2]);var c=parseInt(h[3]);var l=parseInt(h[4]);var g=get_value(k).toString(2);var f="00000000000000000000000000000000".substring(0,32-g.length)+g;f=f.substr(31-(c+l-1),l);var d=parseInt(f,2);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Copy from "+show_verbal(h[2])+" to "+show_verbal(h[1])+" value "+show_value(d)+" (copied "+l+" bits from bit "+c+"). "}return show_verbal(h[1])+" = "+show_verbal(h[2])+" ("+show_value(d)+", "+l+" bits from bit "+c+"). "}};poc_behaviors.MBIT_SN={nparameters:5,types:["S","E","E","I"],operation:function(c){var g=0;var f=c[3].split("/");if(1==f.length){g=get_value(poc_states[c[3]])}else{if(typeof poc_states[f[0]].value[f[1]]!="undefined"){g=poc_states[f[0]].value[f[1]]}else{if(typeof poc_signals[f[1]].default_value!="undefined"){g=poc_signals[f[1]].default_value}else{if(typeof poc_states[f[1]].default_value!="undefined"){g=poc_states[f[1]].default_value}else{alert("WARN: undefined state/field pair -> "+f[0]+"/"+f[1])}}}}var h=parseInt(c[4]);var e=get_value(poc_states[c[2]]).toString(2);var d="00000000000000000000000000000000".substring(0,32-e.length)+e;var a=d.substr(31-(g+h-1),h);set_value(poc_signals[c[1]],parseInt(a,2))},verbal:function(a){return""}};poc_behaviors.SBIT={nparameters:4,types:["X","X","I"],operation:function(a){sim_elto_org=get_reference(a[2]);sim_elto_dst=get_reference(a[1]);var c=(sim_elto_dst.value&~(1<<a[3]))|(sim_elto_org.value<<a[3]);set_value(sim_elto_dst,(c>>>0))},verbal:function(c){sim_elto_org=get_reference(c[2]);sim_elto_dst=get_reference(c[1]);var a=get_cfg("verbal_verbose");if(a!=="math"){return"Set bit "+show_verbal(c[3])+" of "+show_verbal(c[1])+" to value "+sim_elto_org.value+". "}return show_verbal(c[1])+"."+show_verbal(c[3])+" = "+sim_elto_org.value+". "}};poc_behaviors.MBITS={nparameters:8,types:["E","I","E","S","S","I","S"],operation:function(c){var g=parseInt(poc_signals[c[4]].value);var e=parseInt(poc_signals[c[5]].value);var f=get_value(poc_states[c[3]]).toString(2);var d=("00000000000000000000000000000000".substring(0,32-f.length)+f);d=d.substr(31-(g+e-1),e);var a="00000000000000000000000000000000".substring(0,32-d.length)+d;if(("1"==poc_signals[c[7]].value)&&("1"==d.substr(0,1))){a="11111111111111111111111111111111".substring(0,32-d.length)+d}set_value(poc_states[c[1]],parseInt(a,2))},verbal:function(d){var h=parseInt(poc_signals[d[4]].value);var f=parseInt(poc_signals[d[5]].value);var g=get_value(poc_states[d[3]]).toString(2);var e=("00000000000000000000000000000000".substring(0,32-g.length)+g);e=e.substr(31-(h+f-1),f);var c="00000000000000000000000000000000".substring(0,32-e.length)+e;if(("1"==poc_signals[d[7]].value)&&("1"==e.substr(0,1))){c="11111111111111111111111111111111".substring(0,32-e.length)+e}g=parseInt(c,2);var a=get_cfg("verbal_verbose");if(a!=="math"){return" Copy from "+show_verbal(d[3])+" to "+show_verbal(d[1])+" value "+show_value(g)+" (copied "+f+" bits from bit "+h+"). "}return show_verbal(d[1])+" = "+show_verbal(d[3])+" ("+show_value(g)+", "+f+" bits from bit "+h+"). "}};poc_behaviors.BSEL={nparameters:6,types:["E","I","I","E","I"],operation:function(e){var k=parseInt(e[2]);var h=parseInt(e[5]);var a=parseInt(e[3]);var g=get_value(poc_states[e[4]]).toString(2);var f="00000000000000000000000000000000".substring(0,32-g.length)+g;f=f.substr(31-(h+a)+1,a);var d="00000000000000000000000000000000".substring(0,32-f.length)+f;var c="00000000000000000000000000000000".substr(0,k);d=d+c;set_value(poc_states[e[1]],parseInt(d,2))},verbal:function(m){var g=parseInt(m[2]);var k=parseInt(m[3]);var a=parseInt(m[5]);var l=get_value(poc_states[m[4]]).toString(2);var h="00000000000000000000000000000000".substring(0,32-l.length)+l;h=h.substr(31-(a+k)+1,k);var f="00000000000000000000000000000000".substring(0,32-h.length)+h;var e="00000000000000000000000000000000".substr(0,g);f=f+e;var d=parseInt(f,2);var c=get_cfg("verbal_verbose");if(c!=="math"){return"Copy from "+show_verbal(m[4])+" to "+show_verbal(m[1])+" value "+show_value(d)+" (copied "+k+" bits, from bit "+a+" of "+m[4]+" to bit "+g+" of "+m[1]+"). "}return show_verbal(m[1])+" = "+show_verbal(m[4])+" ("+show_value(d)+", "+k+" bits, from bit "+a+" of "+m[4]+" to bit "+g+" of "+m[1]+"). "}};poc_behaviors.EXT_SIG={nparameters:3,types:["E","I"],operation:function(d){var f=get_value(poc_states[d[1]]).toString(2);var e=("00000000000000000000000000000000".substring(0,32-f.length)+f);var c=e.substr(31-d[2],31);var a=c;if("1"==e[31-d[2]]){a="11111111111111111111111111111111".substring(0,32-c.length)+a}set_value(poc_states[d[1]],parseInt(a,2))},verbal:function(e){var g=get_value(poc_states[e[1]]).toString(2);var f=("00000000000000000000000000000000".substring(0,32-g.length)+g);var d=f.substr(31-e[2],31);var c=d;if("1"==f[31-e[2]]){c="11111111111111111111111111111111".substring(0,32-d.length)+c}var a=parseInt(c,2);return"Sign Extension with value "+show_value(a)+". "}};poc_behaviors.MOVE_BITS={nparameters:5,types:["S","I","I","S"],operation:function(h){var d=parseInt(h[2]);var a=0;var f=parseInt(h[3]);var g=poc_signals[h[4]].value.toString(2);g=("00000000000000000000000000000000".substring(0,32-g.length)+g);g=g.substr(31-a-f+1,f);var e=poc_signals[h[1]].value.toString(2);e=("00000000000000000000000000000000".substring(0,32-e.length)+e);var l=e.substr(0,32-(d+f));var k=e.substr(31-d+1,d);var c=l+g+k;set_value(poc_signals[h[1]],parseInt(c,2))},verbal:function(a){return""}};poc_behaviors.MOVE_BITSE={nparameters:6,types:["S","I","I","E","I"],operation:function(h){var d=parseInt(h[2]);var a=parseInt(h[5]);var f=parseInt(h[3]);var g=get_value(poc_states[h[4]]).toString(2);g=("00000000000000000000000000000000".substring(0,32-g.length)+g);g=g.substr(31-a-f+1,f);var e=poc_signals[h[1]].value.toString(2);e=("00000000000000000000000000000000".substring(0,32-e.length)+e);var l=e.substr(0,32-(d+f));var k=e.substr(31-d+1,d);var c=l+g+k;set_value(poc_signals[h[1]],parseInt(c,2))},verbal:function(a){return""}};poc_behaviors.DECO={nparameters:1,operation:function(c){poc_states.INEX.value=0;var f=decode_instruction(poc_internal_states.FIRMWARE,poc_ctrl_states.ir,get_value(poc_states.REG_IR));if(null==f.oinstruction){alert("ERROR: undefined instruction code in firmware (co:"+f.op_code.toString(2)+", cop:"+f.cop_code.toString(2)+")");poc_states.ROM_MUXA.value=0;poc_states.INEX.value=1;return -1}var e=f.op_code<<6;if(typeof f.oinstruction.cop!="undefined"){e=e+f.cop_code}if(typeof poc_internal_states.ROM[e]=="undefined"){alert("ERROR: undefined rom address "+e+" in firmware");poc_states.ROM_MUXA.value=0;return -1}poc_states.ROM_MUXA.value=poc_internal_states.ROM[e];var g=get_value(poc_states.DECO_INS);set_value(poc_states.DECO_INS,g+1);var a=get_value(poc_states.REG_PC)-4;var d=get_deco_from_pc(a);set_value(poc_states.REG_IR_DECO,d);show_dbg_ir(get_value(poc_states.REG_IR_DECO))},verbal:function(a){return"Decode instruction. "}};poc_behaviors.FIRE={nparameters:2,types:["S"],operation:function(a){if(poc_internal_states.fire_stack.indexOf(a[1])!=-1){return}poc_internal_states.fire_stack.push(a[1]);update_draw(poc_signals[a[1]],poc_signals[a[1]].value);if("L"==poc_signals[a[1]].type){update_state(a[1])}poc_internal_states.fire_stack.pop(a[1]);check_buses(a[1])},verbal:function(a){return""}};poc_behaviors.FIRE_IFSET={nparameters:3,types:["S","I"],operation:function(a){if(get_value(poc_signals[a[1]])!=parseInt(a[2])){return}poc_behaviors.FIRE.operation(a)},verbal:function(a){return""}};poc_behaviors.FIRE_IFCHANGED={nparameters:3,types:["S","X"],operation:function(a){sim_elto=get_reference(a[2]);if(sim_elto.changed==false){return}poc_behaviors.FIRE.operation(a)},verbal:function(a){return""}};poc_behaviors.RESET_CHANGED={nparameters:2,types:["X"],operation:function(a){sim_elto=get_reference(a[1]);sim_elto.changed=false},verbal:function(a){return""}};poc_behaviors.CLOCK={nparameters:1,operation:function(s_expr){var val=get_value(poc_states.CLK);set_value(poc_states.CLK,val+1);for(var i=0;i<jit_fire_order.length;i++){fn_updateE_now(jit_fire_order[i])}var new_maddr=get_value(poc_states.MUXA_MICROADDR);set_value(poc_states.REG_MICROADDR,new_maddr);if(typeof poc_internal_states.MC[new_maddr]!="undefined"){var new_mins=Object.create(poc_internal_states.MC[new_maddr])}else{var new_mins=Object.create(poc_states.REG_MICROINS.default_value)}poc_states.REG_MICROINS.value=new_mins;for(var key in poc_signals){if(typeof new_mins[key]!="undefined"){set_value(poc_signals[key],new_mins[key])}else{set_value(poc_signals[key],poc_signals[key].default_value)}}for(var i=0;i<jit_fire_order.length;i++){fn_updateL_now(jit_fire_order[i])}if(typeof new_mins.NATIVE_JIT!="undefined"){new_mins.NATIVE_JIT()}else{if(typeof new_mins.NATIVE!="undefined"){eval(new_mins.NATIVE)}}},verbal:function(a){return""}};poc_behaviors.CPU_RESET={nparameters:1,operation:function(a){for(var c in poc_states){reset_value(poc_states[c])}for(var c in poc_signals){reset_value(poc_signals[c])}},verbal:function(a){return"Reset CPU. "}};poc_behaviors.UPDATEDPC={nparameters:1,operation:function(a){show_asmdbg_pc()},verbal:function(a){return""}};poc_behaviors.UPDATE_NZVC={nparameters:1,operation:function(a){set_value(simhw_sim_state("FLAG_N"),poc_internal_states.alu_flags.flag_n);set_value(simhw_sim_state("FLAG_Z"),poc_internal_states.alu_flags.flag_z);set_value(simhw_sim_state("FLAG_V"),poc_internal_states.alu_flags.flag_v);set_value(simhw_sim_state("FLAG_C"),poc_internal_states.alu_flags.flag_c);set_value(simhw_sim_signal("TEST_N"),poc_internal_states.alu_flags.flag_n);set_value(simhw_sim_signal("TEST_Z"),poc_internal_states.alu_flags.flag_z);set_value(simhw_sim_signal("TEST_V"),poc_internal_states.alu_flags.flag_v);set_value(simhw_sim_signal("TEST_C"),poc_internal_states.alu_flags.flag_c);update_draw(poc_signals.TEST_N,poc_signals.TEST_N.value);update_draw(poc_signals.TEST_Z,poc_signals.TEST_Z.value);update_draw(poc_signals.TEST_V,poc_signals.TEST_V.value);update_draw(poc_signals.TEST_C,poc_signals.TEST_C.value)},verbal:function(a){return"Update flags N-Z-V-C."}};poc_components.MEMORY={name:"MEMORY",version:"1",abilities:["MEMORY"],details_name:["MEMORY","MEMORY_CONFIG"],details_fire:[["svg_p:text3001"],[]],write_state:function(d){if(typeof d.MEMORY=="undefined"){d.MEMORY={}}var c=0;var e=0;for(var a in poc_internal_states.MP){e=parseInt(poc_internal_states.MP[a]);if(e!=0){c=parseInt(a).toString(16);d.MEMORY["0x"+c]={type:"memory",default_value:0,id:"0x"+c,op:"=",value:"0x"+e.toString(16)}}}return d},read_state:function(d,a){if(typeof d.MEMORY=="undefined"){d.MEMORY={}}var c=parseInt(a.id).toString(16);var e=parseInt(a.value).toString(16);if("MEMORY"==a.type.toUpperCase().trim()){d.MEMORY["0x"+c]={type:"memory",default_value:0,id:"0x"+c,op:a.condition,value:"0x"+e};return true}return false},get_state:function(c){var a=parseInt(c);if(typeof poc_internal_states.MP[a]!="undefined"){return"0x"+parseInt(poc_internal_states.MP[a]).toString(16)}return null},get_value:function(a){return(simhw_internalState_get("MP",a)>>>0)},set_value:function(a,c){simhw_internalState_set("MP",a,c);return c}};poc_internal_states.segments={};poc_internal_states.MP={};poc_internal_states.MP_wc=0;poc_signals.MRDY={name:"MRDY",visible:true,type:"L",value:0,default_value:0,nbits:"1",depends_on:["CLK"],behavior:["FIRE_IFCHANGED MRDY C","FIRE_IFCHANGED MRDY C"],fire_name:["svg_p:tspan3916"],draw_data:[[],["svg_p:path3895","svg_p:path3541"]],draw_name:[[],[]]};poc_signals.R={name:"R",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MEM_READ BUS_AB BUS_DB BW MRDY CLK; FIRE M1; FIRE MRDY"],fire_name:["svg_p:text3533-5-2"],draw_data:[[],["svg_p:path3557","svg_p:path3571"]],draw_name:[[],[]]};poc_signals.W={name:"W",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","MEM_WRITE BUS_AB BUS_DB BW MRDY CLK; FIRE M1; FIRE MRDY"],fire_name:["svg_p:text3533-5-08"],draw_data:[[],["svg_p:path3559","svg_p:path3575","svg_p:path3447-7"]],draw_name:[[],[]]};poc_signals.BW={name:"BW",verbal:["Access to one byte from memory. ","Access to two bytes from memory. ","Access to three bytes from memory. ","Access to a word from memory. "],visible:true,type:"L",value:0,default_value:0,nbits:"2",behavior:["FIRE R; FIRE W","FIRE R; FIRE W","FIRE R; FIRE W","FIRE R; FIRE W"],fire_name:["svg_p:text3533-5-2-8"],draw_data:[["svg_p:path3557-0"]],draw_name:[[],[]]};poc_behaviors.MEM_READ={nparameters:6,types:["E","E","S","S","E"],operation:function(c){var a=poc_states[c[1]].value;var e=poc_states[c[2]].value;var k=poc_signals[c[3]].value;var g=get_value(poc_states[c[5]].value);poc_signals[c[4]].value=0;var h=get_var(poc_internal_states.MP_wc);if((typeof poc_events.mem[g-1]!="undefined")&&(poc_events.mem[g-1]>0)){h=poc_events.mem[g-1]-1}poc_events.mem[g]=h;if(h>0){return}var f=0;var d=a&4294967292;if(typeof poc_internal_states.MP[d]!="undefined"){f=poc_internal_states.MP[d]}switch(k){case 0:if(0==(a&3)){e=(f&255)}if(1==(a&3)){e=(f&65280)>>8}if(2==(a&3)){e=(f&16711680)>>16}if(3==(a&3)){e=(f&4278190080)>>24}break;case 1:if(0==(a&3)){e=(f&65535)}if(1==(a&3)){e=(f&65535)}if(2==(a&3)){e=(f&4294901760)>>16}if(3==(a&3)){e=(f&4294901760)>>16}break;case 2:if(0==(a&3)){e=(f&16777215)}if(1==(a&3)){e=(f&4294967040)}break;case 3:e=f;break}poc_states[c[2]].value=(e>>>0);poc_signals[c[4]].value=1;show_main_memory(poc_internal_states.MP,d,false,false)},verbal:function(c){var e="";var a=poc_states[c[1]].value;var d=poc_states[c[2]].value;var h=poc_signals[c[3]].value;var g=get_value(poc_states[c[5]].value);switch(h){case 0:bw_type="byte";break;case 1:bw_type="half";break;case 2:bw_type="three bytes";break;case 3:bw_type="word";break}var f=0;if(typeof poc_internal_states.MP[a]!="undefined"){f=poc_internal_states.MP[a]}e="Try to read a "+bw_type+" from memory at address 0x"+a.toString(16)+" with value "+f.toString(16)+". ";return e}};poc_behaviors.MEM_WRITE={nparameters:6,types:["E","E","S","S","E"],operation:function(c){var a=poc_states[c[1]].value;var e=poc_states[c[2]].value;var k=poc_signals[c[3]].value;var g=get_value(poc_states[c[5]].value);poc_signals[c[4]].value=0;var h=get_var(poc_internal_states.MP_wc);if((typeof poc_events.mem[g-1]!="undefined")&&(poc_events.mem[g-1]>0)){h=poc_events.mem[g-1]-1}poc_events.mem[g]=h;if(h>0){return}var f=0;var d=a&4294967292;if(typeof poc_internal_states.MP[d]!="undefined"){f=poc_internal_states.MP[d]}switch(k){case 0:if(0==(a&3)){f=(f&4294967040)|(e&255)}if(1==(a&3)){f=(f&4294902015)|((e&255)<<8)}if(2==(a&3)){f=(f&4278255615)|((e&255)<<16)}if(3==(a&3)){f=(f&16777215)|((e&255)<<24)}break;case 1:if(0==(a&3)){f=(f&4294901760)|(e&65535)}if(1==(a&3)){f=(f&4294901760)|(e&65535)}if(2==(a&3)){f=(f&65535)|((e&65535)<<16)}if(3==(a&3)){f=(f&65535)|((e&65535)<<16)}break;case 2:if(0==(a&3)){f=(f&4278190080)|(e&16777215)}if(1==(a&3)){f=(f&255)|(e&4294967040)}break;case 3:f=e;break}poc_internal_states.MP[d]=(f>>>0);poc_signals[c[4]].value=1;show_main_memory(poc_internal_states.MP,d,true,true)},verbal:function(c){var e="";var a=poc_states[c[1]].value;var d=poc_states[c[2]].value;var h=poc_signals[c[3]].value;var g=get_value(poc_states[c[5]].value);switch(h){case 0:bw_type="byte";break;case 1:bw_type="half";break;case 2:bw_type="three bytes";break;case 3:bw_type="word";break}var f=0;if(typeof poc_internal_states.MP[a]!="undefined"){f=poc_internal_states.MP[a]}e="Try to write a "+bw_type+" to memory at address 0x"+a.toString(16)+" with value "+f.toString(16)+". ";return e}};poc_behaviors.MEMORY_RESET={nparameters:1,operation:function(a){poc_events.mem={}},verbal:function(a){return"Reset the memory (all values will be zeroes). "}};poc_components.IO={name:"IO",version:"1",abilities:["IO_TIMER"],details_name:["IO_STATS","IO_CONFIG"],details_fire:[["svg_p:text3775"],[]],write_state:function(a){return a},read_state:function(c,a){return false},get_state:function(a){return null},get_value:function(a){var c=simhw_internalState_get("io_hash",a);var d=(get_value(simhw_sim_state(c))>>>0);set_value(simhw_sim_state("BUS_AB"),a);set_value(simhw_sim_signal("IOR"),1);compute_behavior("FIRE IOR");d=get_value(simhw_sim_state("BUS_DB"));return d},set_value:function(a,d){var c=simhw_internalState_get("io_hash",a);set_value(simhw_sim_state(c),d);set_value(simhw_sim_state("BUS_AB"),a);set_value(simhw_sim_state("BUS_DB"),d);set_value(simhw_sim_signal("IOW"),1);compute_behavior("FIRE IOW");return d}};poc_internal_states.io_int_factory=[];poc_internal_states.io_int_factory[0]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[1]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[2]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[3]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[4]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[5]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[6]={period:0,probability:0.5,accumulated:0,active:false};poc_internal_states.io_int_factory[7]={period:0,probability:0.5,accumulated:0,active:false};var IOSR_ID=4352;var IOCR_ID=4356;var IODR_ID=4360;poc_internal_states.io_hash[IOSR_ID]="IOSR";poc_internal_states.io_hash[IOCR_ID]="IOCR";poc_internal_states.io_hash[IODR_ID]="IODR";poc_states.IOSR={name:"IOSR",verbal:"IO State Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.IOCR={name:"IOCR",verbal:"IO Control Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.IODR={name:"IODR",verbal:"IO Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_signals.INT={name:"INT",visible:true,type:"L",value:0,default_value:0,nbits:"1",depends_on:["CLK"],behavior:["FIRE C","FIRE C"],fire_name:["svg_p:tspan4199"],draw_data:[[],["svg_p:path3809"]],draw_name:[[],[]]};poc_signals.IORDY={name:"IORDY",visible:true,type:"L",value:0,default_value:0,nbits:"1",depends_on:["CLK"],behavior:["FIRE_IFCHANGED IORDY C","FIRE_IFCHANGED IORDY C"],fire_name:["svg_p:tspan4089","svg_p:path3793","svg_p:tspan4089"],draw_data:[[],["svg_p:path3897"]],draw_name:[[],[]]};poc_signals.IO_IOR={name:"IO_IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","IO_IOR BUS_AB BUS_DB IOSR IOCR IODR CLK; FIRE M1"],fire_name:["svg_p:tspan4173"],draw_data:[[],["svg_p:path3795","svg_p:path3733"]],draw_name:[[],[]]};poc_signals.IO_IOW={name:"IO_IOW",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","IO_IOW BUS_AB BUS_DB IOSR IOCR IODR CLK; FIRE M1"],fire_name:["svg_p:text3785-0-6-0-5-5"],draw_data:[[],["svg_p:path3805","svg_p:path3733"]],draw_name:[[],[]]};poc_signals.IO_IE={name:"IO_IE",visible:true,type:"L",value:1,default_value:1,nbits:"1",behavior:["NOP","IO_CHK_I CLK INT INTV; FIRE C"],fire_name:[],draw_data:[[],[]],draw_name:[[],[]]};poc_signals.INTA={name:"INTA",visible:true,type:"L",value:1,default_value:0,nbits:"1",behavior:["NOP","INTA CLK INT INTA BUS_DB INTV; FIRE M1; FIRE C"],fire_name:["svg_p:text3785-0-6-0-5-5-1-1"],draw_data:[[],["svg_p:path3807","svg_p:path3737"]],draw_name:[[],[]]};poc_behaviors.IO_IOR={nparameters:7,types:["E","E","E","E","E","E"],operation:function(a){var f=get_value(poc_states[a[1]]);var c=get_value(poc_states[a[3]]);var d=get_value(poc_states[a[4]]);var e=get_value(poc_states[a[5]]);if(f==IOSR_ID){set_value(poc_states[a[2]],c)}if(f==IOCR_ID){set_value(poc_states[a[2]],d)}if(f==IODR_ID){set_value(poc_states[a[2]],e)}},verbal:function(a){var e="";var g=get_value(poc_states[a[1]]);var c=get_value(poc_states[a[3]]);var d=get_value(poc_states[a[4]]);var f=get_value(poc_states[a[5]]);if(g==IOSR_ID){e="I/O device read at IOSR of value "+c+". "}if(g==IOCR_ID){e="I/O device read at IOCR of value "+d+". "}if(g==IODR_ID){e="I/O device read at IODR of value "+f+". "}return e}};poc_behaviors.IO_IOW={nparameters:7,types:["E","E","E","E","E","E"],operation:function(c){var f=get_value(poc_states[c[1]]);var d=get_value(poc_states[c[2]]);if((f!=IOSR_ID)&&(f!=IOCR_ID)&&(f!=IODR_ID)){return}if(f==IOSR_ID){set_value(poc_states[c[3]],d)}if(f==IOCR_ID){set_value(poc_states[c[4]],d)}if(f==IODR_ID){set_value(poc_states[c[5]],d)}var a=get_value(poc_states[c[4]]);var e=get_value(poc_states[c[5]]);if((a<0)||(a>7)){return}set_var(poc_internal_states.io_int_factory[a].period,e);set_var(poc_internal_states.io_int_factory[a].probability,1);if(0==e){set_var(poc_internal_states.io_int_factory[a].probability,0)}},verbal:function(a){var d="";var e=get_value(poc_states[a[1]]);var c=get_value(poc_states[a[2]]);if(e==IOSR_ID){d="I/O device write at IOSR with value "+c+". "}if(e==IOCR_ID){d="I/O device write at IOCR with value "+c+". "}if(e==IODR_ID){d="I/O device write at IODR with value "+c+". "}return d}};poc_behaviors.IO_CHK_I={nparameters:4,types:["E","S","E"],operation:function(a){var d=get_value(poc_states[a[1]]);for(var c=poc_internal_states.io_int_factory.length-1;c>=0;c--){if(get_var(poc_internal_states.io_int_factory[c].period)==0){continue}if(get_var(poc_internal_states.io_int_factory[c].active)==true){set_value(poc_signals[a[2]],1);set_value(poc_states[a[3]],c)}if((d%get_var(poc_internal_states.io_int_factory[c].period))==0){if(Math.random()>get_var(poc_internal_states.io_int_factory[c].probability)){continue}set_var(poc_internal_states.io_int_factory[c].accumulated,get_var(poc_internal_states.io_int_factory[c].accumulated)+1);set_var(poc_internal_states.io_int_factory[c].active,true);if(typeof poc_events.io[d]=="undefined"){poc_events.io[d]=[]}poc_events.io[d].push(c);set_value(poc_signals[a[2]],1);set_value(poc_states[a[3]],c)}}},verbal:function(a){return"Check I/O Interruption. "}};poc_behaviors.INTA={nparameters:6,types:["E","S","S","E","E"],operation:function(a){var d=get_value(poc_states[a[1]]);if(typeof poc_events.io[d]!="undefined"){set_value(poc_states[a[4]],poc_events.io[d][0]);return}set_value(poc_signals[a[2]],0);set_value(poc_states[a[5]],0);for(var c=0;c<poc_internal_states.io_int_factory.length;c++){if(get_var(poc_internal_states.io_int_factory[c].active)){set_value(poc_signals[a[2]],0);set_value(poc_states[a[5]],c);set_value(poc_states[a[4]],c);if(typeof poc_events.io[d]=="undefined"){poc_events.io[d]=[]}poc_events.io[d].push(c);set_var(poc_internal_states.io_int_factory[c].active,false);break}}},verbal:function(a){return"Signal an interruption ACK. "}};poc_behaviors.IO_RESET={nparameters:1,operation:function(a){poc_events.io={};for(var c=0;c<poc_internal_states.io_int_factory.length;c++){set_var(poc_internal_states.io_int_factory[c].accumulated,0);set_var(poc_internal_states.io_int_factory[c].active,false)}},verbal:function(a){return"Reset the I/O device. "}};poc_components.KBD={name:"KBD",version:"1",abilities:["KEYBOARD"],details_name:["KEYBOARD"],details_fire:[["svg_p:text3829"]],write_state:function(a){return a},read_state:function(c,a){return false},get_state:function(a){return null},get_value:function(a){return poc_internal_states.keyboard_content},set_value:function(a,c){poc_internal_states.keyboard_content=c;return c}};var KBDR_ID=256;var KBSR_ID=260;poc_internal_states.io_hash[KBDR_ID]="KBDR";poc_internal_states.io_hash[KBSR_ID]="KBSR";poc_internal_states.keyboard_content="";poc_states.KBDR={name:"KBDR",verbal:"Keyboard Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.KBSR={name:"KBSR",verbal:"Keyboard Status Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_signals.KBD_IOR={name:"IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","KBD_IOR BUS_AB BUS_DB KBDR KBSR CLK; FIRE M1"],fire_name:["svg_p:tspan4057"],draw_data:[[],["svg_p:path3863","svg_p:path3847"]],draw_name:[[],[]]};poc_behaviors.KBD_IOR={nparameters:6,types:["E","E","E","E","E"],operation:function(d){var f=get_value(poc_states[d[1]]);var e=get_value(poc_states[d[5]]);if((f!=KBDR_ID)&&(f!=KBSR_ID)){return}if(typeof poc_events.keybd[e]!="undefined"){if(f==KBDR_ID){set_value(poc_states[d[2]],poc_events.keybd[e])}if(f==KBSR_ID){set_value(poc_states[d[2]],1)}return}if(get_value(poc_states[d[4]])==0){var c=get_keyboard_content();if(c.length!=0){var a=c.substr(1,c.length-1);set_keyboard_content(a);set_value(poc_states[d[4]],1);set_value(poc_states[d[3]],c[0].charCodeAt(0))}}if(get_value(poc_states[d[4]])==1){poc_events.keybd[e]=get_value(poc_states[d[3]])}if(f==KBSR_ID){set_value(poc_states[d[2]],get_value(poc_states[d[4]]))}if(f==KBDR_ID){if(get_value(poc_states[d[4]])==1){set_value(poc_states[d[2]],get_value(poc_states[d[3]]))}set_value(poc_states[d[4]],0)}},verbal:function(a){var c="";var e=get_value(poc_states[a[1]]);var d=get_value(poc_states[a[5]]);if(e==KBDR_ID){c="Read the screen data: "+poc_states[a[2]]+". "}if(e==KBSR_ID){c="Read the screen state: "+poc_states[a[2]]+". "}return c}};poc_behaviors.KBD_RESET={nparameters:1,operation:function(a){poc_events.keybd={}},verbal:function(a){return"Reset the keyboard content. "}};poc_components.SCREEN={name:"SCREEN",version:"1",abilities:["SCREEN"],details_name:["SCREEN"],details_fire:[["svg_p:text3845"]],write_state:function(c){if(typeof c.SCREEN=="undefined"){c.SCREEN={}}var e=poc_internal_states.screen_content;var d=e.trim().split("\n");for(var a=0;a<d.length;a++){value=d[a];if(value!=""){c.SCREEN[a]={type:"screen",default_value:"",id:a,op:"==",value:value}}}return c},read_state:function(c,a){if(typeof c.SCREEN=="undefined"){c.SCREEN={}}if("SCREEN"==a.type.toUpperCase().trim()){c.SCREEN[a.id]={type:"screen",default_value:"",id:a.id,op:a.condition,value:a.value};return true}return false},get_state:function(a){var e=poc_internal_states.screen_content;var d=e.trim().split("\n");var c=parseInt(a);if(typeof d[c]!="undefined"){return d[c]}return null},get_value:function(a){return poc_internal_states.screen_content},set_value:function(a,c){poc_internal_states.screen_content=c;return c}};var DDR_ID=4096;var DSR_ID=4100;poc_internal_states.io_hash[DDR_ID]="DDR";poc_internal_states.io_hash[DSR_ID]="DSR";poc_internal_states.screen_content="";poc_states.DDR={name:"DDR",verbal:"Display Data Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_states.DSR={name:"DSR",verbal:"Display State Register",visible:false,nbits:"32",value:0,default_value:0,draw_data:[]};poc_signals.SCR_IOR={name:"IOR",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","SCR_IOR BUS_AB BUS_DB DDR DSR CLK"],fire_name:["svg_p:tspan4004"],draw_data:[[],["svg_p:path3871","svg_p:path3857"]],draw_name:[[],[]]};poc_signals.SCR_IOW={name:"IOW",visible:true,type:"L",value:0,default_value:0,nbits:"1",behavior:["NOP","SCR_IOW BUS_AB BUS_DB DDR DSR CLK"],fire_name:["svg_p:tspan4006"],draw_data:[[],["svg_p:path3873","svg_p:path3857"]],draw_name:[[],[]]};poc_behaviors.SCR_IOR={nparameters:6,types:["E","E","E","E","E"],operation:function(c){var e=get_value(poc_states[c[1]]);var d=get_value(poc_states[c[3]]);var a=get_value(poc_states[c[4]]);if(e==DDR_ID){set_value(poc_states[c[2]],d)}if(e==DSR_ID){set_value(poc_states[c[2]],a)}},verbal:function(c){var e="";var f=get_value(poc_states[c[1]]);var d=get_value(poc_states[c[3]]);var a=get_value(poc_states[c[4]]);if(f==DDR_ID){e="Try to read from the screen the DDR value "+d+". "}if(f==DDR_ID){e="Try to read into the screen the DSR value "+a+". "}return e}};poc_behaviors.SCR_IOW={nparameters:6,types:["E","E","E","E","E"],operation:function(d){var k=get_value(poc_states[d[1]]);var f=get_value(poc_states[d[2]]);var h=get_value(poc_states[d[5]]);var g=String.fromCharCode(f);if(k!=DDR_ID){return}if(g==String.fromCharCode(7)){timbre.reset();var e=T("sin",{freq:440,mul:0.5});var c=T("sin",{freq:660,mul:0.5});T("perc",{r:500},e,c).on("ended",function(){this.pause()}).bang().play()}else{var a=get_screen_content();if(typeof poc_events.screen[h]!="undefined"){a=a.substr(0,a.length-1)}set_screen_content(a+String.fromCharCode(f))}set_value(poc_states[d[3]],f);set_value(poc_states[d[4]],1);poc_events.screen[h]=f},verbal:function(a){var e="";var g=get_value(poc_states[a[1]]);var c=get_value(poc_states[a[2]]);var f=get_value(poc_states[a[5]]);var d=String.fromCharCode(c);if(g==DDR_ID){e="Try to write into the screen the code "+d+" at clock cycle "+f+". "}return e}};poc_behaviors.SCREEN_RESET={nparameters:1,operation:function(a){poc_events.screen={}},verbal:function(a){return"Reset the screen content. "}};function nextToken(d){var a="";var g="";var f="";var e="";while(("# \t\n\r".indexOf(d.text[d.t])!=-1)&&(d.t<d.text.length)){if(d.text[d.t]=="#"){g=d.t+1;while(("\n".indexOf(d.text[d.t])==-1)&&(d.t<d.text.length)){d.t++}f=d.t;a=d.text.substring(g,f);a=a.trim();d.comments.push(a)}if(d.text[d.t]=="\n"){d.line++;d.newlines.push(d.t)}d.t++}if(("{},()=:".indexOf(d.text[d.t])!=-1)&&(d.t<d.text.length)){a=d.text[d.t];d.t++;d.tokens.push(a);d.token_types.push("TOKEN");d.i=d.tokens.length-1;return d}if('"'==d.text[d.t]){g=d.t;d.t++;while(('"'.indexOf(d.text[d.t])==-1)&&(d.t<d.text.length)){if("\\".indexOf(d.text[d.t])!=-1){d.t++}d.t++}d.t++;f=d.t;e="STRING"}else{if("'"==d.text[d.t]){g=d.t;d.t++;while(("'".indexOf(d.text[d.t])==-1)&&(d.t<d.text.length)){if("\\".indexOf(d.text[d.t])!=-1){d.t++}d.t++}d.t++;f=d.t;e="STRING"}else{g=d.t;while(("{},()=:# \t\n\r".indexOf(d.text[d.t])==-1)&&(d.t<d.text.length)){d.t++}f=d.t;e="TOKEN"}}var c=d.t;while(("# \t\n\r".indexOf(d.text[c])!=-1)&&(c<d.text.length)){if(d.text[c]=="#"){while(("\n".indexOf(d.text[c])==-1)&&(c<d.text.length)){c++}}c++}if(":"==d.text[c]){e="TAG";d.t=c+1}a=d.text.substring(g,f);a=a.trim();if("TAG"==e){a=a+":"}d.tokens.push(a);d.token_types.push(e);d.i=d.tokens.length-1;return d}function getToken(a){return a.tokens[a.i]}function getTokenType(a){return a.token_types[a.i]}function isToken(a,c){return(getToken(a)==c.trim())}function langError(f,g){var a=0;if(f.newlines.length>0){a=f.newlines[f.newlines.length-1]+1}var d=0;if(f.newlines.length>1){d=f.newlines[f.newlines.length-2]+1}var c=d;var h=Math.min(f.t-1,a+32);for(;(typeof f.text[h+1]!="undefined")&&(f.text[h+1]!="\n");h++){}var k=h+2;h++;for(;(typeof f.text[h+1]!="undefined")&&(f.text[h+1]!="\n");h++){}h++;f.error="<pre style='background-color: inherit !important'>...\n";for(var e=c;e<h;e++){if(e==d){f.error+=" "+(f.line-1)+"\t"}if(e==a){f.error+="*"+f.line+"\t"}if(e==k){f.error+=" "+(f.line+1)+"\t"}if(typeof f.text[e]!="undefined"){f.error+=f.text[e]}else{f.error+="&lt;EOF&gt;"}}f.error+="\n...\n</pre>(*) Problem around line "+f.line+":<br>"+g+".<br>";if(typeof ga!=="undefined"){ga("send","event","compile","compile.error","compile.error."+g)}return f}function getLabelContext(a){return{t:a.t,line:a.line,newlines:a.newlines.slice()}}function setLabelContext(c,a){c.t=a.t;c.line=a.line;c.newlines=a.newlines}function getComments(a){return a.comments.join("\n")}function resetComments(a){a.comments=[]}function nextNative(c){var f=c.t;var d=c.t;var e=1;while((c.t<c.text.length)&&(e!=0)){if("{"==c.text[c.t]){e++}if("}"==c.text[c.t]){e--}c.t++}d=c.t-1;var a=c.text.substring(f,d);c.tokens.push(a);c.token_types.push("NATIVE");c.i=c.tokens.length-1;return c}function read_microprg(a){var e=[];var o=[];resetComments(a);if(!isToken(a,"{")){return langError(a,"Expected '{' not found")}nextToken(a);while(!isToken(a,"}")){var l={};if(!isToken(a,"(")){var m=getToken(a);m=m.substring(0,m.length-1);if("TAG"!=getTokenType(a)){return langError(a,"Expected '<label>:' not found but '"+m+"'.")}for(var d in a.etiquetas){if(a.etiquetas[d]==m){return langError(a,"Label is repeated: "+getToken(a))}}a.etiquetas[a.contadorMC]=m;if(m.match("[a-zA-Z_0-9]*")[0]!=m){return langError(a,"Label format is not valid for '"+getToken(a)+"'")}nextToken(a)}if(!isToken(a,"(")){return langError(a,"Expected '(' not found")}nextToken(a);while(!isToken(a,")")){var g=getToken(a).toUpperCase();if(g=="MADDR"){nextToken(a);if(!isToken(a,"=")){return langError(a,"Expected '=' not found")}nextToken(a);var n={};n.nombre=getToken(a);n.cycle=e.length;n.index=a.i;n.instruction=a.instrucciones.length;var f=0;for(var h in a.etiquetas){if(isToken(a,a.etiquetas[h])){l[g]=h.toString();f=1}}if(f==0){a.labelsNotFound.push(n)}nextToken(a);if(isToken(a,",")){nextToken(a)}continue}if(typeof simhw_sim_signal(g)=="undefined"){return langError(a,"Signal does not exists: '"+g+"'")}if(typeof simhw_sim_signal(g).forbidden!="undefined"){return langError(a,"Signal '"+g+"' cannot be used directly, please use the Control Unit signals instead.")}l[g]=1;nextToken(a);if(isToken(a,"=")){nextToken(a);l[g]=parseInt(getToken(a),2);if(getToken(a).match("[01]*")[0]!=getToken(a)){return langError(a,"Incorrect binary format: "+getToken(a))}if(l[g]>=Math.pow(2,simhw_sim_signal(g).nbits)){return langError(a,"Value out of range: "+getToken(a))}nextToken(a)}if(isToken(a,",")){nextToken(a)}}var c=getComments(a);o.push(c);resetComments(a);e.push(l);a.contadorMC++;nextToken(a);if(isToken(a,",")){nextToken(a)}}if(e.length==0){return langError(a,"Empty microcode")}nextToken(a);return{microprograma:e,microcomments:o}}function read_native(c){var e=[];var a=[];if(!isToken(c,"{")){return langError(c,"Expected '{' not found")}nextNative(c);var d={};d.NATIVE=getToken(c);e.push(d);a.push("");nextToken(c);return{microprograma:e,microcomments:a}}function loadFirmware(text){var xr_info=simhw_sim_ctrlStates_get();var all_ones_co="1".repeat(xr_info.ir.default_eltos.co.length);var context={};context.line=1;context.error=null;context.i=0;context.contadorMC=0;context.etiquetas={};context.labelsNotFound=[];context.instrucciones=[];context.co_cop={};context.registers=[];context.text=text;context.tokens=[];context.token_types=[];context.t=0;context.newlines=[];context.pseudoInstructions=[];context.stackRegister=null;context.comments=[];nextToken(context);while(context.t<context.text.length){if(isToken(context,"registers")){nextToken(context);if(!isToken(context,"{")){return langError(context,"Expected '{' not found")}nextToken(context);while(!isToken(context,"}")){var nombre_reg=getToken(context);nextToken(context);if(!isToken(context,"=")){return langError(context,"Expected '=' not found")}nextToken(context);context.registers[nombre_reg]=getToken(context);nextToken(context);if(isToken(context,"(")){if(context.stackRegister!=null){return langError(context,"Duplicate definition of stack pointer")}nextToken(context);if(!isToken(context,"stack_pointer")){return langError(context,"Expected stack_pointer token not found")}context.stackRegister=nombre_reg;nextToken(context);if(!isToken(context,")")){return langError(context,"Expected ')' not found")}nextToken(context)}if(isToken(context,",")){nextToken(context)}}nextToken(context);continue}if(isToken(context,"pseudoinstructions")){nextToken(context);if(!isToken(context,"{")){return langError(context,"Expected '{' not found")}nextToken(context);while(!isToken(context,"}")){var pseudoInstructionAux={};var pseudoInitial={};pseudoInitial.signature="";pseudoInitial.name="";pseudoInitial.fields=[];pseudoInitial.name=getToken(context);pseudoInitial.signature=pseudoInitial.signature+getToken(context)+",";nextToken(context);while(!isToken(context,"{")){var pseudoFieldAux={};pseudoFieldAux.name=getToken(context);pseudoFieldAux.type=getToken(context).replace("num","inm");pseudoFieldAux.type=pseudoFieldAux.type.replace(/[_0-9]+$/,"");switch(pseudoFieldAux.type){case"reg":case"inm":case"addr":case"address":break;default:return langError(context,"Invalid parameter '"+pseudoFieldAux.type+"'. It only allows the following fields: reg, num, inm, addr, address")}pseudoInitial.fields.push(pseudoFieldAux);pseudoInitial.signature=pseudoInitial.signature+getToken(context)+",";nextToken(context);if(isToken(context,",")){nextToken(context)}}nextToken(context);pseudoInitial.signature=pseudoInitial.signature.substr(0,pseudoInitial.signature.length-1).replace(/num/g,"inm");pseudoInstructionAux.initial=pseudoInitial;var contPseudoFinish=0;var pseudoFinishAux={};pseudoFinishAux.signature="";var inStart=0;var cont=false;while(!isToken(context,"}")){if(inStart==0){for(i=0;i<context.instrucciones.length;i++){if(context.instrucciones[i].name==getToken(context)){cont=true;break}}if(!cont){return langError(context,"Undefined instruction '"+getToken(context)+"'")}}if(getToken(context)==";"){inStart=0}else{inStart++}pseudoFinishAux.signature=pseudoFinishAux.signature+getToken(context)+" ";nextToken(context)}pseudoInstructionAux.finish=pseudoFinishAux;pseudoInstructionAux.finish.signature=pseudoInstructionAux.finish.signature.replace(";","\n");context.pseudoInstructions.push(pseudoInstructionAux);nextToken(context)}nextToken(context);continue}if(isToken(context,"begin")){var instruccionAux={};instruccionAux.name=getToken(context);instruccionAux["mc-start"]=context.contadorMC;nextToken(context);if(isToken(context,",")){nextToken(context)}instruccionAux["native"]=false;if(isToken(context,"native")){instruccionAux["native"]=true;nextToken(context);if(isToken(context,",")){nextToken(context)}context.etiquetas[context.contadorMC]="fetch"}if(true==instruccionAux["native"]){var ret=read_native(context)}else{var ret=read_microprg(context)}if(typeof ret.error!="undefined"){return ret}instruccionAux.signature="begin";instruccionAux.signatureGlobal="begin";instruccionAux.signatureUser="begin";instruccionAux.signatureRaw="begin";instruccionAux.microcode=ret.microprograma;instruccionAux.microcomments=ret.microcomments;context.instrucciones.push(instruccionAux);context.contadorMC=context.contadorMC+9;continue}var instruccionAux={};instruccionAux.name=getToken(context);instruccionAux["mc-start"]=context.contadorMC;if(instruccionAux.name.match("[a-zA-Z_0-9]*")[0]!=instruccionAux.name){return langError(context,"Instruction name '"+instruccionAux.name+"' is not valid for [a-zA-Z_0-9]*")}var firma="";var firmaGlobal="";var firmaUsuario="";var numeroCampos=0;var campos=[];firma=getToken(context)+",";firmaUsuario=getToken(context)+" ";nextToken(context);while(isToken(context,",")){nextToken(context)}while(!isToken(context,"{")){while(isToken(context,",")){nextToken(context)}var plus_found=false;if(!isToken(context,",")&&!isToken(context,"(")&&!isToken(context,")")){var campoAux={};var auxValue=getToken(context);if(auxValue[auxValue.length-1]=="+"){auxValue=auxValue.substring(0,auxValue.length-1);plus_found=true}campoAux.name=auxValue;campos.push(campoAux);numeroCampos++;firma=firma+auxValue;firmaUsuario=firmaUsuario+auxValue;nextToken(context);if(numeroCampos>100){return langError(context,"more than 100 fields in a single instruction.")}if(auxValue=="co"){return langError(context,"instruction field has 'co' as name.")}if(auxValue=="nwords"){return langError(context,"instruction field has 'nwords' as name.")}}if(isToken(context,"(")){firma=firma+",(";if(plus_found){firmaUsuario=firmaUsuario+"+("}else{firmaUsuario=firmaUsuario+" ("}nextToken(context);if(!isToken(context,",")&&!isToken(context,"(")&&!isToken(context,")")){var campoAux={};campoAux.name=getToken(context);campos.push(campoAux);numeroCampos++;firma=firma+getToken(context);firmaUsuario=firmaUsuario+getToken(context);nextToken(context)}else{return langError(context,"'token' is missing after '(' on: "+context.co_cop[instruccionAux.co].signature)}if(isToken(context,")")){firma=firma+")";firmaUsuario=firmaUsuario+")";nextToken(context)}else{return langError(context,"')' is missing on: "+context.co_cop[instruccionAux.co].signature)}}firma=firma+",";firmaUsuario=firmaUsuario+" "}firma=firma.substr(0,firma.length-1);firma=firma.replace(/,,/g,",");firmaUsuario=firmaUsuario.substr(0,firmaUsuario.length-1);firmaUsuario=firmaUsuario.replace(/  /g," ");instruccionAux.signature=firma;instruccionAux.signatureGlobal=firma;instruccionAux.signatureUser=firmaUsuario;instruccionAux.signatureRaw=firmaUsuario;nextToken(context);if(!isToken(context,"co")){return langError(context,"Expected keyword 'co' not found")}nextToken(context);if(!isToken(context,"=")){return langError(context,"Expected '=' not found")}nextToken(context);instruccionAux.co=getToken(context);if((getToken(context).match("[01]*")[0]!=getToken(context))||(getToken(context).length!=xr_info.ir.default_eltos.co.length)){return langError(context,"Incorrect binary format on 'co': "+getToken(context))}if(instruccionAux.co!=all_ones_co){if((typeof context.co_cop[instruccionAux.co]!="undefined")&&(context.co_cop[instruccionAux.co].cop==null)){return langError(context,"'co' is already been used by: "+context.co_cop[instruccionAux.co].signature)}if(typeof context.co_cop[instruccionAux.co]=="undefined"){context.co_cop[instruccionAux.co]={};context.co_cop[instruccionAux.co].signature=instruccionAux.signature;context.co_cop[instruccionAux.co].cop=null}}nextToken(context);if(isToken(context,",")){nextToken(context)}if(isToken(context,"cop")){nextToken(context);if(!isToken(context,"=")){return langError(context,"Expected '=' not found")}nextToken(context);instruccionAux.cop=getToken(context);if((getToken(context).match("[01]*")[0]!=getToken(context))||(getToken(context).length!=xr_info.ir.default_eltos.cop.length)){return langError(context,"Incorrect binary format on 'cop': "+getToken(context))}if((context.co_cop[instruccionAux.co].cop!=null)&&(typeof context.co_cop[instruccionAux.co].cop[instruccionAux.cop]!="undefined")){return langError(context,"'co+cop' is already been used by: "+context.co_cop[instruccionAux.co].cop[instruccionAux.cop])}if(context.co_cop[instruccionAux.co].cop==null){context.co_cop[instruccionAux.co].cop={}}context.co_cop[instruccionAux.co].cop[instruccionAux.cop]=instruccionAux.signature;nextToken(context);if(isToken(context,",")){nextToken(context)}}if(!isToken(context,"nwords")){return langError(context,"Expected keyword 'nwords' not found")}nextToken(context);if(!isToken(context,"=")){return langError(context,"Expected '=' not found")}nextToken(context);instruccionAux.nwords=getToken(context);nextToken(context);if(isToken(context,",")){nextToken(context)}var camposInsertados=0;var overlapping={};while(camposInsertados<numeroCampos){var tmp_name=getToken(context);if(campos[camposInsertados]["name"]!=tmp_name){return langError(context,"Unexpected field found: '"+tmp_name+"'")}nextToken(context);if(!isToken(context,"=")){return langError(context,"Expected '=' not found")}nextToken(context);if(!isToken(context,"reg")&&!isToken(context,"inm")&&!isToken(context,"address")){return langError(context,"Incorrect type of field (reg, inm or address)")}campos[camposInsertados]["type"]=getToken(context);firma=firma.replace(","+campos[camposInsertados]["name"],","+campos[camposInsertados]["type"]);firma=firma.replace("("+campos[camposInsertados]["name"],"("+campos[camposInsertados]["type"]);firma=firma.replace(")"+campos[camposInsertados]["name"],")"+campos[camposInsertados]["type"]);firmaUsuario=firmaUsuario.replace(campos[camposInsertados]["name"],campos[camposInsertados]["type"]);instruccionAux.signature=firma;instruccionAux.signatureUser=firmaUsuario;firmaGlobal=firma.replace("address","num");firmaGlobal=firmaGlobal.replace("inm","num");instruccionAux.signatureGlobal=firmaGlobal;nextToken(context);if(!isToken(context,"(")){return langError(context,"Expected '(' not found")}nextToken(context);campos[camposInsertados]["startbit"]=getToken(context);var start=parseInt(campos[camposInsertados]["startbit"]);if(start>32*parseInt(instruccionAux.nwords)-1){return langError(context,"startbit out of range: "+getToken(context))}nextToken(context);if(!isToken(context,",")){return langError(context,"Expected ',' not found")}nextToken(context);campos[camposInsertados]["stopbit"]=getToken(context);var stop=parseInt(campos[camposInsertados]["stopbit"]);if(stop>32*parseInt(instruccionAux.nwords)){return langError(context,"stopbit out of range: "+getToken(context))}for(var i=stop;i<=start;i++){if(typeof overlapping[i]!="undefined"){return langError(context,"overlapping field: "+campos[camposInsertados]["name"])}overlapping[i]=1}nextToken(context);if(!isToken(context,")")){return langError(context,"Expected ')' not found")}nextToken(context);if(campos[camposInsertados]["type"]=="address"){if(getToken(context)!="abs"&&getToken(context)!="rel"){return langError(context,"Type of addressing incorrect (abs or rel)")}campos[camposInsertados]["address_type"]=getToken(context);nextToken(context)}if(isToken(context,",")){nextToken(context)}camposInsertados++}instruccionAux.fields=campos;instruccionAux["native"]=false;if(isToken(context,"native")){instruccionAux["native"]=true;nextToken(context);if(isToken(context,",")){nextToken(context)}}if(true==instruccionAux["native"]){var ret=read_native(context)}else{var ret=read_microprg(context)}if(typeof ret.error!="undefined"){return ret}instruccionAux.microcode=ret.microprograma;instruccionAux.microcomments=ret.microcomments;context.instrucciones.push(instruccionAux);context.contadorMC=context.contadorMC+9;if(!isToken(context,"}")){return langError(context,"Expected '}' not found")}nextToken(context)}if(context.stackRegister==null){return langError(context,"Stack pointer register was not defined")}var found=false;for(var i=0;i<context.instrucciones.length;i++){if(context.instrucciones[i].name=="begin"){for(var j=0;j<context.instrucciones[i].microcode.length;j++){if((typeof context.etiquetas[j]!="undefined")&&(context.etiquetas[j]=="fetch")){found=true}}if(found===false){return langError(context,"label 'fetch' not defined")}}}if(found===false){return langError(context,"'begin' not found")}var first_co=0;var last_co=Math.pow(2,6)-1;var label="";for(var i=0;i<context.instrucciones.length;i++){if((context.instrucciones[i].name!="begin")&&(context.instrucciones[i].co=="111111")){for(var j=first_co;j<last_co;j++){label=j.toString(2);label="000000".substring(0,6-label.length)+label;if(typeof context.co_cop[label]=="undefined"){break}}if(j>=last_co){return langError(context,"There is not enough 'co' codes available for instructions")}context.instrucciones[i].co=label;context.co_cop[label]={};context.co_cop[label].signature=context.instrucciones[i].signature;context.co_cop[label].cop=null;first_co=j}}var labelsFounded=0;if(context.labelsNotFound.length>0){for(var i=0;i<context.labelsNotFound.length;i++){for(var j in context.etiquetas){if(context.etiquetas[j]==context.labelsNotFound[i].nombre){context.instrucciones[context.labelsNotFound[i].instruction].microcode[context.labelsNotFound[i].cycle].MADDR=j;labelsFounded++}}if(labelsFounded==0){return langError(context,"MADDR label not found : "+context.labelsNotFound[i].nombre)}labelsFounded=0}}var mk_native="";for(var i=0;i<context.instrucciones.length;i++){var ins=context.instrucciones[i];if(false==ins["native"]){continue}for(var j=0;j<ins.microcode.length;j++){if(typeof ins.microcode[j].NATIVE!="undefined"){mk_native+="context.instrucciones["+i+']["microcode"]['+j+']["NATIVE_JIT"] =  function() {\n\t var fields = simcore_native_get_fields("'+ins.signatureRaw+'");\n'+ins.microcode[j].NATIVE+"\n};\n "}}}eval(mk_native);var fico=0;var ficop=0;context.cocop_hash={};for(var fi in context.instrucciones){if(context.instrucciones[fi].name=="begin"){continue}fico=context.instrucciones[fi].co;if(typeof context.cocop_hash[fico]=="undefined"){context.cocop_hash[fico]={}}if(typeof context.instrucciones[fi].cop=="undefined"){context.cocop_hash[fico].withcop=false;context.cocop_hash[fico].i=context.instrucciones[fi]}else{ficop=context.instrucciones[fi].cop;context.cocop_hash[fico].withcop=true;context.cocop_hash[fico][ficop]=context.instrucciones[fi]}}var ret={};ret.error=null;ret.firmware=context.instrucciones;ret.labels_firm=context.etiquetas;ret.mp={};ret.seg={};ret.registers=context.registers;ret.pseudoInstructions=context.pseudoInstructions;ret.stackRegister=context.stackRegister;ret.cocop_hash=context.cocop_hash;return ret}function saveFirmware(a){var f="";for(var e=0;e<a.firmware.length;e++){f+=a.firmware[e].signatureRaw;f+=" {\n";if(typeof a.firmware[e].co!="undefined"){f+="\tco="+a.firmware[e].co+",\n"}if(typeof a.firmware[e].cop!="undefined"){f+="\tcop="+a.firmware[e].cop+",\n"}if(typeof a.firmware[e].nwords!="undefined"){f+="\tnwords="+a.firmware[e].nwords+",\n"}if(typeof a.firmware[e].fields!="undefined"){if(a.firmware[e].fields.length>0){for(var d=0;d<a.firmware[e].fields.length;d++){f+="\t"+a.firmware[e].fields[d].name+" = "+a.firmware[e].fields[d].type;f+="("+a.firmware[e].fields[d].startbit+","+a.firmware[e].fields[d].stopbit+")";if(a.firmware[e].fields[d].type=="address"){f+=a.firmware[e].fields[d].address_type}f+=",\n"}}}if(typeof a.firmware[e].microcode!="undefined"){var l=a.firmware[e]["mc-start"];if(a.firmware[e].name!="begin"){f+="\t{"}for(var d=0;d<a.firmware[e].microcode.length;d++){if(""!=a.firmware[e].microcomments[d]){f+="\n\t\t# "+a.firmware[e].microcomments[d]}if(typeof a.labels_firm[l]!="undefined"){f+="\n"+a.labels_firm[l]+":\t"}else{f+="\n\t\t"}f+="(";var g=0;for(var c in a.firmware[e].microcode[d]){if("MADDR"==c){var h=a.firmware[e].microcode[d][c];if(typeof a.labels_firm[h]=="undefined"){f+=c+"="+h.toString(2)+", "}else{f+=c+"="+a.labels_firm[h]+", "}continue}f+=c+"="+a.firmware[e].microcode[d][c].toString(2)+", ";g=1}if(g==1){f=f.substr(0,f.length-2)}f+="),";l++}f=f.substr(0,f.length-1);if(a.firmware[e].name!="begin"){f+="\n\t}"}}f+="\n}\n\n"}if((typeof a.registers!="undefined")&&(a.registers.length>0)){f+="registers\n{\n";for(var e=0;e<a.registers.length;e++){if(a.stackRegister==e){f+="\t"+e+"="+a.registers[e]+" (stack_pointer),\n"}else{f+="\t"+e+"="+a.registers[e]+",\n"}}f=f.substr(0,f.length-2);f+="\n}\n"}return f}function decode_instruction(c,e,f){var a={oinstruction:null,op_code:0,cop_code:0};var d=f.toString(2);d="00000000000000000000000000000000".substring(0,32-d.length)+d;var g=d.substr(e.default_eltos.co.begin,e.default_eltos.co.length);a.op_code=parseInt(g,2);var h=d.substr(e.default_eltos.cop.begin,e.default_eltos.cop.length);a.cop_code=parseInt(h,2);if(false==c.cocop_hash[g].withcop){a.oinstruction=c.cocop_hash[g].i}else{a.oinstruction=c.cocop_hash[g][h]}return a}function decode_ram(){var g="\n";var d=simhw_sim_ctrlStates_get().ir;var e=simhw_internalState("FIRMWARE");var c=simhw_internalState("MP");for(var a in c){var f=c[a].toString(2);f="00000000000000000000000000000000".substring(0,32-f.length)+f;g+="0x"+parseInt(a).toString(16)+":"+decode_instruction(e,d,f).oinstruction+"\n"}return g}BYTE_LENGTH=8;WORD_BYTES=4;WORD_LENGTH=WORD_BYTES*BYTE_LENGTH;directives={};directives[".kdata"]={name:".kdata",kindof:"segment",size:0};directives[".ktext"]={name:".ktext",kindof:"segment",size:0};directives[".data"]={name:".data",kindof:"segment",size:0};directives[".text"]={name:".text",kindof:"segment",size:0};directives[".byte"]={name:".byte",kindof:"datatype",size:1};directives[".half"]={name:".half",kindof:"datatype",size:2};directives[".word"]={name:".word",kindof:"datatype",size:4};directives[".space"]={name:".space",kindof:"datatype",size:1};directives[".ascii"]={name:".ascii",kindof:"datatype",size:1};directives[".asciiz"]={name:".asciiz",kindof:"datatype",size:1};directives[".align"]={name:".align",kindof:"datatype",size:0};function get_datatype_size(a){if(typeof directives[a]=="undefined"){console.log("data type: "+a+" is not defined!!!\n");return 0}return directives[a].size}function isTokenKindOf(c,a){if(typeof directives[c]=="undefined"){return false}return(directives[c].kindof==a)}function is_directive(a){return(typeof directives[a]!="undefined")}function is_directive_segment(a){return isTokenKindOf(a,"segment")}function is_directive_datatype(a){return isTokenKindOf(a,"datatype")}function isDecimal(c){if(c.length>1&&c[0]=="0"){return false}if(!isNaN(parseFloat(c))&&isFinite(c)){var a=parseInt(c);if(typeof c=="string"&&c.includes(".")){alert("Truncating conversion has occurred: "+c+" became "+a)}return a}return false}function isOctal(d){if(d.substring(0,1)=="0"){var c=d.substring(1).replace(/\b0+/g,"");var a=parseInt(c,8);return(a.toString(8)===c)?a:false}return false}function isHex(d){if(d.substring(0,2).toLowerCase()=="0x"){var c=d.substring(2).toLowerCase().replace(/\b0+/g,"");if(c==""){c="0"}var a=parseInt(c,16);return(a.toString(16)===c)?a:false}return false}function isChar(d){var c=treatControlSequences(d);if(true==c.error){return false}var a=c.string;if(a[0]=="'"&&a[2]=="'"){return a.charCodeAt(1)}return false}function decimal2binary(d,c){var a=d.toString(2);if(a.length>WORD_LENGTH){return[a,c-a.length]}a=(d>>>0).toString(2);if(d>=0){return[a,c-a.length]}a="1"+a.replace(/^[1]+/g,"");if(a.length>c){return[a,c-a.length]}a="1".repeat(c-a.length)+a;return[a,c-a.length]}function isValidTag(a){if(!(isDecimal(a[0])===false)){return false}var c=/[^a-z,_\d]/i;return !(c.test(a))}function sum_array(c){return c.reduce(function(e,d){return e+d},0)}function get_candidate(g,a){var e=false;var f={};var h={};for(c=0;c<g.length;c++){if(g[c]){f[c]=a[c].nwords;h[a[c].signature]=0}}if(Object.keys(h).length==1){var d=false;for(var c in f){if(d==false){d=f[c];e=c}else{if(d==f[c]){e=false}else{if(d>f[c]){d=f[c];e=c}}}}}return e?parseInt(e):e}function reset_assembly(a){return"0".repeat(WORD_LENGTH*a)}function assembly_replacement(g,d,e,c,a){var f=g.substring(0,g.length-e+a);g=f+d+g.substring(g.length-c);return g}function assembly_co_cop(e,c,d){var a=simhw_sim_ctrlStates_get();if(c!==false){e=assembly_replacement(e,c,WORD_LENGTH,WORD_LENGTH-6,0)}if(d!==false){e=assembly_replacement(e,d,a.ir.default_eltos.cop.length,0,0)}return e}function writememory_and_reset(c,d,a){if(d.byteWord>=WORD_BYTES){c["0x"+d.seg_ptr.toString(16)]=d.machineCode;d.seg_ptr=d.seg_ptr+WORD_BYTES;d.byteWord=0;d.machineCode=reset_assembly(a)}}function is_end_of_file(a){return""===getToken(a)&&a.t>=a.text.length}function treatControlSequences(a){var c={};c.string="";c.error=false;for(var d=0;d<a.length;d++){if("\\"!=a[d]){c.string=c.string+a[d];continue}d++;switch(a[d]){case"b":c.string=c.string+"\b";break;case"f":c.string=c.string+"\f";break;case"n":c.string=c.string+"\n";break;case"r":c.string=ret_string+"\r";break;case"t":c.string=c.string+"\t";break;case"v":c.string=c.string+"\v";break;case"a":c.string=c.string+String.fromCharCode(7);break;case"'":c.string=c.string+"'";break;case'"':c.string=c.string+'"';break;case"0":c.string=c.string+"\0";break;default:c.string="Unknown escape char '\\"+a[d]+"'";c.error=true;return c}}return c}function read_data(c,p,l){var k=getToken(c);var g={};g.byteWord=0;g.machineCode=reset_assembly(1);g.seg_ptr=l.seg[k].begin;nextToken(c);while(!is_directive_segment(getToken(c))&&!is_end_of_file(c)){var q="";while(!is_directive_datatype(getToken(c))&&!is_end_of_file(c)){q=getToken(c);if("TAG"!=getTokenType(c)){return langError(c,"Expected tag or directive but found '"+q+"' instead")}var t=q.substring(0,q.length-1);if(!isValidTag(t)){return langError(c,"A tag must follow an alphanumeric format (starting with a letter or underscore) but found '"+t+"' instead")}if(c.firmware[t]){return langError(c,"A tag can not have the same name as an instruction ("+t+")")}if(l.labels2[t]){return langError(c,"Repeated tag: '"+t+"'")}l.labels2[t]="0x"+(g.seg_ptr+g.byteWord).toString(16);nextToken(c)}if(is_end_of_file(c)){break}var d=getToken(c);if((".word"==d)||(".half"==d)||(".byte"==d)){nextToken(c);var f=getToken(c);while(!is_directive(getToken(c))&&!is_end_of_file(c)){var e;var m=false;if((e=isOctal(f))!==false){}else{if((e=isHex(f))!==false){}else{if((e=isDecimal(f))!==false){}else{if((e=isChar(f))!==false){}else{if(".word"==d){if(!isValidTag(f)){return langError(c,"A tag must follow an alphanumeric format (starting with a letter or underscore) but found '"+f+"' instead")}if(c.firmware[f]){return langError(c,"A tag can not have the same name as an instruction ("+f+")")}e=0;m=true}else{return langError(c,"Expected value for numeric datatype but found '"+f+"' instead")}}}}}var s=get_datatype_size(d);var o=decimal2binary(e,s*BYTE_LENGTH);num_bits=o[0];free_space=o[1];if(free_space<0){return langError(c,"Expected value that fits in a '"+d+"' ("+s*BYTE_LENGTH+" bits), but inserted '"+f+"' ("+num_bits.length+" bits) instead")}writememory_and_reset(l.mp,g,1);while(((g.seg_ptr+g.byteWord)%s)!=0){g.byteWord++;writememory_and_reset(l.mp,g,1)}if(""!=q){l.labels2[q.substring(0,q.length-1)]="0x"+(g.seg_ptr+g.byteWord).toString(16);q=""}if(m){l.labels["0x"+g.seg_ptr.toString(16)]={name:f,addr:g.seg_ptr,startbit:31,stopbit:0,rel:undefined,nwords:1,labelContext:getLabelContext(c)}}g.machineCode=assembly_replacement(g.machineCode,num_bits,BYTE_LENGTH*(s+g.byteWord),BYTE_LENGTH*g.byteWord,free_space);g.byteWord+=s;nextToken(c);if(","==getToken(c)){nextToken(c)}if(is_directive(getToken(c))||("TAG"==getTokenType(c))||"."==getToken(c)[0]){break}f=getToken(c)}}else{if(".space"==d){nextToken(c);var f=getToken(c);if(!isDecimal(f)){return langError(c,"Expected number of bytes to reserve in .space but found '"+f+"' as number")}if(f<0){return langError(c,"Expected positive number but found '"+f+"' as positive number")}for(i=0;i<f;i++){writememory_and_reset(l.mp,g,1);g.byteWord++}nextToken(c)}else{if(".align"==d){nextToken(c);var f=getToken(c);if(!isDecimal(f)&&f>=0){return langError(c,"Expected the align parameter as positive number but found '"+f+"'. Remember that number is the power of two for alignment, see MIPS documentation..")}writememory_and_reset(l.mp,g,1);var h=Math.pow(2,parseInt(f));switch(h){case 1:break;case 2:if(g.byteWord&1==1){g.byteWord++}break;default:while(true){writememory_and_reset(l.mp,g,1);if(g.seg_ptr%h==0&&g.byteWord==0){break}g.byteWord++}}nextToken(c)}else{if(".ascii"==d||".asciiz"==d){nextToken(c);var f=getToken(c);var n=treatControlSequences(f);if(true==n.error){return langError(c,n.string)}f=n.string;while(!is_directive(getToken(c))&&!is_end_of_file(c)){writememory_and_reset(l.mp,g,1);if(""==f){return langError(c,"String is not closed (forgot to end it with quotation marks)")}if("STRING"!=getTokenType(c)){return langError(c,"Expected string between quotation marks but found '"+f+"' instead")}for(i=0;i<f.length;i++){writememory_and_reset(l.mp,g,1);if(f[i]=='"'){continue}num_bits=f.charCodeAt(i).toString(2);g.machineCode=assembly_replacement(g.machineCode,num_bits,BYTE_LENGTH*(1+g.byteWord),BYTE_LENGTH*g.byteWord,BYTE_LENGTH-num_bits.length);g.byteWord++}if(".asciiz"==d){writememory_and_reset(l.mp,g,1);num_bits="\0".charCodeAt(0).toString(2);g.machineCode=assembly_replacement(g.machineCode,num_bits,BYTE_LENGTH*(1+g.byteWord),BYTE_LENGTH*g.byteWord,BYTE_LENGTH-num_bits.length);g.byteWord++}nextToken(c);if(","==getToken(c)){nextToken(c)}if(is_directive(getToken(c))||("TAG"==getTokenType(c))||"."==getToken(c)[0]){break}f=getToken(c);n=treatControlSequences(f);if(true==n.error){return langError(c,n.string)}f=n.string}}else{return langError(c,"Unexpected datatype name '"+d)}}}}}if(g.byteWord>0){l.mp["0x"+g.seg_ptr.toString(16)]=g.machineCode;g.seg_ptr=g.seg_ptr+WORD_BYTES}l.seg[k].end=g.seg_ptr}function read_text(R,c,D){var G=getToken(R);var g=D.seg[G].begin;var C=R.firmware;var x=R.pseudoInstructions;var u=false;var e=-1;var Q={};for(i=0;i<c.registers.length;i++){var m="$"+i;Q[m]=i;Q[c.registers[i]]=Q[m]}nextToken(R);while(!is_directive_segment(getToken(R))&&!is_end_of_file(R)){while(!u&&typeof C[getToken(R)]=="undefined"&&!is_end_of_file(R)){var d=getToken(R);if("TAG"!=getTokenType(R)){return langError(R,"Expected tag or instruction but found '"+d+"' instead")}var L=d.substring(0,d.length-1);if(!isValidTag(L)){return langError(R,"A tag must follow an alphanumeric format (starting with a letter or underscore) but found '"+L+"' instead")}if(C[L]){return langError(R,"A tag can not have the same name as an instruction ("+L+")")}if(D.labels2[L]){return langError(R,"Repeated tag: '"+L+"'")}D.labels2[L]="0x"+g.toString(16);nextToken(R)}if(is_end_of_file(R)){break}if(!u){var w=getToken(R);var l=[]}else{var w=l[M][e++]}var N=[];var a=[];var k=[];var P=0;var K=[];for(i=0;i<C[w].length;i++){N[i]=C[w][i].signature.split(",");a[i]=C[w][i].signatureUser.split(" ");N[i].shift();a[i].shift();k[i]=1;K[i]=[];P=Math.max(P,N[i].length);if(x[w]){l[i]=C[w][i].finish.replace(/ ,/g,"").replace(/num/g,"inm").split(" ");l[i].pop();u=true;var O=0;var t={}}}var J=[];J[0]=w;for(i=0;i<P;i++){if(e==-1){nextToken(R);if(","==getToken(R)){nextToken(R)}var I=getToken(R)}else{var F=l[M][e++];if(t[F]){var I=t[F]}else{var I=F}}var H;if("TAG"!=getTokenType(R)&&!C[I]){J[i+1]=I}for(j=0;j<k.length;j++){if(k[j]==0){continue}if(i>=N[j].length){if("TAG"!=getTokenType(R)&&!C[I]){k[j]=0}continue}var h=C[w][j].fields[i];var f=h.startbit-h.stopbit+1;var v=false;var o=false;switch(h.type){case"address":case"inm":if(u&&"sel"==I){e++;var z=l[M][e++];var p=l[M][e++];var I=t[l[M][e++]];e++;o=true}if((H=isOctal(I))!==false){}else{if((H=isHex(I))!==false){}else{if((H=isDecimal(I))!==false){}else{if((H=isChar(I))!==false){}else{if((I[0]=="'")){var A="Unexpected inmediate value, found: '"+I+"' instead";k[j]=0;break}if(!isValidTag(I)){var A="A tag must follow an alphanumeric format (starting with a letter or underscore) but found '"+I+"' instead";k[j]=0;break}if(C[I]){var A="A tag can not have the same name as an instruction ("+I+")";k[j]=0;break}v=true}}}}if(o){E=decimal2binary(H,WORD_LENGTH);if(E[1]<0){return langError(R,"'"+I+"' is bigger than "+WORD_LENGTH+" bits")}H="0".repeat(E[1])+E[0];H=H.substring(WORD_LENGTH-z-1,WORD_LENGTH-p);H=parseInt(H,2);J[i+1]="0x"+H.toString(16)}if(!v){var E=decimal2binary(H,f);if(h.type=="address"&&"rel"==h.address_type){E=decimal2binary(H-g-WORD_BYTES,f)}}break;case"reg":var m=false;if("("==I){if("(reg)"!=N[j][i]){var A="Expected register but found register beween parenthesis";k[j]=0;break}if(e==-1){nextToken(R);I=getToken(R)}else{I=t[l[M][e++]]}m=true}else{if("(reg)"==N[j][i]){var A="Expected register between parenthesis but found '"+I+"' instead";k[j]=0;break}}if(typeof Q[I]=="undefined"){var A="Expected register ($1, ...) but found '"+I+"' instead";k[j]=0;break}if(m){J[i+1]="("+I+")";if(e==-1){nextToken(R);m=getToken(R)}else{m=l[M][e++]}if(")"!=m){var A="String without end parenthesis ')'";k[j]=0;break}}H=isDecimal(Q[I]);var E=decimal2binary(H,f);break;default:return langError(R,"An unknown error ocurred (1)")}if(k[j]==1&&!v){if(E[1]<0){if(h.type=="address"&&"rel"==h.address_type){A="Relative value ("+(H-g-WORD_BYTES)+" in decimal) needs "+E[0].length+" bits in binary but there is space for only "+f+" bits"}else{var A="'"+I+"' needs "+E[0].length+" bits in binary but there is space for only "+f+" bits"}k[j]=0}}if(k[j]==1&&(!(u&&e==-1))){K[j][i]={num_bits:(v?false:E[0]),free_space:(v?false:E[1]),startbit:h.startbit,stopbit:h.stopbit,rel:(v?h.address_type:false),islabel:v,field_name:I}}}if(sum_array(k)==0){break}if("TAG"==getTokenType(R)||C[I]){break}}var M;for(i=0;i<k.length;i++){if(k[i]==1){M=i}}var B="";for(i=0;i<C[w].length;i++){if(i>0&&i<C[w].length-1){B+=", "}if(i>0&&i==C[w].length-1){B+=" or "}B+="'"+C[w][i].signatureUser+"'"}var y=sum_array(k);if(y==0){if(k.length==1){return langError(R,A+". Remember that the instruction format has been defined as: "+B)}return langError(R,"Instruction and fields don't match with microprogram. Remember that the instruction formats have been defined as: "+B+". Please check the microcode. Probably you forgot to add a field, a number does not fit in its space, or you just used a wrong instruction")}if(y>1){M=get_candidate(k,C[w]);if(M===false){return langError(R,"Instruction and fields match with more than one microprogram. Please check the microcode. Currently, the instruction format can be: "+B)}}if(u){if(e==-1){var n="";for(i=0;i<J.length;i++){n=n+J[i]+" "}n=n.substring(0,n.length-1);for(i=0;i<N[M].length;i++){t[N[M][i]]=J[i+1]}e++;continue}O++;if(O>1){n="&nbsp;"}if(l[M][e]=="\n"){e++}}var q=reset_assembly(C[w][M].nwords);q=assembly_co_cop(q,C[w][M].co,C[w][M].cop);for(i=0;i<K[M].length;i++){if(K[M][i].islabel){D.labels["0x"+g.toString(16)]={name:K[M][i].field_name,addr:g,startbit:K[M][i].startbit,stopbit:K[M][i].stopbit,rel:K[M][i].rel,nwords:C[w][M].nwords,labelContext:getLabelContext(R)}}else{q=assembly_replacement(q,K[M][i].num_bits,K[M][i].startbit-(-1),K[M][i].stopbit,K[M][i].free_space)}}s_def=J[0];for(i=0,j=1;i<a[M].length;i++,j++){switch(a[M][i]){case"address":case"inm":case"reg":case"(reg)":s_def=s_def+" "+J[j];break;default:s_def=s_def+" "+J[j]+J[j+1];j++}}if(!u){var n=s_def}for(i=C[w][M].nwords-1;i>=0;i--){if(i<C[w][M].nwords-1){s_def=""}D.assembly["0x"+g.toString(16)]={breakpoint:false,binary:q.substring(i*WORD_LENGTH,(i+1)*WORD_LENGTH),source:s_def,source_original:n};D.mp["0x"+g.toString(16)]=q.substring(i*WORD_LENGTH,(i+1)*WORD_LENGTH);g=g+WORD_BYTES}if(!u&&P==N[M].length){nextToken(R)}if(u&&e==l[M].length){e=-1;O=0;u=false;nextToken(R)}if(R.t>=R.text.length){break}}D.seg[G].end=g}function simlang_compile(q,s){var d={};d.line=1;d.error=null;d.i=0;d.contadorMC=0;d.etiquetas={};d.labelsNotFound=[];d.instrucciones=[];d.co_cop={};d.registers=[];d.text=q;d.tokens=[];d.token_types=[];d.t=0;d.newlines=[];d.pseudoInstructions=[];d.stackRegister=null;d.firmware={};d.pseudoInstructions={};d.comments=[];for(i=0;i<s.firmware.length;i++){var e=s.firmware[i];if(typeof d.firmware[e.name]=="undefined"){d.firmware[e.name]=[]}d.firmware[e.name].push({name:e.name,nwords:parseInt(e.nwords),co:(typeof e.co!="undefined"?e.co:false),cop:(typeof e.cop!="undefined"?e.cop:false),fields:(typeof e.fields!="undefined"?e.fields:false),signature:e.signature,signatureUser:(typeof e.signatureUser!="undefined"?e.signatureUser:e.name),isPseudoinstruction:false})}for(i=0;i<s.pseudoInstructions.length;i++){var g=s.pseudoInstructions[i].initial;var n=s.pseudoInstructions[i].finish;if(typeof d.pseudoInstructions[g.name]=="undefined"){d.pseudoInstructions[g.name]=0;d.firmware[g.name]=[]}d.pseudoInstructions[g.name]++;d.firmware[g.name].push({name:g.name,fields:(typeof g.fields!="undefined"?g.fields:false),signature:g.signature,signatureUser:g.signature.replace(/,/g," "),finish:n.signature,isPseudoinstruction:true})}var h={};h.seg={".kdata":{name:".kdata",begin:0,end:255,color:"#FF99CC",kindof:"data"},".ktext":{name:".ktext",begin:256,end:4095,color:"#A9D0F5",kindof:"text"},".data":{name:".data",begin:4096,end:32767,color:"#FACC2E",kindof:"data"},".text":{name:".text",begin:32768,end:65280,color:"#BEF781",kindof:"text"},".stack":{name:".stack",begin:65535,end:65535,color:"#F1F2A3",kindof:"stack"}};h.mp={};h.labels={};h.labels2={};h.assembly={};data_found=false;text_found=false;nextToken(d);while(!is_end_of_file(d)){var f=getToken(d);if(typeof h.seg[f]=="undefined"){return langError(d,"Expected .data/.text/... segment but found '"+f+"' as segment")}if("data"==h.seg[f].kindof){read_data(d,s,h);data_found=true}if("text"==h.seg[f].kindof){read_text(d,s,h);text_found=true}if(d.error!=null){h.error=d.error;return h}}for(i in h.labels){var o=h.labels2[h.labels[i].name];if(typeof o==="undefined"){setLabelContext(d,h.labels[i].labelContext);return langError(d,"Label '"+h.labels[i].name+"' used but not defined in the assembly code")}var m="";var c=h.labels[i].addr;for(j=0;j<h.labels[i].nwords;j++){m=h.mp["0x"+c.toString(16)]+m;c+=WORD_BYTES}var t=h.labels[i].startbit-h.labels[i].stopbit+1;var p;if((p=isHex(o))!==false){var l=decimal2binary(p,t);num_bits=l[0];free_space=l[1];var k="'"+h.labels[i].name+"' needs "+num_bits.length+" bits in binary but there is space for only "+t+" bits";if("rel"==h.labels[i].rel){var l=decimal2binary(p-h.labels[i].addr-WORD_BYTES,t);num_bits=l[0];free_space=l[1];k="Relative value ("+(p-h.labels[i].addr-WORD_BYTES)+" in decimal) needs "+num_bits.length+" bits in binary but there is space for only "+t+" bits"}}else{return langError(d,"Unexpected error (2)")}if(free_space<0){setLabelContext(d,h.labels[i].labelContext);return langError(d,k)}m=assembly_replacement(m,num_bits,h.labels[i].startbit-(-1),h.labels[i].stopbit,free_space);c=h.labels[i].addr;for(j=h.labels[i].nwords-1;j>=0;j--){h.mp["0x"+c.toString(16)]=m.substring(j*WORD_LENGTH,(j+1)*WORD_LENGTH);c+=WORD_BYTES}}if(text_found){if((typeof h.labels2.main=="undefined")&&(typeof h.labels2.kmain=="undefined")){return langError(d,"Tags 'main' or 'kmain' are not defined in the text segment(s). It is compulsory to define at least one of those tags in order to execute a program")}}return h}var WSCFG={};WSCFG.version={value:"2.0.7",type:"string"};function get_cfg(a){return WSCFG[a].value}function set_cfg(c,a){WSCFG[c].value=a}function is_mobile(){if(typeof navigator=="undefined"){return false}return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function reset_cfg(){WSCFG.color_data_active={value:"#0066FF",type:"string"};WSCFG.color_data_inactive={value:"rgb(0, 0, 0)",type:"string"};WSCFG.color_name_active={value:"red",type:"string"};WSCFG.color_name_inactive={value:"rgb(0, 0, 0)",type:"string"};WSCFG.size_active={value:1.25,type:"float"};WSCFG.size_inactive={value:0.02,type:"float"};WSCFG.is_byvalue={value:false,type:"boolean"};WSCFG.RF_display_format={value:"unsigned_16_fill",type:"string"};WSCFG.RF_display_name={value:"numerical",type:"string"};WSCFG.is_editable={value:true,type:"boolean"};WSCFG.DBG_delay={value:5,type:"int"};WSCFG.DBG_level={value:"instruction",type:"string"};WSCFG.DBG_limitins={value:10000,type:"int"};WSCFG.DBG_limitick={value:1000,type:"int"};WSCFG.ICON_theme={value:"classic",type:"string"};WSCFG.NOTIF_delay={value:1000,type:"int"};WSCFG.CPUCU_size={value:6,type:"int"};WSCFG.C1C2_size={value:8,type:"int"};WSCFG.SHOWCODE_label={value:true,type:"boolean"};WSCFG.SHOWCODE_addr={value:true,type:"boolean"};WSCFG.SHOWCODE_hex={value:true,type:"boolean"};WSCFG.SHOWCODE_ins={value:true,type:"boolean"};WSCFG.SHOWCODE_pins={value:true,type:"boolean"};WSCFG.is_interactive={value:true,type:"boolean"};WSCFG.is_quick_interactive={value:false,type:"boolean"};WSCFG.ws_idiom={value:"en",type:"string"};WSCFG.ws_mode={value:"newbie",type:"string"};WSCFG.use_voice={value:false,type:"boolean"};WSCFG.ws_skin={value:"classic",type:"string"};WSCFG.enable_beta={value:true,type:"boolean"};WSCFG.editor_theme={value:"default",type:"string"};WSCFG.editor_mode={value:"default",type:"string"};WSCFG.verbal_verbose={value:"text",type:"string"};WSCFG.base_url={value:"https://wepsim.github.io/wepsim/ws_dist/wepsim-classic.html",type:"string"};if(is_mobile()){WSCFG.NOTIF_delay.value=2000;WSCFG.ICON_theme.value="cat1";WSCFG.CPUCU_size.value=6;WSCFG.C1C2_size.value=12}set_secondary_cfg()}function set_secondary_cfg(){cfg_show_eltos_delay=100;if(get_cfg("DBG_delay")<5){cfg_show_eltos_delay=350}cfg_show_rf_delay=100;if(get_cfg("DBG_delay")<5){cfg_show_rf_delay=350}cfg_show_main_memory_delay=150;if(get_cfg("DBG_delay")<5){cfg_show_main_memory_delay=450}cfg_show_control_memory_delay=120;if(get_cfg("DBG_delay")<5){cfg_show_control_memory_delay=360}cfg_show_asmdbg_pc_delay=50;if(get_cfg("DBG_delay")<3){cfg_show_asmdbg_pc_delay=150}cfg_show_dbg_ir_delay=100;if(get_cfg("DBG_delay")<5){cfg_show_dbg_ir_delay=300}cfg_show_rf_refresh_delay=30;if(get_cfg("DBG_delay")<5){cfg_show_rf_refresh_delay=120}}function save_cfg(){try{for(var c in WSCFG){localStorage.setItem("wepsim_"+c,get_cfg(c))}}catch(a){console.log("WepSIM can not save the configuration in a persistent way on this web browser, found error: \n"+a.message)}set_secondary_cfg()}function restore_cfg(){reset_cfg();for(var c in WSCFG){if(c=="version"){continue}try{set_cfg(c,localStorage.getItem("wepsim_"+c));if(WSCFG[c].type!="string"){set_cfg(c,JSON.parse(get_cfg(c)))}if(get_cfg(c)==null){throw"null values discarted"}}catch(a){console.log("WepSIM can not restore the configuration on this web browser, found error: \n"+a.message);reset_cfg();return}}set_secondary_cfg()}function update_cfg(c,a){WSCFG[c].value=a;simcore_record_append_new("Set configuration option "+c+" to "+a,'update_cfg("'+c+'",'+a+");\n");ga("send","event","config","config."+WSCFG.version.value,"config."+WSCFG.version.value+"."+c+"."+a);save_cfg()}var ws_records=[];var ws_last_played=0;var ws_last_toplay=0;var ws_last_time=0;var ws_last_timer=null;var ws_is_recording=false;var ws_is_playing=false;var ws_record_msg_name="";var ws_record_msg_obj=null;var ws_record_pb_name="";var ws_record_pb_obj=null;function simcore_record_pushElto(d,c,e){var a={timestamp:e,description:d,element:c};ws_records.push(a)}function simcore_record_showMsg(c,d){if(ws_record_msg_obj!==null){ws_record_msg_obj.html("<em>"+c+"/"+ws_records.length+"</em>&nbsp;"+d)}if(ws_record_pb_obj!==null){var a=(100*c)/ws_records.length;ws_record_pb_obj.css("width",a+"%").attr("aria-valuenow",a)}}function simcore_record_playAt(index_current,index_last){if(ws_is_playing===false){simcore_record_showMsg(ws_last_played,"Stopped by user.");return}ws_last_played=index_current;if(index_current>=index_last){simcore_record_showMsg(index_last,"Done.");return}if(ws_records[index_current].description==="_pending event_"){simcore_record_playAt(index_current+1,index_last);return}eval(ws_records[index_current].element);var index_next=index_current+1;simcore_record_showMsg(index_next,ws_records[index_current].description);var wait_time=500;if(index_next<index_last){wait_time=ws_records[index_next].timestamp}if(wait_time!==0){wait_time=(wait_time<500)?500:wait_time}ws_last_timer=setTimeout(function(){simcore_record_playAt(index_next,index_last)},wait_time)}function simcore_record_glowing(a){var c=$(a);if(c===null){return}c.addClass("btn-warning");setTimeout(function(){c.removeClass("btn-warning")},250)}function simcore_record_glowAdd(){var c=$(this);var a=c.attr("id");if(typeof a==="undefined"){return}if(ws_is_recording===false){return}c.one("click",simcore_record_glowAdd);simcore_record_resolve_pending("Click on UI element "+a,'simcore_record_glowing("#'+a+'");\n')}function simcore_record_init(a,c){ws_records=[];ws_last_played=0;ws_last_time=0;ws_is_playing=false;ws_is_recording=false;ws_record_msg_name=a;ws_record_msg_obj=$("#"+a);if(typeof ws_record_msg_obj.html==="undefined"){ws_record_msg_obj=null}ws_record_pb_name=c;ws_record_pb_obj=$("#"+c);if(typeof ws_record_pb_obj.html==="undefined"){ws_record_pb_obj=null}}function simcore_record_captureInit(){$(".nav-link").off("click",simcore_record_glowAdd);$(".btn-like").off("click",simcore_record_glowAdd);$(".btn").off("click",simcore_record_glowAdd);$(".nav-link").one("click",simcore_record_glowAdd);$(".btn-like").one("click",simcore_record_glowAdd);$(".btn").one("click",simcore_record_glowAdd)}function simcore_record_start(){ws_is_playing=false;ws_is_recording=true;ws_last_played=0;ws_last_time=Date.now();simcore_record_showMsg(ws_last_played,"Recording...")}function simcore_record_stop(){ws_is_playing=false;ws_is_recording=false;ws_last_played=0;ws_last_toplay=ws_records.length;simcore_record_showMsg(ws_last_played,"Stopped by user.")}function simcore_record_isRecording(){return ws_is_recording}function simcore_record_play(){if(ws_is_playing===true){clearTimeout(ws_last_timer);if(ws_last_played<ws_records.length){ws_last_played=ws_last_played+1}else{ws_last_played=0}}else{ws_last_toplay=ws_records.length}ws_is_playing=true;ws_is_recording=false;simcore_record_playAt(ws_last_played,ws_last_toplay)}function simcore_record_playInterval(c,a){if(ws_is_playing===true){clearTimeout(ws_last_timer);if(ws_last_played<a){ws_last_played=ws_last_played+1}else{ws_last_played=c}}else{ws_last_played=c}ws_last_toplay=a;ws_is_playing=true;ws_is_recording=false;simcore_record_playAt(ws_last_played,ws_last_toplay)}function simcore_record_pause(){ws_is_playing=!ws_is_playing;ws_is_recording=false;if(ws_is_playing===true){simcore_record_playAt(ws_last_played,ws_last_toplay)}}function simcore_record_isPlaying(){return ws_is_playing}function simcore_record_length(){return ws_records.length}function simcore_record_get(){return ws_records}function simcore_record_set(a){ws_last_played=0;ws_last_time=0;ws_is_playing=false;ws_is_recording=false;ws_records=a;simcore_record_showMsg(0,"Record restored.")}function simcore_record_reset(){ws_last_played=0;ws_last_toplay=0;ws_last_time=0;ws_is_playing=false;ws_is_recording=false;ws_records=[];simcore_record_showMsg(0,"Empty record")}function simcore_record_append_new(c,a){if(ws_is_recording===true){var d=Date.now()-ws_last_time;ws_last_time=Date.now();simcore_record_pushElto(c,a,d);simcore_record_showMsg(0,"Recording...")}}function simcore_record_append_pending(){if(ws_is_recording===true){var a=Date.now()-ws_last_time;ws_last_time=Date.now();simcore_record_pushElto("_pending event_",";",a)}}function simcore_record_resolve_pending(c,a){if(ws_is_recording===true){var d=ws_records.length;while(d>0){d--;if(ws_records[d].description==="_pending event_"){break}}if(d===0){simcore_record_setTimeBeforeNow(0);simcore_record_append_new(c,a);return}ws_records[d].description=c;ws_records[d].element=a;simcore_record_showMsg(0,"Recording...")}}function simcore_record_setTimeBeforeNow(a){ws_last_time=Date.now()-a}function simcore_record_addTimeAfterLast(a){ws_last_time=ws_last_time+a}function get_simware(){var a=simhw_internalState("FIRMWARE");if(typeof a.firmware=="undefined"){a.firmware=new Array()}if(typeof a.mp=="undefined"){a.mp=new Object()}if(typeof a.seg=="undefined"){a.seg=new Object()}if(typeof a.assembly=="undefined"){a.assembly=new Object()}if(typeof a.labels=="undefined"){a.labels=new Object()}if(typeof a.labels2=="undefined"){a.labels2=new Object()}if(typeof a.labels_firm=="undefined"){a.labels_firm=new Object()}if(typeof a.registers=="undefined"){a.registers=new Object()}if(typeof a.pseudoInstructions=="undefined"){a.pseudoInstructions=new Object()}if(typeof a.stackRegister=="undefined"){a.stackRegister=new Object()}if(typeof a.cihash=="undefined"){a.cihash=new Object()}if(typeof a.cocop_hash=="undefined"){a.cocop_hash=new Object()}return a}function set_simware(c){var a=simhw_internalState("FIRMWARE");if(typeof c.firmware!="undefined"){a.firmware=c.firmware}if(typeof c.mp!="undefined"){a.mp=c.mp}if(typeof c.registers!="undefined"){a.registers=c.registers}if(typeof c.assembly!="undefined"){a.assembly=c.assembly}if(typeof c.pseudoInstructions!="undefined"){a.pseudoInstructions=c.pseudoInstructions}if(typeof c.seg!="undefined"){a.seg=c.seg}if(typeof c.labels!="undefined"){a.labels=c.labels}if(typeof c.labels2!="undefined"){a.labels2=c.labels2}if(typeof c.labels_firm!="undefined"){a.labels_firm=c.labels_firm}if(typeof c.stackRegister!="undefined"){a.stackRegister=c.stackRegister}if(typeof c.cihash!="undefined"){a.cihash=c.cihash}if(typeof c.cocop_hash!="undefined"){a.cocop_hash=c.cocop_hash}}function array_includes(a,d){if(typeof a.includes!="undefined"){return a.includes(d)}for(var c=0;c<a.length;c++){if(a[c]==d){return true}}return false}function check_buses(h){var f=simhw_internalState("tri_state_names");if(f.indexOf(h)==-1){return}if(simhw_internalState_get("fire_visible","databus")==true){update_bus_visibility("databus_fire","hidden");simhw_internalState_set("fire_visible","databus",false)}if((simhw_sim_signal("TD").value!=0)&&(simhw_sim_signal("R").value!=0)){update_bus_visibility("databus_fire","visible");simhw_internalState_set("fire_visible","databus",true);simhw_sim_state("BUS_DB").value=4294967295}var a="";var e=0;var g="";var d=0;for(var c=0;c<f.length;c++){g=f[c];d=parseInt(get_value(simhw_sim_signal(g)));e+=d;if(d>0){a=g}if(e>1){break}}if(e>0){update_draw(simhw_sim_signal(a),1)}if(simhw_internalState_get("fire_visible","internalbus")==true){update_bus_visibility("internalbus_fire","hidden");simhw_internalState_set("fire_visible","internalbus",false)}if(e>1){update_bus_visibility("internalbus_fire","visible");simhw_internalState_set("fire_visible","internalbus",true);simhw_sim_state("BUS_IB").value=4294967295}}function fn_updateE_now(a){if("E"==simhw_sim_signal(a).type){update_state(a)}}function fn_updateE_future(a){if(jit_fire_ndep[a]<1){fn_updateE_now(a)}else{return new Promise(function(d,c){fn_updateE_now(a)})}}function fn_updateL_now(a){update_draw(simhw_sim_signal(a),simhw_sim_signal(a).value);if("L"==simhw_sim_signal(a).type){update_state(a)}}function fn_updateL_future(a){if(jit_fire_ndep[a]<1){fn_updateL_now(a)}else{return new Promise(function(d,c){fn_updateL_now(a)})}}function update_state(c){var a=0;switch(simhw_sim_signal(c).behavior.length){case 0:return;break;case 1:a=0;break;default:a=simhw_sim_signal(c).value;if(simhw_sim_signal(c).behavior.length<a){alert("ALERT: there are more signals values than behaviors defined!!!!\nkey: "+c+" and signal value: "+a);return}break}compute_signal_behavior(c,a)}function update_signal_firmware(g){var d=get_simware();var h=simhw_sim_ctrlStates_get().mpc.state;var a=get_value(simhw_sim_state(h));var f=-1;for(var c=0;c<d.firmware.length;c++){if(parseInt(d.firmware[c]["mc-start"])>a){break}f=c}if(-1==f){alert("A new 'unknown' instruction is inserted,\nplease edit it (co, nwords, etc.) in the firmware textarea.");var l=new Object();l.name="unknown";l.signature="unknown";l.signatureGlobal="unknown";l.co=0;l.nwords=0;l["mc-start"]=0;l.fields=new Array();l.microcode=new Array();l.microcomments=new Array();d.firmware.push(l);f=d.firmware.length-1}var e=a-parseInt(d.firmware[f]["mc-start"]);if(typeof d.firmware[f]["microcode"][e]=="undefined"){d.firmware[f]["microcode"][e]=new Object();d.firmware[f]["microcomments"][e]=""}d.firmware[f]["microcode"][e][g]=simhw_sim_signal(g).value;if(simhw_sim_signal(g).default_value==simhw_sim_signal(g).value){delete d.firmware[f]["microcode"][e][g]}var k=get_value(simhw_sim_state("REG_IR")).toString(2);k="00000000000000000000000000000000".substring(0,32-k.length)+k;show_memories_values()}function propage_signal_update(e){if(true===get_cfg("is_interactive")){if(simhw_sim_signal(e).value!=simhw_sim_signal(e).default_value){simhw_sim_state("REG_MICROINS").value[e]=simhw_sim_signal(e).value}else{delete (simhw_sim_state("REG_MICROINS").value[e])}var c=simhw_sim_ctrlStates_get().mpc.state;var d=get_value(simhw_sim_state(c));if(typeof simhw_internalState_get("MC",d)=="undefined"){simhw_internalState_set("MC",d,new Object());simhw_internalState_set("MC_dashboard",d,new Object())}simhw_internalState_get("MC",d)[e]=simhw_sim_signal(e).value;simhw_internalState_get("MC_dashboard",d)[e]={comment:"",breakpoint:false,state:false,notify:new Array()};update_signal_firmware(e);var a=get_simware();document.getElementById("inputFirmware").value=saveFirmware(a)}compute_behavior("FIRE "+e)}function update_memories(t){set_simware(t);var f=get_simware();simhw_internalState_reset("MC",{});simhw_internalState_reset("MC_dashboard",{});for(var q=0;q<f.firmware.length;q++){var s=false;var l=false;var n=new Array();var h=f.firmware[q]["microcode"].length;var p=f.firmware[q]["mc-start"];for(var o=0;o<h;o++){var c=f.firmware[q]["microcomments"][o];s=(c.trim().split("state:").length>1);l=(c.trim().split("break:").length>1);n=c.trim().split("notify:");for(var m=0;m<n.length;m++){n[m]=n[m].split("\n")[0]}simhw_internalState_set("MC",p,f.firmware[q]["microcode"][o]);simhw_internalState_set("MC_dashboard",p,{comment:c,state:s,breakpoint:l,notify:n});p++}}simhw_internalState_reset("ROM",{});for(var q=0;q<f.firmware.length;q++){if("begin"==f.firmware[q]["name"]){continue}var a=f.firmware[q]["mc-start"];var g=parseInt(f.firmware[q]["co"],2);var e=0;if(typeof f.firmware[q]["cop"]!="undefined"){e=parseInt(f.firmware[q]["cop"],2)}var d=64*g+e;simhw_internalState_set("ROM",d,a);f.cihash[d]=f.firmware[q]["signature"]}simhw_internalState_reset("MP",{});for(var w in f.mp){var u=parseInt(w);var v=parseInt(f.mp[w].replace(/ /g,""),2);simhw_internalState_set("MP",u,v)}simhw_internalState_reset("segments",{});for(var w in f.seg){simhw_internalState_set("segments",w,f.seg[w])}show_main_memory(simhw_internalState("MP"),0,true,true);show_control_memory(simhw_internalState("MC"),simhw_internalState("MC_dashboard"),0,true)}function hex2float(d){var a=(d&2147483648)?-1:1;var f=((d>>23)&255)-127;var c=1+((d&8388607)/8388608);var e=a*c*Math.pow(2,f);if(-127===f){if(1===c){e=(a===1)?"+0":"-0"}else{e=a*((d&8388607)/8388607)*Math.pow(2,-126)}}if(128===f){if(1===c){e=(a===1)?"+Inf":"-Inf"}else{e="NaN"}}return e}function hex2char8(a){var c=[];c[0]=String.fromCharCode((a&4278190080)>>24);c[1]=String.fromCharCode((a&16711680)>>16);c[2]=String.fromCharCode((a&65280)>>8);c[3]=String.fromCharCode((a&255)>>0);return c}function pack5(a){return"00000".substring(0,5-a.length)+a}function pack8(a){return"00000000".substring(0,8-a.length)+a}function pack32(a){return"00000000000000000000000000000000".substring(0,32-a.length)+a}function hex2bin(a){var c=a.toString(2);c=pack32(c);c=c.substring(0,4)+" "+c.substring(4,8)+" "+c.substring(8,12)+" "+c.substring(12,16)+"<br>"+c.substring(16,20)+" "+c.substring(20,24)+" "+c.substring(24,28)+" "+c.substring(28,32);return c}function value2string(d,c){var e="";var a=d.split("_");switch(a[0]){case"unsigned":e=c.toString(a[1]).toUpperCase();break;case"float":e=hex2float(c);break;default:e=c.toString()}if(a[2]==="fill"){e=pack8(e)}return e}function get_deco_from_pc(a){var d="0x"+a.toString(16);var c=simhw_internalState("FIRMWARE");if((typeof c.assembly==="undefined")||(typeof c.assembly[d]==="undefined")||(typeof c.assembly[d].source==="undefined")){return""}return c.assembly[d].source}function get_verbal_from_current_mpc(){var a="";var f="";var c=simhw_sim_ctrlStates_get().mpc.state;var e=get_value(simhw_sim_state(c));var g=simhw_internalState_get("MC",e);for(var d in g){if("MADDR"===d){f=f+"MADDR is "+g[d]+". ";continue}a=a+d+" ";f=f+compute_signal_verbals(d,g[d])}a=a.trim();if(a===""){a="<no active signal>"}if(f.trim()===""){f="<no actions>"}return"Activated signals are: "+a+". Associated actions are: "+f}function get_verbal_from_current_pc(){var a=simhw_sim_ctrlStates_get().pc.state;var e=get_value(simhw_sim_state(a));var c=parseInt(e)-4;var d=get_deco_from_pc(c);if(""==d.trim()){d="not jet defined"}return"Current instruction is: "+d+" and PC points to "+show_value(c)+". "}function ko_observable(a){if(typeof ko!="undefined"){return ko.observable(a).extend({rateLimit:cfg_show_rf_refresh_delay})}else{return a}}function ko_rebind_state(d,e){if(typeof ko=="undefined"){return}var c=simhw_sim_state(d);if(typeof c.value!="function"){c.value=ko.observable(c.value).extend({rateLimit:cfg_show_rf_refresh_delay})}var a=document.getElementById(e);ko.cleanNode(a);ko.applyBindings(simhw_sim_state(d),a)}function show_rf_values(){return simcore_action_ui("CPU",0,"show_rf_values")()}function show_rf_names(){return simcore_action_ui("CPU",0,"show_rf_names")()}function show_states(){return simcore_action_ui("CPU",0,"show_states")()}function get_screen_content(){return simcore_action_ui("SCREEN",0,"get_screen_content")()}function set_screen_content(a){simcore_action_ui("SCREEN",0,"set_screen_content")(a)}function get_keyboard_content(){return simcore_action_ui("KBD",0,"get_keyboard_content")()}function set_keyboard_content(a){simcore_action_ui("KBD",0,"set_keyboard_content")(a)}function show_main_memory(e,a,d,c){return simcore_action_ui("MEMORY",0,"show_main_memory")(e,a,d,c)}function show_control_memory(e,a,c,d){return simcore_action_ui("MEMORY",0,"show_control_memory")(e,a,c,d)}function show_memories_values(){var a=simhw_sim_ctrlStates_get().pc.state;var d=get_value(simhw_sim_state(a));show_main_memory(simhw_internalState("MP"),d,true,true);var c=simhw_sim_ctrlStates_get().mpc.state;var e=get_value(simhw_sim_state(c));show_control_memory(simhw_internalState("MC"),simhw_internalState("MC_dashboard"),e,true)}function update_draw(c,a){return simcore_action_ui("CPU",1,"update_draw")(c,a)}function update_bus_visibility(a,c){return simcore_action_ui("CPU",1,"update_bus_visibility")(a,c)}function refresh(){for(var a in simhw_sim_signals()){update_draw(simhw_sim_signals()[a],simhw_sim_signals()[a].value);check_buses(a)}show_dbg_ir(get_value(simhw_sim_state("REG_IR_DECO")))}function show_dbg_ir(a){return simcore_action_ui("MEMORY",0,"show_dbg_ir")(a)}function show_dbg_mpc(){return simcore_action_ui("MEMORY",0,"show_dbg_mpc")()}function show_asmdbg_pc(){return simcore_action_ui("MEMORY",0,"show_asmdbg_pc")()}function simcore_init(a){var c={};c.msg="";c.ok=true;if(a){restore_cfg()}else{reset_cfg()}return c}function simcore_init_hw(d){var c={};c.msg="";c.ok=true;var a=simhw_getIdByName(d);if(a<0){c.msg="ERROR: unknown hardware: "+d+".\n";c.ok=false;return c}simhw_setActive(a);var e=simcore_init_ui({});if(false==e.ok){c.msg=c.msg;c.ok=false;return c}return c}function simcore_init_ui(c){var e={};e.msg="";e.ok=true;var g=0;var f=simhw_sim_components();for(var a in f){f[a].details_ui=[];for(var d in f[a].details_name){f[a].details_ui[d]={};g=f[a].details_name[d];if(typeof c[g]!=="undefined"){f[a].details_ui[d]=c[g];f[a].details_ui[d].init()}}}return e}function simcore_action_ui(a,e,d){var c=simhw_sim_components();if(typeof c[a].details_ui[e][d]==="undefined"){return simcore_do_nothing_handler}return c[a].details_ui[e][d]}function simcore_init_eventlistener(c,l,e){var g=null;var a=[];var d=null;g=document.getElementById(c).contentDocument;if(null==g){console.log('warning: unreferenced graphic element context named "'+a[0]+'".');return}var m=simhw_sim_signals();for(var q in m){if(typeof e[q+"click"]==="undefined"){e[q+"click"]=function(o){return function(){e["<all>"](o,"click")}}(q)}if(typeof e[q+"dblclick"]==="undefined"){e[q+"dblclick"]=function(o){return function(){e["<all>"](o,"dblclick")}}(q)}for(var f=0;f<simhw_sim_signal(q).fire_name.length;f++){a=simhw_sim_signal(q).fire_name[f].split(":");if(a[0]!==c){continue}d=g.getElementById(a[1]);if(null===d){console.log('warning: unreferenced graphic element named "'+a[0]+":"+a[1]+'".');continue}d.addEventListener("click",e[q+"click"],false);d.addEventListener("dblclick",e[q+"dblclick"],false)}}var n=simhw_sim_components();for(var s in n){for(var k in n[s].details_name){var p=n[s].details_name[k];if(typeof l[p]==="undefined"){continue}for(var h in n[s].details_fire[k]){a=n[s].details_fire[k][h].split(":");if(a[0]!==c){continue}d=g.getElementById(a[1]);if(null===d){console.log('warning: unreferenced graphic element named "'+a[0]+":"+a[1]+'".');continue}d.addEventListener("click",l[p],false)}}}}function simcore_check_if_can_execute(){var c={};c.msg="";c.ok=true;var d=simhw_internalState("segments");if((typeof d[".ktext"]=="undefined")&&(typeof d[".text"]=="undefined")){c.msg="code segment .ktext/.text does not exist!\nPlease load some assembly code.";c.ok=false;return c}var a=get_simware();if((!((typeof d[".ktext"]!="undefined")&&(a.labels2.kmain)))&&(!((typeof d[".text"]!="undefined")&&(a.labels2.main)))){c.msg="labels 'kmain' (in .ktext) or 'main' (in .text) do not exist!";c.ok=false;return c}return c}function simcore_check_if_can_continue(){var d={};d.ok=true;d.msg="";var a=simhw_sim_ctrlStates_get().pc.state;var e=parseInt(get_value(simhw_sim_state(a)));var c=simhw_sim_ctrlStates_get().mpc.state;var g=get_value(simhw_sim_state(c));if(typeof simhw_internalState_get("MC",g)=="undefined"){d.ok=false;d.msg="Error: undefined microinstruction at "+g+".";return d}var h=get_cfg("ws_mode");if(("wepmips"!=h)&&(g!=0)){return d}var f=simhw_internalState("segments");if((e<f[".ktext"].end)&&(e>=f[".ktext"].begin)){return d}if((e<f[".text"].end)&&(e>=f[".text"].begin)){return d}d.ok=false;d.msg="The program has finished because the PC register points outside .ktext/.text code segments";return d}function simcore_reset(){var h={};h.msg="";h.ok=true;var l=get_simware();var d=simhw_internalState("FIRMWARE");var a=simhw_internalState("segments");var k=simhw_sim_components();var o=simhw_sim_ctrlStates_get().pc.state;var n=simhw_sim_state(o);var m=d.stackRegister;var c=simhw_sim_states().BR[m];for(var p in k){var e=k[p].name+"_RESET";compute_general_behavior(e)}if((typeof a[".ktext"]!=="undefined")&&(l.labels2.kmain)){set_value(n,parseInt(l.labels2.kmain));show_asmdbg_pc()}else{if((typeof a[".text"]!=="undefined")&&(l.labels2.main)){set_value(n,parseInt(l.labels2.main));show_asmdbg_pc()}}if((typeof a[".stack"]!=="undefined")&&(typeof c!=="undefined")){set_value(c,parseInt(a[".stack"].begin))}var f=get_cfg("ws_mode");if("wepmips"!=f){compute_general_behavior("CLOCK")}show_dbg_ir(get_value(simhw_sim_state("REG_IR_DECO")));for(p in k){for(var g in k[p].details_name){if(typeof k[p].details_ui[g].reset!=="undefined"){k[p].details_ui[g].reset()}}}return h}function simcore_execute_microinstruction(){var a=simcore_check_if_can_continue();if(false==a.ok){return a}compute_general_behavior("CLOCK");show_states();show_rf_values();show_dbg_mpc();return a}function simcore_execute_microprogram(o){var f=simcore_check_if_can_continue();if(false==f.ok){return f}var e=get_cfg("ws_mode");if("wepmips"==e){compute_general_behavior("CLOCK");compute_general_behavior("CLOCK");show_states();show_rf_values();return f}var k=false;if(o.cycles_limit<0){k=true}var m=null;var g=null;var d="";var n=simhw_internalState("MC");var l=simhw_sim_ctrlStates_get().mpc.state;var h=simhw_sim_state(l);if(typeof o.before_microinstruction==="undefined"){o.before_microinstruction=simcore_do_nothing_handler}if(typeof o.after_microinstruction==="undefined"){o.after_microinstruction=simcore_do_nothing_handler}var c=0;var a=0;do{o.before_microinstruction(n,a);compute_general_behavior("CLOCK");o.after_microinstruction(n,a);c++;if(k){o.cycles_limit=c+1}if(c>=o.cycles_limit){f.msg="Warning: clock cycles limit reached in a single instruction.";f.ok=false;break}a=get_value(h);if(typeof n[a]=="undefined"){f.msg="Error: undefined microinstruction at "+a+".";f.ok=false;break}}while((c<o.cycles_limit)&&(0!=a));show_states();show_rf_values();if(get_cfg("DBG_level")=="microinstruction"){show_dbg_mpc()}return f}function simcore_execute_program(u){var e={};e.ok=true;e.msg="";var a=simhw_internalState("segments");var p=simhw_sim_ctrlStates_get().pc.state;var o=simhw_sim_state(p);var h=get_value(o);var s=get_value(o)-4;var l=0;if((typeof a[".text"]!="undefined")&&(typeof a[".text"].begin!="undefined")){l=parseInt(a[".text"].begin)}var n=0;if((typeof a[".text"]!="undefined")&&(typeof a[".text"].end!="undefined")){n=parseInt(a[".text"].end)}var q=0;if((typeof a[".ktext"]!="undefined")&&(typeof a[".ktext"].begin!="undefined")){q=parseInt(a[".ktext"].begin)}var c=0;if((typeof a[".ktext"]!="undefined")&&(typeof a[".ktext"].end!="undefined")){c=parseInt(a[".ktext"].end)}var k=null;var m=null;var g=null;var d="";var f=get_simware();if(typeof u.verbalize!=="undefined"){set_cfg("verbal_verbose",u.verbalize)}if(typeof u.before_instruction==="undefined"){u.before_instruction=simcore_do_nothing_handler}if(typeof u.after_instruction==="undefined"){u.after_instruction=simcore_do_nothing_handler}var t=0;while((h!=s)&&(((h<n)&&(h>=l))||((h<c)&&(h>=q)))){u.before_instruction(f,h);k=simcore_execute_microprogram(u);if(false==k.ok){return k}u.after_instruction(f,h);t++;if(t>u.instruction_limit){e.ok=false;e.msg="more than "+u.instruction_limit+" instructions executed before application ends.";return e}s=h;h=get_value(o)}return e}function simcore_do_nothing_handler(){return null}function simcore_compile_firmware(f){var c={};c.msg="";c.ok=true;if(""==f){c.msg="Empty Firmware";c.ok=false;return c}var a=null;try{a=loadFirmware(f);c.simware=a}catch(d){c.msg="ERROR: at line: "+d.lineNumber+" and column: "+d.columnNumber;c.ok=false;return c}if(a.error!=null){c.msg=a.error;c.ok=false;return c}update_memories(a);simcore_reset();return c}function simcore_compile_assembly(c){var d={};d.msg="";d.ok=true;var a=get_simware();if(a.firmware.length==0){d.msg="Empty microcode, please load the microcode first.";d.ok=false;return d}var e=simlang_compile(c,a);d.simware=e;if(e.error!=null){d.msg=e.error;d.ok=false;return d}set_simware(e);update_memories(a);simcore_reset();return d}function simcore_hardware_export(a){var c={};c.msg="{}";c.ok=false;var d=simhw_getObjByName(a);if(null===d){return c}c.ok=true;c.msg=JSON.stringify(d,function(e,f){if(typeof f==="function"){return"/Function("+f.toString()+")/"}return f});return c}function simcore_hardware_import(hw_json){var ret={};ret.msg="";ret.ok=true;hw_obj=JSON.parse(hw_json,function(key,value){if(typeof value==="string"&&value.startsWith("/Function(")&&value.endsWith(")/")){value=value.substring(10,value.length-2);return eval("("+value+")")}return value});simhw_add(hw_obj);return ret}function simcore_native_get_signal(a){return(get_value(simhw_sim_signal(a))>>>0)}function simcore_native_set_signal(a,c){set_value(simhw_sim_signal(a),c);compute_behavior("FIRE "+a);return c}function simcore_native_get_value(d,a){var c=0;var e=simhw_sim_components();var f=d;if("BR"===d){f="CPU"}if("DEVICE"===d){f="IO"}if(typeof e[f].get_value!=="undefined"){return e[f].get_value(a)}return false}function simcore_native_set_value(d,a,f){var c=0;var e=simhw_sim_components();var g=d;if("BR"===d){g="CPU"}if("DEVICE"===d){g="IO"}if(typeof e[g].set_value!=="undefined"){return e[g].set_value(a,f)}return false}function simcore_native_get_fields(c){var a=get_simware();for(var d in a.firmware){if(a.firmware[d].signatureRaw===c){return a.firmware[d].fields}}}function simcore_native_get_field_from_ir(a,c){if(typeof a[c]==="undefined"){return false}var e=get_value(simhw_sim_state("REG_IR"));var f=(31-parseInt(a[c].startbit));var d=parseInt(a[c].stopbit);e=e<<f;e=e>>>f;e=e>>>d;return e}function simcore_native_deco(){compute_behavior("DECO")}function simcore_native_go_maddr(a){set_value(simhw_sim_state("MUXA_MICROADDR"),a)}function simcore_native_go_opcode(){var a=get_value(simhw_sim_state("ROM_MUXA"));set_value(simhw_sim_state("MUXA_MICROADDR"),a)}function simcore_native_go_instruction(c){var a=get_simware();for(var e in a.firmware){if(a.firmware[e].signatureRaw===c){var d=a.firmware[e]["mc-start"];set_value(simhw_sim_state("MUXA_MICROADDR"),d);return}}}function simcore_simstate_checklist2state(h){var c={};var g=false;h=h.replace(/;|==|!=|>=|<=|=|>|</gi,function(m){return" "+m+" "});h=h.replace(/  /g," ");var k=h.split(";");for(var e=0;e<k.length;e++){var l=k[e].trim();if(""===l){continue}var d=l.split(" ");if(d.length<4){continue}var a={type:d[0],id:d[1],condition:d[2],value:decodeURI(d[3])};for(var f in simhw_sim_components()){g=simhw_sim_component(f).read_state(c,a);if(true===g){break}}if(false===g){console.log("ERROR in checklist at component "+a.type+": "+l)}}return c}function simcore_simstate_current2state(){var c={};for(var a in simhw_sim_components()){simhw_sim_component(a).write_state(c)}return c}function simcore_simstate_state2checklist(f){var e="";for(var d in f){for(var c in f[d]){var a=f[d][c];e=e+a.type+" "+a.id+" "+a.op+" "+encodeURI(a.value)+"; "}}return e}function simcore_simstate_check_results(g,f,h){var l={};l.result=[];l.errors=0;l.neltos_expected=0;l.neltos_obtained=0;var a=null;var k={};var e=0;for(var c in simhw_sim_components()){if(typeof g[c]!="undefined"){for(a in g[c]){l.neltos_expected++;e=g[c][a].default_value;if((typeof f[c]!="undefined")&&(typeof f[c][a]!="undefined")){e=f[c][a].value}k={};k.expected=g[c][a].value;k.obtained=e;k.elto_type=c.toLowerCase();k.elto_id=g[c][a].id;k.elto_op=g[c][a].op;k.fulfill=false;if("="===g[c][a].op){k.fulfill=(parseInt(k.obtained)==parseInt(k.expected))}else{if(">"===g[c][a].op){k.fulfill=(parseInt(k.obtained)>parseInt(k.expected))}else{if("<"===g[c][a].op){k.fulfill=(parseInt(k.obtained)<parseInt(k.expected))}else{if(">="===g[c][a].op){k.fulfill=(parseInt(k.obtained)>=parseInt(k.expected))}else{if("<="===g[c][a].op){k.fulfill=(parseInt(k.obtained)<=parseInt(k.expected))}else{if("=="===g[c][a].op){k.fulfill=(k.expected==k.obtained)}else{if("!="===g[c][a].op){k.fulfill=(k.expected!=k.obtained)}}}}}}}l.result.push(k);if(k.fulfill===false){l.errors++}}}if((h)&&(typeof f[c]!="undefined")){for(a in f[c]){l.neltos_obtained++;if((typeof g[c]!="undefined")&&(typeof g[c][a]!="undefined")){continue}k={};k.expected=f[c][a].default_value;k.obtained=f[c][a].value;k.fulfill=(k.expected===k.obtained);k.elto_type=c.toLowerCase();k.elto_id=f[c][a].id;k.elto_op="=";l.result.push(k);if(k.fulfill===false){l.errors++}}}}return l}function simcore_simstate_diff_results(c,a){return simcore_simstate_check_results(c,a,true)}function simcore_simstate_diff_states(c,e){var a=simcore_simstate_state2checklist(c).split(";");var d=simcore_simstate_state2checklist(e).split(";");return d.filter(function(f){return !a.includes(f)}).join(";").trim()}function simcore_simstate_checkreport2txt(c){var d="";for(var a=0;a<c.length;a++){if(c[a].fulfill===false){d+=c[a].elto_type+"["+c[a].elto_id+"]='"+c[a].obtained+"' (expected '"+c[a].expected+"'), "}}return d}function simcore_simstate_checkreport2html(e,c){var f="";var a="green";if(typeof c==="undefined"){c=false}f+="<table style='margin:0 0 0 0;'        class='table table-hover table-bordered table-sm'><thead><tr><th>Type</th><th><span class='d-none d-sm-inline-flex'>Identification</span><span class='d-sm-none'>Id.</span></th><th><span class='d-none d-sm-inline-flex'>Values in the</span> clipboard <span class='d-none d-sm-inline-flex'>state</th><th><span class='d-none d-sm-inline-flex'>Values in the</span> selected <span class='d-none d-sm-inline-flex'>state</th></tr></thead><tbody>";for(var d=0;d<e.length;d++){if(e[d].fulfill===false){a="table-danger"}else{a="table-success"}if(c&&e[d].fulfill){continue}f+="<tr class="+a+"><td>"+e[d].elto_type+"</td><td>"+e[d].elto_id+"</td><td>"+e[d].elto_op+"&nbsp;"+e[d].expected+"</td><td>"+e[d].obtained+"</td></tr>"}f+="</tbody></table>";return f}function simcore_voice_canSpeak(){if(typeof window.speechSynthesis=="undefined"){return false}if(false==get_cfg("use_voice")){return false}return true}function simcore_voice_speak(c){var a=null;if(simcore_voice_canSpeak()){a=new SpeechSynthesisUtterance(c);a.lang="es-ES";if("en"==get_cfg("ws_idiom")){a.lang="en-US"}if("es"==get_cfg("ws_idiom")){a.lang="es-EN"}window.speechSynthesis.speak(a)}}function simcore_voice_stopSpeak(){if(simcore_voice_canSpeak()){window.speechSynthesis.cancel()}}var simcore_notifications=[];function simcore_notifications_get(){return simcore_notifications}function simcore_notifications_reset(){simcore_notifications=[]}function simcore_notifications_add2(a){simcore_notifications.push({title:a.title,message:a.message,type:a.type,date:a.date})}function simcore_notifications_add(d,e,a,c){simcore_notifications.push({title:$("<p>").html(d).text(),message:$("<p>").html(e).text(),type:a,date:new Date().getTime()})};var i18n={lang:{en:"English",es:"Espa&ntilde;ol",fr:"Fran&ccedil;ais - Google-translate",kr:"한국어 - Google-translate"},eltos:{gui:{},cfg:{},examples:{},states:{},help:{},dialogs:{},tour_intro:{}}};var tutorials={};tutorials.welcome={};tutorials.simpleusage={};function i18n_init(){for(var a in i18n.lang){for(var b in i18n.eltos){i18n.eltos[b][a]={}}tutorials.welcome[a]=[];tutorials.simpleusage[a]=[]}return true}i18n_init();function i18n_update_tags(b){var a=get_cfg("ws_idiom");i18n_update_tagsFor(b,a)}function i18n_update_tagsFor(b,c){if(typeof i18n.eltos[b]=="undefined"){return}var a=document.querySelectorAll("span");Array.from(a).forEach(function(f,d){var e=f.dataset.langkey;if(i18n.eltos[b][c][e]){f.innerHTML=i18n.eltos[b][c][e]}})}function i18n_get(a,c,b){if(typeof i18n.eltos[a]==="undefined"){return b}var d=i18n.eltos[a][c][b];if(typeof d==="undefined"){return b}return d}function i18n_get_TagFor(b,c){var a;try{a=get_cfg("ws_idiom")}catch(d){a="en"}var f=c;if(typeof i18n.eltos[b][a][c]!=="undefined"){f=i18n.eltos[b][a][c]}return f}function i18n_get_dropdown(c,d){var e="";for(var a in i18n.lang){e+=' <a class="dropdown-item" href="#"    onclick="set_cfg(\'ws_idiom\',\''+a+"'); save_cfg();";for(var b=0;b<c.length;b++){e+="             i18n_update_tags('"+c[b]+"', '"+a+"') ;"}e+=d;e+='             return false;">'+a.toUpperCase()+'<span class="d-none d-sm-inline-flex">&nbsp;('+i18n.lang[a]+")</span></a>"}return e}function i18n_get_select(){var b=" <select name='select7' id='select7' class='form-control form-control-sm custom-select'	     aria-label='idiom for examples and help' 	     onchange=\"var opt = $(this).find('option:selected');	 	        var optValue = opt.val();		        update_cfg('ws_idiom', optValue);                    i18n_update_tagsFor('gui', optValue);		        wepsim_open_config_index();\"	     data-native-menu='false'>";for(var a in i18n.lang){b+="	<option value='"+a+"'>"+i18n.lang[a]+"</option>"}b+=" </select>";return b}i18n.eltos.gui.es={"Loading WepSIM...":"Cargando WepSIM...",Configuration:"Configuraci&oacute;n",MicroCode:"MicroC&oacute;digo",Assembly:"Ensamblador",Simulator:"Simulador",Examples:"Ejemplos",Load:"Cargar",Save:"Guardar",Restore:"Restaurar",Help:"Ayuda","Help Index":"&Iacute;ndice ayuda",Processor:"Procesador","Assembly Debugger":"Depurador de Ensamblador",Reset:"Reiniciar",microInstruction:"&#181;Instrucci&oacute;n",Instruction:"Instrucci&oacute;n",Run:"Ejecutar","Hardware Summary":"Hardware Resumido",processor:"procesador",details:"detalles",microcode:"microc&oacute;digo",Signals:"Se&ntilde;ales",Behaviors:"Comportamientos",States:"Estados","Control States":"Estados de Control",Dependencies:"Dependencias",Close:"Cerrar",Description:"Descripci&oacute;n",Show:"Mostrar","Show Main Memory":"Mostrar Memoria Principal",compile:"compilar",Compile:"Compilar","Please write the file name":"Por favor indique el nombre de fichero","Load from this File":"Cargar de este fichero",labels:"etiquetas",addr:"dir",ess:"ecci&oacute;n",content:"contenido",assembly:"ensamblador",instructions:"instrucciones","simulator intro 1":"Primero se ha de cargar y microcompilar el microc&oacute;digo que define el conjunto de instrucciones a usar.<br>Puede usar un ejemplo, cargar uno desde fichero o editar uno nuevo.","simulator intro 2":"A continuaci&oacute;n ha de cargar y compilar el c&oacute;digo ensamblador a ser ejecutado.<br>Puede usar un ejemplo, cargar uno desde fichero o editar uno nuevo.","simulator intro 3":"En la pantalla de simulaci&oacute;n, puede ejecutar el microcode+assembly cargardo anteriormente. Se puede ejecutar paso a paso a nivel de ensamblador o microinstrucci&oacute;n.","Prev.":"Anterior",Next:"Siguiente",End:"Fin","Disable tutorial mode":"Deshabilitar modo tutorial",Comment:"Comentar",Pause:"Pausar",Play:"Reproducir",Stop:"Parar",Record:"Grabar",Recent:"Reciente",Refresh:"Refrescar"};tutorials.welcome.es.push({id:"welcome",title:"¡Bienvenidos al simulador WepSIM!",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator012.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>Este breve tutorial le mostrar&aacute;:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,1);'>Carga de un ejemplo.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,2);'>Ejecución de ejemplo.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,3);'>Configuraci&oacute;n del simulador.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,4);'>Obtener ayuda.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.es.push({id:"welcome",title:"C&oacute;mo cargar algunos ejemplos.",message:"<center><img alt='wepsim screenshot' src='help/welcome/example_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Haga click en el bot&oacute;n de 'examples' y haga click en el 't&iacute;tulo' del ejemplo que desea cargar.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.es.push({id:"welcome",title:"C&oacute;mo cargar algunos ejemplos.",message:"<center><img alt='wepsim screenshot' src='help/welcome/simulation_xinstruction.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Haga click en next instruction/microinstruction para ejecutar paso a paso. <br>Haga click en run para ejecutar hasta el primer punto de ruptura o el fin del programa en ensamblador.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.es.push({id:"welcome",title:"C&oacute;mo configurar WepSIM.",message:"<center><img alt='wepsim screenshot' src='help/welcome/config_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Haga click en el bot&oacute;n de configuraci&oacute;n para configurar diversos aspectos de WepSIM para su comididad.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.es.push({id:"welcome",title:"C&oacute;mo conseguir la ayuda b&aacute;sica.",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Haga click en el bot&oacute;n verde de ayuda 'help'.<br>Puede obtener la ayuda en Spanish/English, ir al &iacute;ndice de la ayuda o cerrar la pantalla de ayuda.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.es.push({id:"welcome",title:"¡Bienvenido a WepSIM!",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Por favor explorer las secciones de la ayuda para m&aacute;s informaci&oacute;n. <br>Si hace click en el bot&oacute;n 'end' del tutorial entonces WepSIM cargar&aacute; el primer ejemplo por usted. ¡Diviertase aprendiendo!<br></h5>",code_pre:function(){},code_post:function(){load_from_example_firmware("ep:S1E1",true)},wait_next:100});tutorials.simpleusage.es.push({id:"simpleusage",title:"WepSIM: microprogramar, ensamblar y simular",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator011.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>Este breve tutorial le mostrar&aacute;:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,1);'>La edici&oacute;n de microc&oacute;digo.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,3);'>La edici&oacute;n de c&oacute;digo ensamblador.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,5);'>Ejecución del anterior ensamblador definido anteriormente.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.es.push({id:"simpleusage",title:"WepSIM: microprogramar, ensamblar y simular",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware001.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>El primer paso es microprogramar el firmware a ser usado. Por favor use el bot&oacute;n de 'Microcode' para ir a la pantalla de trabajo del microc&oacute;digo.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.es.push({id:"simpleusage",title:"WepSIM: microprogramar, ensamblar y simular",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware002.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>La pantalla de microprogramación ofrece:<ul><li>El editor de microcr&oacute;digo.</li><li>El microcompilador.</li><li>El resumen del hardware y la ayuda.</li></ul>Una vez que el microc&oacute;digo est&eacute; listo (editado y compile sin errores) el siguiente paso el el c&oacute;digo ensamblador.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.es.push({id:"simpleusage",title:"WepSIM: microprogramar, ensamblar y simular",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly002b.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>El segundo paso es programar el ensamblador a ser ejecutado. Por favor use el bot&oacute;n de 'Assembly' para ir a la pantalla de ensamblador.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.es.push({id:"simpleusage",title:"WepSIM: microprogramar, ensamblar y simular",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly003.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>La pantalla de programaci&oacute;n en ensamblador ofrece:<ul><li>El editor para el c&oacute;digo ensamblador.</li><li>El compilador de ensamblador.</li><li>El visualizador de mapa de memoria y ayuda.</li></ul>Asegure antes de ir a la pantalla del simulador que su c&oacute;digo este listo (editado y compilado sin errores).</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.es.push({id:"simpleusage",title:"WepSIM: microprogramar, ensamblar y simular",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator010.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>El tercer paso es ejecutar el c&oacute;digo ensamblador en el ensamblador.<br>La pantalla de simulación ofrece:<ul><li>Las vista de ensamblador y hardware.</li><li>Los detalles de registros, memoria de control, memoria principal, etc.</li><li>Las acciones de reinicio, ejecución paso a paso o hasta punto de ruptura (o fin).</li></ul>Este tutorial ha introducido el uso t&iacute;pico de WepSIM para estudiantes y profesores. ¡Disfrute con WepSIM!.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});i18n.eltos.tour_intro.es={step0:'<div  class="container"><span class="row"><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'fr\');">Bienvenue!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'kr\');">환영</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'es\');">¡Bienvenido/a!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'en\');">Welcome!</a></span></div>',step1:"WepSIM ayudar&aacute; a entender mejor c&oacute;mo funciona un computador: es visual, interactivo, integra interrupciones, llamadas al sistema, etc. <br><br>Nosotros realmente creemos que WepSIM es una herramienta revolucionaria. Este breve tour le muestra las partes clave de la interfaz de WepSIM.",step2:"En la esquina superior derecha est&aacute; el selector de 'modo de ejecuci&oacute;n'.<br><br>Permite seleccionar el hardware con el que trabajar (ejemplo: procesador elemental o EP). O tambi&eacute;n el tutorial inicial, recomendado para principiantes.",step3:"En la esquina superior derecha el bot&oacute;n de ayuda abre el panel de ayuda asociado.<br><br>El cuadro de di&aacute;logo permite el acceso a tutoriales, informaci&oacute;n, etc.",step4:"En la esquina superior izquierda, el bot&oacute;n de 'ejemplos' abre el panel asociado.<br><br>Hay muchos ejemplos muy &uacute;tiles para el aprendizaje incremental.",step5:"En la esquina superior izquierda est&aacute; el bot&oacute;n de configuracion que abre el cuadro de di&aacute;logo de la configuraci&oacute;n.<br><br>Con la configuraci&oacute;ón se puede adaptar distintos aspectos de ejecuci&oacute;n, interfaz de usuario/a, preferencias, etc.",step6:"¡Felicidades!. Ya conoce las partes clave de la interfaz de WepSIM.<br>Desde el panel de 'Ayuda' puede acceder al 'Tutorial de bienvenida'. para continuar aprendiendo.<br>"};i18n.eltos.cfg.es={General:"General","Idiom for help, examples, etc.":"Idioma para ayuda, ejemplos, etc.","Notification speed: time before disapear":"Velocidad en notificaciones: tiempo en desaparecer",Editor:"Editor","Editor theme: light or dark":"Tema de editor: claro u oscuro",Light:"Claro",Dark:"Oscuro","Editor mode: vim, emacs, etc.":"Modo de edici&oacute;n: vim, emacs, etc.",Execution:"Ejecuci&oacute;n","Running speed: execution speed":"Velocidad de ejecuci&oacute;n",Slow:"Lento",Normal:"Normal",Fast:"Veloz","Step-by-step: element in run mode":"Paso-a-paso: elemento a ejecutar de uno a uno",Instructions:"Instrucciones",Instruction:"Instrucci&oacute;n","&#181;instructions":"&#181;instrucciones",microInstruction:"&#181;Instrucci&oacute;n","Breakpoint icon: icon to be used for breakpoints":"Icono a ser usado en puntos de ruptura","Limit instructions: number of instructions to be executed":"L&iacute;mite instrucciones: n&uacute;mero de instrucciones a ser ejecutadas","Limit instruction ticks: to limit clock ticks":"L&iacute;mite ticks: limitaci&oacute;n de ticks de reloj por instrucci&oacute;n","Register file":"Banco de registros","Display format":"Formato de presentaci&oacute;n","Register file names":"Nombre de los registros",Numbers:"N&uacute;meros",Labels:"Etiquetas","Editable registers: edit register file values":"Registros editables: editar los valores de los registros","Circuitry simulation":"Circuiter&iacute;a","Data-path color":"Color del camino de datos","Signal color":"Color de las seńales activas","Show by value or by activation":"Mostrar por valor o por activaci&oacute;n",Value:"Valor",Activation:"Activaci&oacute;n","Interactive mode: signal value can be updated":"Modo interactivo: valores de las seńales puede actualizarse","Quick interactive mode: quick update of signal value":"Modo interactivo-r&aacute;pido: actualizaci&oacute;n r&aacute;pida de valores de seńales","WepSIM User Interface Skin":"Variante de Interfaz de Usuario para WepSIM","(example)":"(ejemplo)",Accesibility:"Accesibilidad","Active voice: external voice control":"Activar voz: control por voz (externo)","Verbalization: textual or mathematical":"Tipo de verbalizar: texto o matem&aacutre;tica","Enable experimental features":"Habilitar caracter&iacute;sticas experimentales"};i18n.eltos.help.es={"Welcome tutorial":"Tutorial de bienvenida",help_01_01:"Abre el tutorial de bienvenida","Simple usage tutorial":"Tutorial simple de uso",help_01_02:"Tutorial de uso simple, ejemplo b&aacute;sico para microprogramar y programar en ensamblador","Simulator: firmware":"Simulador: microc&oacute;digo",help_02_01:"Descripci&oacute;n de c&oacute;mo trabajar en el simulador con el microc&oacute;digo","Microcode format":"Formato del microc&oacute;digo",help_02_02:"Sint&aacute;xis del microc&oacute;digo usado","Simulator: assembly":"Simulador: ensamblador",help_02_03:"Descripci&oacute;n de c&oacute;mo trabajar en el simulador con el ensamblador","Assembly format":"Formato del ensamblador",help_02_04:"Sint&aacute;xis del ensamblador","Simulator: execution":"Simulador: ejecuci&oacute;n",help_02_05:"Descripci&oacute;n de c&oacute;mo ejecutar en el simulador el ensamblador y microc&oacute;digo","Simulated architecture":"Arquitectura del simulador",help_03_01:"Descripci&oacute;n de la arquitectura del procesador simulado","Simulated signals":"Señales simuladas",help_03_02:"Resumen de las señales principales del procesador elemental","Hardware summary":"Resumen del Hardware",help_03_03:"Resumen del hardware del procesador elemental simulado","License, platforms, etc.":"Licencia, plataformas, etc.",help_04_01:"Licencia de WepSIM, plataformas disponibles, tecnolog&iacute;as usadas",Authors:"Autores",help_04_02:"Autores de WepSIM"};i18n.eltos.states.es={States:"Estados",Current:"Actual","Current State":"Estado Actual",History:"Historia",None:"Ninguno","Empty history":"Historia vac&iacute;a","Empty (only modified values are shown)":"Vac&iacute;o (solo se muestra los valores modificados)",Differences:"Diferencias","differences with clipboard state":"diferencias con estado en portapapeles","Meets the specified requirements":"Iguales (cumple los requisitos)",history:"historial",Add:"A&ntilde;adir","'Current State' to History":"'Estado Actual' al historial",Check:"Comprobar",Copy:"Copiar","to clipboard":"al portapapeles",Checkpoint:"Checkpoint","File name":"Nombre de fichero","Tag for checkpoint":"Etiqueta para checkpoint","File to be loaded":"Fichero a cargar","Save to File":"Guardar a fichero","State(s) to checkpoint":"Estados para checkpoint","Record to checkpoint":"Grabaci&oacute;n para checkpoint"};i18n.eltos.examples.es={"addv + seqv.":"addv + seqv.","Alloc.s":"Alloc.s","Dummy instruction":"Instrucci&oacute;n vac&iacute;a",Exception:"Excepci&oacute;n",Instructions:"Instrucciones",Interruptions:"Interrupciones","Int. + syscall + except.":"Int. + syscall + excep.","I/O":"E/S",Looping:"Blucles","madd, mmul, mxch":"madd, mmul, mxch","Masks & shift":"M&aacute;scaras y desplazamientos",Matrix:"Matriz","Memory access":"Acceso a memoria","SC 1, 4-5, 8, 11-12":"SC 1, 4-5, 8, 11-12","strlen_2 + skipasciicode_2":"strlen_2 + skipasciicode_2",Subrutine:"Subrutina","syscall 1, 4-5, 8, 11-12":"syscall 1, 4-5, 8, 11-12","System call":"Llamada a systema",Threads:"Hilos",Vector:"Vector",example_04_01:"Ejemplo avanzado con interrupciones, llamada al sistema y excepciones.",example_05_01:"Extensiones Espec&iacute;ficas de Aplicaci&oacute;n: addv + seqv.",example_05_03:"Extensiones Espec&iacute;ficas de Aplicaci&oacute;n: madd + mmul + mxch.",example_05_02:"Extensiones Espec&iacute;ficas de Aplicaci&oacute;n: strlen_2 + skipasciicode_2.",example_03_01:"Ejemplo <b>Instructive</b> con excepci&oacute;n de coma flotante.",example_03_02:"Ejemplo <b>Instructive</b> con interrupciones: fetch, RETI y .ktext/.kdata.",example_03_03:"Ejemplo <b>Instructive</b> con llamada al sistema.",example_04_04:"Examplo de malloc + free.",example_04_02:"Examplo de llamada a sistema para imprimir/leer enteros y string.",example_04_03:"Examplo de hilos.",example_03_01b:"Examplo con excepci&oacute;n de coma flotante.",example_03_02b:"Examplo con interrupciones: fetch, RETI y .ktext/.kdata.",example_02_01:"Examplo con acceso con E/S programada y segmento de .text/.data b&aacute;sico.",example_03_03b:"Examplo con llamada a sistema.",example_02_02:"Ejemplo extendido con m&aacute;s instrucciones y E/S (teclado y pantalla).",example_02_04:"Ejemplo extendido con subrutina y matriz.",example_02_03:"Ejemplo extendido con m&aacute;scaras, desplazamiento y segmentos b&aacute;sicos.",example_01_01:"Ejemplo simple con fetch, instrucciones artim&eacute;ticas y segmentos b&aacute;sicos.",example_01_04:"Ejemplo simple con fetch, salto y segmento b&aacute;sico de .text/.data.",example_01_03:"Ejemplo simple con fetch, salto y segmento b&aacute;sico de .text.",example_01_02:"Ejemplo simple con fetch, acceso a memoria, y segmento b&aacute;sico de .text/.data.",example_06_01:"Ejemplo de prueba.",Advanced:"Avanzado",Initial:"Inicial",Intermediate:"Intermedio",Laboratory:"Laboratorio","Operating Systems":"Sistemas Operativos",Special:"Especial","Load Assembly only":"Cargar Ensamblador solo","Load Firmware only":"Cargar Firmware solo","Copy reference to clipboard":"Copiar referencia al portapapeles","No examples available...":"No examples are available for the selected hardware","Simple example":"Ejemplo simple."};i18n.eltos.dialogs.es={"Show Notifications":"Mostrar notificaciones","Show/Hide RecordBar":"Mostrar/Ocultar grabaci&oacute;n","Show/Hide ActionBar":"Mostrar/Ocultar barra","Show/Hide Slider":"Mostrar/Ocultar sliders","Initial intro":"Intro inicial","About WepSIM":"Sobre WepSIM",Title:"T&iacute;tulo",Message:"Mensaje",Duration:"Duraci&oacute;n","Confirm remove record...":"¿Seguro que quiere borrar la grabaci&oacute;n actual?","Close or Reset...":"Por favor haga click en Cerrar para mantener la grabaci&oacute;n o en Reiniciar para borrarla.","Sure Control Memory...":"¿Seguro que quiere salvar el contenido actual de la memoria de control en lugar del contenido del editor?.","Show/Hide labels":"Mostrar/Ocultar etiquetas","Show/Hide content":"Mostrar/Ocultar hexadecimal","Show/Hide assembly":"Mostrar/Ocultar ensamblador","Show/Hide pseudo-instructions":"Mostrar/Ocultar pseudo-instrucciones",Close:"Cerrar"};i18n.eltos.gui.en={"Loading WepSIM...":"Loading WepSIM...",Configuration:"Configuration",MicroCode:"MicroCode",Assembly:"Assembly",Simulator:"Simulator",Examples:"Examples",Load:"Load",Save:"Save",Restore:"Restore",Help:"Help","Help Index":"Help Index",Processor:"Processor","Assembly Debugger":"Assembly Debugger",Reset:"Reset",microInstruction:"&#181;Instruction",Instruction:"Instruction",Run:"Run","Hardware Summary":"Hardware Summary",processor:"processor",details:"details",microcode:"microcode",Signals:"Signals",Behaviors:"Behaviors",States:"States","Control States":"Control States",Dependencies:"Dependencies",Close:"Close",Description:"Description",Show:"Show","Show Main Memory":"Show Main Memory",compile:"compile",Compile:"Compile","Please write the file name":"Please write the file name","Load from this File":"Load from this File",labels:"labels",addr:"addr",ess:"ess",content:"content",assembly:"assembly",instructions:"instructions","simulator intro 1":"First, you are going to load and microcompile the microcode that defines the instruction set to be used.<br>You can use an example, load it from a file or you can edit a new one.","simulator intro 2":"Next, you need to load and compile the assembly code to be executed.<br>You can use an example, load it from a file or you can edit a new one.","simulator intro 3":"Finally, in the simulator you are able to execute the microcode plus assembly loaded before. It can be executed step by step at microinstruction level or assembly instruction level.","Prev.":"Prev.",Next:"Next",End:"End","Disable tutorial mode":"Disable tutorial mode",Comment:"Comment",Pause:"Pause",Play:"Play",Stop:"Stop",Record:"Record",Recent:"Recent",Refresh:"Refresh"};tutorials.welcome.en.push({id:"welcome",title:"Welcome to the WepSIM simulator!",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator012.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>This brief tutorial is going to show you how to:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,1);'>Load an example.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,2);'>Execute an example.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,3);'>Configure the simulation.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,4);'>Get help.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.en.push({id:"welcome",title:"How to load some example.",message:"<center><img alt='wepsim screenshot' src='help/welcome/example_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Click in the 'example' button, then click in the example 'title' name.<br>Then the example for microcode and assembly is loaded and microcompiled and compiled.<br><br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.en.push({id:"welcome",title:"How to execute an example.",message:"<center><img alt='wepsim screenshot' src='help/welcome/simulation_xinstruction.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Click on next instruction/microinstruction to execute step by step. <br>Click on run button to execute until the first breakpoint or the end of the assembly program.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.en.push({id:"welcome",title:"How to configure WepSIM.",message:"<center><img alt='wepsim screenshot' src='help/welcome/config_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Click in the 'configuration' button and users are able to customize different parts of WepSIM.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.en.push({id:"welcome",title:"How to get the basic help.",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Please click in the green 'help' button to reach the help dialog.<br>You are able to switch idiom (Spanish/English), go to the help index, or close the help dialog.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.en.push({id:"welcome",title:"Welcome to WepSIM!",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Please explorer the help sections for more information. <br>If you click on the end button of this tutorial, WepSIM is going to load the first example for you. Enjoy!<br></h5>",code_pre:function(){},code_post:function(){load_from_example_firmware("ep:S1E1",true)},wait_next:100});tutorials.simpleusage.en.push({id:"simpleusage",title:"Simple WepSIM experience: microprogramming and programming",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator011.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>This brief tutorial is going to show you how to:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,1);'>Edit your microcode.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,3);'>Edit your assembly (based on the previous microcode).</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,5);'>Execute the assembly+microcode in the simulation.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.en.push({id:"simpleusage",title:"Simple WepSIM experience: microprogramming and programming",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware001.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>The first step is to microprogramming the firmware to be used. Please use the 'Microcode' button to switch to the microcode screen.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.en.push({id:"simpleusage",title:"Simple WepSIM experience: microprogramming and programming",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware002.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>The microprogramming screen provides:<ul><li>The editor for the microcode.</li><li>The microcompiler.</li><li>The hardware summary and help.</li></ul>Once your code is ready (compiled without errors), next step is to go to the assembly screen.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.en.push({id:"simpleusage",title:"Simple WepSIM experience: microprogramming and programming",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly002b.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>The second step is to programming the assembly to be executed. Please use the 'Assembly' button from both, the simulator screen or the microcode screen.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.en.push({id:"simpleusage",title:"Simple WepSIM experience: microprogramming and programming",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly003.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>The programming screen provides:<ul><li>The editor for the assembly code.</li><li>The assembly compiler.</li><li>The memory map viewer and help.</li></ul>Once your assebly code is ready (edited and compiled without errors) next step is to go into the simulation screen.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.en.push({id:"simpleusage",title:"Simple WepSIM experience: microprogramming and programming",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator010.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>The third step is to execute the assembly code in the simulator.<br> The simulator screen provides:<ul><li>The assembly and hardware view.</li><li>The detail view of registers, control memory, main memory, etc.</li><li>The reset, step by step or run until breakpoint/end actions.</li></ul>This tutorial has introduced the typical usage of WepSIM for students and teachers. Enjoy WepSIM!</h5>",code_pre:function(){},code_post:function(){},wait_next:100});i18n.eltos.tour_intro.en={step0:'<div  class="container"><span class="row"><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'fr\');">Bienvenue!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'kr\');">환영</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'es\');">¡Bienvenido/a!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'en\');">Welcome!</a></span></div>',step1:"WepSIM helps to better understand how a computer works: it is visual, interactive, integrates from signals up to interruptions, system calls, exceptions, etc. <br> <br>We really believe WepSIM is a revolutionary teaching tool. This brief tour introduces the key elements of its interface.",step2:"This button on the top-right let users choose the 'execution mode'.<br><br>For example, the hardware to work with (e.g. the elemental processor or EP).<br>Or the tutorial mode, recommended at the beginning ;-).",step3:"On the top-right, the 'help' button opens the associated dialog.<br><br>The help dialog summarizes the tutorials, descriptions, information, etc.",step4:"And on the left, the 'examples' button open the example dialog.<br><br>There are many examples that can be used to learn incrementally.",step5:"On the top-left, the 'configuration' button opens the configuration dialog.<br><br>It let users to adapt several aspects of the execution, user interface, preferences, etc.",step6:"Congrat! You know the key elements in the WepSIM interface.<br>From the 'Help' dialog you can access the 'Welcome tutorial' to continue learning.<br>"};i18n.eltos.cfg.en={General:"General","Idiom for help, examples, etc.":"Idiom for help, examples, etc.","Notification speed: time before disapear":"Notification speed: time before disapear",Editor:"Editor","Editor theme: light or dark":"Editor theme: light or dark",Light:"Light",Dark:"Dark","Editor mode: vim, emacs, etc.":"Editor mode: vim, emacs, etc.",Execution:"Execution","Running speed: execution speed":"Running speed: execution speed",Slow:"Slow",Normal:"Normal",Fast:"Fast","Step-by-step: element in run mode":"Step-by-step: element in run mode",Instructions:"Instructions",Instruction:"Instruction","&#181;instructions":"&#181;instructions",microInstruction:"&#181;Instruction","Breakpoint icon: icon to be used for breakpoints":"Breakpoint icon: icon to be used for breakpoints","Limit instructions: number of instructions to be executed":"Limit instructions: number of instructions to be executed","Limit instruction ticks: to limit clock ticks":"Limit instruction ticks: clock ticks limit per instruction","Register file":"Register file","Display format":"Display format","Register file names":"Register file names",Numbers:"Numbers",Labels:"Labels","Editable registers: edit register file values":"Editable registers: edit register file values","Circuitry simulation":"Circuitry simulation","Data-path color":"Data-path color","Signal color":"Signal color","Show by value or by activation":"Show by value or by activation",Value:"Value",Activation:"Activation","Interactive mode: signal value can be updated":"Interactive mode: signal value can be updated","Quick interactive mode: quick update of signal value":"Quick interactive mode: quick update of signal value","WepSIM User Interface Skin":"WepSIM User Interface Skin","(example)":"(example)",Accesibility:"Accesibility","Active voice: external voice control":"Active voice: external voice control","Verbalization: textual or mathematical":"Verbalization: textual or mathematical","Enable experimental features":"Enable experimental features"};i18n.eltos.help.en={"Welcome tutorial":"Welcome tutorial",help_01_01:"Open the welcome tutorial","Simple usage tutorial":"Simple usage tutorial",help_01_02:"Open the simple usage tutorial, for microprogramming and assembly programming","Simulator: firmware":"Simulator: firmware",help_02_01:"How to work with the firmware to be loaded into the control memory","Microcode format":"Microcode format",help_02_02:"Syntax of the microcode used","Simulator: assembly":"Simulator: assembly",help_02_03:"How to work with the assembly that use the aforementioned firmware","Assembly format":"Assembly format",help_02_04:"Syntax of the assembly elements","Simulator: execution":"Simulator: execution",help_02_05:"How the simulator can execute the assembly and firmware","Simulated architecture":"Simulated architecture",help_03_01:"Description of the simulated processor architecture","Simulated signals":"Simulated signals",help_03_02:"Main signals summary of the simulated elemental processor","Hardware summary":"Hardware summary",help_03_03:"Reference card for the simulated elemental processor hardware","License, platforms, etc.":"License, platforms, etc.",help_04_01:"WepSIM license, supported platforms, technologies used",Authors:"Authors",help_04_02:"Authors of WepSIM"};i18n.eltos.states.en={States:"States",Current:"Current","Current State":"Current State",History:"History",None:"None","Empty history":"Empty history","Empty (only modified values are shown)":"Empty (only modified values are shown)",Differences:"Differences","differences with clipboard state":"differences with clipboard state","Meets the specified requirements":"Meets the specified requirements",history:"history",Add:"Add","'Current State' to History":"'Current State' to History",Check:"Check",Copy:"Copy","to clipboard":"to clipboard",Checkpoint:"Checkpoint","File name":"File name","Tag for checkpoint":"Tag for checkpoint","File to be loaded":"File to be loaded","Save to File":"Save to File","State(s) to checkpoint":"State(s) to checkpoint","Record to checkpoint":"Record to checkpoint"};i18n.eltos.examples.en={"addv + seqv.":"addv + seqv.","Alloc.s":"Alloc.s","Dummy instruction":"Dummy instruction",Exception:"Exception",Instructions:"Instructions",Interruptions:"Interruptions","Int. + syscall + except.":"Int. + syscall + except.","I/O":"I/O",Looping:"Looping","madd, mmul, mxch":"madd, mmul, mxch","Masks & shift":"Masks & shift",Matrix:"Matrix","Memory access":"Memory access","SC 1, 4-5, 8, 11-12":"SC 1, 4-5, 8, 11-12","strlen_2 + skipasciicode_2":"strlen_2 + skipasciicode_2",Subrutine:"Subrutine","syscall 1, 4-5, 8, 11-12":"syscall 1, 4-5, 8, 11-12","System call":"System call",Threads:"Threads",Vector:"Vector",example_04_01:"Advanced example with interruption, system call, and exception.",example_05_01:"Application-specific extension: addv + seqv.",example_05_03:"Application-specific extension: madd + mmul + mxch.",example_05_02:"Application-specific extension: strlen_2 + skipasciicode_2.",example_03_01:"<b>Instructive</b> example with floating point exception.",example_03_02:"<b>Instructive</b> example with interruptions support: fetch, RETI, and .ktext/.kdata.",example_03_03:"<b>Instructive</b> example with system call support.",example_04_04:"Example of malloc + free.",example_04_02:"Example of syscall for printing/reading integer and string.",example_04_03:"Example of threads.",example_03_01b:"Example with floating point exception.",example_03_02b:"Example with interruptions support: fetch, RETI, and .ktext/.kdata.",example_02_01:"Example with programmed I/O access, and basic .text/.data segment.",example_03_03b:"Example with system call support.",example_02_02:"Extended example with more instructions and I/O (keyboard, display).",example_02_04:"Extended example with subrutine and matrix.",example_02_03:"More extended example with masks, shift, and basic .text/.data segment.",example_01_01:"Simple example with fetch, arithmetic instructions, and basic .text segment.",example_01_04:"Simple example with fetch, branch, and basic .text/.data segment.",example_01_03:"Simple example with fetch, branch, and basic .text segment.",example_01_02:"Simple example with fetch, memory access, and basic .text/.data segment.",example_06_01:"Test example.",Advanced:"Advanced",Initial:"Initial",Intermediate:"Intermediate",Laboratory:"Laboratory","Operating Systems":"Operating Systems",Special:"Special","Load Assembly only":"Load Assembly only","Load Firmware only":"Load Firmware only","Copy reference to clipboard":"Copy reference to clipboard","No examples available...":"No examples are available for the selected hardware","Simple example":"Simple example."};i18n.eltos.dialogs.en={"Show Notifications":"Show Notifications","Show/Hide RecordBar":"Show/Hide RecordBar","Show/Hide ActionBar":"Show/Hide ActionBar","Show/Hide Slider":"Show/Hide Slider","Initial intro":"Initial intro","About WepSIM":"About WepSIM",Title:"Title",Message:"Message",Duration:"Duration","Confirm remove record...":"Do you want to remove the actual record?","Close or Reset...":"Please click on Close to keep it, <br>or click on the Reset button to remove it.","Sure Control Memory...":"Do you want me to save the current Control Memory contents rather than the editor contents?.","Show/Hide labels":"Show/Hide labels","Show/Hide content":"Show/Hide content","Show/Hide assembly":"Show/Hide assembly","Show/Hide pseudo-instructions":"Show/Hide pseudo-instructions",Close:"Close"};i18n.eltos.gui.fr={"Loading WepSIM...":"Chargement de WepSIM ...",Configuration:"Configuration",MicroCode:"MicroCode",Assembly:"Assembly",Simulator:"Simulator",Examples:"Exemples",Load:"Charger",Save:"Enregistrer",Restore:"Restaurer",Help:"Aide","Help Index":"Index de l'aide",Processor:"Processeur","Assembly Debugger":"Débogueur d'assemblage",Reset:"Réinitialiser",microInstruction:"&#181;Instruction",Instruction:"Instruction",Run:"Exécuter","Hardware Summary":"Résumé du matériel.",processor:"processeur",details:"détails",microcode:"microcode",Signals:"Signaux",Behaviors:"Comportements",States:"États","Control States":"États de contrôle",Dependencies:"Dépendances",Close:"Fermer",Description:"Détalle",Show:"Afficher","Show Main Memory":"Afficher la mémoire principale",compile:"compiler",Compile:"Compiler","Please write the file name":"Merci d'écrire le nom du fichier","Load from this File":"Charger à partir de ce fichier",labels:"étiquettes",addr:"adr",ess:"esse",content:"content",assembly:"assembly",instructions:"instructions","simulator intro 1":"Tout d'abord, vous vont charger et micro-compiler t Le microcode qui définit le jeu d’instructions à utiliser. <br> Vous pouvez utiliser un exemple, le charger à partir d’un fichier ou en éditer un nouveau.","simulator intro 2":"Ensuite, vous devez charger et compiler le code d'assemblage à exécuter. <br> Vous pouvez utiliser un exemple:	le charger à partir d'un fichier ou en éditer un nouveau.","simulator intro 3":"Enfin,	dans le simulateur, vous pouvez exécuter le microcode. plus assemblée chargée avant. Il peut être exécuté pas à pas au niveau de la micro-instruction ou de l’instruction d’assemblage.","Prev.":"Prev.",Next:"Next",End:"End","Disable tutorial mode":"Désactiver le mode tutoriel",Comment:"Commentaire",Pause:"Pause",Play:"Lecture",Stop:"Arrêt",Record:"Enregistrement",Recent:"Récent",Refresh:"Actualiser"};tutorials.welcome.fr.push({id:"welcome",title:"Bienvenue sur le simulateur WepSIM!",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator012.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>Ce bref tutoriel va vous montrer comment:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,1);'>Charger un exemple.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,2);'>Exécuter un exemple.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,3);'>Configurer la simulation.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,4);'>Obtenir de l'aide.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.fr.push({id:"welcome",title:"Comment charger des exemples.",message:"<center><img alt='wepsim screenshot' src='help/welcome/example_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Cliquez sur le bouton 'exemple', puis sur le nom de l'exemple 'titre'.<br>Ensuite, l'exemple pour le microcode et l'assemblage est chargé, microcompilé et compilé.<br><br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.fr.push({id:"welcome",title:"Comment exécuter un exemple.",message:"<center><img alt='wepsim screenshot' src='help/welcome/simulation_xinstruction.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Cliquez sur l'instruction suivante/la microinstruction pour exécuter étape par étape. <br>Cliquez sur le bouton Exécuter pour exécuter jusqu'au premier point d'arrêt ou à la fin du programme d'assemblage.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.fr.push({id:"welcome",title:"Comment configurer WepSIM.",message:"<center><img alt='wepsim screenshot' src='help/welcome/config_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Cliquez sur le bouton 'Configuration' pour permettre aux utilisateurs de personnaliser différentes parties de WepSIM.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.fr.push({id:"welcome",title:"Comment obtenir l'aide de base.",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Cliquez sur le bouton vert 'aide' pour accéder à la boîte de dialogue d'aide.<br>Vous pouvez changer d'idiome (Espagnol/Anglais), accéder à l'index de l'aide ou fermer la boîte de dialogue d'aide.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.fr.push({id:"welcome",title:"Bienvenue sur le simulateur WepSIM!",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>Veuillez explorer les sections d'aide pour plus d'informations. <br>Si vous cliquez sur le bouton de fin de ce tutoriel, WepSIM va charger le premier exemple pour vous. Profitez-en!<br></h5>",code_pre:function(){},code_post:function(){load_from_example_firmware("ep:S1E1",true)},wait_next:100});tutorials.simpleusage.fr.push({id:"simpleusage",title:"Expérience WepSIM simple: microprogrammation et programmation",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator011.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>Ce bref tutoriel va vous montrer comment:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,1);'>Editez votre microcode.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,3);'>Editez votre assemblage (basé sur le microcode précédent).</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,5);'>Exécuter l'assemblage + le microcode dans la simulation.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.fr.push({id:"simpleusage",title:"Expérience WepSIM simple: microprogrammation et programmation",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware001.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>La première étape consiste à microprogrammer le firmware à utiliser. Veuillez utiliser le bouton 'Microcode' pour passer à l'écran du microcode.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.fr.push({id:"simpleusage",title:"Expérience WepSIM simple: microprogrammation et programmation",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware002.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>L’écran de microprogrammation fournit:<ul><li>L'éditeur du microcode.</li><li>Le microcompilateur.</li><li>Résumé du matériel et aide.</li></ul>Une fois que votre code est prêt (compilé sans erreurs), l'étape suivante consiste à accéder à l'écran d'assemblage.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.fr.push({id:"simpleusage",title:"Expérience WepSIM simple: microprogrammation et programmation",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly002b.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>La deuxième étape consiste à programmer l'assemblage à exécuter. Veuillez utiliser le bouton 'Assemblage' de l'écran du simulateur ou de l'écran du microcode.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.fr.push({id:"simpleusage",title:"Expérience WepSIM simple: microprogrammation et programmation",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly003.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>L'écran de programmation fournit:<ul><li>L'éditeur du code d'assemblage. </li><li>Le compilateur d'assemblage. </li><li>La visionneuse de carte mémoire et l'aide. </li></ul>Une fois que votre code définitif est prêt (édité et compilé sans erreur), l'étape suivante consiste à accéder à l'écran de simulation.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.fr.push({id:"simpleusage",title:"Expérience WepSIM simple: microprogrammation et programmation",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator010.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>La troisième étape consiste à exécuter le code d'assemblage dans le simulateur. <br>L'écran du simulateur fournit:<ul><li>La vue assemblage et matériel. </li><li>La vue détaillée des registres, de la mémoire de contrôle, de la mémoire principale, etc. </li><li>La réinitialisation, étape par étape ou exécution jusqu'au point d'arrêt / actions de fin. </li></ul>Ce tutoriel a introduit l'utilisation typique de WepSIM pour les étudiants et les enseignants. Profitez de WepSIM!</h5>",code_pre:function(){},code_post:function(){},wait_next:100});i18n.eltos.tour_intro.fr={step0:'<div  class="container"><span class="row"><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'fr\');">Bienvenue!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'kr\');">환영</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'es\');">¡Bienvenido/a!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'en\');">Welcome!</a></span></div>',step1:"WepSIM aide à mieux comprendre le fonctionnement d'un ordinateur:visuel, interactif, il intègre des signaux jusqu’aux interruptions, appels système, exceptions, etc. <br><br>Nous pensons vraiment que WepSIM est un outil pédagogique révolutionnaire.Cette brève visite présente les éléments clés de son interface.",step2:"Ce bouton en haut à droite permet aux utilisateurs de choisir le mode d'exécution.<br><br>Par exemple, le matériel avec lequel travailler (par exemple, le processeur élémentaire ou EP). <br>Ou le mode tutoriel, recommandé au début ;-).",step3:"En haut à droite, le bouton 'aide' ouvre la boîte de dialogue associée. <br><br>La boîte de dialogue d'aide récapitule les tutoriels, les descriptions, les informations, etc.",step4:"Et à gauche, le bouton 'exemples' ouvre la boîte de dialogue des exemples. <br><br>Il existe de nombreux exemples qui peuvent être utilisés pour apprendre progressivement.",step5:"En haut à gauche, le bouton 'configuration' ouvre la boîte de dialogue de configuration.<br>Il permet aux utilisateurs d'adapter plusieurs aspects de l'exécution, de l'interface utilisateur, des préférences, etc.",step6:"Félicitations! Vous connaissez les éléments clés de l'interface WepSIM. <br>Dans la boîte de dialogue 'Aide', vous pouvez accéder au 'didacticiel de bienvenue' pour continuer à apprendre. <br>"};i18n.eltos.cfg.fr={General:"Général","Idiom for help, examples, etc.":"Idiome pour l'aide, exemples, etc.","Notification speed: time before disapear":"Vitesse de notification: heure avant la disparition",Editor:"L'éditeur","Editor theme: light or dark":"Thème de l'éditeur: clair ou sombre",Light:"Clair",Dark:"Sombre","Editor mode: vim, emacs, etc.":"Mode éditeur: vim, emacs, etc.",Execution:"Exécution","Running speed: execution speed":"Vitesse d'exécution: vitesse d'exécution",Slow:"Lent",Normal:"Normal",Fast:"Rapide","Step-by-step: element in run mode":"Pas à pas: élément en mode d'exécution",Instructions:"Instructions",Instruction:"Instruction","&#181;instructions":"&#181;instructions",microInstruction:"&#181;Instruction","Breakpoint icon: icon to be used for breakpoints":"Icône de point d'arrêt: icône à utiliser pour les points d'arrêt","Limit instructions: number of instructions to be executed":"Instructions limites: nombre d'instructions à exécuter","Limit instruction ticks: to limit clock ticks":"Limites des ticks d'instruction: nombre de ticks d'horloge nstruction","Register file":"Enregistrer un fichier","Display format":"Format d'affichage","Register file names":"Enregistrer un nom de fichier",Numbers:"Numéros",Labels:"Étiquettes","Editable registers: edit register file values":"Registres modifiables: modifier les valeurs du fichier de registre","Circuitry simulation":"Simulation de circuit","Data-path color":"Couleur du chemin de données","Signal color":"Couleur du signal","Show by value or by activation":"Afficher par valeur ou par activation",Value:"Valeur",Activation:"Activation","Interactive mode: signal value can be updated":"Mode interactif: la valeur du signal peut être mise à jour","Quick interactive mode: quick update of signal value":"Mode interactif rapide: mise à jour rapide de la valeur du signal","WepSIM User Interface Skin":"Apparence de l'interface utilisateur WepSIM","(example)":"(exemple)",Accesibility:"Accessibilité","Active voice: external voice control":"Voix active: commande vocale externe","Verbalization: textual or mathematical":"Verbalisation: textuelle ou mathématique","Enable experimental features":"Activer experim caractéristiques entales"};i18n.eltos.help.fr={"Welcome tutorial":"Tutoriel de bienvenue",help_01_01:"Ouvrez le tutoriel de bienvenue","Simple usage tutorial":"Tutoriel d'utilisation simple",help_01_02:"Ouvrez le tutoriel d'utilisation simple, pour la microprogrammation et l'assemblage. programmation","Simulator: firmware":"Simulateur: firmware",help_02_01:"Comment utiliser le firmware à charger dans la mémoire de contrôle","Microcode format":"Format du microcode",help_02_02:"Syntaxe du microcode utilisé","Simulator: assembly":"Simulateur: assemblage",help_02_03:"Comment utiliser l'assemblage utilisant le microprogramme susmentionné","Assembly format":"Format d'assemblage",help_02_04:"Syntaxe des éléments d'assemblage","Simulator: execution":"Simulateur: exécution",help_02_05:"Comment le simulateur peut exécuter l'assemblage et le firmware","Simulated architecture":"Architecture simulée",help_03_01:"Description de l'architecture du processeur simulé","Simulated signals":"Signaux simulés",help_03_02:"Résumé des signaux principaux du processeur élémentaire simulé","Hardware summary":"Résumé du matériel",help_03_03:"Carte de référence pour le matériel du processeur élémentaire simulé","License, platforms, etc.":"Licence, plates-formes, etc.",help_04_01:"Licence WepSIM, prise en charge plateformes, technologies utilisées",Authors:"Auteurs",help_04_02:"Auteurs de WepSIM"};i18n.eltos.states.fr={States:"États",Current:"Actuel","Current State":"État actuel",History:"Histoire",None:"Aucune","Empty history":"Historique vide","Empty (only modified values are shown)":"Vide (seules les valeurs modifiées sont affichées)",Differences:"Différences","differences with clipboard state":"Différences avec l'état du presse-papiers","Meets the specified requirements":"Répond aux exigences spécifiées",history:"historique",Add:"Ajouter","'Current State' to History":"'État actuel' à l'historique",Check:"Vérifier",Copy:"Copier","to clipboard":"dans le presse-papiers",Checkpoint:"Point de contrôle","File name":"Nom de fichier","Tag for checkpoint":"Balise pour point de contrôle","File to be loaded":"Fichier à charger","Save to File":"Enregistrer dans un fichier","State(s) to checkpoint":"État (s) au point de contrôle","Record to checkpoint":"Enregistrer au point de contrôle"};i18n.eltos.examples.fr={"addv + seqv.":"addv + seqv.","Alloc.s":"Alloc.s","Dummy instruction":"Instruction fictive",Exception:"Exception",Instructions:"Instructions",Interruptions:"Interruptions","Int. + syscall + except.":"Int. + syscall + except.","I/O":"I/O",Looping:"En boucle","madd, mmul, mxch":"madd, mmul, mxch","Masks & shift":"Masques et décalage",Matrix:"Matrice","Memory access":"Accès mémoire","SC 1, 4-5, 8, 11-12":"SC 1, 4-5, 8, 11-12","strlen_2 + skipasciicode_2":"strlen_2 + skipasciicode_2",Subrutine:"Subrutine","syscall 1, 4-5, 8, 11-12":"Appel système 1, 4-5, 8, 11-12","System call":"Appel système",Threads:"Fils",Vector:"Vecteur",example_04_01:"Exemple avancé avec interruption, appel système et exception.",example_05_01:"Extension spécifique à l'application: addv + seqv.",example_05_03:"Extension spécifique à l'application: madd + mmul + mxch.",example_05_02:"Extension spécifique à l'application: strlen_2 + skipasciicode_2.",example_03_01:"Exemple <b> Instructive </b> avec exception de virgule flottante.",example_03_02:"Exemple <b> Instructive </b> avec prise en charge des interruptions: fetch, RETI et .ktext/.kdata.",example_03_03:"Exemple <b> Instructive </b> avec prise en charge des appels système.",example_04_04:"Exemple de malloc + free.",example_04_02:"Exemple de appel système pour l'impression/la lecture de nombres entiers et de chaînes.",example_04_03:"Exemple de fils.",example_03_01b:"Exemple avec exception en virgule flottante.",example_03_02b:"Exemple avec prise en charge des interruptions: fetch, RETI et .ktext/.kdata.",example_02_01:"Exemple avec accès I/O programmé et segment de base .text/.data.",example_03_03b:"Exemple avec prise en charge des appels système.",example_02_02:"Exemple étendu avec davantage d'instructions et d'E/S (clavier, affichage).",example_02_04:"Exemple étendu avec sous-programme et matrice.",example_02_03:"Exemple plus détaillé avec masques, décalage et segment de base .text/.data.",example_01_01:"Exemple simple avec récupération, instructions arithmétiques et segment de base .text.",example_01_04:"Exemple simple avec récupération, branche et segment de base .text/.data.",example_01_03:"Exemple simple avec fetch, branche et segment de base .text.",example_01_02:"Exemple simple avec récupération, accès à la mémoire et .text/.data de base segment.",example_06_01:"Exemple de test.",Advanced:"Avancé",Initial:"Initiale",Intermediate:"Intermédiaire",Laboratory:"Laboratoire","Operating Systems":"Systèmes d'exploitation",Special:"Spécial","Load Assembly only":"Charger uniquement l'assemblage","Load Firmware only":"Charger uniquement le microprogramme","Copy reference to clipboard":"Copier la référence dans le presse-papiers","No examples available...":"Aucun exemple disponible pour le matériel sélectionné","Simple example":"Exemple simple"};i18n.eltos.dialogs.fr={"Show Notifications":"Afficher les notifications","Show/Hide RecordBar":"Afficher/masquer la barre d'enregistrement","Show/Hide ActionBar":"Afficher/masquer la barre d'action","Show/Hide Slider":"Afficher/masquer le curseur","Initial intro":"Intro initiale","About WepSIM":"À propos de WepSIM",Title:"Titre",Message:"Message",Duration:"Durée","Confirm remove record...":"Voulez-vous supprimer l'enregistrement en cours?","Close or Reset...":"Cliquez sur Fermer pour le conserver, <br> ou cliquez sur le bouton Réinitialiser pour le supprimer.","Sure Control Memory...":"Voulez-vous que je sauvegarde le contenu actuel de la mémoire de contrôle plutôt que le contenu de l'éditeur?.","Show/Hide labels":"Afficher/masquer les étiquettes","Show/Hide content":"Afficher/masquer le contenu","Show/Hide assembly":"Afficher/masquer l'assemblage","Show/Hide pseudo-instructions":"Afficher/masquer les pseudo-instructions",Close:"Fermer"};i18n.eltos.gui.kr={"Loading WepSIM...":"WepSIM로드 중...",Configuration:"구성",MicroCode:"마이크로 코드",Assembly:"어셈블리",Simulator:"모의 실험 장치",Examples:"예제들",Load:"하중",Save:"구하다",Restore:"복원",Help:"도움","Help Index":"도움말 색인",Processor:"프로세서","Assembly Debugger":"어셈블리 디버거",Reset:"다시 놓기",microInstruction:"&#181;교수",Instruction:"교수",Run:"조업","Hardware Summary":"하드웨어 요약",processor:"프로세서",details:"세부",microcode:"마이크로 코드",Signals:"신호",Behaviors:"행동",States:"주","Control States":"제어 상태",Dependencies:"종속성",Close:"닫기",Description:"기술",Show:"보여주기","Show Main Memory":"주 메모리보기",compile:"보여주기",Compile:"보여주기","Please write the file name":"파일 이름을 적어주세요.","Load from this File":"이 파일에서로드",labels:"라벨",addr:"주소",ess:"&nbsp;",content:"함유량",assembly:"어셈블리",instructions:"명령","simulator intro 1":"먼저, 사용할 명령어 세트를 정의하는 마이크로 코드를로드하고 마이크로 컴파일합니다 예제를 사용하거나, 파일에서로드하거나, 새 예제를 편집 할 수 있습니다.","simulator intro 2":"다음으로, 실행할 어셈블리 코드를로드하고 컴파일해야합니다. 예제를 사용하거나, 파일에서로드하거나, 새 예제를 편집 할 수 있습니다.","simulator intro 3":"마지막으로 시뮬레이터에서 이전에로드 된 마이크로 코드 플러스 어셈블리를 실행할 수 있습니다. 마이크로 인스트럭션 레벨 또는 어셈블리 인스트럭션 레벨에서 단계적으로 실행할 수 있습니다.","Prev.":"너무 이른",Next:"다음 것",End:"끝","Disable tutorial mode":"자습서 모드 사용 안함",Comment:"의견을 남기다",Pause:"일시 정지하다",Play:"연주하다",Stop:"그치다",Record:"기록하다",Recent:"충적세",Refresh:"새롭게 하다"};tutorials.welcome.kr.push({id:"welcome",title:"WepSIM 시뮬레이터에 오신 것을 환영합니다",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator012.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>이 간단한 튜토리얼은:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,1);'>예제로드.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,2);'>예제 실행.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,3);'>시뮬레이션 구성.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"welcome\",0,4);'>도움 받기.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.kr.push({id:"welcome",title:"몇 가지 예제를로드하는 방법",message:"<center><img alt='wepsim screenshot' src='help/welcome/example_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5> '예제'버튼을 클릭하고 예제 'title'이름을 클릭하십시오. <br>그런 다음 마이크로 코드 및 어셈블리 예제가로드되고 마이크로 컴파일되고 컴파일됩니다. <br><br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.kr.push({id:"welcome",title:"예제를 실행하는 방법.",message:"<center><img alt='wepsim screenshot' src='help/welcome/simulation_xinstruction.gif' style='max-width:100%; max-height:60vh'></center><p><h5>다음 명령어 / 마이크로 명령어를 클릭하면 단계별로 실행됩니다. <br>첫 번째 중단 점이나 어셈블리 프로그램이 끝날 때까지 실행하려면 실행 버튼을 클릭하십시오.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.kr.push({id:"welcome",title:"WepSIM을 구성하는 방법",message:"<center><img alt='wepsim screenshot' src='help/welcome/config_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5> '구성'버튼을 클릭하면 사용자가 WepSIM의 다른 부분을 사용자 정의 할 수 있습니다.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.kr.push({id:"welcome",title:"기본 도움말을 얻는 방법",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>녹색 '도움말'버튼을 클릭하면 도움말 대화 상자가 나타납니다. <br>관용구 (스페인어 / 영어)를 전환하거나 도움말 색인으로 이동하거나 도움말 대화 상자를 닫을 수 있습니다.<br></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.welcome.kr.push({id:"welcome",title:"WepSIM에 오신 것을 환영합니다",message:"<center><img alt='wepsim screenshot' src='help/welcome/help_usage.gif' style='max-width:100%; max-height:60vh'></center><p><h5>자세한 내용은 도움말 섹션을 탐색하십시오. <br>이 튜토리얼의 끝 버튼을 클릭하면 WepSIM이 첫 번째 예제를로드합니다. 즐기십시오!<br></h5>",code_pre:function(){},code_post:function(){load_from_example_firmware("ep:S1E1",true)},wait_next:100});tutorials.simpleusage.kr.push({id:"simpleusage",title:"간단한 WepSIM 경험 : 마이크로 프로그래밍 및 프로그래밍",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator011.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>이 간단한 튜토리얼은:<ol><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,1);'>마이크로 코드 편집.</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,3);'>어셈블리 편집 (이전 마이크로 코드 기반).</a></li><li><a href='#' onclick='sim_tutorial_goframe(\"simpleusage\",0,5);'>시뮬레이션에서 어셈블리 + 마이크로 코드 실행.</a></li></ol></h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.kr.push({id:"simpleusage",title:"간단한 WepSIM 경험 : 마이크로 프로그래밍 및 프로그래밍",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware001.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>첫 번째 단계는 사용할 펌웨어를 마이크로 프로그래밍하는 것입니다. 마이크로 코드 화면으로 전환하려면 '마이크로 코드'버튼을 사용하십시오.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.kr.push({id:"simpleusage",title:"간단한 WepSIM 경험 : 마이크로 프로그래밍 및 프로그래밍",message:"<center><img alt='wepsim screenshot' src='help/simulator/firmware002.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>마이크로 프로그래밍 화면은 다음을 제공합니다.<ul><li> 마이크로 코드 편집기. </li><li> 마이크로 컴파일러. </li><li> 하드웨어 요약 및 도움. </li></ul>일단 코드가 준비되면 (오류없이 컴파일 된) 다음 단계는 어셈블리 화면으로 이동하는 것입니다.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.kr.push({id:"simpleusage",title:"간단한 WepSIM 경험 : 마이크로 프로그래밍 및 프로그래밍",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly002b.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>두 번째 단계는 실행될 어셈블리를 프로그래밍하는 것입니다. 시뮬레이터 화면이나 마이크로 코드 화면에서 '어셈블리'버튼을 사용하십시오.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.kr.push({id:"simpleusage",title:"간단한 WepSIM 경험 : 마이크로 프로그래밍 및 프로그래밍",message:"<center><img alt='wepsim screenshot' src='help/simulator/assembly003.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>프로그래밍 화면에서는 다음을 제공합니다.<ul><li> 어셈블리 코드 편집기. </li><li> 어셈블리 컴파일러. </li><li> 메모리 맵 뷰어 및 도움말. </li></ul>일단 당신의 assebly 코드가 준비되면 (오류없이 편집되고 컴파일 된) 다음 단계는 시뮬레이션 화면으로 들어가는 것입니다.</h5>",code_pre:function(){},code_post:function(){},wait_next:100});tutorials.simpleusage.kr.push({id:"simpleusage",title:"간단한 WepSIM 경험 : 마이크로 프로그래밍 및 프로그래밍",message:"<center><img alt='wepsim screenshot' src='help/simulator/simulator010.jpg' style='max-width:100%; max-height:40vh;'></center><p><h5>세 번째 단계는 시뮬레이터에서 어셈블리 코드를 실행하는 것입니다. <br>시뮬레이터 화면은 다음을 제공합니다 :<ul><li> 어셈블리 및 하드웨어보기 </li><li> 레지스터, 제어 메모리, 메인 메모리 등의 상세보기 </li><li> 단계별로 재설정하거나 중단 점 / 종료 작업까지 실행하십시오. </li></ul>이 튜토리얼은 학생 및 교사를위한 WepSIM의 일반적인 사용법을 소개했습니다. WepSIM을 즐기십시오!</h5>",code_pre:function(){},code_post:function(){},wait_next:100});i18n.eltos.tour_intro.kr={step0:'<div  class="container"><span class="row"><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'fr\');">Bienvenue!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'kr\');">환영</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'es\');">¡Bienvenido/a!</a><a class="btn btn-sm btn-outline-dark mx-2 my-2 col-auto" href="#" onclick="wepsim_newbie_tour_reload(\'en\');">Welcome!</a></span></div>',step1:"WepSIM을 사용하면 컴퓨터 작동 방식을 더 잘 이해할 수 있습니다.시각적이며 대화 형이며 신호에서 중단, 시스템 호출, 예외 등을 통합합니다.<br>우리는 WepSIM이 혁신적인 교육 도구라고 믿습니다.이 간단한 둘러보기는 인터페이스의 핵심 요소를 소개합니다.",step2:"오른쪽 상단의이 버튼을 사용하면 '실행 모드'를 선택할 수 있습니다. <br><br>예를 들어, 사용할 하드웨어 (예 : 기본 프로세서 또는 EP).또는 자습서 모드, 처음에 권장 ;-).",step3:"오른쪽 상단의 '도움말'버튼을 누르면 관련 대화 상자가 열립니다. <br><br>도움말 대화 상자는 자습서, 설명, 정보 등을 요약합니다.",step4:"왼쪽에는 'examples' 버튼이 예제 대화 상자를 엽니 다. <br><br>점진적으로 배우는 데 사용할 수있는 많은 예가 있습니다.",step5:"왼쪽 상단에 'configuration' 버튼이 구성 대화 상자를 엽니 다. <br> +<br>사용자가 실행, 사용자 인터페이스, 환경 설정 등의 여러 측면을 적용 할 수있게 해줍니다.",step6:"축하합니다! WepSIM 인터페이스의 핵심 요소를 알고 계십니다. <br> '도움말'대화 상자에서 '환영 자습서'에 액세스하여 학습을 계속할 수 있습니다. <br>"};i18n.eltos.cfg.kr={General:"일반","Idiom for help, examples, etc.":"도움, 예제 등을위한 관용구","Notification speed: time before disapear":"알림 속도 : 사라지기 전의 시간",Editor:"편집자","Editor theme: light or dark":"편집기 테마 : 밝거나 어두움",Light:"빛",Dark:"어두운","Editor mode: vim, emacs, etc.":"편집기 모드 : vim, emacs 등",Execution:"실행","Running speed: execution speed":"실행 속도 : 실행 속도",Slow:"느린",Normal:"표준",Fast:"빠른","Step-by-step: element in run mode":"단계별 : 실행 모드의 요소",Instructions:"교수",Instruction:"교수","&#181;instructions":"&#181;교수",microInstruction:"&#181;교수","Breakpoint icon: icon to be used for breakpoints":"중단 점 아이콘 : 중단 점에 사용될 아이콘","Limit instructions: number of instructions to be executed":"제한 명령어 : 실행될 명령어의 수","Limit instruction ticks: to limit clock ticks":"명령어 틱 제한 : 명령어 당 클록 틱 제한","Register file":"등록 파일","Display format":"표시 형식","Register file names":"파일 이름 등록",Numbers:"번호",Labels:"레이블","Editable registers: edit register file values":"편집 가능한 레지스터 : 레지스터 파일 값 편집","Circuitry simulation":"회로 시뮬레이션","Data-path color":"데이터 경로 색상","Signal color":"신호 색상","Show by value or by activation":"가치 또는 활성화로 보여라",Value:"가치",Activation:"활성화","Interactive mode: signal value can be updated":"대화 형 모드 : 신호 값을 업데이트 할 수 있습니다","Quick interactive mode: quick update of signal value":"빠른 대화 형 모드 : 신호 값의 빠른 업데이트","WepSIM User Interface Skin":"WepSIM 사용자 인터페이스 스킨","(example)":"(예)",Accesibility:"접근성","Active voice: external voice control":"활성 음성 : 외부 음성 제어","Verbalization: textual or mathematical":"언어학 : 텍스트 또는 수학","Enable experimental features":"실험 사용"};i18n.eltos.help.kr={"Welcome tutorial":"환영 자습서",help_01_01:"환영하는 자습서 열기","Simple usage tutorial":"간단한 사용법 자습서",help_01_02:"마이크로 프로그래밍 및 어셈블리 프로그래밍을위한 간단한 사용법 자습서 열기","Simulator: firmware":"시뮬레이터 : 펌웨어",help_02_01:"펌웨어를 제어 메모리에로드하는 방법","Microcode format":"마이크로 코드 형식",help_02_02:"사용 된 마이크로 코드의 구문","Simulator: assembly":"시뮬레이터 : 어셈블리",help_02_03:"앞서 언급 한 펌웨어를 사용하는 어셈블리 작업 방법","Assembly format":"어셈블리 형식",help_02_04:"어셈블리 요소의 구문","Simulator: execution":"시뮬레이터 : 실행",help_02_05:"시뮬레이터가 어셈블리 및 펌웨어를 실행할 수있는 방법","Simulated architecture":"시뮬레이션 된 아키텍처",help_03_01:"시뮬레이트 된 프로세서 아키텍처에 대한 설명","Simulated signals":"시뮬레이션 된 신호",help_03_02:"시뮬레이션 된 기본 프로세서의 주요 신호 요약","Hardware summary":"하드웨어 요약",help_03_03:"시뮬레이트 된 기본 프로세서 하드웨어에 대한 참조 카드","License, platforms, etc.":"라이센스, 플랫폼 등",help_04_01:"WEPSIM 라이센스, 지원 플랫폼, 사용 된 기술",Authors:"저자",help_04_02:"WepSIM의 저자"};i18n.eltos.states.kr={States:"주",Current:"현재","Current State":"현재 상태",History:"역사",None:"없음","Empty history":"비어있는 기록","Empty (only modified values are shown)":"비어 있음 (수정 된 값만 표시됨)",Differences:"차이점","differences with clipboard state":"클립 보드 상태와의 차이점","Meets the specified requirements":"지정된 요구 사항 충족",history:"역사",Add:"추가","'Current State' to History":"역사에 ''현재 국가 ",Check:"확인",Copy:"복사","to clipboard":"클립 보드에",Checkpoint:"검사 점","File name":"파일 이름","Tag for checkpoint":"검사 점을위한 태그","File to be loaded":"로드 할 파일","Save to File":"파일에 저장","State(s) to checkpoint":"검사 점의 상태","Record to checkpoint":"체크 포인트에 기록"};i18n.eltos.examples.kr={"addv + seqv.":"addv + seqv.","Alloc.s":"Alloc.s","Dummy instruction":"Dummy instruction",Exception:"Exception",Instructions:"Instructions",Interruptions:"Interruptions","Int. + syscall + except.":"Int. + syscall + except.","I/O":"I/O",Looping:"Looping","madd, mmul, mxch":"madd, mmul, mxch","Masks & shift":"Masks & shift",Matrix:"Matrix","Memory access":"Memory access","SC 1, 4-5, 8, 11-12":"SC 1, 4-5, 8, 11-12","strlen_2 + skipasciicode_2":"strlen_2 + skipasciicode_2",Subrutine:"Subrutine","syscall 1, 4-5, 8, 11-12":"syscall 1, 4-5, 8, 11-12","System call":"System call",Threads:"Threads",Vector:"Vector",example_04_01:"중단, 시스템 호출 및 예외가있는 고급 예제",example_05_01:"응용 프로그램 관련 확장 프로그램 : addv + seqv.",example_05_03:"응용 프로그램 관련 확장 프로그램 : madd + mmul + mxch.",example_05_02:"응용 프로그램 관련 확장 프로그램 : strlen_2 + skipasciicode_2.",example_03_01:"부동 소수점 예외가있는 실용적인 예제",example_03_02:"인터럽트를 지원하는 지침적인 예 : fetch, RETI 및 .ktext / .kdata.",example_03_03:"시스템 호출을 지원하는 지침적인 예",example_04_04:"malloc + free 예제",example_04_02:"정수 및 문자열 인쇄 / 읽기 용 syscall 예제",example_04_03:"스레드의 예",example_03_01b:"부동 소수점 예외가있는 예",example_03_02b:"중단이있는 예 : fetch, RETI 및 .ktext / .kdata.",example_02_01:"프로그래밍 된 I / O 액세스 및 기본. 텍스트 /. 데이터 세그먼트가있는 예",example_03_03b:"시스템 호출 지원 예제",example_02_02:"더 많은 지침과 I / O (키보드, 디스플레이)가있는 확장 예제.",example_02_04:"서브 루틴 및 행렬이있는 확장 된 예제",example_02_03:"마스크, 시프트 및 기본. 텍스트 /. 데이터 세그먼트가있는 확장 된 예제입니다.",example_01_01:"가져 오기, 산술 명령어 및 기본. 텍스트 세그먼트가있는 간단한 예제입니다.",example_01_04:"가져 오기, 분기 및 기본. 텍스트 /. 데이터 세그먼트가있는 간단한 예제입니다.",example_01_03:"가져 오기, 분기 및 기본 .text 세그먼트가있는 간단한 예제입니다.",example_01_02:"가져 오기, 메모리 액세스 및 기본. 텍스트 /. 데이터 세그먼트가있는 간단한 예제입니다.",example_06_01:"테스트 예.",Advanced:"많은",Initial:"머리 글자",Intermediate:"중급",Laboratory:"실험실","Operating Systems":"운영체제",Special:"특별한","Load Assembly only":"로드 어셈블리 전용","Load Firmware only":"펌웨어로드 전용","Copy reference to clipboard":"클립 보드에 참조 복사","No examples available...":"선택한 하드웨어에 대한 예제가 없습니다","Simple example":"간단한 예"};i18n.eltos.dialogs.kr={"Show Notifications":"알림 표시","Show/Hide RecordBar":"RecordBar보기 / 가리기","Show/Hide ActionBar":"ActionBar 표시 / 숨기기","Show/Hide Slider":"슬라이더 표시 / 숨기기","Initial intro":"초기 소개","About WepSIM":"WepSIM 소개",Title:"제목",Message:"메시지",Duration:"재생 시간","Confirm remove record...":"현재 레코드를 제거 하시겠습니까?","Close or Reset...":"계속하려면 닫기를 클릭하고, <br> 단추를 클릭하여 제거하십시오.","Sure Control Memory...":"편집기 내용이 아닌 현재 컨트롤 메모리 내용을 저장 하시겠습니까?","Show/Hide labels":"레이블 표시 / 숨기기","Show/Hide content":"콘텐츠 표시 / 숨기기","Show/Hide assembly":"어셈블리 표시 / 숨기기","Show/Hide pseudo-instructions":"의사 명령어 표시 / 숨기기",Close:"닫다"};function wepsim_load_from_file(d,b){var a=new FileReader();a.onload=function(e){var f=e.target.result;if(null!==b){b(f)}};a.onerror=function(f){console.error("File could not be read! Code "+f.target.error.code)};a.readAsText(d,"UTF-8")}function wepsim_save_to_file(e,d){var b=new Blob([e],{type:"text/plain"});var a=document.createElement("a");a.download=d;a.innerHTML="Download File";if(window.webkitURL!=null){a.href=window.webkitURL.createObjectURL(b)}else{a.href=window.URL.createObjectURL(b);a.onclick=function(f){document.body.removeChild(f.target)};a.style.display="none";document.body.appendChild(a)}a.click()}function getURLTimeStamp(){var b=new Date();var f=b.getUTCFullYear();var g=b.getUTCMonth()+1;var d=b.getUTCDate();var a=b.getUTCHours();var e=b.getUTCMinutes();return f+g+d+a+e}function fetchURL(a){if(navigator.onLine){return fetch(a+"?time="+getURLTimeStamp())}return caches.match(a)}function wepsim_load_from_url(b,a){if(false==is_mobile()){fetchURL(b).then(function(e){if(typeof e=="undefined"){console.error("File "+b+" could not be fetched: * Please check that you are on-line.");return}if(e.ok){e.text().then(function(f){a(f)})}})}else{var d=new XMLHttpRequest();d.onreadystatechange=function(){if((d.readyState==4)&&((d.status==200)||(d.status==0))){var e=d.responseText;if(null!=a){a(e)}}};d.open("GET",b,true);d.send()}}var clipboard_copy="";function get_clipboard_copy(){return clipboard_copy}function SelectText(b){var e=document,f=e.getElementById(b),a,d;if(e.body.createTextRange){a=document.body.createTextRange();a.moveToElementText(f);a.select()}else{if(window.getSelection){d=window.getSelection();a=document.createRange();a.selectNodeContents(f);d.removeAllRanges();d.addRange(a)}}}function wepsim_clipboard_CopyFromDiv(b){var d="unsuccessful";try{SelectText(b);if(document.execCommand("copy")){clipboard_copy=$("#"+b).text();d="successful"}}catch(a){d+=d+" because "+a}wepsim_notify_success("<strong>INFO</strong>","Copied "+d+"!.")}function wepsim_clipboard_CopyFromTextarea(d){var e="successful";try{var b=document.getElementById(d);b.select();document.execCommand("copy");clipboard_copy=$("#"+d).val()}catch(a){e="unsuccessful"}wepsim_notify_success("<strong>INFO</strong>","Copied "+e+"!.")}function wepsim_preload_hash(f){var h="";if(f.mode!==""){wsweb_select_main(f.mode);h+="<li>Mode set to <strong>"+f.mode+"</strong>.</li> "}if(f.example!==""){var a=parseInt(f.example);var g=ws_examples[a];if(typeof g!=="undefined"){var d=g.hardware+":"+g.microcode+":"+g.assembly;load_from_example_firmware(d,true);h+="<li>Example titled <strong>"+g.title+"</strong> has been loaded.</li> "}}var b=[];if(f.simulator!==""){b=f.simulator.split(":");h+="<li>User interface has been adapted.</li> "}if(typeof b[0]!=="undefined"){if(b[0]==="microcode"){wsweb_change_show_processor()}if(b[0]==="assembly"){wsweb_change_show_asmdbg()}}if(typeof b[1]!=="undefined"){var e=b[1].toUpperCase();wsweb_set_details(e)}if(h!==""){h="WepSIM has been instructed to preload some work for you:<br><ul>"+h+'</ul>To close this notification please press in the <span class="btn btn-sm btn-info py-0" data-dismiss="alert">X</span> mark. <br>In order to execute an example please press the <span class="btn btn-sm btn-info py-0" onclick="wepsim_execute_toggle_play(\'#qbp\',false);">Run</span> button.<br>';if(f.notify!=="false"){wepsim_notify_do_notify("WepSIM preloads some work",h,"info",0)}}return 0}function wepsim_preload_json(b,a){var d=1*1024*1024;var e=new XMLHttpRequest();e.open("HEAD",b,true);e.onreadystatechange=function(){if(this.readyState==this.DONE){var f=0;var g=e.getResponseHeader("Content-Length");if(g!==null){f=parseInt(g)}if(f<d){$.getJSON(b,a).fail(function(h){wepsim_notify_do_notify("getJSON","There was some problem for getting "+b,"warning",0)})}}};e.send()}function wepsim_preload_get(b,a,h){var f={};var g=null;if(typeof b==="undefined"){return}f.preload=b.get("preload");f.mode=b.get("mode");f.example=b.get("example");f.simulator=b.get("simulator");f.notify=b.get("notify");f.checkpoint=b.get("checkpoint");if(f.preload===null){f.preload=""}if(f.mode===null){f.mode=""}if(f.example===null){f.example=""}if(f.simulator===null){f.simulator=""}if(f.notify===null){f.notify="true"}if(f.checkpoint===null){f.checkpoint=""}if(f.preload!==""){try{g=new URL(f.preload);wepsim_preload_json(g.pathname,wepsim_preload_hash)}catch(d){}return}wepsim_preload_hash(f);if(f.checkpoint!==""){g=new URL(f.checkpoint);wepsim_checkpoint_loadURI(g,a,h)}}function wepsim_checkpoint_get(g){var b=document.getElementById(g);if(b===null){return false}var f=get_cfg("ws_mode");var a=wepsim_state_get_clk();var d=simcore_simstate_current2state();a.content=simcore_simstate_state2checklist(d);var e={mode:f,firmware:inputfirm.getValue(),assembly:inputasm.getValue(),state_current:a,state_history:wepsim_state_history_get(),record:simcore_record_get(),tag:b.value,notify:true};return e}function wepsim_checkpoint_save(d,g,e){var a=document.getElementById(d);var b=document.getElementById(g);if((a===null)||(b===null)){return false}var f=JSON.stringify(e,null,2);wepsim_save_to_file(f,a.value);return true}function wepsim_checkpoint_load(f,h,e){var a=document.getElementById(f);var d=document.getElementById(h);var b=document.getElementById(e).files[0];if((a===null)||(d===null)||(b===null)){return false}var g=function(k){var i=JSON.parse(k);wepsim_checkpoint_loadFromObj(i,a,d,b)};wepsim_load_from_file(b,g)}function wepsim_checkpoint_loadURI(b,f,h){var a=document.getElementById(f);var d=document.getElementById(h);if((a===null)||(d===null)||(b===null)){return false}try{wepsim_preload_json(b.href,function(e){var i={name:b.href};wepsim_checkpoint_loadFromObj(e,a,d,i)});return true}catch(g){return false}}function wepsim_checkpoint_loadFromObj(h,a,f,e){var g="";var b="";if(h===null){return"null checkpoint"}if(typeof h.mode==="undefined"){h.mode="ep"}if(typeof h.firmware==="undefined"){h.firmware=""}if(typeof h.assembly==="undefined"){h.assembly=""}if(typeof h.state_history==="undefined"){h.state_history=[]}wepsim_state_history_reset();for(var d=0;d<h.state_history.length;d++){state_history.push(h.state_history[d])}wepsim_state_history_list();g+="<li>State: restored into the state history.</li>";wsweb_select_main(h.mode);inputfirm.setValue(h.firmware);inputasm.setValue(h.assembly);g+="<li>Firmware and Assembly: Loaded";b="";if(h.firmware.trim()!==""){wepsim_compile_firmware(h.firmware);b+="Firmware"}if(h.assembly.trim()!==""){wepsim_compile_assembly(h.assembly);b+=" + Assembly"}if(b!==""){g+=" + Compiled"}g+=".</li>";if((typeof a!=="undefined")&&(a!==null)){a.value=e.name}if((typeof a!=="undefined")&&(f!==null)){f.value=h.tag}g+="<li>Tag: <strong>"+h.tag+"</strong></li>";simcore_record_set(h.record);if(g!==""){g="WepSIM has been instructed to restore a checkpoint:<br><ul>"+g+'</ul>To close this notification please press in the <span class="btn btn-sm btn-info py-0" data-dismiss="alert">X</span> mark. <br>'}if(h.notify===true){wepsim_notify_do_notify("Restored Checkpoint",g,"info",get_cfg("NOTIF_delay"))}return g}function wepsim_update_signal_dialog(s){var r=simhw_sim_signal(s);if(typeof r==="undefined"){return}var p=(r.value>>>0);var q="";var g="";var o="";var a="";var t="";var b=0;var i=Math.pow(2,r.nbits);if(r.behavior.length==i){o='<ol start="0" class="list-group list-group-flush">';for(var e=0;e<r.behavior.length;e++){g=" ";if(e==p){g=' checked="checked" '}q=" ";if(e==r.default_value){q='<span class="badge badge-info">default value</span>'}a=r.behavior[e];t=compute_signal_verbals(s,e);if(""==t.trim()){t="&lt;without main effect&gt;"}b=e.toString(10);o+='<li class="list-group-item p-1"><label class="m-1">  <input aria-label="value '+b+'" type="radio" name="ask_svalue"          value="'+b+'" '+g+' />  <span class="badge badge-secondary badge-pill">'+b+"</span>&nbsp;  <span>"+t+"</span>&nbsp;"+q+'  <p class="m-0 ml-3 bg-light collapse bh-all"><small>'+a+"</small></p></label></li>"}o+="</ol>"}else{o+='<ol start="0"><span><center><label><input aria-label="value for '+s+'" type="number" size=4 min=0 max='+(i-1)+' class=dial        name="ask_svalue" value="'+r.value+'"/>&nbsp;&nbsp; 0 - '+(i-1)+"</center></label></span>\n</ol>"}var d=simhw_short_name();if(""==d){d="ep"}var f=i18n_get_dropdown(["gui"],"$('#bot_signal').carousel(1); update_signal_loadhelp('#help2',$('#ask_shard').val(),$('#ask_skey').val());\" ");var h=bootbox.dialog({title:"<center>"+s+':  <div class="btn-group">   <button onclick="$(\'#bot_signal\').carousel(0);"            type="button" class="btn btn-info">Value</button>   <button onclick="$(\'#bot_signal\').carousel(1); update_signal_loadhelp(\'#help2\',$(\'#ask_shard\').val(),$(\'#ask_skey\').val());"            type="button" class="btn btn-success">Help</button>   <button type="button" class="btn btn-success dropdown-toggle dropdown-toggle-split"            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">     <span class="caret"></span>     <span class="sr-only">Toggle Help Idiom</span>   </button>   <div class="dropdown-menu">'+f+"</div> </div></center>",message:'<div id="bot_signal" class="carousel" data-ride="carousel" data-interval="false">  <div class="carousel-inner" role="listbox">    <div class="carousel-item active">         <div style="max-height:70vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">         <form class="form-horizontal" style="white-space:wrap;">         <input aria-label="value for '+s+'" id="ask_skey"  name="ask_skey"  type="hidden" value="'+s+'" class="form-control input-md">          <input aria-label="value for '+d+'" id="ask_shard" name="ask_shard" type="hidden" value="'+d+'" class="form-control input-md"> '+o+'         </form>         </div>    </div>    <div class="carousel-item">         <div id=help2 style="max-height:65vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">Loading...</div>    </div>  </div></div>',value:r.value,animate:false,size:"large",buttons:{description:{label:'&plusmn; <span data-langkey="Description">Description</span>',className:"btn-outline-dark btn-sm col-xs-3 col-sm-3 col-lg-2 mr-auto",callback:function(){$(".bh-all").collapse("toggle");return false}},success:{label:'<span data-langkey="Save">Save</span>',className:"btn-primary btn-sm col-xs-3 col-sm-2 float-right",callback:function(){s=$("#ask_skey").val();user_input=$("input[name='ask_svalue']:checked").val();if(typeof user_input=="undefined"){user_input=$("input[name='ask_svalue']").val()}wepsim_update_signal_with_value(s,user_input);wsweb_dialogbox_close_updatesignal()}},close:{label:'<span data-langkey="Close">Close</span>',className:"btn-danger btn-sm col-xs-3 col-sm-2 float-right",callback:function(){wsweb_dialogbox_close_updatesignal()}}}});h.find(".modal-title").addClass("mx-auto");h.find(".bootbox-close-button").addClass("mx-1");h.attr("id","dlg_updatesignal");$(".dial").knob({min:0,max:(i-1)}).val(r.value).trigger("change");show_states();wepsim_show_rf_values()}function wepsim_update_signal_quick(b){var f=simhw_sim_signal(b);if(typeof f==="undefined"){return}var e=simhw_short_name();if(""==e){e="ep"}var d=Math.pow(2,simhw_sim_signal(b).nbits);var a=simhw_sim_signal(b).value;a=(a+1)%d;wepsim_update_signal_with_value(b,a);show_states();wepsim_show_rf_values()}function wepsim_update_signal_with_value(a,b){simhw_sim_signal(a).value=b;propage_signal_update(a);simcore_record_append_new("Update signal "+a+" with value "+b,'wepsim_update_signal_with_value("'+a+'", '+b+");\n")}function show_visgraph(o,q){var s={};var n={};var g=[];var h=0;for(s in simhw_sim_signals()){n[s]=h;g.push({id:h,label:s,title:s});h++}for(var d=0;d<q.length;d++){g[n[q[d]]].color="#7BE141"}var k=new vis.DataSet(g);var p=[];for(s in simhw_sim_signals()){for(var a in o[s]){p.push({from:n[a],to:n[s],arrows:"to"})}}var r=new vis.DataSet(p);var b=document.getElementById("depgraph1");var e={nodes:k,edges:r};var f={interaction:{hover:true},height:"255px",nodes:{borderWidth:2,shadow:true},edges:{width:2,shadow:true}};jit_dep_network=new vis.Network(b,e,f)}function wepsim_state_get_clk(){var d=get_value(simhw_sim_state("REG_MICROADDR"));var a=get_value(simhw_sim_state("CLK"));var b=new Date().getTime();return{time:b,title:"clock "+a+" @ &#181;address "+d,title_short:"clock "+a+",<br>&#181;add "+d}}var state_history=[];function wepsim_state_history_get(){return state_history}function wepsim_state_history_reset(){$("[data-toggle=popover4]").popover("hide");state_history=[]}function wepsim_state_history_add(){var a=wepsim_state_get_clk();var b=simcore_simstate_current2state();a.content=simcore_simstate_state2checklist(b);state_history.push(a)}function wepsim_state_results_empty(){var a='<span style="background-color:#FCFC00">&lt;Empty (only modified values are shown)&gt;</span>';$("#check_results1").html(a);$("#s_clip").html("clipboard");$("#s_ref").html("reference")}function wepsim_state_history_empty(){var a='<span style="background-color:#FCFC00">&lt;<span data-langkey="Empty history">Empty history</span>&gt;</span>';$("#history1").html(a)}function wepsim_state_history_list(){if(0==state_history.length){wepsim_state_history_empty();wepsim_state_results_empty();return}$("[data-toggle=popover4]").popover("hide");var d=0;var f="";var e="";var a="";var g="";for(var b=state_history.length-1;b>=0;b--){d=new Date(state_history[b].time);f=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+"-"+d.getHours()+"-"+d.getMinutes()+"-"+d.getSeconds()+"-"+d.getMilliseconds();e='<div id="popover-content-'+f+'" class="d-none bg-light">'+state_history[b].title+"<br><b>was inserted at:</b><br>Date: "+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+"<br>Hour: "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"-"+d.getMilliseconds()+'<br><button type="button" id="close" data-role="none"         class="btn btn-sm btn-danger w-100 p-0"         onclick="$(\'#'+f+"').popover('hide');\"><span data-langkey=\"Close\">Close</span></button></div>";vrow="";if(b!=0){vrow='<div class="row h-100"><div class="col border-right border-dark">&nbsp;</div><div class="col">&nbsp;</div></div>'}g+='  <div class="row">       <div class="col-auto text-center flex-column d-flex pr-0">              <strong class="m-2">              <span class="badge badge-pill border-secondary border shadow">  		       <a data-toggle="collapse" data-target="#collapse_'+b+'"                        class="col-auto p-0 text-decoration-none text-reset" target="_blank" href="#">'+state_history[b].title_short+"</a>              </span>              </strong>"+vrow+'       </div>       <div class="col py-2 pl-0">             <div class="btn-group float-none" role="group" aria-label="State information for '+f+'">                   <button class="btn btn-outline-dark btn-sm col-auto float-right"                           onclick="wepsim_state_results_empty();                                      $(\'#collapse_'+b+"').collapse('show');                                     wepsim_clipboard_CopyFromDiv('state_"+b+"');                                      $('#collapse_"+b+"').collapse('hide');                                     $('#s_clip').html('"+state_history[b].title_short+'\');                                     $(\'#s_ref\').html(\'reference\'); "                            type="button"><span data-langkey="Copy">Copy</span><span class="d-none d-sm-inline-flex">&nbsp;<span data-langkey="to clipboard">to clipboard</span></span></button>                   <button class="btn btn-outline-dark btn-sm col-auto float-right"                           onclick="var txt_chklst1 = get_clipboard_copy();                                    var obj_exp1    = simcore_simstate_checklist2state(txt_chklst1);                                    var txt_chklst2 = $(\'#ta_state_'+b+"').val();                                    var obj_exp2    = simcore_simstate_checklist2state(txt_chklst2);                                    wepsim_dialog_check_state('check_results1', obj_exp1, obj_exp2);                                    $('#s_ref').html('"+state_history[b].title_short+'\');                                     $(\'#check_results_scroll1\').collapse(\'show\');"                           type="button"><span data-langkey="Check">Check</span> <span class="d-none d-md-inline-flex">differences with clipboard state</span></button>                   <button class="btn btn-outline-dark btn-sm col-auto float-right"  		              data-toggle="collapse" data-target="#collapse_'+b+'">&plusmn; <span data-langkey="Show">Show</span></button>             </div>'+e+'             <div id="collapse_'+b+'" class="border border-secondary mt-2 collapse">                   <div class="card-body p-1 small"                         id="state_'+b+'">'+state_history[b].content+'</div>                   <textarea aria-label="hidden-state"  style="display:none"                             id="ta_state_'+b+'" readonly>'+state_history[b].content+"</textarea>             </div>       </div>  </div>"}$("#history1").html(g);wepsim_state_results_empty();$("[data-toggle=popover4]").popover({html:true,placement:"auto",trigger:"click",container:"body",animation:false,content:function(){var h=$(this).attr("id");return $("#popover-content-"+h).html()},sanitizeFn:function(h){return h}})}function wepsim_dialog_current_state(){wepsim_notify_success("<strong>INFO</strong>","Loading, please wait...");i18n_update_tags("states");$("#current_state1").modal("show");setTimeout(function(){var e=wepsim_state_get_clk();$("#curr_clk_maddr").html(e.title_short);var h=simcore_simstate_current2state();var f=simcore_simstate_state2checklist(h);$("#end_state1").tokenfield("setTokens",f);wepsim_notify_close();wepsim_notify_success("<strong>INFO</strong>","Current state loaded !");var d=0;var g=0;var i="";for(var b in h){g=0;for(var a in h[b]){g++}i=i+","+b+"="+g;d=d+g}ga("send","event","state","state.dump","state.dump.ci="+get_value(simhw_sim_state("REG_IR_DECO"))+",neltos="+d+i)},80)}function wepsim_dialog_check_state(d,b,f){var a=simcore_simstate_diff_results(b,f);var e="";if(0==a.errors){e="&emsp;<br><span style='background-color:#7CFC00'><span data-langkey='Meets the specified requirements'>Meets the specified requirements</span></span><br>"}else{e=simcore_simstate_checkreport2html(a.result,true)}$("#"+d).html(e);ga("send","event","state","state.check","state.check,ci="+get_value(simhw_sim_state("REG_IR_DECO"))+".a="+a.neltos_expected+",b="+a.neltos_obtained+",sd="+a.errors);return true}function wepsim_dialog_check_reset(a,b){$("#"+b).tokenfield("setTokens",[]);$("#"+b).val("");$("#"+a).html("");return true}function wepsim_execute_reset(d,b){wepsim_state_history_reset();if(true===b){var a=get_simware();if(a.firmware.length!=0){update_memories(a)}}if(true===d){simcore_reset()}}function wepsim_execute_instruction(){var b=simcore_check_if_can_execute();if(false===b.ok){alert(b.msg);return false}var a={verbosity:0,cycles_limit:get_cfg("DBG_limitick")};b=simcore_execute_microprogram(a);if(false===b.ok){wepsim_show_stopbyevent("Info",b.msg);return false}return true}function wepsim_execute_microinstruction(){var a=simcore_check_if_can_execute();if(false===a.ok){alert(a.msg);return false}a=simcore_execute_microinstruction();if(false===a.ok){wepsim_show_stopbyevent("Info",a.msg);return false}return true}function wepsim_execute_set_breakpoint(a){return asmdbg_set_breakpoint(a)}var DBG_stop=true;var DBG_limit_instruction=0;function wepsim_execute_stop(b){var a=get_cfg("ws_idiom");var d=i18n_get("gui",a,"Run");$(b).html("<i class='fa fa-play'></i><br><b>"+d+"</b>");$(b).css("backgroundColor","#CCCCCC");DBG_stop=true;DBG_limit_instruction=0}function wepsim_execute_play(f,e){var a=get_cfg("ws_idiom");var b=i18n_get("gui",a,"Stop");var d=simcore_check_if_can_execute();if(false===d.ok){alert(d.msg);return false}$(f).css("backgroundColor","rgb(51, 136, 204)");$(f).html("<i class='fa fa-stop'></i><br><b>"+b+"</b>");DBG_stop=false;DBG_limit_instruction=0;if(false===e){wepsim_execute_chainplay(f)}else{wepsim_execute_chainnotify(f)}}function wepsim_execute_toggle_play(b,a){if(DBG_stop===false){DBG_stop=true}else{wepsim_execute_play(b,a)}}function wepsim_check_stopbybreakpoint_firm(){var a=simhw_sim_ctrlStates_get().mpc.state;var d=get_value(simhw_sim_state(a));var b="0x"+d.toString(16);if(typeof simhw_internalState_get("MC_dashboard",d)==="undefined"){return false}return(simhw_internalState_get("MC_dashboard",d).breakpoint)}function wepsim_check_stopbybreakpoint_asm(){var a=simhw_sim_ctrlStates_get().pc.state;var d=get_value(simhw_sim_state(a));var e="0x"+d.toString(16);var b=simhw_internalState("FIRMWARE");if(typeof b.assembly[e]==="undefined"){return false}return(b.assembly[e].breakpoint)}function wepsim_show_stopbyevent(g,f){var i=simhw_sim_ctrlStates_get().mpc.state;var d=get_value(simhw_sim_state(i));var a="0x"+d.toString(16);var k=simhw_sim_ctrlStates_get().pc.state;var h=get_value(simhw_sim_state(k));var b="0x"+h.toString(16);var e=g+" @ pc="+b+"+mpc="+a;$("#dlg_title2").html(e);$("#dlg_body2").html(f);$("#current_state2").modal("show");return true}function wepsim_check_state_firm(){var a=simhw_sim_ctrlStates_get().mpc.state;var b=get_value(simhw_sim_state(a));if(false===simhw_internalState_get("MC_dashboard",b).state){return false}wepsim_state_history_add();return true}function wepsim_execute_chunk(a,f){var e=false;var d=0;var k=get_cfg("DBG_level");if(k==="instruction"){var n={verbosity:0,cycles_limit:get_cfg("DBG_limitick")};for(d=0;d<f;d++){e=simcore_execute_microprogram(n);if(e.ok===false){wepsim_show_stopbyevent("Info",e.msg);wepsim_execute_stop(a);return false}e=wepsim_check_stopbybreakpoint_asm();if(true===e){wepsim_show_stopbyevent("Breakpoint","Instruction is going to be fetched.");wepsim_execute_stop(a);return false}}}else{var h=simhw_sim_ctrlStates_get().mpc.state;var g=simhw_sim_state(h);var b=0;for(d=0;d<f;d++){wepsim_check_state_firm();e=simcore_execute_microinstruction();if(false===e.ok){wepsim_show_stopbyevent("Info",e.msg);wepsim_execute_stop(a);return false}e=wepsim_check_stopbybreakpoint_firm();if(true===e){wepsim_show_stopbyevent("Breakpoint","Microinstruction is going to be issue.");wepsim_execute_stop(a);return false}b=get_value(g);if(0===b){e=wepsim_check_stopbybreakpoint_asm();if(true===e){wepsim_show_stopbyevent("Breakpoint","Instruction is going to be fetched.");wepsim_execute_stop(a);return false}}}}return true}var max_turbo=5;function wepsim_reset_max_turbo(){max_turbo=5}function wepsim_execute_chainplay(e){var f=1;var d=1;if(DBG_stop){wepsim_execute_stop(e);return}var b=1;if(get_cfg("DBG_delay")<5){b=max_turbo}if(max_turbo===5){f=performance.now()}var a=wepsim_execute_chunk(e,b);if(false===a){return}if(max_turbo===5){d=performance.now()}if(max_turbo===5){max_turbo=3000/(d-f)}DBG_limit_instruction+=b;if(DBG_limit_instruction>get_cfg("DBG_limitins")){wepsim_show_stopbyevent("Limit","Number of executed instructions limit reached.<br><br>See related configuration options about limits:<br><img height='100vw' src='./help/simulator/simulator018.jpg'>");wepsim_execute_stop(e);return}setTimeout(wepsim_execute_chainplay,get_cfg("DBG_delay"),e)}function wepsim_execute_chainnotify(b){if(DBG_stop){wepsim_execute_stop(b);return}var h=false;var p=simhw_sim_ctrlStates_get().mpc.state;var o=simhw_sim_state(p);var d=0;var n=0;for(var f=0;f<max_turbo;f++){h=simcore_execute_microinstruction();if(false===h.ok){wepsim_show_stopbyevent("Info",h.msg);wepsim_execute_stop(b);return}d=get_value(o);n=simhw_internalState_get("MC_dashboard",d).notify.length;if(n>1){var g="Notify @ "+d+": "+simhw_internalState_get("MC_dashboard",d).notify[1];var a='<div style="max-height:70vh; width:inherit; overflow:auto; -webkit-overflow-scrolling:touch;">';for(var e=1;e<n;e++){a+=simhw_internalState_get("MC_dashboard",d).notify[e]+"\n<br>"}a+="</div>";bootbox.confirm({title:g,message:a,buttons:{cancel:{label:"Stop",className:"btn-danger  btn-sm"},confirm:{label:"Continue",className:"btn-primary btn-sm"}},callback:function(i){if(i){setTimeout(wepsim_execute_chainnotify,get_cfg("DBG_delay"),b)}else{wepsim_execute_stop(b)}}});return}}setTimeout(wepsim_execute_chainnotify,get_cfg("DBG_delay"),b)}function wepsim_notify_do_notify(h,i,a,b){simcore_notifications_add(h,i,a,b);var e=$("#alerts-container");if(e.length==0){e=$('<div id="alerts-container"      class="col-xs-10 offset-xs-1  col-md-8 offset-md-2  col-lg-6 offset-lg-3"      style="position:fixed; top:10%; z-index:256;">');$("body").append(e)}var d=$('<button type="button" class="close" onclick="wepsim_notify_close(); return false;">');var g=$('<div class="alert alert-'+a+' shadow">');e.prepend(g.append(d.append("&times;")).append(i));if(b!=0){window.setTimeout(function(){g.alert("close")},b)}var f="Notification type "+a+" and title "+h+":"+i+". ";f=$("</p>").html(f).text();simcore_voice_speak(f)}function wepsim_notify_close(){$(".alert").alert("close");simcore_record_append_new("Close all notifications","wepsim_notify_close();\n")}function wepsim_notify_success(a,b){return wepsim_notify_do_notify(a,b,"success",get_cfg("NOTIF_delay"))}function wepsim_notify_error(a,b){return wepsim_notify_do_notify(a,b,"danger",0)}function wepsim_notify_warning(a,b){return wepsim_notify_do_notify(a,b,"warning",get_cfg("NOTIF_delay"))}function wepsim_notify_notifications(){var e="";var d=null;var a=simcore_notifications_get();e+='<br><div class="alert alert-light p-0 m-0" role="alert">+ <span data-langkey="Recent">Recent</span></div><div class="card" style="max-height:70vh; overflow:auto; -webkit-overflow-scrolling: touch;"><ul class="list-group list-group-flush">';for(var b=a.length-1;b!=0;b--){d=new Date(a[b].date);e+='<li class="list-group-item list-group-item-'+a[b].type+'"><h5 class="m-0"><span class="badge">('+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds()+')</span><span class="badge">['+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+']</span></h5><span class="text-monospace">'+a[b].title+":</span>"+a[b].message+"</li>"}e+='</ul></div><div class="alert alert-light p-0 m-0" role="alert">- <span data-langkey="Recent">Recent</span></div>';wepsim_notify_close();wepsim_notify_do_notify("notifications",e,"light",0);simcore_record_append_new("Open notification list","wepsim_notify_notifications();")}function wepsim_init_cpu(b){if(b===""){simhw_sim_state("CLK").value=ko_observable(simhw_sim_state("CLK").value);simhw_sim_state("DECO_INS").value=ko_observable(simhw_sim_state("DECO_INS").value);return}var a="<div class='col-12'><table class='table table-hover table-sm table-bordered'><tr><td align=center width=50%>Instructions</td><td align=center width=50%><div id='ins_context'><span data-bind='text: value'>&nbsp;</span></div></td></tr><tr><td align=center width=50%>CLK ticks</td><td align=center width=50%><div id='clk_context'><span data-bind='text: value'>&nbsp;</span></div></td></tr></table></div>";$(b).html("<div class='row'>"+a+"</div>");ko_rebind_state("CLK","clk_context");ko_rebind_state("DECO_INS","ins_context")}function wepsim_svg_obj_draw(a,g,i,e,f,d){var b=a.split(":");var h=document.getElementById(b[0]);if(h===null){return}h=h.contentDocument;if(h===null){return}h=h.getElementById(b[1]);if(h===null){return}if(g){h.style.setProperty("stroke",i,"");h.style.setProperty("fill",i,"");h.style.setProperty("stroke-width",f,"")}else{if(h.style.getPropertyValue("stroke")===e){return}h.style.setProperty("stroke",e,"");h.style.setProperty("fill",e,"");h.style.setProperty("stroke-width",d,"")}}var DRAW_stop=false;function wepsim_svg_start_drawing(){DRAW_stop=false}function wepsim_svg_stop_drawing(){DRAW_stop=true}function wepsim_svg_is_drawing(){return DRAW_stop}function wepsim_svg_update_draw(f,o){if(true===DRAW_stop){return}var g=0;var e=0;var d=0;var n=get_cfg("is_byvalue");if(typeof simhw_sim_state("REG_MICROINS").value[f.name]!="undefined"){n=true}if((false===n)&&(typeof f.depends_on!="undefined")){for(d=0;d<f.depends_on.length;d++){var a=f.depends_on[d];if(typeof simhw_sim_state("REG_MICROINS").value[a]!="undefined"){n=true;break}else{if("CLK"===a){n=true;break}}}}var h=get_cfg("color_data_active");var q=get_cfg("color_data_inactive");var b=get_cfg("size_active");var p=get_cfg("size_inactive");if(f.draw_data.length>1){for(g=0;g<f.draw_data.length;g++){for(e=0;e<f.draw_data[g].length;e++){wepsim_svg_obj_draw(f.draw_data[g][e],(g===o)&&n,h,q,b,p)}}}else{if(f.nbits===1){for(e=0;e<f.draw_data[0].length;e++){wepsim_svg_obj_draw(f.draw_data[0][e],(0!=o)&&n,h,q,b,p)}}else{if(f.draw_data.length===1){for(e=0;e<f.draw_data[0].length;e++){wepsim_svg_obj_draw(f.draw_data[0][e],n,h,q,b,p)}}}}if(f.draw_name.length>1){for(g=0;g<f.draw_name.length;g++){for(e=0;e<f.draw_name[g].length;e++){wepsim_svg_obj_draw(f.draw_name[g][e],(g===o)&&n,h,q,b,p)}}}else{if(f.nbits===1){for(e=0;e<f.draw_name[0].length;e++){wepsim_svg_obj_draw(f.draw_name[0][e],(0!=o)&&n,h,q,b,p)}}else{if(f.draw_name.length===1){for(e=0;e<f.draw_name[0].length;e++){wepsim_svg_obj_draw(f.draw_name[0][e],n,h,q,b,p)}}}}}function wepsim_svg_update_bus_visibility(a,b){if(true===DRAW_stop){return}var d=document.getElementById("svg_p");if(d===null){return}d=d.contentDocument;if(d===null){return}d=d.getElementById(a);if(d===null){return}d.setAttributeNS(null,"visibility",b);d.style.visibility=b}function hex2values_update(a){var d=parseInt($("#popover1")[0].value);var b=simhw_internalState("filter_states");if(typeof simhw_sim_states()["BR"][a]!="undefined"){set_value(simhw_sim_states()["BR"][a],d);fullshow_rf_values();$("#rf"+a).click();$("#rf"+a).click()}if(typeof simhw_sim_states()[a]!="undefined"){if(1==simhw_sim_states()[a].nbits){d=d%2}set_value(simhw_sim_states()[a],d);fullshow_eltos(simhw_sim_states(),b);$("#rp"+a).click();$("#rp"+a).click()}}function hex2values(o,k){var i=/[0-9A-F]{1,8}/gi;if(!i.test(o)){o=0}var f=o>>0;var n=o>>>0;var a=hex2char8(n);var h=hex2float(n);var d=hex2bin(n);var p=n.toString(8).toUpperCase();var g=n.toString(16).toUpperCase();g="0x"+pack8(g);var b="";if(get_cfg("is_editable")==true){b="<tr><td class='py-1 px-1' colspan='5' align='center'><input type='text' id='popover1' value='"+n+"' data-mini='true' style='width:65%'>&nbsp;<span class='badge badge-secondary'       onclick='hex2values_update(\""+k+"\");'>update</span></td></tr>"}var e="<table class='table table-bordered table-hover table-sm mb-1'><tbody><tr><td class='p-0 pl-1 align-middle'><strong>hex.</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>"+g+"</strong></td></tr><tr><td class='p-0 pl-1 align-middle'><strong>oct.</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>"+p+"</strong></td></tr><tr><td class='p-0 pl-1 align-middle'><strong>binary</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>"+d+"</strong></td></tr><tr><td class='p-0 pl-1 align-middle'><strong>signed</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>"+f+"</strong></td></tr><tr><td class='p-0 pl-1 align-middle'><strong>unsig.</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>"+n+"</strong></td></tr><tr><td class='p-0 pl-1 align-middle'><strong>char</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>&nbsp;"+a[0]+"&nbsp;</strong>&nbsp;<strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>&nbsp;"+a[1]+"&nbsp;</strong>&nbsp;<strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>&nbsp;"+a[2]+"&nbsp;</strong>&nbsp;<strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>&nbsp;"+a[3]+"&nbsp;</strong>&nbsp;</td></tr><tr><td class='p-0 pl-1 align-middle'><strong>float</strong></td>    <td class='p-0 pl-1 align-middle'><strong class='rounded' style='background-color:#CEECF5; color:black; font-family:monospace;'>"+h+"</strong></td></tr>"+b+"</tbody></table>";return e}function wepsim_init_rf(g){if(g==""){return}var e=0;var f=get_cfg("RF_display_format");var a="";var d="";for(var b=0;b<simhw_sim_states()["BR"].length;b++){d="R"+b;if(b<10){d=d+"&nbsp;"}e=value2string(f,(get_value(simhw_sim_states()["BR"][b])>>>0));a+="<button type='button' class='btn py-0 px-1 mt-1 col-auto'         style='border-color:#cecece; background-color:#f5f5f5' data-role='none'         data-toggle='popover-up' data-popover-content='"+b+"' data-container='body'         id='rf"+b+"'><span id='name_RF"+b+"' class='p-0 text-monospace' style='float:center; color:black;'>"+d+"</span>&nbsp;<span class='badge badge-secondary' style='background-color:#CEECF5; color:black;' id='tbl_RF"+b+"'>"+e+"</span></button>"}$(g).html("<div class='d-flex flex-row flex-wrap justify-content-around justify-content-sm-between'>"+a+"</div>");$("[data-toggle=popover-up]").popover({html:true,placement:"auto",animation:false,trigger:"click",template:'<div class="popover shadow" role="tooltip"><div class="arrow"></div><h3  class="popover-header"></h3><div class="popover-body"></div></div>',container:"body",content:function(){var i=$(this).attr("data-popover-content");var h=get_value(simhw_sim_states()["BR"][i]);return hex2values(h,i)},title:function(){var h=$(this).attr("data-popover-content");var i="&quot;#rf"+h+"&quot;";return'<span class="text-dark"><strong>R'+h+'</strong></span><button type="button" id="close" class="close"         onclick="$('+i+').click();">&times;</button>'},sanitizeFn:function(h){return h}})}function fullshow_rf_values(){var d=get_cfg("RF_display_format");var a="";for(var b=0;b<simhw_sim_states()["BR"].length;b++){a=value2string(d,(get_value(simhw_sim_states()["BR"][b])>>>0));$("#tbl_RF"+b).html(a)}}var show_rf_values_deferred=null;function innershow_rf_values(){fullshow_rf_values();show_rf_values_deferred=null}function wepsim_show_rf_values(){if(null!=show_rf_values_deferred){return}show_rf_values_deferred=setTimeout(innershow_rf_values,cfg_show_rf_delay)}function wepsim_show_rf_names(){var b=get_simware();var a="";for(var d=0;d<simhw_sim_states()["BR"].length;d++){a="R"+d;if(d<10){a=a+"&nbsp;"}if("logical"==get_cfg("RF_display_name")){if(typeof b.registers[d]!="undefined"){a=b.registers[d]}}var e=document.getElementById("name_RF"+d);if(e!=null){e.innerHTML=a}}}function init_eltos(h,o,a){if(h==""){return}var e="<a tabindex='0' href='#' data-toggle='popover-rfcfg' id='popover-rfcfg'>&#8984;</a>";var g=get_cfg("RF_display_format");var n="";var p="";var d="";var b="";for(var k=0;k<a.length;k++){var q=a[k].split(",")[0];var f=o[q].name;if(o[q].nbits>1){d=f.substring(0,3);b=f.substring(3,f.length);if(f.length<3){f='<span class="text-monospace">'+d+"&nbsp;</span>"}else{f='<span class="text-monospace">'+d+"</span>"}if(b.length>0){f+='<span class="d-none d-sm-inline-flex text-monospace">'+b+"</span>"}}n=a[k].split(",")[1];p=value2string(g,o[q].value);e+="<button type='button' class='btn py-0 px-1 mt-1 "+n+"'         style='border-color:#cecece; background-color:#f5f5f5' data-role='none'         data-toggle='popover-bottom' data-popover-content='"+q+"' data-container='body'         id='rp"+q+"'>"+f+" <span class='badge badge-secondary' style='background-color:#CEECF5; color:black;' id='tbl_"+q+"'>"+p+"</span></button>"}$(h).html("<div class='d-flex flex-row flex-wrap justify-content-around justify-content-sm-between'>"+e+"</div>");$("[data-toggle=popover-bottom]").popover({html:true,placement:"bottom",animation:false,content:function(){var r=$(this).attr("data-popover-content");var i=get_value(simhw_sim_states()[r]);return hex2values(i,r)},title:function(){var i=$(this).attr("data-popover-content");var r="&quot;#rp"+i+"&quot;";return'<span class="text-dark"><strong>'+simhw_sim_states()[i].name+'</strong></span><button type="button" id="close" class="close"         onclick="$('+r+').click();">&times;</button>'},sanitizeFn:function(i){return i}});$("[data-toggle=popover-rfcfg]").popover({html:true,placement:"auto",animation:false,trigger:"click",template:'<div class="popover shadow" role="tooltip"><div class="arrow"></div><div class="popover-body"></div></div>',container:"body",content:function(){return"<ul class='list-group list-group-flush'><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"unsigned_16_fill\"); show_rf_values(); show_states();'><span class='col-12'>hex. (8)</span></a></li><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"unsigned_16_nofill\"); show_rf_values(); show_states();'><span class='col-12'>hex.</span></a></li><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"unsigned_8_fill\"); show_rf_values(); show_states();'><span class='col-12'>octal (8)</span></a></li><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"unsigned_8_nofill\"); show_rf_values(); show_states();'><span class='col-12'>octal</span></a></li><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"unsigned_10_fill\"); show_rf_values(); show_states();'><span class='col-12'>unsig. (8)</span></a></li><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"unsigned_10_nofill\"); show_rf_values(); show_states();'><span class='col-12'>unsig.</span></a></li><li class='list-group-item px-0 py-1'><a class='btn btn-sm btn-outline-dark col p-1 text-left float-right' href='#'    onclick='update_cfg(\"RF_display_format\", \"float_10_nofill\"); show_rf_values(); show_states();'><span class='col-12'>float</span></a></li><li class='list-group-item px-0 py-1'><button type='button' id='close' data-role='none'         class='btn btn-sm btn-danger w-100 p-0 mt-1'         onclick='$(\"#popover-rfcfg\").popover(\"hide\");'>Close</button></li></ul>"},sanitizeFn:function(i){return i}})}function fullshow_eltos(h,d){var f=get_cfg("RF_display_format");var g="";var e=[];var b="";for(var a=0;a<d.length;a++){e=d[a].split(",");b=e[0];g=value2string(f,h[b].value);if(h[b].nbits>1){g=value2string(f,(simhw_sim_state(b).value>>>0))}$("#tbl_"+b).html(g)}}var show_eltos_deferred=null;function show_eltos(b,a){if(null!=show_eltos_deferred){return}show_eltos_deferred=setTimeout(function(){fullshow_eltos(b,a);show_eltos_deferred=null},cfg_show_eltos_delay)}function wepsim_init_states(b){var a=simhw_internalState("filter_states");return init_eltos(b,simhw_sim_states(),a)}function wepsim_show_states(){var a=simhw_internalState("filter_states");return show_eltos(simhw_sim_states(),a)}function wepsim_get_screen_content(){var b="";var a=document.getElementById("kdb_con");if(a!=null){b=a.value}simcore_native_set_value("SCREEN","content",b);return b}function wepsim_set_screen_content(b){var a=document.getElementById("kdb_con");if(a!=null){a.value=b}simcore_native_set_value("SCREEN","content",b);return b}function wepsim_get_keyboard_content(){var b="";var a=document.getElementById("kdb_key");if(a!=null){b=a.value}simcore_native_set_value("KBD","keystrokes",b);return b}function wepsim_set_keyboard_content(b){var a=document.getElementById("kdb_key");if(a!=null){a.value=b}simcore_native_set_value("KBD","keystrokes",b);return true}var show_control_memory_deferred=null;function wepsim_show_control_memory(e,a,b,d){if(null!=show_control_memory_deferred){return}show_control_memory_deferred=setTimeout(function(){if(false==d){light_refresh_control_memory(e,a,b)}else{hard_refresh_control_memory(e,a,b,d)}show_control_memory_deferred=null},cfg_show_control_memory_delay)}function controlmemory_lineToString(e,a){var b="";for(var d in e[a]){if(1==e[a][d]){b+=d+" ";continue}if("NATIVE"==d){b+="&lt;native&gt; ";continue}if("NATIVE_JIT"==d){b+="&lt;built-in&gt; ";continue}b+=d+"="+parseInt(e[a][d]).toString(2)+" "}return b}function hard_refresh_control_memory(n,g,q,v){var f="";var t="";var b=get_cfg("ICON_theme");var r=get_simware();var s=new Object();for(var u in r.firmware){s[r.firmware[u]["mc-start"]]=r.firmware[u]["name"]}var e="";var d="";var h="";var a=0;for(var u in n){t=controlmemory_lineToString(n,u);e="0x"+parseInt(u).toString(16);if(typeof s[u]!="undefined"){h=s[u];a=5-h.length;if(a>0){for(var k=0;k<a;k++){h=h+"&nbsp;"}}e='<span><span class="badge badge-pill badge-info text-monospace"       style="position:relative;top:4px;">'+h+'</span><span style="border:1px solid gray;">'+e+"</span></span>"}d="&nbsp;";if(true==g[u].breakpoint){d=sim_core_breakpointicon_get(b)}if(u==q){f+="<tr id='maddr"+u+"' class='d-flex'     style='color:blue; font-size:small; font-weight:bold'     onclick='dbg_set_breakpoint("+u+");              if (event.stopPropagation) event.stopPropagation();'><td             class='col-3 col-md-2 py-0' align='right'>"+e+"</td><td width='1%'  class='col-auto py-0 px-0' id='mcpin"+u+"'>"+d+"</td><td             class='col py-0'>"+t+"</td></tr>"}else{f+="<tr id='maddr"+u+"' class='d-flex'     style='color:black; font-size:small; font-weight:normal'     onclick='dbg_set_breakpoint("+u+");              if (event.stopPropagation) event.stopPropagation();'><td             class='col-3 col-md-2 py-0' align='right'>"+e+"</td><td width='1%'  class='col-auto py-0 px-0' id='mcpin"+u+"'>"+d+"</td><td             class='col py-0'>"+t+"</td></tr>"}}if(typeof n[q]=="undefined"){f+="<tr><td width='15%'><font style='color:blue; font-size:small; font-weight:bold'>0x"+parseInt(q).toString(16)+"</font></td><td><font style='color:blue; font-size:small; font-weight:bold'><b>&nbsp;</b></font></td></tr>"}$("#memory_MC").html("<center><table class='table table-hover table-sm'><tbody id='none'>"+f+"</tbody></table></center>");var p=$("#maddr"+q);if((v)&&(p.length>0)){var o=p[0].offsetTop;var p=$("#memory_MC");if(p.length>0){p[0].scrollTop=o}}old_mc_addr=q}var old_mc_addr=0;function light_refresh_control_memory(d,a,b){o1=$("#maddr"+old_mc_addr);o1.css("color","black");o1.css("font-weight","normal");old_mc_addr=b;o1=$("#maddr"+old_mc_addr);o1.css("color","blue");o1.css("font-weight","bold")}function firmware2html(z,B){var p=simhw_internalState("filter_signals");var D="<tr bgcolor='#FF9900'><td bgcolor='white'     style='border-style: solid; border-width:0px; border-color:lightgray;'></td><td bgcolor='lightblue' style='border-style: solid; border-width:1px; border-color:lightgray;'>co</td><td bgcolor='#FFCC00'   style='border-style: solid; border-width:1px; border-color:lightgray;' align='center'><small><b>&#181;dir</b></small></td><td bgcolor='white'     style='border-style: solid; border-width:0px; border-color:lightgray;'>&nbsp;&nbsp;</td>";var A=1;for(var C=0;C<p.length;C++){var r=p[C].split(",")[0];D+="<td align='center' style='border-style: solid; border-width:1px;'><small><b>"+simhw_sim_signals()[r].name+"</b></small></td>";A++}D+="</tr>";var w="<center>";w+="<table style='table-layout:auto; border-style: solid: border-width:0px; border-collapse:collapse;'>";var x=0;var n="";var g="";var F="";for(var C=0;C<z.length;C++){var v=z[C]["mc-start"];var e=z[C].microcode;for(j=0;j<e.length;j++){if(++x%10==1){w=w+D}g="";if(typeof z[C].co!="undefined"){g=parseInt(z[C].co,2)}var t=z[C].signature.split(",")[0];n="";if(j==0){n+="<td style='border-style: solid; border-width:0px; border-color:lightgray;'><span class='badge badge-pill badge-secondary float-left'>"+t+"</span>&nbsp;</td><td style='border-style: solid; border-width:1px; border-color:lightgray;'>"+g+"</td>"}else{n+="<td style='border-style: solid; border-width:0px; border-color:lightgray;'>&nbsp;</td><td style='border-style: solid; border-width:1px; border-color:lightgray;'>&nbsp;</td>"}if(B){F="0x"+(v+j).toString(16)}else{F=v+j}n+="<td align='center'  style='border-style: solid; border-width:1px; border-color:lightgray;' bgcolor='white'>"+F+"</td><td bgcolor='white' style='border-style: solid; border-width:0px; border-color:lightgray;'>&nbsp;</td>";var f=e[j];for(var y=0;y<p.length;y++){var r=p[y].split(",")[0];var E=parseInt(simhw_sim_signals()[r].default_value);var q=false;if((typeof f[r]!="undefined")&&(!isNaN(parseInt(f[r])))){E=parseInt(f[r]);q=true}if((r=="SELA"||r=="SELB"||r=="SELC")&&(typeof f.MADDR!="undefined")&&(!isNaN(parseInt(f.MADDR)))){var b=parseInt(f.MADDR).toString(2);b="000000000000".substring(0,12-b.length)+b+"000";if(r=="SELA"){E=parseInt(b.substring(0,5),2);q=true}if(r=="SELB"){E=parseInt(b.substring(5,10),2);q=true}if(r=="SELC"){E=parseInt(b.substring(10,15),2);q=true}}if(B){var b=E.toString(2);var u=parseInt(simhw_sim_signals()[r].nbits);E="00000000000000000000000000000000".substring(0,u-b.length)+b;var G=p[y].split(",")[1];var d=E.substring(0,G);var a=E.substring(G);E="<font color=green>"+d+"</font>"+a}if(q){n+="<td align='center' style='border-style: solid; border-width:1px;'><b>"+E+"</b></td>"}else{n+="<td align='center' style='border-style: solid; border-width:1px;'><font color='grey'>"+E+"</font></td>"}}w+="<tr>"+n+"</tr>"}}w+="</table></center>";return w}var show_main_memory_deferred=null;var show_main_memory_redraw=false;function wepsim_show_main_memory(e,a,d,b){if(get_cfg("DBG_delay")>3){show_main_memory_redraw=d||show_main_memory_redraw}if(null!=show_main_memory_deferred){return}show_main_memory_redraw=d;show_main_memory_deferred=setTimeout(function(){if(show_main_memory_redraw==false){light_refresh_main_memory(e,a,b)}else{hard_refresh_main_memory(e,a,b)}show_main_memory_deferred=null;show_main_memory_updates=false},cfg_show_main_memory_delay)}function hard_refresh_main_memory(f,k,s){var e="";var q="";var d="";var n="";var g=new Array();var o=get_simware();var p=new Object();for(var r in o.labels2){p[o.labels2[r]]=r}var b=new Object();var a=simhw_internalState("segments");for(skey in a){b[parseInt(a[skey].begin)]=skey}for(var r in f){q=main_memory_getword(p,g,f,r);d=b[parseInt(r)];if(typeof d!="undefined"){e+='<div style="position:sticky;top:0px;z-index:1;width:50%;background:#FFFFFF;"><b><small>'+d+"</small></b></div>"}n="<small>0x</small>"+pack5(g[3])+'<span class="d-none d-sm-inline-flex"> </span>-<span class="d-none d-sm-inline-flex"><small> 0x</small></span>'+pack5(g[0]);if(r==k){e+="<div class='row' id='addr"+r+"'     style='color:blue; font-size:small; font-weight:bold;    border-bottom: 1px solid lightgray !important'><div class='col-6 pr-2' align='right'  style='padding:5'>"+n+"</div><div class='col-6'      align='left'   style='padding:5' id='mpval"+r+"'>"+q+"</div></div>"}else{e+="<div class='row' id='addr"+r+"'     style='color:black; font-size:small; font-weight:normal; border-bottom: 1px solid lightgray !important'><div class='col-6 pr-2' align='right'  style='padding:5'>"+n+"</div><div class='col-6'      align='left'   style='padding:5' id='mpval"+r+"'>"+q+"</div></div>"}}if(typeof f[k]=="undefined"){e+="<div class='row' id='addr"+k+"'     style='color:blue; font-size:small; font-weight:bold; border-bottom: 1px solid lightgray !important'><div class='col-6 pr-2' align='right'  style='padding:5'>0x"+parseInt(k).toString(16)+"</div><div class='col-6'      align='left'   style='padding:5' id='mpval>"+k+"'>00 00 00 00</div></div>"}$("#memory_MP").html("<div class='container-fluid'>"+e+"</div>");var i=$("#addr"+k);if((s)&&(i.length>0)){var h=i[0].offsetTop;var i=$("#memory_MP");if(i.length>0){i[0].scrollTop=h-120}}old_main_addr=k}function main_memory_getword(f,a,g,d){if(typeof g[d]=="undefined"){return"00 00 00 00"}var e=g[d].toString(16);e=pack8(e);var b=0;for(b=0;b<4;b++){a[b]=(parseInt(d)+b).toString(16)}value2="";for(b=0;b<4;b++){labeli=f["0x"+a[3-b]];valuei=e[b*2]+e[b*2+1];if(typeof labeli!="undefined"){value2+='<span><span style="border:1px solid gray;">'+valuei+'</span><span class="badge badge-pill badge-info"      style="position:relative;top:-8px;">'+labeli+"</span></span>"}else{value2+=valuei+" "}}return value2}var old_main_addr=0;function light_refresh_main_memory(i,d,h){if(h){var b=new Array();var a=get_simware();var g=new Object();for(var f in a.labels2){g[a.labels2[f]]=f}var e=main_memory_getword(g,b,i,d);o1=$("#mpval"+d);o1.html(e)}o1=$("#addr"+old_main_addr);o1.css("color","black");o1.css("font-weight","normal");old_main_addr=d;o1=$("#addr"+old_main_addr);o1.css("color","blue");o1.css("font-weight","bold")}function labels2html_aux(a,g){var f="";var d="";for(var b=3;b>=0;b--){d="0x"+(parseInt(g)+b).toString(16);if(typeof a[d]!="undefined"){for(var e=0;e<a[d].length;e++){f=f+"<span class='badge badge-pill badge-secondary float-left'>"+a[d][e]+"</span>"}}else{f=f+"&nbsp;"}}return f}function mp2html(b,k,g){var f=new Object();for(var d in k){if(typeof f[k[d]]=="undefined"){f[k[d]]=new Array()}f[k[d]].push(d)}var a="";a+="<center><table style='table-layout:auto; border-style: solid; border-width:0px;'><tr><th style='border-style: solid; border-width:0px;'>labels</th><th style='border-style: solid; border-width:1px;'>address</th><th style='border-style: solid; border-width:1px;'><table border=0 width=100%><tr align=center>  <td width='25%' align='center'><small><b>byte 3</b></small></td>  <td width='25%' align='center'><small><b>byte 2</b></small></td>  <td width='25%' align='center'><small><b>byte 1</b></small></td>  <td width='25%' align='center'><small><b>byte 0</b></small></td></tr><tr>  <td width='12%' align='center' >&nbsp;<sup>31&nbsp;&nbsp;......&nbsp;&nbsp;24</sup>&nbsp;</td>  <td width='12%' align='center' >&nbsp;<sup>23&nbsp;&nbsp;......&nbsp;&nbsp;16</sup>&nbsp;</td>  <td width='12%' align='center' >&nbsp;<sup>15&nbsp;&nbsp;......&nbsp;&nbsp;8</sup>&nbsp;</td>  <td width='12%' align='center' >&nbsp;<sup>7&nbsp;&nbsp;......&nbsp;&nbsp;0</sup>&nbsp;</td></tr></table><th style='border-style: solid; border-width:0px;' align='right'>&nbsp;&nbsp;segment</th></tr>";var e="white";for(var p in g){c_begin=parseInt(g[p].begin);c_end=parseInt(g[p].end);e=g[p].color;rows=0;var n="";for(var h=c_begin;h<c_end;h++){c="0x"+h.toString(16);if(typeof b[c]=="undefined"){continue}if(0==rows){a+="<tr style=\"font-family:'Consolas'; font-size:11pt;\"><td align='right'  style='border-style: solid; border-width:0px;'>"+labels2html_aux(f,c)+"</td><td                style='border-style: solid; border-width:1px;' bgcolor="+e+">"+c.toUpperCase()+"</td><td                style='border-style: solid; border-width:1px;' bgcolor="+e+">"+b[c].substr(0,8)+"&nbsp;"+b[c].substr(8,8)+"&nbsp;"+b[c].substr(16,8)+"&nbsp;"+b[c].substr(24,8)+"</td><td rowspan="}else{n+="<tr style=\"font-family:'Consolas'; font-size:11pt;\"><td align='right'  style='border-style: solid; border-width:0px;'>"+labels2html_aux(f,c)+"</td><td                style='border-style: solid; border-width:1px;' bgcolor="+e+">"+c.toUpperCase()+"</td><td                style='border-style: solid; border-width:1px;' bgcolor="+e+">"+b[c].substr(0,8)+"&nbsp;"+b[c].substr(8,8)+"&nbsp;"+b[c].substr(16,8)+"&nbsp;"+b[c].substr(24,8)+"</td></tr>"}rows++}if(0==rows){a+="<tr style=\"font-family:'Consolas'; font-size:12pt;\"><td>&nbsp;</td><td style='border-style: solid; border-width:1px;' bgcolor="+e+">0x"+parseInt(g[p].begin).toString(16).toUpperCase()+"</td><td style='border-style: solid; border-width:1px;' bgcolor="+e+">&nbsp;</td><td rowspan=";n+="<tr style=\"font-family:'Consolas'; font-size:12pt;\"><td>&nbsp;</td><td style='border-style: solid; border-width:1px;' bgcolor="+e+">0x"+parseInt(g[p].end).toString(16).toUpperCase()+"</td><td style='border-style: solid; border-width:1px;' bgcolor="+e+">&nbsp;</td><td>&nbsp;</td></tr>";rows=2}a+=rows+" align=right>"+g[p].name+"&nbsp;</td></tr>"+n;if(g[p].name!=".stack"){a+="<tr style=\"font-family:'Consolas'; font-size:12pt;\"><td>&nbsp;</td><td valign='middle' align='center' height='25px'>...</td><td valign='middle' align='center' height='25px'>...</td><td>&nbsp;</td></tr>"}}a+="</table></center><br>";return a}function segments2html(b){var e="<br>";e+=" <center> <table height='400px'> <tr> <td><table style='border-style: solid' border='1' width='100%' height='100%'>";for(var a in b){if(b[a].name!=".stack"){e+="<tr><td valign='middle' align='center' height='60px' bgcolor='"+b[a].color+"'>"+b[a].name+"</td></tr><tr><td valign='middle' align='center' height='25px'>...</td></tr>"}}e+="<tr><td valign='middle' align='center' bgcolor='"+b[".stack"].color+"'>"+b[".stack"].name+"</td></tr></table> </td> <td width='20px'>&nbsp;</td> <td> <table style='border-style: solid; border-width:0px; width:100%; height:100%'>";var f="";var d="";for(a in b){f="<tr>    <td valign='top' align='left' height='30px' style=''>    <div id='compile_begin_"+b[a].name+"'>"+b[a].begin+"</div>    </td> </tr> <tr>    <td valign='bottom' align='left' height='30px' style=''>    <div id='compile_end_"+b[a].name+"'>"+b[a].end+"</div>    </td> </tr>";if(b[a].name!=".stack"){e+=f+"<tr><td valign='middle' align='center' height='25px'>...</td></tr>"}else{d=f}}e+=d+" </table> </td> </tr> </table> </center>";return e}function assembly2html(d,n,h,g){var e="";var r="";var p="";var f="";var b="#F0F0F0";var a="";var s=new Object();for(l in n){if(typeof s[n[l]]=="undefined"){s[n[l]]=new Array()}s[n[l]].push(l)}var q=new Object();for(l in h){laddr="0x"+h[l].begin.toString(16);q[laddr]=l}a+="<center><table data-role='table' class='table table-sm'><tbody>";for(l in g){if(b=="#F0F0F0"){b="#F8F8F8"}else{b="#F0F0F0"}g[l].bgcolor=b;r=g[l].source;p=g[l].source_original;f=parseInt(g[l].binary,2).toString(16);f="0x"+"00000000".substring(0,8-f.length)+f;e="";if(typeof s[l]!="undefined"){for(var k=0;k<s[l].length;k++){e=e+"<span class='badge badge-info'>"+s[l][k]+"</span>"}}if(r==""){p='<span class="text-secondary">'+p+"</span>"}else{if(r!=p){r='<span class="text-primary">'+r+"</span>";p='<span class="text-primary">'+p+"</span>"}}if(typeof q[l]!="undefined"){a+="<tr bgcolor='#FEFEFE'><td colspan='7' style='line-height:0.3;' align='left'><small><font color='gray'>"+q[l]+"</font></small></td>";"</tr>"}a+="<tr id='asmdbg"+l+"' bgcolor='"+g[l].bgcolor+"'    onclick='asmdbg_set_breakpoint("+l+");              if (event.stopPropagation) event.stopPropagation();'><td class='asm_label  text-monospace col-auto collapse'     style='line-height:0.9;' align=right>"+e+"</td><td class='asm_addr   text-monospace col-auto collapse'     style='line-height:0.9;'>"+l+"</td><td class='asm_break  text-monospace col-auto show collapse py-0 px-0'     style='line-height:0.9;' id='bp"+l+"' width='1%'></td><td class='asm_hex    text-monospace col-auto collapse'     style='line-height:0.9;'>"+f+"</td><td class='asm_ins    text-monospace col-auto collapse'     style='line-height:0.9;' align=left>"+r+"</td><td class='asm_pins   text-monospace col-auto collapse'     style='line-height:0.9;' align=left>"+p+"</td></tr>"}a+="</tbody></table></center>";return a}function init_config_mp(d){if(d===""){simhw_internalState_reset("MP_wc",ko_observable(0));return}var b="<div class='container-fluid'><div class='row'>";b+="<div class='col-12' style='padding:0 0 10 0;'><div class='card bg-light'><div class='card-body p-0' id='mempanel'><table class='table table-hover table-sm table-bordered'        style='margin:0'><tbody class='no-ui-mini'><tr><td align=center'>Wait cycles (<b>0</b> - &infin;)</td>    <td align=center'><div id='mp_wc'><input type=number data-bind='value: simhw_internalState(\"MP_wc\")' min='0' max='99999999'></div>    </td></tr></tbody></table></div></div></div>";$(d).html(b);simhw_internalState_reset("MP_wc",ko_observable(0));var a=document.getElementById("mp_wc");ko.applyBindings(simhw_internalState("MP_wc"),a)}function wepsim_init_io(f){var b=0;var e=simhw_internalState("io_int_factory");if(typeof e=="undefined"){return}if(f==""){for(b=0;b<e.length;b++){e[b].accumulated=ko_observable(e[b].accumulated);e[b].active=ko_observable(e[b].active)}return}var d="<div class='col-12'><table class='table table-hover table-sm table-bordered'>";for(b=0;b<e.length;b++){d+="<tr id='int"+b+"_context'><td align=center width=50%><span data-bind=\"style: {fontWeight: active() ? 'bold' : ''}\">Interrupt "+b+"</span></td><td align=center width=50%><span data-bind='text: accumulated'>&nbsp;</span></td></tr>"}d+="</table></div>";$(f).html("<div class='row'>"+d+"</div>");for(b=0;b<e.length;b++){if(typeof e[b].accumulated!="function"){e[b].accumulated=ko_observable(e[b].accumulated)}if(typeof e[b].active!="function"){e[b].active=ko_observable(e[b].active)}var a=document.getElementById("int"+b+"_context");ko.cleanNode(a);ko.applyBindings(e[b],a)}}function wepsim_init_config_io(f){var b=0;var e=simhw_internalState("io_int_factory");if(typeof e=="undefined"){return}if(f==""){for(b=0;b<e.length;b++){e[b].period=ko_observable(e[b].period);e[b].probability=ko_observable(e[b].probability)}return}var d="<div class='container-fluid'><div class='row'>";d+="<div class='col-12 p-0'><div class='card bg-light m-0'><div class='card-body p-0' id='iopanel'>";d+="<center><table class='table table-hover table-sm table-bordered m-0'><tbody class='no-ui-mini'><tr><td align=center width='33%'>  <span class='d-none d-sm-inline-flex'>Interrupt identificator</span>  <span class='d-sm-none'>Int. Id.<br>(0 - 7)</span></td><td align=center width='33%'>  <span class='d-none d-sm-inline-flex'>CLK period (<b>0</b> - &infin;)</span>  <span class='d-sm-none'>CLK ticks <br>(<b>0</b> - &infin;)</span></td><td align=center width='33%'>  <span class='d-none d-sm-inline-flex'>Probability (0 - 1)</span>  <span class='d-sm-none'>Probability <br>(0 - 1)</span></td></tr>";for(b=0;b<8;b++){d+="<tr><td align='center' style='padding:0 0 0 0; vertical-align: middle !important'><span class='p-0 m-0'>"+b+"</span></td><td align='center' class='p-0'><div id='int"+b+"_per' style='margin:0 3 0 3'><input type=number data-bind='value: period' min='0' max='99999999'></div></td><td align='center' class='p-0'><div id='int"+b+"_pro' style='margin:0 3 0 3'><input type='number' data-bind='value: probability' min='0' max='1' step='.05'></div></td></tr>"}d+="</tbody></table></center>";d+="</div></div></div>";$(f).html(d);var a={};for(b=0;b<e.length;b++){if(typeof e[b].period!="function"){e[b].period=ko_observable(e[b].period)}a=document.getElementById("int"+b+"_per");ko.cleanNode(a);ko.applyBindings(e[b],a);if(typeof e[b].probability!="function"){e[b].probability=ko_observable(e[b].probability)}a=document.getElementById("int"+b+"_pro");ko.cleanNode(a);ko.applyBindings(e[b],a)}}function simcoreui_init_hw_summary(b){var e='<span class="row justify-content-between">';for(var a in b.components){e=e+'<span class="col"><a href="#" class="popover_hw" data-toggle="popover" data-html="true" onclick="event.preventDefault();" title="" data-content="name: '+b.components[a].name+"<br> version: "+b.components[a].version+"<br> abilities: "+b.components[a].abilities.join(" + ")+"<button type='button' id='close' data-role='none'         class='btn btn-sm btn-danger w-100 p-0 mt-2'         onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button>\">"+a+"</a></span>"}e=e+"</span>";var d="";d+='<div class="card m-2">    <div class="card-header border border-light p-2">      <h5 class="card-title">        <span class="row">          <span class="col-6">'+b.sim_name+" ("+b.sim_short_name+')</span>          <a data-toggle="collapse" href="#th_processor" role="button"   class="col w-25" aria-expanded="false" aria-controls="th_processor"><img src="'+b.sim_img_processor+'" class="img-thumbnail" alt="sim_img_processor"></a>          <a data-toggle="collapse" href="#th_controlunit" role="button" class="col w-25" aria-expanded="false" aria-controls="th_controlunit"><img src="'+b.sim_img_controlunit+'" class="img-thumbnail" alt="sim_img_controlunit"></a>        </span>      </h5>    </div>    <div class="card-body border border-light p-2">      <p class="card-text">      <span class="collapse multi-collapse" id="th_processor"><img src="'+b.sim_img_processor+'"   class="img-thumbnail mb-2" alt="sim_img_processor"></a>      </span>      <span class="collapse multi-collapse" id="th_controlunit"><img src="'+b.sim_img_controlunit+'" class="img-thumbnail mb-2" alt="sim_img_controlunit"></a>      </span>'+e+"      </p>    </div></div>";return d}function simcoreui_signal_dialog(a){wepsim_update_signal_dialog(a);$(".popover_hw").popover("hide")}function simcoreui_init_hw_signals(k,d){var g="";var b="";var i="";var f="";var h='<span class="row justify-content-between">';for(var n in k.signals){b=k.signals[n].value;i=k.signals[n].default_value;b="0x"+b.toString(16);i="0x"+i.toString(16);if(b!=i){g="font-weight-bold"}else{g="font-weight-normal"}f="<span style='text-align:left'>name: "+k.signals[n].name+"<br>value: <span onclick=simcoreui_signal_dialog('"+k.signals[n].name+"');  class='font-weight-bold'>"+b+"</span><br>default_value: "+i+"<br>nbits: "+k.signals[n].nbits+"<br>type: "+k.signals[n].type+"<br>visible: "+k.signals[n].visible+"<button type='button' id='close' data-role='none'         class='btn btn-sm btn-danger w-100 p-0 mt-2'         onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button></span>";h=h+'<span class="col"><a href="#" id="hw_signal_tt_'+n+'" class="popover_hw" data-toggle="popover" onclick="event.preventDefault();"    data-html="true" title="" data-content="'+f+'"><span id="hw_signal_strong_'+n+'" class="'+g+'">'+n+"</span></a></span>";if(true==d){$("#hw_signal_strong_"+n).attr("class",g);$("#hw_signal_tt_"+n).attr("data-content",f)}}h=h+"</span>";var a='  <div class="card m-2">    <div class="card-header border border-light p-2">      <h5 class="card-title m-0">       <div class="container">       <span class="row">        <span class="col-auto pl-0" data-langkey="Signals">Signals</span>        <span class="col-auto btn btn-sm btn-outline-secondary ml-auto"               data-toggle="tooltip" data-html="true" title="Graph of the signal dependencies <br>(it needs several seconds to be displayed)."              onclick="$(\'#depgraph1c\').collapse(\'toggle\');                        show_visgraph(jit_fire_dep, jit_fire_order);" data-langkey="Dependencies">Dependencies</span>       </span>       </div>      </h5>    </div>    <div class="card-body border border-light p-2">      <div id="depgraph1c" class="m-2 p-0 border collapse h-100"            style="max-height:65vh; overflow:auto; resize:both;">         <span id="depgraph1">Loading...</span>      </div>      <p class="card-text">'+h+"</p>    </div>  </div>";return a}function simcoreui_init_hw_states(n,f){var h="";var d="";var k="";var a="";var q="";var g="";var i='<span class="row justify-content-between">';for(var p in n.states){d="-";k="-";if(typeof n.states[p].value!="undefined"){d=n.states[p].value;k=n.states[p].default_value;if(typeof d=="object"){d="object";k="object"}else{if(typeof d=="function"){d=d()}d="0x"+d.toString(16);k="0x"+k.toString(16)}}if(d!=k){h="font-weight-bold"}else{h="font-weight-normal"}if(typeof n.states[p].nbits!="undefined"){a=n.states[p].nbits}else{a="-"}if(typeof n.states[p].visible!="undefined"){q=n.states[p].visible}else{q="-"}g="<span style='text-align:left'>name: "+p+"<br>value: <span id=hw_state_value_"+p+">"+d+"</span><br>default_value: "+k+"<br>nbits: "+a+"<br>visible: "+q+"<button type='button' id='close' data-role='none'         class='btn btn-sm btn-danger w-100 p-0 mt-2'         onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button></span>";i=i+'<span class="col"><a href="#" id="hw_state_tt_'+p+'" class="popover_hw" data-toggle="popover" onclick="event.preventDefault();"    data-html="true" title="" data-content="'+g+'"><span id="hw_state_strong_'+p+'" class="'+h+'">'+p+"</span></a></span>";if(true==f){$("#hw_state_strong_"+p).attr("class",h);$("#hw_state_tt_"+p).attr("data-content",g)}}i=i+"</span>";var b='  <div class="card m-2">    <div class="card-header border border-light p-2">      <h5 class="card-title m-0">       <div class="container">       <span class="row">        <span class="col-auto pl-0" data-langkey="States">States</span>        <span class="col-auto btn btn-sm btn-outline-secondary ml-auto"               data-toggle="tooltip" data-html="true" title="It shows the control states: PC, IR, and SP."              onclick="$(\'#ctrlstates1\').collapse(\'toggle\');" data-langkey="Control States">Control States</span>       </span>       </div>      </h5>    </div>    <div class="card-body border border-light p-2">      <div id="ctrlstates1" class="m-2 p-0 border collapse"            style="max-height:65vh; overflow:auto; resize:both;">         <span id="ctrlstates1">         Program Counter      (PC) &rarr; '+n.ctrl_states.pc.state+"<br>         Instruction Register (IR) &rarr; "+n.ctrl_states.ir.state+"<br>         Stack Pointer        (SP) &rarr; "+n.ctrl_states.sp.state+'<br>      </span>      </div>      <p class="card-text">'+i+"</p>    </div>  </div>";return b}function simcoreui_init_hw_behaviors(b){var e='<span class="row justify-content-between">';for(var a in b.behaviors){e=e+'<span class="col"><a href="#" class="popover_hw" data-toggle="popover" onclick="event.preventDefault();"    data-html="true" title="" data-content="<span style=\'text-align:left\'>name: '+a+"<br> nparameters: "+b.behaviors[a].nparameters+"<br> <button type='button' id='close' data-role='none'         class='btn btn-sm btn-danger w-100 p-0 mt-2'         onclick=$('.popover_hw').popover('hide');><span data-langkey='Close'>Close</span></button></span>\">"+a+"</a></span>"}e=e+"</span>";var d='  <div class="card m-2">    <div class="card-header border border-light p-2">      <h5 class="card-title m-0"><span data-langkey="Behaviors">Behaviors</span></h5>    </div>    <div class="card-body border border-light p-2">      <p class="card-text">'+e+"</p>    </div>  </div>";return d}function simcoreui_init_hw(a){var b=simhw_active();var d="";d+=simcoreui_init_hw_summary(b);d+=simcoreui_init_hw_signals(b,false);d+=simcoreui_init_hw_states(b,false);d+=simcoreui_init_hw_behaviors(b);$(a).html(d);$('[data-toggle="tooltip"]').tooltip({trigger:"hover",sanitizeFn:function(e){return e}});$(".popover_hw").popover({trigger:"hover click",container:"body",placement:"auto",template:'<div class="popover" role="tooltip"><div class="arrow border-dark" style="border-right-color:black !important;"></div><h3 class="popover-header"></h3><div class="popover-body bg-dark text-white border-dark"></div></div>',sanitizeFn:function(e){return e}});return true}function simcoreui_show_hw(){var a=simhw_active();simcoreui_init_hw_signals(a,true);simcoreui_init_hw_states(a,true);return true}function showhideAsmElements(){var f=["label","addr","hex","ins","pins"];for(var e=0;e<f.length;e++){var a="SHOWCODE_"+f[e];var d="table .asm_"+f[e];var b=get_cfg(a);if(b!==false){$(d).show()}else{$(d).hide()}}}function showhideAsmHeader(){var f=["label","addr","hex","ins","pins"];for(var e=0;e<f.length;e++){var a="SHOWCODE_"+f[e];var b=get_cfg(a);var d="#asm_"+f[e];$(d).removeClass("btn-outline-secondary").removeClass("btn-dark");if(b!==false){$(d).addClass("btn-dark")}else{$(d).addClass("btn-outline-secondary")}}}function default_asmdbg_content_horizontal(){var a=get_cfg("ws_idiom");var b="<br><div class='card m-3'>  <div class='row no-gutters'>  <div class='col-md-12'>  <div class='card-body py-0'>    <p class='card-text'>    <div class='badge badge-primary'>1</div>    <span data-langkey='simulator intro 1'>"+i18n_get("gui",a,"simulator intro 1")+"    </span>    </p>  </div>  </div>  </div></div><div class='card m-3'>  <div class='row no-gutters'>  <div class='col-md-12'>  <div class='card-body py-0'>    <p class='card-text'>    <div class='badge badge-primary'>2</div>    <span data-langkey='simulator intro 2'>"+i18n_get("gui",a,"simulator intro 2")+"    </span>    </p>  </div>  </div>  </div></div><div class='card m-3'>  <div class='row no-gutters'>  <div class='col-md-12'>  <div class='card-body py-0'>    <p class='card-text'>    <div class='badge badge-primary'>3</div>    <span data-langkey='simulator intro 3'>"+i18n_get("gui",a,"simulator intro 3")+"    </span>    </p>  </div>  </div>  </div></div>";return b}function default_asmdbg_content_vertical(){var a="<br><div class='container-fluid'><div class='card-column row'><div class='card m-2 col-sm'>  <div class='card-body h-50 py-0'>    <p class='card-text'>    <div class='badge badge-primary'>1</div>    <span data-langkey='simulator intro 1'>"+i18n_get("gui",wsi,"simulator intro 1")+"    </span>    </p>  </div></div><div class='card m-2 col-sm'>  <div class='card-body h-50 py-0'>    <p class='card-text'>    <div class='badge badge-primary'>2</div>    <span data-langkey='simulator intro 2'>"+i18n_get("gui",wsi,"simulator intro 2")+"    </span>    </p>  </div></div><div class='card m-2 col-sm'>  <div class='card-body h-50 py-0'>    <p class='card-text'>    <div class='badge badge-primary'>3</div>    <span data-langkey='simulator intro 3'>"+i18n_get("gui",wsi,"simulator intro 3")+"    </span>    </p>  </div></div></div></div>";return a}function wepsim_click_asm_columns(d){var a="SHOWCODE_"+d;var b=get_cfg(a);b=!b;var f="table .asm_"+d;if(b!==false){$(f).show()}else{$(f).hide()}set_cfg(a,b);save_cfg();var e="#asm_"+d;$(e).removeClass("btn-outline-secondary").removeClass("btn-dark");if(b!==false){$(e).addClass("btn-dark")}else{$(e).addClass("btn-outline-secondary")}}function wepsim_show_asm_columns_checked(b){var a=get_cfg("ws_idiom");var d='<button type="button" id="asm_label" aria-label="Show label"         onclick="wepsim_click_asm_columns(\'label\'); return false;"         class="btn btn-sm btn-block btn-outline-secondary mb-1"><span class="float-left">'+i18n_get("dialogs",a,"Show/Hide labels")+'</span></button><button type="button" id="asm_hex" aria-label="Show content"         onclick="wepsim_click_asm_columns(\'hex\'); return false;"         class="btn btn-sm btn-block btn-outline-secondary mb-1"><span class="float-left">'+i18n_get("dialogs",a,"Show/Hide content")+'</span></button><button type="button" id="asm_ins" aria-label="Show instruction"         onclick="wepsim_click_asm_columns(\'ins\'); return false;"         class="btn btn-sm btn-block btn-outline-secondary mb-1"><span class="float-left">'+i18n_get("dialogs",a,"Show/Hide assembly")+'</span></button><button type="button" id="asm_pins" aria-label="Show pseudoinstruction"         onclick="wepsim_click_asm_columns(\'pins\'); return false;"         class="btn btn-sm btn-block btn-outline-secondary mb-1"><span class="float-left">'+i18n_get("dialogs",a,"Show/Hide pseudo-instructions")+'</span></button><button type="button" id="close" data-role="none"         class="btn btn-sm btn-danger w-100 p-0 mt-1"         onclick="$(\'#'+b+"').popover('hide');\">"+i18n_get("dialogs",a,"Close")+"</button>";return d}var show_asmdbg_pc_deferred=null;function innershow_asmdbg_pc(){fullshow_asmdbg_pc();show_asmdbg_pc_deferred=null}function wepsim_show_asmdbg_pc(){if(get_cfg("DBG_delay")>5){return fullshow_asmdbg_pc()}if(null==show_asmdbg_pc_deferred){show_asmdbg_pc_deferred=setTimeout(innershow_asmdbg_pc,cfg_show_asmdbg_pc_delay)}}var old_addr=0;function fullshow_asmdbg_pc(){if(typeof document=="undefined"){return}var f=null;var a=simhw_sim_ctrlStates_get().pc.state;var e=get_value(simhw_sim_state(a));var g="0x"+e.toString(16);var d=simhw_internalState("FIRMWARE");if(typeof d.assembly[old_addr]!="undefined"){f=$("#asmdbg"+old_addr);f.css("background-color",d.assembly[old_addr].bgcolor)}else{for(var b in d.assembly){f=$("#asmdbg"+b);f.css("background-color",d.assembly[b].bgcolor)}}old_addr=g;f=$("#asmdbg"+g);f.css("background-color","#00EE88");return f}function asmdbg_set_breakpoint(g){var b=get_cfg("ICON_theme");var a="0x"+g.toString(16);var d=simhw_internalState("FIRMWARE");var f=document.getElementById("bp"+a);var e=d.assembly[a].breakpoint;if(e===true){e=false;f.innerHTML="&nbsp;"}else{e=true;f.innerHTML=sim_core_breakpointicon_get(b)}d.assembly[a].breakpoint=e;simcore_record_append_new("Set assembly breakpoint at "+g,"asmdbg_set_breakpoint("+g+");\n")}var show_dbg_ir_deferred=null;function wepsim_show_dbg_ir(a){if(null!=show_dbg_ir_deferred){return}show_dbg_ir_deferred=setTimeout(function(){fullshow_dbg_ir(a);show_dbg_ir_deferred=null},cfg_show_dbg_ir_delay)}function fullshow_dbg_ir(a){if(typeof document=="undefined"){return}var b=document.getElementById("svg_p");if(b!=null){b=b.contentDocument}if(b!=null){b=b.getElementById("tspan3899")}if(b!=null){b.innerHTML=a}b=document.getElementById("svg_cu");if(b!=null){b=b.contentDocument}if(b!=null){b=b.getElementById("text3611")}if(b!=null){b.innerHTML=a}}function dbg_set_breakpoint(f){var a=get_cfg("ICON_theme");var b=get_cfg("DBG_level");var e=document.getElementById("mcpin"+f);var d=simhw_internalState_get("MC_dashboard",f).breakpoint;if(d===true){d=false;e.innerHTML="&nbsp;"}else{d=true;e.innerHTML=sim_core_breakpointicon_get(a)}simhw_internalState_get("MC_dashboard",f).breakpoint=d;if(d&&("instruction"===b)){wepsim_notify_do_notify("<strong>INFO</strong>","Please remember to change configuration to execute at microinstruction level.","success",get_cfg("NOTIF_delay"))}simcore_record_append_new("Set firmware breakpoint at "+f,"dbg_set_breakpoint("+f+");\n")}function wepsim_show_dbg_mpc(){var a=simhw_sim_ctrlStates_get().mpc.state;var b=get_value(simhw_sim_state(a));show_control_memory(simhw_internalState("MC"),simhw_internalState("MC_dashboard"),b,false)}var breakpoint_icon_list=[{type:"classic",shortname:"classic",origin:"https://www.optikunde.de/farbe/rot.php"},{type:"classic",shortname:"pushpin",origin:"http://clipart-library.com/red-push-pin.html"},{type:"pets",shortname:"cat1",origin:""},{type:"pets",shortname:"dog1",origin:""},{type:"films",shortname:"super",origin:"https://worldvectorlogo.com/logo/superman-3"},{type:"films",shortname:"batman",origin:"http://getwallpapers.com/collection/black-and-white-batman-wallpaper"},{type:"films",shortname:"r2d2",origin:"https://imgur.com/gallery/gKSmy"},{type:"films",shortname:"sw",origin:"https://i2.wp.com/icons.iconarchive.com/icons/sensibleworld/starwars/1024/Death-Star-icon.png"},{type:"films",shortname:"bb8",origin:""},{type:"films",shortname:"vader1",origin:""},{type:"films",shortname:"grail",origin:"http://3png.com/a-31243892.html"},{type:"films",shortname:"despicable",origin:"https://www.helloforos.com/t/cerrado/350821/81"},{type:"films",shortname:"lotr4",origin:"http://www.cinecollectibles.com/gentle-giant-c-1_62.html"},{type:"films",shortname:"lotr2",origin:"https://www.forbes.com/sites/adrianbridgwater/2016/01/15/microsoft-r-one-big-data-tool-to-rule-them-all/"},{type:"films",shortname:"hp1",origin:"http://www.logosclicks.com/logos/harry-potter-name-logo-46a93c.html"}];function sim_core_breakpointicon_get(a){return"<img alt='stop icon' height=22 src='images/stop/stop_"+a+".gif'>"}function wepsim_open_config_index(){$("#container-config2").html(table_config_html(ws_config));for(m=0;m<ws_config.length;m++){ws_config[m].code_init()}$("#container-config2").scrollTop(0);$('a[data-toggle="popover1"]').popover({placement:"bottom",trigger:"focus, hover",animation:false,delay:{show:500,hide:100},sanitizeFn:function(a){return a}});i18n_update_tags("cfg");$("#config2").modal("show");ga("send","event","ui","ui.dialog","ui.dialog.config")}function wepsim_close_config(){$("#config2").modal("hide")}function table_config_html(e){var a="";var b="";var d="";var i="";var n="";var k="";var h="";var g=[];for(var f=0;f<e.length;f++){if(false==array_includes(g,e[f].type)){g.push(e[f].type)}}a=a+'<div class="container grid-striped border border-light">';for(f=0;f<e.length;f++){d="";if(i!=e[f].type){d="<div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary bg-white sticky-top'><span data-langkey='"+e[f].type+"'>"+e[f].type+"</span></div>"}i=e[f].type;n=e[f].code_cfg;k=e[f].description;h=e[f].id;if(b==""){b="bg-light"}else{b=""}a=a+d+"<div class='row py-1 "+b+"' id='"+i+'\'><div class="col-md-auto">    <span class="badge badge-pill badge-light">'+(f+1)+'</span></div><div class="col-md-4">'+n+'</div><div class="col-md collapse7 show"><c>'+k+"</c></div></div>"}a=a+"</div>";return a}function wepsim_show_breakpoint_icon_list(){var d="<div class='container'><div class='row'>";var b="";for(var a=0;a<breakpoint_icon_list.length;a++){if(breakpoint_icon_list[a].type!=b){d=d+"</div><div class='row p-1'><div class='float-none text-left text-capitalize font-weight-bold col-12 border-bottom border-secondary'>"+breakpoint_icon_list[a].type+"</div></div><div class='row'>";b=breakpoint_icon_list[a].type}d=d+"<img src='images/stop/stop_"+breakpoint_icon_list[a].shortname+".gif' alt='"+breakpoint_icon_list[a].shortname+" icon'      class='img-thumbnail col-3 mx-2 d-block'     style='height:6vh; min-height:30px;'     onclick=\"$('#img_select1').attr('src','images/stop/stop_"+breakpoint_icon_list[a].shortname+".gif');	        set_cfg('ICON_theme','"+breakpoint_icon_list[a].shortname+"'); save_cfg();               $('#breakpointicon1').popover('hide');\">"}d=d+'</div><div class="row mt-2 p-1 border-top border-secondary"><button type="button" id="close" data-role="none"         class="btn btn-sm btn-danger w-100 p-0"         onclick="$(\'#breakpointicon1\').popover(\'hide\');"><span data-langkey="Close">Close</span></button></div></div>';return d}var ws_config=[];ws_config.push({id:"select7",type:"General",code_cfg:"<div class='form-group m-0'>"+i18n_get_select()+"</div>",code_init:function(){$("#select7").val(get_cfg("ws_idiom"))},description:"<span data-langkey='Idiom for help, examples, etc.'>Idiom for help, examples, etc.</span>"});ws_config.push({id:"select8",type:"General",code_cfg:"<div class='form-group m-0'> <select name='select8' id='select8' class='form-control form-control-sm custom-select'	     aria-label='User Interface for WepSIM' 	     onchange=\"var opt = $(this).find('option:selected');	 	        var optValue = opt.val();		        update_cfg('ws_skin', optValue);                    window.removeEventListener('beforeunload', wepsim_confirm_exit);		        window.location='wepsim-' + optValue + '.html';		        return false;\"	     data-native-menu='false'>	<option value='classic'>Classic</option>	<option value='compact'>Compact</option> </select></div>",code_init:function(){$("#select8").val(get_cfg("ws_skin"))},description:"<span data-langkey='WepSIM User Interface Skin'>WepSIM User Interface Skin</span>"});ws_config.push({id:"radio14",type:"General",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label14-true'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Beta: true'		   onclick=\"update_cfg('enable_beta', true);		             $('.enabled_beta').removeClass('d-none');\">		<input type='radio' name='beta' id='radio14-true'  aria-label='enable_beta: true'  autocomplete='off' >On	    </label>	    <label id='label14-false'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Beta: false'		   onclick=\"update_cfg('enable_beta', false);		             $('.enabled_beta').addClass('d-none');\">		<input type='radio' name='beta' id='radio14-false' aria-label='enable_beta: false' autocomplete='off' >Off	    </label>	</div>",code_init:function(){$("#label14-"+get_cfg("enable_beta")).button("toggle")},description:"<span data-langkey='Enable experimental features'>Enable experimental features</span>"});ws_config.push({id:"radio7",type:"Editor",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label7-default'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;' 		   onclick=\"update_cfg('editor_theme','default');			     sim_cfg_editor_theme(inputfirm) ;			     sim_cfg_editor_theme(inputasm) ;\">		<input type='radio' name='options' id='radio7-default' aria-label='Editor theme: light' autocomplete='off' ><span data-langkey='Light'>Light</span>	    </label>	    <label id='label7-blackboard'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;' 		   onclick=\"update_cfg('editor_theme','blackboard');			     sim_cfg_editor_theme(inputfirm) ;			     sim_cfg_editor_theme(inputasm) ;\">		<input type='radio' name='options' id='radio7-blackboard' aria-label='Editor theme: dark' autocomplete='off' ><span data-langkey='Dark'>Dark</span>	    </label>	</div>",code_init:function(){$("#label7-"+get_cfg("editor_theme")).button("toggle")},description:"<span data-langkey='Editor theme: light or dark'>Editor theme: light or dark</span>"});ws_config.push({id:"select2",type:"Editor",code_cfg:"<div class='form-group m-0'>   <select name='select2' id='select2' class='form-control form-control-sm custom-select'	    aria-label='Editor mode'    	    onchange=\"var opt = $(this).find('option:selected');		      var optValue = opt.val();		      update_cfg('editor_mode',optValue);		      sim_cfg_editor_mode(inputfirm);		      sim_cfg_editor_mode(inputasm);\"	    data-native-menu='false'>	<option value='default'>default</option>	<option value='vim'>VIM</option>	<option value='emacs'>Emacs</option>	<option value='sublime'>Sublime</option>    </select></div>",code_init:function(){$("#select2").val(get_cfg("editor_mode"))},description:"<span data-langkey='Editor mode: vim, emacs, etc.'>Editor mode: vim, emacs, etc.</span>"});ws_config.push({id:"radio12",type:"Execution",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label12-50'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Speed: slow'		   onclick=\"update_cfg('DBG_delay', 50);\">		<input type='radio' name='options' id='radio12-50'   autocomplete='off' ><span data-langkey='Slow'>Slow</span>	    </label>	    <label id='label12-5'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Speed: normal'		   onclick=\"update_cfg('DBG_delay', 5);\">		<input type='radio' name='options' id='radio12-5'  autocomplete='off' ><span data-langkey='Normal'>Normal</span>	    </label>	    <label id='label12-1'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Speed: fast'		   onclick=\"update_cfg('DBG_delay', 1);\">		<input type='radio' name='options' id='radio12-1'  autocomplete='off' ><span data-langkey='Fast'>Fast</span>	    </label>	</div>",code_init:function(){$("#label12-"+get_cfg("DBG_delay")).button("toggle")},description:"<span data-langkey='Running speed: execution speed'>Running speed: execution speed</span>"});ws_config.push({id:"radio1",type:"Execution",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label1-instruction'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Execution unit: instruction'		   onclick=\"update_cfg('DBG_level','instruction');\">		<input type='radio' name='options' id='radio1-instruction'   autocomplete='off' >		<span class='d-none d-sm-inline-flex' data-langkey='Instructions'>Instructions</span><span class='d-sm-none'>Instruc.</span></label>	    </label>	    <label id='label1-microinstruction'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Execution unit: microinstruction'		   onclick=\"update_cfg('DBG_level','microinstruction');\">		<input type='radio' name='options' id='radio1-microinstruction'  autocomplete='off' >		<span class='d-none d-sm-inline-flex' data-langkey='&#181;instructions'>&#181;instructions</span><span class='d-sm-none'>&#181;instruc.</span></label>	    </label>	</div>",code_init:function(){$("#label1-"+get_cfg("DBG_level")).button("toggle")},description:"<span data-langkey='Step-by-step: element in run mode'>Step-by-step: element in run mode</span>"});ws_config.push({id:"select1",type:"Execution",code_cfg:"<a href='#' id='breakpointicon1' title='Please select breakpoint icon' tabindex='0'   data-toggle='popover' data-trigger='click'>   		<img alt='stop icon' id='img_select1' src='images/stop/stop_classic.gif'                  style='position:relative; left:10px; height:30px !important; width:30px !important;'></a>",code_init:function(){$("#img_select1").attr("src","images/stop/stop_"+get_cfg("ICON_theme")+".gif");$("#breakpointicon1").popover({html:true,content:wepsim_show_breakpoint_icon_list,sanitizeFn:function(a){return a}})},description:"<span data-langkey='Breakpoint icon: icon to be used for breakpoints'>Breakpoint icon: icon to be used for breakpoints</span>"});ws_config.push({id:"select6",type:"Execution",code_cfg:" <div class='form-group m-0'>	    <select name='select6' id='select6' class='form-control form-control-sm custom-select'		    aria-label='max. ticks per instruction' 		    onchange=\"var opt = $(this).find('option:selected');			       var optValue = opt.val();			       update_cfg('DBG_limitins',optValue);\"		    data-native-menu='false'>		<option value='-1'>without limit</option>		<option value='500'  >500</option>		<option value='1000' >1000</option>		<option value='2000' >2000</option>		<option value='10000'>10000</option>		<option value='50000'>50000</option>	    </select>	 </div>",code_init:function(){$("#select6").val(get_cfg("DBG_limitins"))},description:"<span data-langkey='Limit instructions: number of instructions to be executed'>Limit instructions: number of instructions to be executed</span>"});ws_config.push({id:"select3",type:"Execution",code_cfg:" <div class='form-group m-0'>	    <select name='select3' id='select3' class='form-control form-control-sm custom-select'		    aria-label='max. ticks per instruction' 		    onchange=\"var opt = $(this).find('option:selected');			       var optValue = opt.val();			       update_cfg('DBG_limitick',optValue);\"		    data-native-menu='false'>		<option value='-1'>without limit</option>		<option value='500'  >500</option>		<option value='1000' >1000</option>		<option value='2000' >2000</option>		<option value='10000'>10000</option>		<option value='50000'>50000</option>	    </select>	 </div>",code_init:function(){$("#select3").val(get_cfg("DBG_limitick"))},description:"<span data-langkey='Limit instruction ticks: to limit clock ticks'>Limit instruction ticks: to limit clock ticks</span>"});ws_config.push({id:"radio2",type:"Register file",code_cfg:" <div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label2-unsigned_16_fill'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='register file display format: hexadecimal'		   onclick=\"update_cfg('RF_display_format','unsigned_16_fill'); show_rf_values(); show_states(); show_memories_values();\">		<input type='radio' name='options' id='radio2-unsigned_16_fill'  autocomplete='off' >Hex.	    </label>	    <label id='label2-unsigned_10_fill'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='register file display format: decimal'		   onclick=\"update_cfg('RF_display_format','unsigned_10_fill'); show_rf_values(); show_states(); show_memories_values();\">		<input type='radio' name='options' id='radio2-unsigned_10_fill'  autocomplete='off' >Dec.	    </label>	    <label id='label2-unsigned_8_fill'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='register file display format: octal'		   onclick=\"update_cfg('RF_display_format','unsigned_8_fill');  show_rf_values(); show_states(); show_memories_values();\">		<input type='radio' name='options' id='radio2-unsigned_8_fill'   autocomplete='off' >Oct.	    </label>	</div>",code_init:function(){$("#label2-"+get_cfg("RF_display_format")).button("toggle")},description:"<span data-langkey='Display format'>Display format</span>&nbsp;<a href='#' data-toggle='popover1' title='Example of display formats' data-html='true'    data-content='<img alt=\"register file example\" src=\"images/cfg-rf.gif\" class=\"img-fluid\">'><span <span data-langkey='(example)'>(example)</span></a>"});ws_config.push({id:"radio3",type:"Register file",code_cfg:" <div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label3-numerical'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='register file display name (number)'		   onclick=\"update_cfg('RF_display_name','numerical'); wepsim_show_rf_names();\">		<input type='radio' name='options' id='radio3-numerical'  autocomplete='off' ><span data-langkey='Numbers'>Numbers</span>	    </label>	    <label id='label3-logical'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='register file display name (user identification)'		   onclick=\"update_cfg('RF_display_name','logical'); wepsim_show_rf_names();\">		<input type='radio' name='options' id='radio3-logical' autocomplete='off' ><span data-langkey='Labels'>Labels</span>	    </label>	</div>",code_init:function(){$("#label3-"+get_cfg("RF_display_name")).button("toggle")},description:"<span data-langkey='Register file names'>Register file names</span>"});ws_config.push({id:"radio9",type:"Register file",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label9-true'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is editable: true'		   onclick=\"update_cfg('is_editable',true);\">		<input type='radio' name='options' id='radio9-true'  aria-label='Is editable: true'  autocomplete='off' >On	    </label>	    <label id='label9-false'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is editable: false'		   onclick=\"update_cfg('is_editable',false);\">		<input type='radio' name='options' id='radio9-false' aria-label='Is editable: false' autocomplete='off' >Off	    </label>	</div>",code_init:function(){$("#label9-"+get_cfg("is_editable")).button("toggle")},description:"<span data-langkey='Editable registers: edit register file values'>Editable registers: edit register file values</span>"});ws_config.push({id:"colorpicker1",type:"Circuitry simulation",code_cfg:"<fieldset data-role='controlgroup' data-type='horizontal' data-mini='true' style='margin:0 0 0 0'>	 <input type='color'		aria-label='Color for active data'		id='colorpicker1'		data-show-value='false'		class='noshadow-d m-0' 		onchange=\"update_cfg('color_data_active', $('#colorpicker1').spectrum('get')); refresh();\"></fieldset>",code_init:function(){$("#colorpicker1").spectrum({preferredFormat:"hex",color:get_cfg("color_data_active")})},description:"<span data-langkey='Data-path color'>Data-path color</span> <a href='#' data-toggle='popover1' title='Example of data-path color' data-html='true' data-content='<img alt=\"register file example\" src=\"images/cfg-colors.gif\" class=\"img-fluid\">'><span <span data-langkey='(example)'>(example)</span></a>"});ws_config.push({id:"colorpicker2",type:"Circuitry simulation",code_cfg:"<fieldset data-role='controlgroup' data-type='horizontal' data-mini='true' style='margin:0 0 0 0'>	 <input type='color'		aria-label='Color for active signal name'		id='colorpicker2'		data-show-value='false'		class='noshadow-d m-0' 		onchange=\"update_cfg('color_name_active', $('#colorpicker2').spectrum('get')); refresh();\">	 </fieldset> ",code_init:function(){$("#colorpicker2").spectrum({preferredFormat:"hex",color:get_cfg("color_name_active")})},description:"<span data-langkey='Signal color'>Signal color</span>"});ws_config.push({id:"radio10",type:"Circuitry simulation",code_cfg:" <div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label10-true'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is by value: true'		   onclick=\"update_cfg('is_byvalue',true);\">		<input type='radio' name='options' id='radio10-true'   autocomplete='off' >Value	    </label>	    <label id='label10-false'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is by value: false'		   onclick=\"update_cfg('is_byvalue',false);\">		<input type='radio' name='options' id='radio10-false'  autocomplete='off' >Activation	    </label>	</div> ",code_init:function(){$("#label10-"+get_cfg("is_byvalue")).button("toggle")},description:"<span data-langkey='Show by value or by activation'>Show by value or by activation</span>"});ws_config.push({id:"radio5",type:"Circuitry simulation",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label5-true'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is interactive: true'		   onclick=\"update_cfg('is_interactive',true);\">		<input type='radio' name='options' id='radio5-true'   autocomplete='off' >On	    </label>	    <label id='label5-false'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is interactive: false'		   onclick=\"update_cfg('is_interactive',false);\">		<input type='radio' name='options' id='radio5-false'  autocomplete='off' >Off	    </label>	</div> ",code_init:function(){$("#label5-"+get_cfg("is_interactive")).button("toggle")},description:"<span data-langkey='Interactive mode: signal value can be updated'>Interactive mode: signal value can be updated</span>"});ws_config.push({id:"radio6",type:"Circuitry simulation",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label6-true'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is quick interactive: true'		   onclick=\"update_cfg('is_quick_interactive',true);\">		<input type='radio' name='options' id='radio6-true'   autocomplete='off' >On	    </label>	    <label id='label6-false'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Is quick interactive: false'		   onclick=\"update_cfg('is_quick_interactive',false);\">		<input type='radio' name='options' id='radio6-false'  autocomplete='off' >Off	    </label>	</div> ",code_init:function(){$("#label6-"+get_cfg("is_quick_interactive")).button("toggle")},description:"<span data-langkey='Quick interactive mode: quick update of signal value'>Quick interactive mode: quick update of signal value</span>"});ws_config.push({id:"radio11",type:"Accesibility",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label11-true'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Active voice: true'		   onclick=\"update_cfg('use_voice',true); wepsim_voice_start();\">		<input type='radio' name='options' id='radio11-true'   autocomplete='off' >On	    </label>	    <label id='label11-false'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Active voice: false'		   onclick=\"update_cfg('use_voice',false); wepsim_voice_stop();\">		<input type='radio' name='options' id='radio11-false'  autocomplete='off' >Off	    </label>	</div>",code_init:function(){$("#label11-"+get_cfg("use_voice")).button("toggle")},description:"<span data-langkey='Active voice: external voice control'>Active voice: external voice control</span>"});ws_config.push({id:"radio13",type:"Accesibility",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label13-text'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Verbose: text'		   onclick=\"update_cfg('verbal_verbose','text');\">		<input type='radio' name='options' id='radio13-text'   autocomplete='off' >Text	    </label>	    <label id='label13-math'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Verbose: math'		   onclick=\"update_cfg('verbal_verbose','math');\">		<input type='radio' name='options' id='radio13-math'  autocomplete='off' >Math	    </label>	</div>",code_init:function(){$("#label13-"+get_cfg("verbal_verbose")).button("toggle")},description:"<span data-langkey='Verbalization: textual or mathematical'>Verbalization: textual or mathematical</span>"});ws_config.push({id:"slider3",type:"Accesibility",code_cfg:"<div class='btn-group btn-group-toggle d-flex' data-toggle='buttons' >	    <label id='label8-2000'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Notification delay: slow'		   onclick=\"update_cfg('NOTIF_delay', 2000);\">		<input type='radio' name='options' id='radio8-2000'   autocomplete='off' ><span data-langkey='Slow'>Slow</span>	    </label>	    <label id='label8-1000'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Notification delay: normal'		   onclick=\"update_cfg('NOTIF_delay', 1000);\">		<input type='radio' name='options' id='radio8-1000'  autocomplete='off' ><span data-langkey='Normal'>Normal</span>	    </label>	    <label id='label8-100'		   class='btn btn-sm btn-light w-50 btn-outline-secondary' style='padding:2 2 2 2;'		   aria-label='Notification delay: fast'		   onclick=\"update_cfg('NOTIF_delay', 100);\">		<input type='radio' name='options' id='radio8-100'  autocomplete='off' ><span data-langkey='Fast'>Fast</span>	    </label>	</div>",code_init:function(){$("#label8-"+get_cfg("NOTIF_delay")).button("toggle")},description:"<span data-langkey='Notification speed: time before disapear'>Notification speed: time before disapear</span>"});function wepsim_open_examples_index(){$("#container-example1").html(table_examples_html(ws_examples));i18n_update_tags("examples");$("#example1").modal("show");ga("send","event","ui","ui.dialog","ui.dialog.example")}function wepsim_close_examples(){$("#example1").modal("hide")}function load_from_example_assembly(g,h){inputasm.setValue("Please wait...");inputasm.refresh();var d=g.split(":");var f="";if(d.length>0){f=d[0]}else{console.log("warning: example without hardware id")}var b="";if(d.length>1){b=d[1]}else{console.log("warning: example without microcode id")}var i="";if(d.length>2){i=d[2]}else{console.log("warning: example without assembly id")}var e="examples/assembly/asm-"+i+".txt";var a=function(n){inputasm.setValue(n);inputasm.refresh();var o=false;var k=get_simware();if(k.firmware.length!=0){o=wepsim_compile_assembly(n)}if(false===o){wsweb_change_workspace_assembly();return}if(true===h){setTimeout(function(){wsweb_change_workspace_simulator();show_memories_values()},50)}wepsim_notify_success("<strong>INFO</strong>","Example ready to be used.")};wepsim_load_from_url(e,a);simcore_record_append_new("Load assembly from example "+g,'load_from_example_assembly("'+g+'", '+h+");\n");ga("send","event","example","example.assembly","example.assembly."+f+"."+i)}function load_from_example_firmware(g,h){inputfirm.setValue("Please wait...");inputfirm.refresh();var d=g.split(":");var f="";if(d.length>0){f=d[0]}else{console.log("warning: example without hardware id")}var b="";if(d.length>1){b=d[1]}else{console.log("warning: example without microcode id")}var i="";if(d.length>2){i=d[2]}else{console.log("warning: example without assembly id")}var e="examples/microcode/mc-"+b+".txt";inputfirm.setOption("readOnly",false);var a=function(k){inputfirm.setValue(k);inputfirm.refresh();var n=wepsim_compile_firmware(k);if(false===n){wsweb_change_workspace_microcode();return}if(true===h){setTimeout(function(){load_from_example_assembly(g,h)},50)}else{show_memories_values();wepsim_notify_success("<strong>INFO</strong>","Example ready to be used.")}};wepsim_load_from_url(e,a);simcore_record_append_new("Load firmware from example "+g,'load_from_example_firmware("'+g+'", false);\n');ga("send","event","example","example.firmware","example.firmware."+f+"."+b)}function table_examples_html(i){var q="ep";var u=["newbie","intro","wepmips","tutorial"];var n=get_cfg("ws_mode");if((n!=="null")&&(!u.includes(n))){q=n}var t=get_cfg("base_url");var e="";var f="";var g="";var s="";var b="";var v="";var a="";var r="";var p="";var k="";var d="";for(var h=0;h<i.length;h++){f="";if(b!=i[h].level){f="<div class='col-sm-12 border-bottom border-secondary text-right text-capitalize font-weight-bold bg-white sticky-top'>"+q.toUpperCase()+": "+i[h].level+"</div>"}e_modes=i[h].modes;if(!e_modes.split(",").includes(n)){continue}s=i[h].title;b=i[h].level;v=i[h].hardware;a=i[h].microcode;r=i[h].assembly;p=i[h].description;k=i[h].id;g=v+":"+a+":"+r;if(e===""){e="bg-light"}else{e=""}d=d+f+"<div class='row py-1 "+e+'\'><div class="col-sm-auto">    <span class="badge badge-pill badge-light">'+(h+1)+'</span></div><div class="col-sm-3">     <span style="cursor:pointer;"            id="example_'+h+'"            onclick="simcore_record_append_pending();                     load_from_example_firmware(\''+g+"',true);                     $('#example1').modal('hide');                     return false;\"            class=\"btn-like rounded-0 bg-info text-white p-0 mr-2\">"+s+'</span></div><div class="col-sm collapse7 show">    <c>'+p+'</c></div><div class="col-sm-auto">    <span id="example_reference_'+k+'" class="d-none">'+t+"?mode="+v+"&example="+h+'</span>    <div class="btn-group btn-group-md float-right align-top">           <button type="button"                    class="btn btn-md btn-info dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">              <span class="sr-only">Toggle Dropdown</span>           </button>           <div class="dropdown-menu bg-info" style="z-index:1024;">             <a onclick="simcore_record_append_pending();                         load_from_example_assembly(\''+g+'\',false);                         $(\'#example1\').modal(\'hide\');                          return false;"                class="dropdown-item text-white bg-info" href="#"><c><span data-langkey="Load Assembly only">Load Assembly only</span></c></a>             <a onclick="simcore_record_append_pending();                         load_from_example_firmware(\''+g+'\',false);                         $(\'#example1\').modal(\'hide\');                          return false;"                class="dropdown-item text-white bg-info" href="#"><c><span data-langkey="Load Firmware only">Load Firmware only</span></c></a>             <a onclick="$(\'#example_reference_'+k+"').removeClass('d-none');                         wepsim_clipboard_CopyFromDiv('example_reference_"+k+"');                         $('#example_reference_"+k+"').addClass('d-none');                         $('#example1').modal('hide');                          return false;\"                class=\"dropdown-item text-white bg-info\" href=\"#\"><c><span data-langkey=\"Copy reference to clipboard\">Copy reference to clipboard</span></c></a>           </div>    </div></div></div>"}if(d.trim()===""){d='&lt;<span data-langkey="No examples available...">No examples are available for the selected hardware</span>&gt;'}d='<div class="container grid-striped border border-light">'+d+"</div>";return d}var ws_examples=[];ws_examples.push({id:"S1E1",title:"<span data-langkey='Instructions'>Instructions</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_base",assembly:"ep_s1_e1",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S1E2",title:"<span data-langkey='Memory access'>Memory access</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_base",assembly:"ep_s1_e2",description:"<span data-langkey='example_01_02'>Simple example with fetch, memory access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S1E3",title:"<span data-langkey='Looping'>Looping</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_enhanced",assembly:"ep_s1_e3",description:"<span data-langkey='example_01_03'>Simple example with fetch, branch, and basic .text segment.</span>"});ws_examples.push({id:"S1E4",title:"<span data-langkey='Vector'>Vector</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_enhanced",assembly:"ep_s1_e4",description:"<span data-langkey='example_01_04'>Simple example with fetch, branch, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E1",title:"<span data-langkey='I/O'>I/O</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_base",assembly:"ep_s2_e1",description:"<span data-langkey='example_02_01'>Example with programmed I/O access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E2",title:"<span data-langkey='Subrutine'>Subrutine</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_enhanced",assembly:"ep_s2_e2",description:"<span data-langkey='example_02_02'>Extended example with more instructions and I/O (keyboard, display).</span>"});ws_examples.push({id:"S2E3",title:"<span data-langkey='Masks & shift'>Masks & shift</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s2_e3",assembly:"ep_s2_e3",description:"<span data-langkey='example_02_03'>More extended example with masks, shift, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E4",title:"<span data-langkey='Matrix'>Matrix</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s2_e4",assembly:"ep_s2_e4",description:"<span data-langkey='example_02_04'>Extended example with subrutine and matrix.</span>"});ws_examples.push({id:"S3E1",title:"<span data-langkey='Interruptions'>Interruptions</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s3_e1",assembly:"ep_s3_e1",description:"<span data-langkey='example_03_01'><b>Instructive</b> example with interruptions support: fetch, RETI, and .ktext/.kdata.</span>"});ws_examples.push({id:"S3E2",title:"<span data-langkey='System call'>System call</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s3_e2",assembly:"ep_s3_e2",description:"<span data-langkey='example_03_02'><b>Instructive</b> example with system call support.</span>"});ws_examples.push({id:"S3E3",title:"<span data-langkey='Exception'>Exception</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s3_e3",assembly:"ep_s3_e3",description:"<span data-langkey='example_03_03'><b>Instructive</b> example with floating point exception.</span>"});ws_examples.push({id:"S4E1",title:"<span data-langkey='Int. + syscall + except.'>Int. + syscall + except.</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s4_e1",assembly:"ep_s4_e1",description:"<span data-langkey='example_04_01'>Advanced example with interruption, system call, and exception.</span>"});ws_examples.push({id:"S4E2",title:"<span data-langkey='SC 1, 4-5, 8, 11-12'>SC 1, 4-5, 8, 11-12</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_os",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S4E3",title:"<span data-langkey='Threads'>Threads</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_os",assembly:"ep_s4_e3",description:"<span data-langkey='example_04_03'>Example of threads.</span>"});ws_examples.push({id:"S4E4",title:"<span data-langkey='Alloc.s'>Alloc.s</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_os",assembly:"ep_s4_e4",description:"<span data-langkey='example_04_04'>Example of malloc + free.</span>"});ws_examples.push({id:"S5E1",title:"<span data-langkey='addv + seqv.'>addv + seqv.</span>",level:"<span data-langkey='Laboratory'>Laboratory</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s5_e1",assembly:"ep_s5_e1",description:"<span data-langkey='example_05_01'>Application-specific extension: addv + seqv.</span>"});ws_examples.push({id:"S5E2",title:"<span data-langkey='strlen_2 + skipasciicode_2'>strlen_2 + skipasciicode_2</span>",level:"<span data-langkey='Laboratory'>Laboratory</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s5_e2",assembly:"ep_s5_e2",description:"<span data-langkey='example_05_02'>Application-specific extension: strlen_2 + skipasciicode_2.</span>"});ws_examples.push({id:"S5E3",title:"<span data-langkey='madd, mmul, mxch'>madd, mmul, mxch</span>",level:"<span data-langkey='Laboratory'>Laboratory</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_s5_e3",assembly:"ep_s5_e3",description:"<span data-langkey='example_05_03'>Application-specific extension: madd + mmul + mxch.</span>"});ws_examples.push({id:"S6E1",title:"<span data-langkey='Dummy instruction'>Dummy instruction</span>",level:"<span data-langkey='Special'>Special</span>",modes:"newbie,intro,tutorial,ep",hardware:"ep",microcode:"ep_bare",assembly:"ep_s6_e1",description:"<span data-langkey='example_06_01'>Test example.</span>"});ws_examples.push({id:"S1E1",title:"<span data-langkey='Instructions'>Instructions</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e1",description:"<span data-langkey='example_01_01'>Simple example with fetch, arithmetic instructions, and basic .text segment.</span>"});ws_examples.push({id:"S1E2",title:"<span data-langkey='Memory access'>Memory access</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e2",description:"<span data-langkey='example_01_02'>Simple example with fetch, memory access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S1E3",title:"<span data-langkey='Looping'>Looping</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e3",description:"<span data-langkey='example_01_03'>Simple example with fetch, branch, and basic .text segment.</span>"});ws_examples.push({id:"S1E4",title:"<span data-langkey='Vector'>Vector</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s1_e4",description:"<span data-langkey='example_01_04'>Simple example with fetch, branch, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E1",title:"<span data-langkey='I/O'>I/O</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e1",description:"<span data-langkey='example_02_01'>Example with programmed I/O access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E3",title:"<span data-langkey='Masks & shift'>Masks & shift</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e3",description:"<span data-langkey='example_02_03'>More extended example with masks, shift, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E4",title:"<span data-langkey='Matrix'>Matrix</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s2_e4",description:"<span data-langkey='example_02_04'>Extended example with subrutine and matrix.</span>"});ws_examples.push({id:"S3E1",title:"<span data-langkey='Interruptions'>Interruptions</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s3_e1",description:"<span data-langkey='example_03_01b'>Example with interruptions support: fetch, RETI, and .ktext/.kdata.</span>"});ws_examples.push({id:"S3E2",title:"<span data-langkey='System call'>System call</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s3_e2",description:"<span data-langkey='example_03_02b'>Example with system call support.</span>"});ws_examples.push({id:"S3E3",title:"<span data-langkey='Exception'>Exception</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s3_e3",description:"<span data-langkey='example_03_03b'>Example with floating point exception.</span>"});ws_examples.push({id:"S4E1",title:"<span data-langkey='Int. + syscall + except.'>Int. + syscall + except.</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s4_e1",description:"<span data-langkey='example_04_01'>Advanced example with interruption, system call, and exception.</span>"});ws_examples.push({id:"S4E2",title:"<span data-langkey='syscall 1, 4-5, 8, 11-12'>syscall 1, 4-5, 8, 11-12</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S5E1",title:"<span data-langkey='strlen_2 + skipasciicode_2'>strlen_2 + skipasciicode_2</span>",level:"<span data-langkey='Laboratory'>Laboratory</span>",modes:"newbie,intro,wepmips,tutorial",hardware:"ep",microcode:"ep_mips",assembly:"ep_s5_e2",description:"<span data-langkey='example_05_02'>Application-specific extension: strlen_2 + skipasciicode_2.</span>"});ws_examples.push({id:"S1E1",title:"<span data-langkey='Instructions'>Instructions</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"poc_s1_e1",description:"<span data-langkey='example_01_01'>Simple example.</span>"});ws_examples.push({id:"S1E2",title:"<span data-langkey='Memory access'>Memory access</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s1_e2",description:"<span data-langkey='example_01_02'>Simple example with fetch, memory access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S1E3",title:"<span data-langkey='Looping'>Looping</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s1_e3",description:"<span data-langkey='example_01_03'>Simple example with fetch, branch, and basic .text segment.</span>"});ws_examples.push({id:"S1E4",title:"<span data-langkey='Vector'>Vector</span>",level:"<span data-langkey='Initial'>Initial</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s1_e4",description:"<span data-langkey='example_01_04'>Simple example with fetch, branch, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E1",title:"<span data-langkey='I/O'>I/O</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e1",description:"<span data-langkey='example_02_01'>Example with programmed I/O access, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E2",title:"<span data-langkey='Subrutine'>Subrutine</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e2",description:"<span data-langkey='example_02_02'>Extended example with more instructions and I/O (keyboard, display).</span>"});ws_examples.push({id:"S2E3",title:"<span data-langkey='Masks & shift'>Masks & shift</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e3",description:"<span data-langkey='example_02_03'>More extended example with masks, shift, and basic .text/.data segment.</span>"});ws_examples.push({id:"S2E4",title:"<span data-langkey='Matrix'>Matrix</span>",level:"<span data-langkey='Intermediate'>Intermediate</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_base",assembly:"ep_s2_e4",description:"<span data-langkey='example_02_04'>Extended example with subrutine and matrix.</span>"});ws_examples.push({id:"S3E1",title:"<span data-langkey='Interruptions'>Interruptions</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_s3",assembly:"ep_s3_e1",description:"<span data-langkey='example_03_01'><b>Instructive</b> example with interruptions support: fetch, RETI, and .ktext/.kdata.</span>"});ws_examples.push({id:"S3E2",title:"<span data-langkey='System call'>System call</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_s3",assembly:"ep_s3_e2",description:"<span data-langkey='example_03_02'><b>Instructive</b> example with system call support.</span>"});ws_examples.push({id:"S3E3",title:"<span data-langkey='Exception'>Exception</span>",level:"<span data-langkey='Advanced'>Advanced</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_s3",assembly:"ep_s3_e3",description:"<span data-langkey='example_03_03'><b>Instructive</b> example with floating point exception.</span>"});ws_examples.push({id:"S4E1",title:"<span data-langkey='Int. + syscall + except.'>Int. + syscall + except.</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e1",description:"<span data-langkey='example_04_01'>Advanced example with interruption, system call, and exception.</span>"});ws_examples.push({id:"S4E2",title:"<span data-langkey='SC 1, 4-5, 8, 11-12'>SC 1, 4-5, 8, 11-12</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e2",description:"<span data-langkey='example_04_02'>Example of syscall for printing/reading integer and string.</span>"});ws_examples.push({id:"S4E3",title:"<span data-langkey='Threads'>Threads</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e3",description:"<span data-langkey='example_04_03'>Example of threads.</span>"});ws_examples.push({id:"S4E4",title:"<span data-langkey='Alloc.s'>Alloc.s</span>",level:"<span data-langkey='Operating Systems'>Operating Systems</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_os",assembly:"ep_s4_e4",description:"<span data-langkey='example_04_04'>Example of malloc + free.</span>"});ws_examples.push({id:"S5E1",title:"<span data-langkey='Dummy instruction'>Dummy instruction</span>",level:"<span data-langkey='Special'>Special</span>",modes:"newbie,intro,tutorial,poc",hardware:"poc",microcode:"poc_bare",assembly:"poc_s5_e1",description:"<span data-langkey='example_06_01'>Test example.</span>"});function table_helps_html(a){var b="";var d="";var e="";var q="";var n="";var k="";var r="";var p="";var h="";var g=[];for(var f=0;f<a.length;f++){if(false===array_includes(g,a[f].u_type)){g.push(a[f].u_type)}}b=b+'<div class="container grid-striped border border-light">';for(f=0;f<a.length;f++){e="";if(k!=a[f].u_type){e="<div class='float-none text-right text-capitalize font-weight-bold col-12 border-bottom border-secondary bg-white sticky-top'>"+a[f].u_type+"</div>"}q=a[f].title;n=a[f].i_type;k=a[f].u_type;r=a[f].reference;p=a[f].description;h=a[f].id;var i="";if("relative"===n){i="wepsim_help_set_relative('"+r+"');wepsim_help_refresh();"}if("absolute"===n){i="wepsim_help_set_absolute('"+r+"');wepsim_help_refresh();"}if("code"===n){i=r}if(d===""){d="bg-light"}else{d=""}b=b+e+"<div class='row py-1 "+d+"' id='"+k+'\'><div class="col-md-auto">    <span class="badge badge-pill badge-light">'+(f+1)+'</span></div><div class="col-md-4">    <span class="btn-like bg-success text-white" style="cursor:pointer;"           id="help_index_'+f+'"           onclick="simcore_record_append_pending(); '+i+'">'+q+'</span></div><div class="col-md collapse7 show">    <c>'+p+"</c></div></div>"}b=b+"</div>";return b}function wepsim_help_refresh(){var d="#iframe_help1";var f="";var g=get_cfg("ws_idiom");var i=simhw_active().sim_short_name;var b=$("#help1_ref").data("relative");if((typeof b!="undefined")&&(b!="")){var h=b.split("#");f="help/"+h[0]+"-"+g+".html";$("#help1").modal("show");resolve_html_url(d,f,"#"+h[1],function(){});ga("send","event","help","help.simulator","help.simulator."+b);return}var a=$("#help1_ref").data("absolute");if((typeof a!="undefined")&&(a!="")){f="examples/hardware/"+i+"/help/"+a+"-"+g+".html";$("#help1").modal("show");resolve_html_url(d,f,"",function(){});ga("send","event","help","help."+a,"help."+a+".*");return}var e=$("#help1_ref").data("code");if((typeof e!="undefined")&&(e==="true")){ga("send","event","help","help.code","help.code.*");return}wepsim_open_help_index()}function wepsim_open_help_index(){$("#iframe_help1").html(table_helps_html(ws_help));$("#help1_ref").data("relative","");$("#help1_ref").data("absolute","");$("#help1_ref").data("code","false");i18n_update_tags("help");$("#help1").modal("show");ga("send","event","ui","ui.dialog","ui.dialog.help")}function wepsim_open_help_content(a){$("#iframe_help1").html(a);$("#help1_ref").data("relative","");$("#help1_ref").data("absolute","");$("#help1_ref").data("code","true");$("#help1").modal("show")}function wepsim_close_help(){$("#help1").modal("hide")}function wepsim_help_set_relative(a){$("#help1_ref").data("relative",a);$("#help1_ref").data("absolute","");$("#help1_ref").data("code","false")}function wepsim_help_set_absolute(a){$("#help1_ref").data("relative","");$("#help1_ref").data("absolute",a);$("#help1_ref").data("code","false")}function request_html_url(a){var b=null;if(false==is_mobile()){if(navigator.onLine){b=fetch(a)}else{b=caches.match(a).then()}}else{b=$.ajax(a,{type:"GET",dataType:"html"})}return b}function update_div_frompartialhtml(a,d,e){var b="<br>Sorry, No more details available for this element.<p>\n";if(""==e){$(a).html(b)}else{$(a).html(e)}if((""==e)||(""==d)){return}var f=$(a).filter(d).html();if(typeof f=="undefined"){f=$(a).find(d).html()}if(typeof f=="undefined"){f=b}$(a).html(f)}function resolve_html_url(a,d,b,e){return request_html_url(d).then(function(f){if(typeof f=="object"){f.text().then(function(g){update_div_frompartialhtml(a,b,g);e()})}else{update_div_frompartialhtml(a,b,f);e()}})}function update_signal_loadhelp(b,f,e){var a=get_cfg("ws_idiom");var d="examples/hardware/"+f+"/help/signals-"+a+".html";resolve_html_url(b,d,"#"+e,function(){$(b).trigger("create")});ga("send","event","help","help.signal","help.signal."+f+"."+e)}function update_checker_loadhelp(b,e){var a=get_cfg("ws_idiom");var d="help/simulator-"+a+".html";resolve_html_url(b,d,"#"+e,function(){$(b).trigger("create")});ga("send","event","help","help.checker","help.checker."+e)}var ws_help=[];ws_help.push({id:"simulator",title:"<span data-langkey='Welcome tutorial'>Welcome tutorial</span>",i_type:"code",u_type:"tutorial",reference:"wepsim_close_help(); sim_tutorial_showframe('welcome', 0);",description:"<span data-langkey='help_01_01'>Open the welcome tutorial</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simple usage tutorial'>Simple usage tutorial</span>",i_type:"code",u_type:"tutorial",reference:"wepsim_close_help(); sim_tutorial_showframe('simpleusage', 0);",description:"<span data-langkey='help_01_02'>Open the simple usage tutorial, for microprogramming and assembly programming</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simulator: firmware'>Simulator: firmware</span>",i_type:"relative",u_type:"simulator",reference:"simulator#help_simulator_firmware",description:"<span data-langkey='help_02_01'>How to work with the firmware to be loaded into the control memory</span>.<br>"});ws_help.push({id:"microcode",title:"<span data-langkey='Microcode format'>Microcode format</span>",i_type:"relative",u_type:"simulator",reference:"simulator#help_firmware_format",description:"<span data-langkey='help_02_02'>Syntax of the microcode used</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simulator: assembly'>Simulator: assembly</span>",i_type:"relative",u_type:"simulator",reference:"simulator#help_simulator_assembly",description:"<span data-langkey='help_02_03'>How to work with the assembly that use the aforementioned firmware</span>.<br>"});ws_help.push({id:"assembly",title:"<span data-langkey='Assembly format'>Assembly format</span>",i_type:"relative",u_type:"simulator",reference:"simulator#help_assembly_format",description:"<span data-langkey='help_02_04'>Syntax of the assembly elements</span>.<br>"});ws_help.push({id:"simulator",title:"<span data-langkey='Simulator: execution'>Simulator: execution</span>",i_type:"relative",u_type:"simulator",reference:"simulator#help_simulator_execution",description:"<span data-langkey='help_02_05'>How the simulator can execute the assembly and firmware</span>.<br>"});ws_help.push({id:"architecture",title:"<span data-langkey='Simulated architecture'>Simulated architecture</span>",i_type:"absolute",u_type:"simulated processor",reference:"hardware",description:"<span data-langkey='help_03_01'>Description of the simulated processor architecture</span>.<br>"});ws_help.push({id:"architecture",title:"<span data-langkey='Simulated signals'>Simulated signals</span>",i_type:"absolute",u_type:"simulated processor",reference:"signals",description:"<span data-langkey='help_03_02'>Main signals summary of the simulated elemental processor</span>.<br>"});ws_help.push({id:"architecture",title:"<span data-langkey='Hardware summary'>Hardware summary</span>",i_type:"code",u_type:"simulated processor",reference:"var ahw1 = simhw_active().sim_short_name ; var img1 = 'examples/hardware/' + ahw1 + '/images/cpu.svg?time=20190102' ; var txt1 = 'Your browser does not support SVG' ;var lyt1 = '<object id=\\'svg_p2\\' data=\\'' + img1 + '\\'                     type=\\'image/svg+xml\\'>' + txt1 +  '</object>'; wepsim_open_help_content(lyt1) ;",description:"<span data-langkey='help_03_03'>Reference card for the simulated elemental processor hardware</span>.<br>"});ws_help.push({id:"about",title:"<span data-langkey='License, platforms, etc.'>License, platforms, etc.</span>",i_type:"relative",u_type:"info",reference:"about#help_about",description:"<span data-langkey='help_04_01'>WepSIM license, supported platforms, technologies used</span>.<br>"});ws_help.push({id:"authors",title:"<span data-langkey='Authors'>Authors</span>",i_type:"code",u_type:"info",reference:"wepsim_close_help();$('#about2').modal('show');",description:"<span data-langkey='help_04_02'>Authors of WepSIM</span>.<br>"});function sim_tutorial_goframe(d,a,b){if(typeof tutorials[d]=="undefined"){return}var e=tutorials[d][get_cfg("ws_idiom")];if(typeof e=="undefined"){return}e[a].code_post();tutbox.modal("hide");setTimeout(function(){sim_tutorial_showframe(d,b)},e[a].wait_next);if(simcore_voice_canSpeak()){window.speechSynthesis.cancel()}}function sim_tutorial_cancelframe(){var a=get_cfg("ws_mode");wsweb_select_main(a);tutbox.modal("hide");if(simcore_voice_canSpeak()){window.speechSynthesis.cancel()}}function sim_tutorial_showframe(d,b){if(typeof tutorials[d]=="undefined"){return}var f=tutorials[d][get_cfg("ws_idiom")];if(typeof f=="undefined"){return}if(b==f.length){return}if(b<0){return}ga("send","event","help","help.tutorial","help.tutorial.name="+d+",step="+b);f[b].code_pre();var a=get_cfg("ws_idiom");var e={};e.cancel={label:i18n_get("gui",a,"Disable tutorial mode"),className:"btn-danger col float-right",callback:function(){sim_tutorial_cancelframe()}};if(b!=0){e.prev={label:i18n_get("gui",a,"Prev."),className:"btn-success col float-right",callback:function(){sim_tutorial_goframe(d,b,b-1)}}}if(b!=(f.length-1)){e.next={label:i18n_get("gui",a,"Next"),className:"btn-success col float-right",callback:function(){sim_tutorial_goframe(d,b,b+1)}}}else{e.end={label:i18n_get("gui",a,"End"),className:"btn-success col float-right",callback:function(){sim_tutorial_goframe(d,b,b+1)}}}tutbox=bootbox.dialog({title:f[b].title,message:f[b].message,buttons:e,size:"large",animate:false});simcore_voice_speak(f[b].title.replace(/<[^>]*>/g,"")+". "+f[b].message.replace(/<[^>]*>/g,""))}function sim_tutorial_loadFromCheckpoint(b){wsweb_recordbar_show();var a={name:"examples/checkpoint/tutorial_"+b+".txt"};wepsim_load_from_url(a.name,function(d){var e=null;if(d!==""){e=JSON.parse(d)}wepsim_checkpoint_loadFromObj(e,"FileNameToSaveAs1","tagToSave1",a)})}function wepsim_newbie_tour(){var a=get_cfg("ws_idiom");wepsim_newbie_tour_setLang(a);tour=introJs();tour.setOptions({steps:ws_tour,keyboardNavigation:true,tooltipClass:"tooltip-large",showProgress:true,overlayOpacity:"0.1"});tour.onbeforechange(function(){ws_tour[this._currentStep].do_before()});tour.onexit(function(){$("#config2").modal("hide");$("#help1").modal("hide");$("#example1").modal("hide");if(get_cfg("ws_mode")!="ep"){wsweb_select_main("ep")}return true});tour.start();ga("send","event","ui","ui.tour","ui.tour.newbie")}function wepsim_newbie_tour_setLang(d){var b="";for(var a=0;a<ws_tour.length;a++){b=ws_tour[a].step;ws_tour[a].intro=i18n.eltos.tour_intro[d][b]}}function wepsim_newbie_tour_reload(a){set_cfg("ws_idiom",a);save_cfg();i18n_update_tags("gui");tour.exit();wepsim_newbie_tour()}var ws_tour=[];ws_tour.push({intro:"<span data-langkey='step0'>Step 0</span>",step:"step0",position:"auto",do_before:function(){return true}});ws_tour.push({intro:"<span data-langkey='step1'>Step 1</span>",step:"step1",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({element:"#select4",intro:"<span data-langkey='step2'>Step 2</span>",step:"step2",position:"auto",do_before:function(){wsweb_select_main("ep");tour.refresh();return true}});ws_tour.push({element:"#btn_help1",intro:"<span data-langkey='step3'>Step 3</span>",step:"step3",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({element:"#btn_example1",intro:"<span data-langkey='step4'>Step 4</span>",step:"step4",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({element:"#btn_cfg1",intro:"<span data-langkey='step5'>Step 5</span>",step:"step5",position:"auto",do_before:function(){tour.refresh();return true}});ws_tour.push({intro:"<span data-langkey='step6'>Step 6</span>",step:"step6",position:"auto",do_before:function(){tour.refresh();return true}});function wepsim_voice_init(){if(!annyang){return false}annyang.addCommands(wepsim_voice_commands);annyang.addCallback("errorNetwork",function(){annyang.abort();alert("Sorry but some network connection is needed in order to use the voice recognition engine.")});SpeechKITT.annyang();SpeechKITT.setStylesheet("external/speechkitt/themes/flat.css");SpeechKITT.setInstructionsText("What can I help you with? (list)");SpeechKITT.vroom();return true}function wepsim_voice_start(){if(!annyang){wepsim_notify_error("<h4>Warning:<br/>annyang not available</h4>","Voice support is not available in this platform.");return false}SpeechKITT.show();return true}function wepsim_voice_stop(){if(!annyang){return false}SpeechKITT.hide();return true}var wepsim_voice_commands={};var wepsim_voice_dialog=null;wepsim_voice_commands.hello=function(){var a="Hello, I am WepSIM, nice to meet you. ";simcore_voice_speak(a)};wepsim_voice_commands["(show) configuration"]=function(){wepsim_open_config_index()};wepsim_voice_commands["(show) examples"]=function(){wepsim_open_examples_index()};wepsim_voice_commands["load example :id (from) :level"]=function(e,d){var b=parseInt(e);var a=parseInt(d);load_from_example_firmware("ep:S"+a+"E"+a,true)};wepsim_voice_commands["(show) help"]=function(){wepsim_open_help_index();wepsim_help_refresh()};wepsim_voice_commands.close=function(){wepsim_close_help();wepsim_close_examples();wepsim_close_config();if(null!=wepsim_voice_dialog){wepsim_voice_dialog.modal("hide")}};wepsim_voice_commands.reset=function(){wepsim_execute_reset(true,true);var a="Current processor has been reset.";simcore_voice_speak(a)};wepsim_voice_commands.next=function(){wepsim_execute_instruction();var a="Next executed.";simcore_voice_speak(a)};wepsim_voice_commands["next micro(instruction)"]=function(){wepsim_execute_microinstruction();var a="Next microinstruction executed. ";simcore_voice_speak(a)};wepsim_voice_commands.play=function(){wepsim_execute_play("#qbp",false)};wepsim_voice_commands.stop=function(){wepsim_execute_stop("#qbp")};wepsim_voice_commands["describe micro(instruction)"]=function(){var a=get_verbal_from_current_mpc();simcore_voice_speak(a)};wepsim_voice_commands["describe instruction"]=function(){var a=get_verbal_from_current_pc();simcore_voice_speak(a)};wepsim_voice_commands.list=function(){var a="available commands:<br>";for(var b in wepsim_voice_commands){a=a+" * '"+b+"'<br>"}wepsim_voice_dialog=bootbox.alert(a);wepsim_voice_dialog.modal("show");var d=$("</p>").html(a).text();simcore_voice_speak(d)};wepsim_voice_commands.silence=function(){simcore_voice_stopSpeak()};function sim_change_workspace(b,a){if((typeof $.mobile!="undefined")&&(typeof $.mobile.pageContainer!="undefined")&&(typeof $.mobile.pageContainer.pagecontainer!="undefined")){$.mobile.pageContainer.pagecontainer("change",b)}else{$("#carousel-8").carousel(a)}}function wepsim_load_hw(){return true}function wepsim_show_wepmips(){$(".multi-collapse-2").collapse("show");$("#slider_cpucu").hide();$("#tab26").hide();$("#tab21").hide();$("#tab24").click();inputfirm.setOption("readOnly",true);$("#btn_micro1").addClass("d-none");return true}function wepsim_hide_wepmips(){$(".multi-collapse-2").collapse("show");$("#slider_cpucu").show();$("#tab26").show();$("#tab21").show();inputfirm.setOption("readOnly",false);$("#btn_micro1").removeClass("d-none");return true}var msg_default='<div class="bg-warning"><b>Not available in this hardware</b></div>';var hash_detail2init={REGISTER_FILE:{init:function(){$("#states_ALL").html(msg_default);wepsim_init_states("#states_ALL");$("#states_BR").html(msg_default);wepsim_init_rf("#states_BR")},reset:function(){wepsim_show_states();wepsim_show_rf_values();wepsim_show_rf_names()},show_states:wepsim_show_states,show_rf_values:wepsim_show_rf_values,show_rf_names:wepsim_show_rf_names},CPU_STATS:{init:function(){$("#cpu_ALL").html(msg_default);wepsim_init_cpu("#cpu_ALL")},reset:function(){return true}},CONTROL_MEMORY:{init:function(){return true},reset:function(){show_control_memory(simhw_internalState("MC"),simhw_internalState("MC_dashboard"),0,true)},update_draw:wepsim_svg_update_draw,update_bus_visibility:wepsim_svg_update_bus_visibility},MEMORY:{init:function(){return true},reset:function(){show_main_memory(simhw_internalState("MP"),0,true,false)},show_main_memory:wepsim_show_main_memory,show_asmdbg_pc:wepsim_show_asmdbg_pc,show_control_memory:wepsim_show_control_memory,show_dbg_mpc:wepsim_show_dbg_mpc,show_dbg_ir:wepsim_show_dbg_ir},MEMORY_CONFIG:{init:function(){$("#config_MP").html(msg_default);init_config_mp("#config_MP")},reset:function(){return true}},IO_STATS:{init:function(){$("#io_ALL").html(msg_default);wepsim_init_io("#io_ALL")},reset:function(){return true}},IO_CONFIG:{init:function(){$("#config_IO").html(msg_default);wepsim_init_config_io("#config_IO")},reset:function(){return true}},SCREEN:{init:function(){return true},reset:function(){wepsim_set_screen_content("")},get_screen_content:wepsim_get_screen_content,set_screen_content:wepsim_set_screen_content},KEYBOARD:{init:function(){return true},reset:function(){return true},get_keyboard_content:wepsim_get_keyboard_content,set_keyboard_content:wepsim_set_keyboard_content}};function wepsim_activehw(k){simhw_setActive(k);var i=document.getElementById("svg_p");if(i!=null){i.setAttribute("data",simhw_active().sim_img_processor)}i=document.getElementById("svg_cu");if(i!=null){i.setAttribute("data",simhw_active().sim_img_controlunit)}i=document.getElementById("svg_p2");if(i!=null){i.setAttribute("data",simhw_active().sim_img_cpu)}var g=document.getElementById("svg_p");g.addEventListener("load",function(){simcore_init_eventlistener("svg_p",hash_detail2action,hash_signal2action);refresh()},false);var e=document.getElementById("svg_cu");e.addEventListener("load",function(){simcore_init_eventlistener("svg_cu",hash_detail2action,hash_signal2action);refresh()},false);simcore_init_ui(hash_detail2init);simcoreui_init_hw("#config_HW");wepsim_notify_warning("<strong>WARNING</strong>","Please remember the current firmware and assembly might need to be reloaded, because previous working session of the simulated hardware are not kept.");wepsim_notify_success("<strong>INFO</strong>",'"'+simhw_active().sim_name+'" has been activated.');var d=get_simware();update_memories(d);simcore_reset();var h=default_asmdbg_content_horizontal();for(var f in d.assembly){h=assembly2html(d.mp,d.labels2,d.seg,d.assembly);break}$("#asm_debugger").html(h);showhideAsmElements();return true}function wepsim_change_mode(b){var a=-1;switch(b){case"newbie":case"intro":case"wepmips":case"tutorial":a=simhw_getIdByName("ep");wepsim_activehw(a);break;default:a=simhw_getIdByName(b);wepsim_activehw(a);break}if("wepmips"==b){wepsim_show_wepmips()}else{wepsim_hide_wepmips()}if("intro"==b){sim_tutorial_loadFromCheckpoint("2");return true}if("newbie"==b){wepsim_newbie_tour();return true}return true}function set_ab_size(g,e,h){var f=h;var d=12-f;$(g).removeClass();$(e).removeClass();if(f!=0){$(g).addClass("col-"+f)}else{$(g).addClass("col-12 order-1")}if(d!=0){$(e).addClass("col-"+d)}else{$(e).addClass("col-12 order-2")}}function wepsim_dialogbox_close_all(){$("#example1").modal("hide");$("#help1").modal("hide");$("#config2").modal("hide");$("#current_state1").modal("hide");$("#bin2").modal("hide")}var wepsim_updatediv_timer=null;function wepsim_updatetime(a,b){$(a).html("<span>Close automatically after "+b+" seconds.</span>");wepsim_updatediv_timer=setTimeout(wepsim_updatetime,1000,a,(b-1))}function wepsim_updatetime_start(a,b){clearTimeout(wepsim_updatediv_timer);wepsim_updatetime(a,b)}function wepsim_confirm_exit(a){var b="o/";(a||window.event).returnValue=b;return b}function wepsim_general_exception_handler(a){alert("Please try to cleanup the browser cache and try again.\nWepSIM was improperly used and found an error, sorry :-(\n\nDiagnostic:\n * Error message: "+a.message+"\n * Runtime stack:\n"+a.stack+"\nAfter close this alert, WepSIM will try to reload and by-pass the cache (just in case).\n");location.reload(true)}function wepsim_show_quick_menu(b){var a=get_cfg("ws_idiom");var d='<ul class="list-group list-group-flush"><li class="list-group-item px-0 pt-1">   <a class="btn btn-sm btn-outline-dark col p-1 text-left float-right" href="#"      onclick="wepsim_notify_notifications();               i18n_update_tags();               wsweb_quickmenu_close();               return false;"><em class="fas fa-flag col-1 pl-1 float-left"></em><span class="col-11">'+i18n_get("dialogs",a,"Show Notifications")+"...</span></a></li>";d+='<li class="list-group-item px-0 enabled_beta">   <button class="navbar-toggle btn btn-sm btn-outline-dark col p-1 text-left float-right" type="button"           onclick="wsweb_recordbar_toggle();                    return false;"><em class="fas fa-clipboard col-1 pl-1 float-left"></em><span class="col-11">'+i18n_get("dialogs",a,"Show/Hide RecordBar")+"</span>  </button></li>";d+='<li class="list-group-item px-0">   <span class="btn-group-toggle" data-toggle="buttons">  <label class="btn btn-sm btn-outline-dark col p-1 text-left float-right" data-toggle="collapse" href=".multi-collapse-1">  <input type="checkbox" checked="" autocomplete="off"><em class="fas fa-bars col-1 pl-1 float-left"></em><span class="col-11">'+i18n_get("dialogs",a,"Show/Hide ActionBar")+"</span></label>  </span></li>";d+='<li class="list-group-item px-0">   <span class="btn-group-toggle" data-toggle="buttons">  <label class="btn btn-sm btn-outline-dark col p-1 text-left float-right" data-toggle="collapse" href=".multi-collapse-2">  <input type="checkbox" checked="" autocomplete="off"><em class="fas fa-sliders-h col-1 pl-1 float-left"></em><span class="col-11">'+i18n_get("dialogs",a,"Show/Hide Slider")+"</span></label>  </span></li>";d+='<li class="list-group-item px-0">   <a class="btn btn-sm btn-outline-dark col p-1 text-left float-right" href="#"      onclick="wsweb_about_show();               wsweb_quickmenu_close();               return false;"><em class="fas fa-magic col-1 pl-1 float-left"></em><span class="col-11">'+i18n_get("dialogs",a,"About WepSIM")+"...</span></a></li>";d+='<li class="list-group-item px-0">   <a class="btn btn-sm btn-outline-dark col p-1 text-left float-right" href="#"      onclick="wepsim_newbie_tour();               wsweb_quickmenu_close();               return false;"><em class="fas fa-book-reader col-1 pl-1 float-left"></em><span class="col-11">'+i18n_get("dialogs",a,"Initial intro")+"...</span></a></li>";d+='<button type="button" id="close" data-role="none"         class="btn btn-sm btn-danger w-100 p-0 mt-2"         onclick="wsweb_quickmenu_close();                  return false;">'+i18n_get("dialogs",a,"Close")+"</button></ul>";return d}function wepsim_init_helpDropdown(){var a="";a=i18n_get_dropdown(["gui","cfg"],"");$("#config2_lang").html(a);a=i18n_get_dropdown(["gui","help"],"wepsim_help_refresh();");$("#help1_lang").html(a);a=i18n_get_dropdown(["gui","examples"],"");$("#example1_lang").html(a);a=i18n_get_dropdown(["gui","states"],"update_checker_loadhelp('#help3a','help_dumper');");$("#current_state1_lang").html(a)}function wepsim_init_ui(){window.addEventListener("beforeunload",wepsim_confirm_exit);if(typeof jQuery.fx!="undefined"){jQuery.fx.off=true}if(typeof ko!="undefined"){ko.options.deferUpdates=true}$(".carousel").carousel({touch:false});$(".dropify").dropify();$("div.wsversion").replaceWith(get_cfg("version"));var b=get_cfg("enable_beta");if(b===false){$(".enabled_beta").addClass("d-none")}$("#end_state1").tokenfield({inputType:"textarea"});$("#end_state2").tokenfield({inputType:"textarea"});$("#po1").popover({trigger:"manual",html:true,placement:"auto",animation:false,container:"body",template:'<div class="popover shadow border border-secondary" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',content:function(){return wepsim_show_quick_menu("po1")},sanitizeFn:function(d){return d}});$('[data-toggle="tooltip"]').tooltip({trigger:"hover",sanitizeFn:function(d){return d}});$('a[data-toggle="popover1"]').popover({placement:"bottom",animation:false,trigger:"focus, hover",delay:{show:500,hide:100},sanitizeFn:function(d){return d}});showhideAsmElements();var a=$("#asm_table");$("#asm_debugger_container").scroll(function(){a.prop("scrollTop",this.scrollTop).prop("scrollLeft",this.scrollLeft)});$("[data-toggle=popover2]").popover({html:true,placement:"auto",animation:false,container:"body",content:function(){return wepsim_show_asm_columns_checked("popover2_asm")},sanitizeFn:function(d){return d}}).on("shown.bs.popover",function(d){showhideAsmHeader()});inputfirm_cfg={value:"\n\n\n\n\n\n\n\n\n\n\n\n",lineNumbers:true,lineWrapping:true,matchBrackets:true,tabSize:2,foldGutter:{rangeFinder:new CodeMirror.fold.combine(CodeMirror.fold.brace,CodeMirror.fold.comment)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],mode:"text/javascript"};inputfirm=sim_init_editor("inputFirmware",inputfirm_cfg);inputasm_cfg={value:"\n\n\n\n\n\n\n\n\n\n\n\n",lineNumbers:true,lineWrapping:true,matchBrackets:true,tabSize:2,extraKeys:{"Ctrl-Space":function(d){CodeMirror.showHint(d,function(f,h){var g=get_simware();var n=f.getCursor();var e=[];for(var k=0;k<g.firmware.length;k++){if(g.firmware[k].name!="begin"){e.push(g.firmware[k].signatureUser)}}return{list:e,from:n,to:n}})}},mode:"gas"};inputasm=sim_init_editor("inputAssembly",inputasm_cfg);simcore_record_init("record_msg","record_pb");simcore_record_captureInit();wepsim_init_helpDropdown()}function sim_cfg_editor_theme(a){var b=get_cfg("editor_theme");a.getWrapperElement().style["text-shadow"]="0.0em 0.0em";a.getWrapperElement().style["font-weight"]="bold";if(b==="blackboard"){a.getWrapperElement().style["font-weight"]="normal"}a.setOption("theme",b)}function sim_cfg_editor_mode(b){var a=get_cfg("editor_mode");if(a==="vim"){b.setOption("keyMap","vim")}if(a==="emacs"){b.setOption("keyMap","emacs")}if(a==="sublime"){b.setOption("keyMap","sublime")}}function sim_init_editor(d,a){var b=CodeMirror.fromTextArea(document.getElementById(d),a);b.setValue("\n\n\n\n\n\n\n\n\n\n");sim_cfg_editor_theme(b);sim_cfg_editor_mode(b);b.setSize("auto","auto");b.refresh();return b}function goError(d,f){d.setCursor({line:f-1,ch:0});var b=d.addLineClass(f-1,"background","CodeMirror-selected");setTimeout(function(){d.removeLineClass(b,"background","CodeMirror-selected")},3000);var a=d.charCoords({line:f,ch:0},"local").top;var e=d.getScrollerElement().offsetHeight/2;d.scrollTo(null,a-e-5)}function showError(d,b){var e=d.replace(/\t/g," ").replace(/   /g," ");var f=e.match(/Problem around line \d+/);var a="";if(null!=f){f=parseInt(f[0].match(/\d+/)[0]);a+='<button type="button" class="btn btn-danger"         onclick="wepsim_notify_close();                  goError('+b+", "+f+');"> Go line '+f+"</button>&nbsp;"}wepsim_notify_error("<strong>ERROR</strong>",e+"<br><center>"+a+'<button type="button" class="btn btn-danger"         onclick="wepsim_notify_close();"><span data-langkey="Close">Close</span></button></center>')}function wepsim_show_binary_code(b,a){$(a).html("<center><br>Loading binary, please wait...<br><br>WARNING: loading binary might take time on slow mobile devices.</center>");$(a).css({width:"100%",height:"inherit !important"});$(b).modal("show");setTimeout(function(){var e=get_simware();$(a).html(mp2html(e.mp,e.labels2,e.seg));for(var d in e.seg){$("#compile_begin_"+d).html("0x"+e.seg[d].begin.toString(16));$("#compile_end_"+d).html("0x"+e.seg[d].end.toString(16))}},300)}function wepsim_show_binary_microcode(b,a){$(a).html("<center><br>Loading binary, please wait...<br><br>WARNING: loading binary might take time on slow mobile devices.</center>");$(a).css({width:"100%",height:"inherit !important"});$(b).modal("show");setTimeout(function(){var d=get_simware();$(a).html(firmware2html(d.firmware,true));$(a).css({width:"inherit !important",height:"inherit !important"});$(b).trigger("refresh")},300)}function wepsim_compile_assembly(b){var a=get_simware();if(a.firmware.length===0){alert("WARNING: please load the microcode first.");sim_change_workspace("#main3");return false}var d=simlang_compile(b,a);if(d.error!=null){showError(d.error,"inputasm");return false}wepsim_notify_success("<strong>INFO</strong>","Assembly was compiled and loaded.");set_simware(d);update_memories(a);$("#asm_debugger").html(assembly2html(d.mp,d.labels2,d.seg,d.assembly));showhideAsmElements();simcore_reset();return true}function wepsim_compile_firmware(b){var a=simcore_compile_firmware(b);if(false===a.ok){showError(a.msg,"inputfirm");return false}wepsim_notify_success("<strong>INFO</strong>","Microcode was compiled and loaded.");simcore_reset();return true}function wsweb_change_workspace_simulator(){sim_change_workspace("#main1",0);setTimeout(function(){ga("send","event","ui","ui.workspace","ui.workspace.simulator")},50);simcore_record_append_new("Change to workspace simulator","wsweb_change_workspace_simulator();\n");return true}function wsweb_change_workspace_microcode(){sim_change_workspace("#main3",1);setTimeout(function(){inputfirm.refresh();ga("send","event","ui","ui.workspace","ui.workspace.microcode")},50);simcore_record_append_new("Change to workspace microcode","wsweb_change_workspace_microcode();\n");return true}function wsweb_change_workspace_assembly(){sim_change_workspace("#main4",2);setTimeout(function(){inputasm.refresh();ga("send","event","ui","ui.workspace","ui.workspace.assembly")},50);simcore_record_append_new("Change to workspace assembly","wsweb_change_workspace_assembly();\n");return true}function wsweb_change_show_processor(){$("#tab26").tab("show");wepsim_svg_start_drawing();refresh();simcore_record_append_new("Show processor details","wsweb_change_show_processor();\n");return true}function wsweb_change_show_asmdbg(){wepsim_svg_stop_drawing();$("#tab24").tab("show");simcore_record_append_new("Show assembly debugger","wsweb_change_show_asmdbg();\n");var b=fullshow_asmdbg_pc();if(typeof b[0]=="undefined"){return true}var a=$("#asm_debugger_container");a[0].scrollTop=b[0].offsetTop;return true}function wsweb_execution_reset(){wepsim_execute_reset(true,true);simcoreui_show_hw();simcore_record_append_new("Reset","wsweb_execution_reset();\n");return true}function wsweb_execution_microinstruction(){wepsim_execute_microinstruction();simcoreui_show_hw();simcore_record_append_new("Execute microinstruction","wsweb_execution_microinstruction();\n");return true}function wsweb_execution_instruction(){wepsim_execute_instruction();simcoreui_init_hw("#config_HW");simcore_record_append_new("Execute instruction","wsweb_execution_instruction();\n");return true}function wsweb_execution_run(){var a=get_cfg("ws_mode");if("tutorial"==a){wepsim_notify_success("<strong>INFO</strong>","Tutorial mode on. Use the configuration to change it.")}wepsim_execute_toggle_play("#qbp",(a=="tutorial"));simcore_record_append_new("Run","wsweb_execution_run();\n");$("#current_state2").one("hidden.bs.modal",function(){simcore_record_append_new("Close execution summary","wsweb_dialogbox_close_all();\n")});return true}function wsweb_dialogbox_open_examples(){wepsim_open_examples_index();$("[data-toggle=tooltip]").tooltip("hide");simcore_record_append_new("Open examples","wsweb_dialogbox_open_examples();\n");$("#example1").one("hidden.bs.modal",function(){simcore_record_append_new("Close examples","wsweb_dialogbox_close_all();\n")});wsweb_scroll_record("#container-example1");simcore_record_captureInit();return true}function wsweb_dialogbox_open_help(){wepsim_open_help_index();wepsim_help_refresh();$("[data-toggle=tooltip]").tooltip("hide");simcore_record_append_new("Open help","wsweb_dialogbox_open_help();\n");$("#help1").one("hidden.bs.modal",function(){simcore_record_append_new("Close help","wsweb_dialogbox_close_all();\n")});simcore_record_captureInit();return true}function wsweb_dialogbox_open_config(){wepsim_open_config_index();$("[data-toggle=tooltip]").tooltip("hide");simcore_record_append_new("Open configuration","wsweb_dialogbox_open_config();\n");$("#config2").one("hidden.bs.modal",function(){simcore_record_append_new("Close configuration","wsweb_dialogbox_close_all();\n")});wsweb_scroll_record("#container-config2");simcore_record_captureInit();return true}function wsweb_dialogbox_open_state(){wepsim_dialog_current_state();$("[data-toggle=tooltip]").tooltip("hide");simcore_record_append_new("Open state","wsweb_dialogbox_open_state();\n");$("#current_state1").one("hidden.bs.modal",function(){simcore_record_append_new("Close state","wsweb_dialogbox_close_all();\n")});simcore_record_captureInit();return true}function wsweb_dialogbox_open_binary_assembly(){var a=inputasm.getValue();var b=wepsim_compile_assembly(a);if(true==b){wepsim_show_binary_code("#bin2","#compile_results")}simcore_record_append_new("Open binary assembly","wsweb_dialogbox_open_binary_assembly();\n");$("#bin2").one("hidden.bs.modal",function(){simcore_record_append_new("Close binary assembly","wsweb_dialogbox_close_all();\n")});return true}function wsweb_dialogbox_open_binary_firmware(){var b=inputfirm.getValue();var a=wepsim_compile_firmware(b);if(true==a){wepsim_show_binary_microcode("#bin2","#compile_results");wepsim_notify_success("<strong>INFO</strong>","Please remember to recompile the assembly code if needed.")}simcore_record_append_new("Open binary firmware","wsweb_dialogbox_open_binary_firmware();\n");$("#bin2").one("hidden.bs.modal",function(){simcore_record_append_new("Close binary firmware","wsweb_dialogbox_close_all();\n")});return true}function wsweb_dialogbox_open_hardware_summary(){var b=simhw_active().sim_short_name;var d="examples/hardware/"+b+"/images/cpu.svg?time=20190102";var a="<object id=svg_p2         data='"+d+"'         type='image/svg+xml'>Your browser does not support SVG</object>";wepsim_open_help_content(a);simcore_record_append_new("Open hardware summary","wsweb_dialogbox_open_hardware_summary();\n");$("#help1").one("hidden.bs.modal",function(){simcore_record_append_new("Open hardware summary","wsweb_dialogbox_close_all();\n")});return true}function wsweb_dialogbox_close_state(){$("#current_state1").modal("hide");simcore_record_append_new("Close states dialogbox","wsweb_dialogbox_close_state();\n");return true}function wsweb_dialogbox_close_all(){$("#example1").modal("hide");$("#help1").modal("hide");$("#config2").modal("hide");$("#current_state1").modal("hide");$("#current_state2").modal("hide");$("#bin2").modal("hide");simcore_record_append_new("Close all dialogboxes","wsweb_dialogbox_close_all();\n");return true}var hash_signal2action={"<all>":function(a,b){wsweb_dialogbox_open_updatesignal(a,b)}};function wsweb_dialogbox_open_updatesignal(a,b){if(false===get_cfg("is_interactive")){return}if((true===get_cfg("is_quick_interactive"))&&(b="click")){wepsim_update_signal_quick(a)}else{wepsim_update_signal_dialog(a)}show_states();wepsim_show_rf_values();simcore_record_append_new("Open update signal dialogbox "+a,"wsweb_dialogbox_open_updatesignal('"+a+"','"+b+"');\n");return true}function wsweb_dialogbox_close_updatesignal(){$("#dlg_updatesignal").modal("hide");simcore_record_append_new("Close update signal dialogbox","wsweb_dialogbox_close_updatesignal();\n");return true}function wsweb_set_details_select(b){$("#tab"+b).trigger("click");$("#select5a").val(b);var a=$("#s5b_"+b).html();$("#select5b").html(a);simcore_record_append_new("Change select details to "+b,"wsweb_set_details_select("+b+");\n");return true}var hash_detail2action={CLOCK:function(){wepsim_execute_microinstruction()},REGISTER_FILE:function(){wsweb_set_details_select(11);wepsim_show_rf_values()},CONTROL_MEMORY:function(){wsweb_set_details_select(16);show_memories_values()},CPU_STATS:function(){wsweb_set_details_select(17);show_memories_values()},MEMORY:function(){wsweb_set_details_select(14);show_memories_values()},MEMORY_CONFIG:function(){wsweb_set_details_select(18);show_memories_values()},KEYBOARD:function(){wsweb_set_details_select(12);show_memories_values()},SCREEN:function(){wsweb_set_details_select(12);show_memories_values()},IO_STATS:function(){wsweb_set_details_select(15);show_memories_values()},IO_CONFIG:function(){wsweb_set_details_select(19);show_memories_values()},FRM_EDITOR:function(){wsweb_set_details_select(20);inputfirm.refresh()},ASM_EDITOR:function(){wsweb_set_details_select(21);inputasm.refresh()},HARDWARE:function(){wsweb_set_details_select(22);$("[data-toggle=tooltip]").tooltip("hide");simcoreui_init_hw("#config_HW");var a=get_cfg("ws_idiom");i18n_update_tags("gui",a)}};function wsweb_set_details(a){if(typeof hash_detail2action[a]!=="undefined"){hash_detail2action[a]()}simcore_record_append_new("Set details to "+a,"wsweb_set_details('"+a+"');\n");return true}function wsweb_select_main(d){set_cfg("ws_mode",d);save_cfg();wepsim_change_mode(d);$("#select4").css("background-color","#F6F6F6");if("tutorial"==d){$("#select4").css("background-color","#D4DB17")}var b=$("#s4_"+d).html();$("#select4").html(b);var a=get_cfg("ws_idiom");i18n_update_tags("gui",a);simcore_record_append_new("Set main work mode to "+d,'wsweb_select_main("'+d+'");\n');return true}function wsweb_set_cpucu_size(a){$("#slider2b").val(a);set_ab_size("#eltos_cpu_a","#eltos_cpu_b",a);set_cfg("CPUCU_size",a);save_cfg();simcore_record_append_new("Set cpu-cu size to "+a,"wsweb_set_cpucu_size("+a+");\n");return true}function wsweb_set_c1c2_size(a){$("#slider2a").val(a);set_ab_size("#col1","#col2",a);set_cfg("C1C2_size",a);save_cfg();simcore_record_append_new("Set c1-c2 size to "+a,"wsweb_set_c1c2_size("+a+");\n");return true}function wsweb_assembly_compile(){var a=inputasm.getValue();var b=wepsim_compile_assembly(a);simcore_record_append_new("Compile assembly","wsweb_assembly_compile();\n");return true}function wsweb_firmware_compile(){var b=inputfirm.getValue();wepsim_compile_firmware(b);var a="<div class='card m-3 border'><div class='card-body m-1'>Please remember that after updates on the microcode, the assembly code has be re-compiled too.</div></div>";$("#asm_debugger").html(a);simcore_record_append_new("Compile firmware","wsweb_firmware_compile();\n");return true}function wsweb_save_controlmemory_to_file(){var b=get_cfg("ws_idiom");var d=i18n_get("dialogs",b,"Sure Control Memory...")+"\n\n";if(confirm(d)){var a=get_simware();var e=saveFirmware(a);if(e.trim()==""){alert("The Microcode loaded in memory is empty!\nPlease load a Microcode first in memory in order to save it.")}else{inputfirm.setValue(e)}var g=document.getElementById("inputFileNameToSaveAs").value;var f=inputfirm.getValue();wepsim_save_to_file(f,g)}simcore_record_append_new("Save control memory to file","wsweb_save_controlmemory_to_file();\n");return true}var wsweb_nfbox=null;function wsweb_notifyuser_show(d,a,b){if(d.trim()===""){d="&lt;empty title&gt;"}if(a.trim()===""){a="&lt;empty message&gt;"}$("#notifyuser1_title").html(d);$("#notifyuser1_message").html(a);wepsim_updatetime_start("#notifyuser1_footer",b/1000);wsweb_nfbox=$("#notifyuser1");wsweb_nfbox.modal("show");return true}function wsweb_notifyuser_hide(){wsweb_nfbox=$("#notifyuser1");wsweb_nfbox.modal("hide");return true}function wsweb_notifyuser_add(){if(simcore_record_isRecording()===false){return}var a=get_cfg("ws_idiom");var d={};d.cancel={label:i18n_get("gui",a,"Close"),className:"btn-danger col float-left mr-auto"};d.end={label:i18n_get("gui",a,"Save"),className:"btn-success col float-right",callback:function(){var k=$("#frm_title1").val();var f=$("#frm_message1").val();var h=$("#frm_duration1").val();var n=k.replace(/<[^>]*>/g,"");var e="<span class='inline-block text-truncate w-25'>"+n+"</span>";var i=f.replace(/<[^>]*>/g,"");var o="<span class='inline-block text-truncate w-25'>"+i+"</span>";var p=i.replace(new RegExp("\r?\n","g"),"</br>");var g=parseInt(h);if(isNaN(g)){g=5000}else{g=1000*g}simcore_record_setTimeBeforeNow(500);simcore_record_append_new('Show message with title "'+e+'" and body "'+o+'".','wsweb_notifyuser_show("'+n+'", "'+p+'", "'+g+'");\n');simcore_record_setTimeBeforeNow(g);simcore_record_append_new('Close message with title "'+e+'".',"wsweb_notifyuser_hide();\n")}};var b='<div class="container"><label for="frm_title1"><em>'+i18n_get("dialogs",a,"Title")+':</em></label><p><input aria-label="title" id="frm_title1" 	  class="form-control btn-outline-dark" placeholder="Title for the notification" style="min-width: 90%;"/></p><label for="frm_message1"><em>'+i18n_get("dialogs",a,"Message")+':</em></label><p><textarea aria-label="message" id="frm_message1" rows="5" 	      class="form-control btn-outline-dark" placeholder="Message for the notification" style="min-width: 90%;"/></p><label for="frm_duration1"><em>'+i18n_get("dialogs",a,"Duration")+':</em></label><p><input aria-label="duration" id="frm_duration1" type="number" 	  class="form-control btn-outline-dark" placeholder="Duration for the notification in seconds" style="min-width: 90%;"/></p></div>';wsweb_nfbox=bootbox.dialog({title:"Form to add a message during playback...",message:b,buttons:d,size:"large",animate:false});return true}function wsweb_record_on(){simcore_record_start();return true}function wsweb_record_off(){simcore_record_stop();return true}function wsweb_record_reset(){simcore_record_reset();return true}function wsweb_record_play(){simcore_record_play();return true}function wsweb_record_pause(){simcore_record_pause();return true}function wsweb_record_playInterval(b,a){simcore_record_playInterval(b,a);return true}function wsweb_record_confirmReset(){var a=get_cfg("ws_idiom");wsweb_nfbox=bootbox.dialog({title:i18n_get("dialogs",a,"Confirm remove record..."),message:i18n_get("dialogs",a,"Close or Reset..."),buttons:{reset:{label:i18n_get("gui",a,"Reset"),className:"btn-dark col float-left",callback:function(){wsweb_record_reset();return true}},close:{label:i18n_get("gui",a,"Close"),className:"btn-danger col float-right"}},keyboard:true,animate:false});return true}function wsweb_about_show(){$("#about2").modal("show");simcore_record_append_new('Open the "about" dialogbox',"wsweb_about_show();\n");return true}function wsweb_about_close(){$("#about2").modal("hide");simcore_record_append_new('Close the "about" dialogbox',"wsweb_about_close();\n");return true}function wsweb_quickmenu_show(){$("#po1").popover("show");simcore_record_append_new('Open the "quick menu"',"wsweb_quickmenu_show();\n");return true}function wsweb_quickmenu_close(){$("#po1").popover("hide");simcore_record_append_new('Close the "quick menu"',"wsweb_quickmenu_close();\n");return true}function wsweb_quickmenu_toggle(){$("#po1").popover("toggle");simcore_record_append_new('Toggle the "quick menu"',"wsweb_quickmenu_toggle();\n");return true}function wsweb_recordbar_show(){$("#record_div").collapse("show");simcore_record_append_new('Open the "record toolbar"',"wsweb_recordbar_show();\n");return true}function wsweb_recordbar_toggle(){$("#record_div").collapse("toggle");simcore_record_append_new('Toggle the "record toolbar"',"wsweb_recordbar_toggle();\n");return true}function wsweb_recordbar_close(){$("#record_div").collapse("hide");simcore_record_append_new('Close the "record toolbar"',"wsweb_recordbar_close();\n");return true}var wsweb_scroll_timer=null;function wsweb_scroll_to(b,d){var a=$(b);a.scrollTop(d)}function wsweb_scroll_record(d){var a=$(d);var b=function(){var e=a.scrollTop();simcore_record_append_new("Scroll content",'wsweb_scroll_to("'+d+'", '+e+");\n")};a.scroll(function(){if(wsweb_scroll_timer!==null){clearTimeout(wsweb_scroll_timer)}wsweb_scroll_timer=setTimeout(b,150)})};/*
 *  Copyright 2015-2019 Felix Garcia Carballeira, Alejandro Calderon Mateos, Javier Prieto Cepeda, Saul Alonso Monsalve
 *
 *  This file is part of WepSIM.
 *
 *  WepSIM is free software: you can redistribute it and/or modify
 *  it under the terms of the GNU Lesser General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  WepSIM is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Lesser General Public License for more details.
 *
 *  You should have received a copy of the GNU Lesser General Public License
 *  along with WepSIM.  If not, see <http://www.gnu.org/licenses/>.
 *
 */


    /**
     * WepSIM nodejs aux.
     */

    function wepsim_nodejs_retfill ( ok, msg )
    {
        var ret = { ok: true, html: "", msg: "" } ;

        ret.ok   = ok ;
        ret.html = msg ;
        ret.msg  = msg.replace(/<[^>]*>/g, '') ;

        return ret ;
    }

    var hash_detail_ui = {

	    "SCREEN":         {
		                                  init: simcore_do_nothing_handler,
		                    get_screen_content: function() {
					                   return simcore_native_get_value("SCREEN", "content") ;
				                        },
                                    set_screen_content: function ( screen_content ) {
                                                           simcore_native_set_value("SCREEN", "content", screen_content) ;
							   return screen_content ;
					                }
	                      },

	    "KEYBOARD":       {
		                                  init: simcore_do_nothing_handler,
		                  get_keyboard_content: function () {
							   var readlineSync = require('readline-sync');
							   var keys = readlineSync.question('keyboard> ');
							   keystrokes = keys.toString() ;

                                                           simcore_native_set_value("KBD", "keystrokes", keystrokes) ;
							   return keystrokes ;
						        },
                                  set_keyboard_content: function( keystrokes ) {
                                                           simcore_native_set_value("KBD", "keystrokes", keystrokes) ;
					                   return keystrokes ;
				                        }
	                      }
	} ;

    function wepsim_nodejs_init ( simhw_name )
    {
        var ret = simcore_init(false) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: initialize: " + ret.msg + ".\n") ;
	}

        ret = simcore_init_hw(simhw_name) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: initialize: " + ret.msg + ".\n") ;
	}

        simcore_init_ui(hash_detail_ui) ;

	return wepsim_nodejs_retfill(true, "") ;
    }

    function wepsim_nodejs_show_currentstate ( )
    {
        var state_obj = simcore_simstate_current2state() ;
        var   ret_msg = simcore_simstate_state2checklist(state_obj) ;

	return wepsim_nodejs_retfill(true, ret_msg) ;
    }

    function wepsim_nodejs_show_record ( records )
    {
	var ret_msg = '' ;
	for (var i=0; i<records.length; i++)
	{
	     ret_msg += '[' + i + '] ' + records[i].description + '\n' ;
	}

	return ret_msg ;
    }

    function wepsim_nodejs_show_checkresults ( checklist_ok, newones_too )
    {
	var data3_bin   = simcore_simstate_checklist2state(checklist_ok) ;
	var obj_current = simcore_simstate_current2state();
	var obj_result  = simcore_simstate_check_results(data3_bin, obj_current, newones_too ) ;

	var ret_ok  = (0 == obj_result.errors) ;
        var ret_msg = simcore_simstate_checkreport2txt(obj_result.result) ;
	return wepsim_nodejs_retfill(ret_ok, ret_msg) ;
    }


    /**
     * WepSIM nodejs API
     */

    // execution
    function wepsim_nodejs_check ( data, options )
    {
	// 1) initialize ws
        simcore_reset() ;

	// 2) load firmware
        var ret = simcore_compile_firmware(data.firmware) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: Firmware: " + ret.msg + ".\n") ;
	}

	// 3) load assembly
        ret = simcore_compile_assembly(data.assembly) ;
	if (false == ret.ok)
        {
	    return wepsim_nodejs_retfill(false, "ERROR: Assembly: " + ret.msg + ".\n") ;
	}

	// 4) execute firmware-assembly
        options.verbosity_before = simcore_do_nothing_handler ;
        options.verbosity_after  = simcore_do_nothing_handler ;

	ret = simcore_execute_program(options) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: Execution: " + ret.msg + ".\n") ;
	}

	// 5) compare with expected results
        ret = wepsim_nodejs_show_checkresults(data.result_ok, false) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: Execution: different results: " + ret.msg + "\n") ;
        }

        ret.msg = "OK: Execution: no error reported\n" ;
	return wepsim_nodejs_retfill(true, ret.msg) ;
    }

    function wepsim_nodejs_run ( data, options )
    {
	// 1) initialize ws
        simcore_reset() ;

	// 2) load firmware
        var ret = simcore_compile_firmware(data.firmware) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: Firmware: " + ret.msg + ".\n") ;
	}

	// 3) load assembly
        ret = simcore_compile_assembly(data.assembly) ;
	if (false == ret.ok)
        {
	    return wepsim_nodejs_retfill(false, "ERROR: Assembly: " + ret.msg + ".\n") ;
	}

	// 4) execute firmware-assembly
	ret = simcore_execute_program(options) ;
	if (false == ret.ok)
	{
	    return wepsim_nodejs_retfill(false, "ERROR: Execution: " + ret.msg + ".\n") ;
	}

	// 5) return result
        if ("SHOW-CONSOLE" == data.action) {
            ret.msg = get_screen_content() ;
	}
        if ("SHOW-RECORD" == data.action) {
            ret.msg = wepsim_nodejs_show_record(data.record) ;
	}
        if ("RUN" == data.action) {
            ret = wepsim_nodejs_show_currentstate() ;
	}

	return wepsim_nodejs_retfill(true, ret.msg) ;
    }

    // show execution progress
    var before_state = null ;

    function wepsim_nodejs_before_instruction2 ( SIMWARE, reg_pc )
    {
        before_state = simcore_simstate_current2state() ;
    }

    function wepsim_nodejs_after_instruction2  ( SIMWARE, reg_pc, ret )
    {
        var curr_pc     = '0x' + reg_pc.toString(16) ;
        var source_line = SIMWARE.assembly[curr_pc].source_original ;

        var after_state = simcore_simstate_current2state() ;
        var diff_states = simcore_simstate_diff_states(before_state, after_state) ;

        console.log('pc(' + curr_pc + '):\t' + source_line + ':\t\t\t' + diff_states) ;
    }

    function wepsim_nodejs_before_microinstruction3 ( curr_MC, cur_addr )
    {
        before_state = simcore_simstate_current2state() ;
    }

    function wepsim_nodejs_after_microinstruction3  ( curr_MC, cur_addr )
    {
	var after_state = simcore_simstate_current2state() ;
	var curr_mpc    = '0x' + cur_addr.toString(16) ;

	console.log('micropc(' + curr_mpc + '):\t' +
		     controlmemory_lineToString(curr_MC, cur_addr).trim() + ':\t\t\t' +
		     simcore_simstate_diff_states(before_state,after_state)) ;
    }

    function wepsim_nodejs_before_microinstruction4 ( curr_MC, cur_addr )
    {
	var curr_mpc = '0x' + cur_addr.toString(16) ;

	console.log('Micropc at ' + curr_mpc + '.\t' + get_verbal_from_current_mpc()) ;
    }

    // help
    function wepsim_nodejs_help_signal ( data, options )
    {
	var key    = data.firmware.toUpperCase() ;
	var signal = simhw_sim_signal(key) ;
	if (typeof signal === "undefined")
        {
	    return wepsim_nodejs_retfill(false, "ERROR: Unknown signal " + key + ".\n") ;
	}

	var input_help = '' ;
	var nvalues    = Math.pow(2, simhw_sim_signal(key).nbits) ;
	if (simhw_sim_signal(key).behavior.length == nvalues)
	{
	    input_help += 'Signal ' + key + ' has ' + nvalues + ' possible value:\n' ;

	    for (var k = 0; k < simhw_sim_signal(key).behavior.length; k++)
	    {
		 str_bolded = '' ;
		 if (k == simhw_sim_signal(key).default_value) {
		     str_bolded = '(default value) ' ;
		 }

		 behav_str = compute_signal_verbals(key, k) ;
		 if ('' == behav_str.trim()) {
		     behav_str = '<without main effect>' ;
		 }

		 n = k.toString(10) ;
		 input_help += ' * ' + n + ' ' + str_bolded + 'for ' + behav_str + '\n' ;
	    }
	}
	else
	{
	    input_help += 'Signal ' + key + ' has a value from 0 up to ' + (nvalues - 1) ;
	}

	return wepsim_nodejs_retfill(true, input_help) ;
    }


    /**
     * Export API
     */

    module.exports.wepsim_nodejs_init  = wepsim_nodejs_init ;
    module.exports.wepsim_nodejs_check = wepsim_nodejs_check ;
    module.exports.wepsim_nodejs_run   = wepsim_nodejs_run ;

    module.exports.wepsim_nodejs_before_instruction2      = wepsim_nodejs_before_instruction2 ;
    module.exports.wepsim_nodejs_after_instruction2       = wepsim_nodejs_after_instruction2 ;
    module.exports.wepsim_nodejs_before_microinstruction3 = wepsim_nodejs_before_microinstruction3 ;
    module.exports.wepsim_nodejs_after_microinstruction3  = wepsim_nodejs_after_microinstruction3 ;
    module.exports.wepsim_nodejs_before_microinstruction4 = wepsim_nodejs_before_microinstruction4 ;

    module.exports.wepsim_nodejs_help_signal              = wepsim_nodejs_help_signal ;
    module.exports.wepsim_nodejs_do_nothing_handler       = simcore_do_nothing_handler ;
    module.exports.wepsim_nodejs_exportHW                 = simcore_hardware_export ;

